var OSManifestLoader=function(e){"use strict";function n(e,n){return o("moduleinfo",1e4,!1,e,n)}function t(e){var n=void 0===e?{}:e,t=n.checkOffline,r=void 0===t||t,i=n.sendEnvParam,a=void 0!==i&&i;return o("moduleversioninfo",1e4,r,(new Date).getTime().toString(),a)}function o(e,n,t,o,i){return new Promise((function(a,s){var u,d,f,l=(null!==(f=null===(d=null===(u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})||void 0===u?void 0:u.OutSystemsApp)||void 0===d?void 0:d.basePath)&&void 0!==f?f:"/"+location.pathname.substring(1,location.pathname.indexOf("/",1))+"/")+"moduleservices/"+e+function(e){return e?"?"+e:""}(o);if(t&&"undefined"!=typeof navigator&&!navigator.onLine)return s("Unable to access '"+l+"' - There's no network connection.");var c=new XMLHttpRequest;c.onload=function(){if(4!==c.readyState||200!==c.status)return s(r(l,c.status));var e;try{e=JSON.parse(c.responseText.substring(c.responseText.indexOf("{"),c.responseText.length))}catch(e){return s(e)}if(!e)return s(Error("Unable to parse payload downloaded from '"+l+"'."));a(e)},c.onerror=c.ontimeout=function(){return s(Error(r(l,c.status)))},c.onabort=function(){return s(Error(r(l,c.status,!0)))},c.open("GET",l,!0),n&&(c.timeout=n),c.setRequestHeader("Accept","application/json"),i&&c.setRequestHeader("OutSystems-client-env",function(){var e,n="undefined"!=typeof navigator&&/OutSystemsApp/i.test(navigator.userAgent);return window.self===(null!==(e=window.top)&&void 0!==e?e:window.self)&&n?"native":"browser"}()),c.send()}))}function r(e,n,t){return void 0===t&&(t=!1),"Unable to access '"+e+"'"+(t?" (request aborted)":"")+". Error Code: "+n}var i="undefined"!=typeof Promise?t({checkOffline:!1,sendEnvParam:!0}):void 0;return e.Version="3.4.0",e.getCachedManifest=function(e){var t=(void 0===e?{}:e).sendEnvParam;return n("cached",void 0!==t&&t)},e.getLatestManifest=function(e,t){var o=(void 0===t?{}:t).sendEnvParam;return n(e,void 0!==o&&o)},e.getLatestVersion=t,e.indexVersionToken=null,e.prefetchedVersion=i,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=OutSystemsManifestLoader.js.map
