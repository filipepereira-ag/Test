var requirejs,require,define;!function(global,setTimeout){function commentReplace(e,t){return t||""}function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){!n&&hasProp(e,i)||(!r||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[i]=t:(e[i]||(e[i]={}),mixin(e[i],t,n,r)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttps://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function t(e){var t,n;for(t=0;t<e.length;t++)if("."===(n=e[t]))e.splice(t,1),t-=1;else if(".."===n){if(0===t||1===t&&".."===e[2]||".."===e[t-1])continue;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,r){var i,o,a,s,u,c,l,f,d,p,h,g=n&&n.split("/"),m=w.map,y=m&&m["*"];if(e&&(e=e.split("/"),c=e.length-1,w.nodeIdCompat&&jsSuffixRegExp.test(e[c])&&(e[c]=e[c].replace(jsSuffixRegExp,"")),"."===e[0].charAt(0)&&g&&(h=g.slice(0,g.length-1),e=h.concat(e)),t(e),e=e.join("/")),r&&m&&(g||y)){o=e.split("/");e:for(a=o.length;a>0;a-=1){if(u=o.slice(0,a).join("/"),g)for(s=g.length;s>0;s-=1)if((i=getOwn(m,g.slice(0,s).join("/")))&&(i=getOwn(i,u))){l=i,f=a;break e}!d&&y&&getOwn(y,u)&&(d=getOwn(y,u),p=a)}!l&&d&&(l=d,f=p),l&&(o.splice(0,f,l),e=o.join("/"))}return getOwn(w.pkgs,e)||e}function r(e){isBrowser&&each(scripts(),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===T.contextName)return t.parentNode.removeChild(t),!0})}function i(e){var t=getOwn(w.paths,e);if(t&&isArray(t)&&t.length>1)return t.shift(),T.require.undef(e),T.makeRequire(null,{skipMap:!0})([e]),!0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e,t,r,i){var a,s,u,c,l=null,f=t?t.name:null,d=e,p=!0,h="";return e||(p=!1,e="_@r"+(C+=1)),c=o(e),l=c[0],e=c[1],l&&(l=n(l,f,i),s=getOwn(N,l)),e&&(l?h=r?e:s&&s.normalize?s.normalize(e,function(e){return n(e,f,i)}):-1===e.indexOf("!")?n(e,f,i):e:(h=n(e,f,i),c=o(h),l=c[0],h=c[1],r=!0,a=T.nameToUrl(h))),u=!l||s||r?"":"_unnormalized"+(R+=1),{prefix:l,name:h,parentMap:t,unnormalized:!!u,url:a,originalName:d,isDefine:p,id:(l?l+"!"+h:h)+u}}function s(e){var t=e.id,n=getOwn(D,t);return n||(n=D[t]=new T.Module(e)),n}function u(e,t,n){var r=e.id,i=getOwn(D,r);!hasProp(N,r)||i&&!i.defineEmitComplete?(i=s(e),i.error&&"error"===t?n(i.error):i.on(t,n)):"defined"===t&&n(N[r])}function c(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(D,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function l(){globalDefQueue.length&&(each(globalDefQueue,function(e){var t=e[0];"string"==typeof t&&(T.defQueueMap[t]=!0),I.push(e)}),globalDefQueue=[])}function f(e){delete D[e],delete S[e]}function d(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var o=r.id,a=getOwn(D,o);!a||e.depMatched[i]||n[o]||(getOwn(t,o)?(e.defineDep(i,N[o]),e.check()):d(a,t,n))}),n[r]=!0)}function p(){var e,t,n=1e3*w.waitSeconds,o=n&&T.startTime+n<(new Date).getTime(),a=[],s=[],u=!1,l=!0;if(!v){if(v=!0,eachProp(S,function(e){var n=e.map,c=n.id;if(e.enabled&&(n.isDefine||s.push(e),!e.error))if(!e.inited&&o)i(c)?(t=!0,u=!0):(a.push(c),r(c));else if(!e.inited&&e.fetched&&n.isDefine&&(u=!0,!n.prefix))return l=!1}),o&&a.length)return e=makeError("timeout","Load timeout for modules: "+a,null,a),e.contextName=T.contextName,c(e);l&&each(s,function(e){d(e,{},{})}),o&&!t||!u||!isBrowser&&!isWebWorker||E||(E=setTimeout(function(){E=0,p()},50)),v=!1}}function h(e){hasProp(N,e[0])||s(a(e[0],null,!0)).init(e[1],e[2])}function g(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function m(e){var t=e.currentTarget||e.srcElement;return g(t,T.onScriptLoad,"load","onreadystatechange"),g(t,T.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function y(){var e;for(l();I.length;){if(e=I.shift(),null===e[0])return c(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));h(e)}T.defQueueMap={}}var v,b,T,_,E,w={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},D={},S={},x={},I=[],N={},A={},O={},C=1,R=1;return _={require:function(e){return e.require?e.require:e.require=T.makeRequire(e.map)},exports:function(e){if(e.usingExports=!0,e.map.isDefine)return e.exports?N[e.map.id]=e.exports:e.exports=N[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(w.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},b=function(e){this.events=getOwn(x,e.id)||{},this.map=e,this.shim=getOwn(w.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},b.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,T.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();T.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;A[e]||(A[e]=!0,T.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,r=this.depExports,i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=T.execCb(n,o,r,i)}catch(t){e=t}else i=T.execCb(n,o,r,i);if(this.map.isDefine&&void 0===i&&(t=this.module,t?i=t.exports:this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else i=o;if(this.exports=i,this.map.isDefine&&!this.ignore&&(N[n]=i,req.onResourceLoad)){var a=[];each(this.depMaps,function(e){a.push(e.normalizedMap||e)}),req.onResourceLoad(T,this.map,a)}f(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(T.defQueueMap,n)||this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,r=a(e.prefix);this.depMaps.push(r),u(r,"defined",bind(this,function(r){var i,o,l,d=getOwn(O,this.map.id),p=this.map.name,h=this.map.parentMap?this.map.parentMap.name:null,g=T.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(r.normalize&&(p=r.normalize(p,function(e){return n(e,h,!0)})||""),o=a(e.prefix+"!"+p,this.map.parentMap,!0),u(o,"defined",bind(this,function(e){this.map.normalizedMap=o,this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),void((l=getOwn(D,o.id))&&(this.depMaps.push(o),this.events.error&&l.on("error",bind(this,function(e){this.emit("error",e)})),l.enable()))):d?(this.map.url=T.nameToUrl(d),void this.load()):(i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(D,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&f(e.map.id)}),c(e)}),i.fromText=bind(this,function(n,r){var o=e.name,u=a(o),l=useInteractive;r&&(n=r),l&&(useInteractive=!1),s(u),hasProp(w.config,t)&&(w.config[o]=w.config[t]);try{req.exec(n)}catch(e){return c(makeError("fromtexteval","fromText eval for "+t+" failed: "+e,e,[t]))}l&&(useInteractive=!0),this.depMaps.push(u),T.completeLoad(o),g([o],i)}),void r.load(e.name,g,i,w))})),T.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){S[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,r,i;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,i=getOwn(_,e.id))return void(this.depExports[t]=i(this));this.depCount+=1,u(e,"defined",bind(this,function(e){this.undefed||(this.defineDep(t,e),this.check())})),this.errback?u(e,"error",bind(this,this.errback)):this.events.error&&u(e,"error",bind(this,function(e){this.emit("error",e)}))}n=e.id,r=D[n],hasProp(_,n)||!r||r.enabled||T.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(D,e.id);t&&!t.enabled&&T.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},T={config:w,contextName:e,registry:D,defined:N,urlFetched:A,defQueue:I,defQueueMap:{},Module:b,makeModuleMap:a,nextTick:req.nextTick,onError:c,configure:function(e){if(e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/"),"string"==typeof e.urlArgs){var t=e.urlArgs;e.urlArgs=function(e,n){return(-1===n.indexOf("?")?"?":"&")+t}}var n=w.shim,r={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){r[t]?(w[t]||(w[t]={}),mixin(w[t],e,!0,!0)):w[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(O[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=T.makeShimExports(e)),n[t]=e}),w.shim=n),e.packages&&each(e.packages,function(e){var t,n;e="string"==typeof e?{name:e}:e,n=e.name,t=e.location,t&&(w.paths[n]=e.location),w.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(D,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t,null,!0))}),(e.deps||e.callback)&&T.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,i){function o(n,r,u){var l,f,d;return i.enableBuildCallback&&r&&isFunction(r)&&(r.__requireJsBuild=!0),"string"==typeof n?isFunction(r)?c(makeError("requireargs","Invalid require call"),u):t&&hasProp(_,n)?_[n](D[t.id]):req.get?req.get(T,n,t,o):(f=a(n,t,!1,!0),l=f.id,hasProp(N,l)?N[l]:c(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(y(),T.nextTick(function(){y(),d=s(a(null,t)),d.skipMap=i.skipMap,d.init(n,r,u,{enabled:!0}),p()}),o)}return i=i||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var r,i=e.lastIndexOf("."),o=e.split("/")[0],a="."===o||".."===o;return-1!==i&&(!a||i>1)&&(r=e.substring(i,e.length),e=e.substring(0,i)),T.nameToUrl(n(e,t&&t.id,!0),r,!0)},defined:function(e){return hasProp(N,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(N,e)||hasProp(D,e)}}),t||(o.undef=function(e){l();var n=a(e,t,!0),i=getOwn(D,e);i.undefed=!0,r(e),delete N[e],delete A[n.url],delete x[e],eachReverse(I,function(t,n){t[0]===e&&I.splice(n,1)}),delete T.defQueueMap[e],i&&(i.events.defined&&(x[e]=i.events),f(e))}),o},enable:function(e){getOwn(D,e.id)&&s(e).enable()},completeLoad:function(e){var t,n,r,o=getOwn(w.shim,e)||{},a=o.exports;for(l();I.length;){if(n=I.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);h(n)}if(T.defQueueMap={},r=getOwn(D,e),!t&&!hasProp(N,e)&&r&&!r.inited){if(!(!w.enforceDefine||a&&getGlobal(a)))return i(e)?void 0:c(makeError("nodefine","No define call for "+e,null,[e]));h([e,o.deps||[],o.exportsFn])}p()},nameToUrl:function(e,t,n){var r,i,o,a,s,u,c,l=getOwn(w.pkgs,e);if(l&&(e=l),c=getOwn(O,e))return T.nameToUrl(c,t,n);if(req.jsExtRegExp.test(e))s=e+(t||"");else{for(r=w.paths,i=e.split("/"),o=i.length;o>0;o-=1)if(a=i.slice(0,o).join("/"),u=getOwn(r,a)){isArray(u)&&(u=u[0]),i.splice(0,o,u);break}s=i.join("/"),s+=t||(/^data\:|^blob\:|\?/.test(s)||n?"":".js"),s=("/"===s.charAt(0)||s.match(/^[\w\+\.\-]+:/)?"":w.baseUrl)+s}return w.urlArgs&&!/^blob\:/.test(s)?s+w.urlArgs(e,s):s},load:function(e,t){req.load(T,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=m(e);T.completeLoad(t.id)}},onScriptError:function(e){var t=m(e);if(!i(t.id)){var n=[];return eachProp(D,function(e,r){0!==r.indexOf("_@r")&&each(e.depMaps,function(e){if(e.id===t.id)return n.push(r),!0})}),c(makeError("scripterror",'Script error for "'+t.id+(n.length?'", needed by: '+n.join(", "):'"'),e,[t.id]))}}},T.require=T.makeRequire(),T}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){if("interactive"===e.readyState)return interactiveScript=e}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.3.6",commentRegExp=/\/\*[\s\S]*?\*\/|([^:"'=]|^)\/\/.*$/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,r){var i,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=r):e=[]),o&&o.context&&(a=o.context),i=getOwn(contexts,a),i||(i=contexts[a]=req.s.newContext(a)),o&&i.configure(o),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick=void 0!==setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],(baseElement=document.getElementsByTagName("base")[0])&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e,t,n){var r=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return r.type=e.scriptType||"text/javascript",r.charset="utf-8",r.async=!0,r},req.load=function(e,t,n){var r,i=e&&e.config||{};if(isBrowser)return r=req.createNode(i,t,n),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),!r.attachEvent||r.attachEvent.toString&&r.attachEvent.toString().indexOf("[native code")<0||isOpera?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=n,i.onNodeCreated&&i.onNodeCreated(r,i,t,n),currentlyAddingScript=r,baseElement?head.insertBefore(r,baseElement):head.appendChild(r),currentlyAddingScript=null,r;if(isWebWorker)try{setTimeout(function(){},0),importScripts(n),e.completeLoad(t)}catch(r){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,r,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){if(head||(head=e.parentNode),dataMain=e.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript())&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")]),i?(i.defQueue.push([e,t,n]),i.defQueueMap[e]=!0):globalDefQueue.push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this,"undefined"==typeof setTimeout?void 0:setTimeout),define("requireLib",function(){});var __extends,__assign,__rest,__decorate,__param,__metadata,__awaiter,__generator,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__createBinding;!function(e){function t(e,t){return e!==n&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(n,r){return e[n]=t?t(n,r):r}}var n="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:{};"function"==typeof define&&define.amd?define("tslib",["exports"],function(r){e(t(n,t(r)))}):e("object"==typeof module&&"object"==typeof module.exports?t(n,t(module.exports)):t(n))}(function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])};__extends=function(e,n){function r(){this.constructor=e}if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},__rest=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},__decorate=function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__param=function(e,t){return function(n,r){t(n,r,e)}},__metadata=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter=function(e,t,n,r){function i(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?n(e.value):i(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())})},__generator=function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=2&n[0]?o.return:n[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},__exportStar=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||__createBinding(t,e,n)},__createBinding=Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},__values=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},__spread=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e},__spreadArrays=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},__spreadArray=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},__await=function(e){return this instanceof __await?(this.v=e,this):new __await(e)},__asyncGenerator=function(e,t,n){function r(e){l[e]&&(c[e]=function(t){return new Promise(function(n,r){f.push([e,t,n,r])>1||i(e,t)})})}function i(e,t){try{o(l[e](t))}catch(e){u(f[0][3],e)}}function o(e){e.value instanceof __await?Promise.resolve(e.value.v).then(a,s):u(f[0][2],e)}function a(e){i("next",e)}function s(e){i("throw",e)}function u(e,t){e(t),f.shift(),f.length&&i(f[0][0],f[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c,l=n.apply(e,t||[]),f=[];return c={},r("next"),r("throw"),r("return"),c[Symbol.asyncIterator]=function(){return this},c},__asyncDelegator=function(e){function t(t,i){n[t]=e[t]?function(n){return(r=!r)?{value:__await(e[t](n)),done:"return"===t}:i?i(n):n}:i}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n},__asyncValues=function(e){function t(t){r[t]=e[t]&&function(r){return new Promise(function(i,o){r=e[t](r),n(i,o,r.done,r.value)})}}function n(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=e[Symbol.asyncIterator];return i?i.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),r={},t("next"),t("throw"),t("return"),r[Symbol.asyncIterator]=function(){return this},r)},__makeTemplateObject=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};var n=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return n(t,e),t},__importDefault=function(e){return e&&e.__esModule?e:{default:e}},__classPrivateFieldGet=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},__classPrivateFieldSet=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},e("__extends",__extends),e("__assign",__assign),e("__rest",__rest),e("__decorate",__decorate),e("__param",__param),e("__metadata",__metadata),e("__awaiter",__awaiter),e("__generator",__generator),e("__exportStar",__exportStar),e("__createBinding",__createBinding),e("__values",__values),e("__read",__read),e("__spread",__spread),e("__spreadArrays",__spreadArrays),e("__spreadArray",__spreadArray),e("__await",__await),e("__asyncGenerator",__asyncGenerator),e("__asyncDelegator",__asyncDelegator),e("__asyncValues",__asyncValues),e("__makeTemplateObject",__makeTemplateObject),e("__importStar",__importStar),e("__importDefault",__importDefault),e("__classPrivateFieldGet",__classPrivateFieldGet),e("__classPrivateFieldSet",__classPrivateFieldSet)}),define("OutSystems/ClientRuntime/TransitionAnimation",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransitionAnimation=void 0;!function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Fade=2]="Fade",e[e.SlideFromLeft=3]="SlideFromLeft",e[e.SlideFromRight=4]="SlideFromRight",e[e.SlideFromBottom=5]="SlideFromBottom",e[e.SlideFromTop=6]="SlideFromTop"}(t.TransitionAnimation||(t.TransitionAnimation={}))}),define("OutSystems/ClientRuntime/Transitions",["require","exports","./TransitionAnimation"],function(e,t,n){"use strict";function r(e){t.Default=e}function i(e){return new s(e?e.name:"")}function o(e,n){if("string"==typeof e)return new s(e);switch(e){case t.TransitionAnimation.None:return u;case t.TransitionAnimation.Fade:return c;case t.TransitionAnimation.SlideFromLeft:return l;case t.TransitionAnimation.SlideFromRight:return f;case t.TransitionAnimation.SlideFromBottom:return d;case t.TransitionAnimation.SlideFromTop:return p;case t.TransitionAnimation.Default:return t.Default;default:return n}}function a(e){if(!e||!e.name)return new s("");switch(e.name){case c.name:return new s(c.name);case d.name:return new s(p.name);case l.name:return new s(f.name);case f.name:return new s(l.name);case p.name:return new s(d.name);default:return new s(e.name+"-back")}}Object.defineProperty(t,"__esModule",{value:!0}),t.reverseTransition=t.createTransition=t.sanitizeTransition=t.setDefaultTransition=t.Default=t.Transition=t.TransitionAnimation=void 0,t.TransitionAnimation=n.TransitionAnimation;var s=function(){function e(e){void 0===e&&(e=""),this.name=e}return e}();t.Transition=s;var u=new s,c=new s("fade"),l=new s("slide-from-left"),f=new s("slide-from-right"),d=new s("slide-from-bottom"),p=new s("slide-from-top");t.Default=new s,t.setDefaultTransition=r,t.sanitizeTransition=i,t.createTransition=o,t.reverseTransition=a}),define("OutSystems/ClientRuntime/ApplicationInfo",["require","exports","./Transitions"],function(e,t,n){"use strict";function r(e){P=e}function i(){return P.environmentKey}function o(){return P.environmentName}function a(){return P.applicationKey}function s(){return P.applicationName}function u(){return P.databaseName}function c(e){P.modules=e}function l(){return P.modules}function f(e){var t=P.modules;return t[e]||(t[e]={moduleName:null,homeScreenName:null,splashScreenName:null,screens:[],staticEntities:{}}),t[e]}function d(e){return e.homeScreenName?T(e,e.homeScreenName):e.screens&&e.screens.length>0?e.screens[0]:null}function p(){return P.clientEntitiesModules}function h(e){P.clientEntitiesModules=e}function g(e){P.databaseName=e}function m(){return P.homeModuleName}function y(){return P.homeModuleKey}function v(){if(P.homeModuleName&&P.modules){var e=P.modules[P.homeModuleKey];return e||null}return null}function b(e,t){for(var n=0,r=e.screens;n<r.length;n++){var i=r[n];if(i.screenUrl===t)return i}return null}function T(e,t){for(var n=0,r=e.screens;n<r.length;n++){var i=r[n];if(i.screenName===t)return i}return null}function _(){var e=v(),t=d(e);return t?"/"+e.moduleName+"/"+t.screenUrl:null}function E(){return"nr2"+P.userProviderName}function w(){return P.userProviderName}function D(){return P.debugEnabled}function S(){return P.homeModuleControllerName}function x(){return P.homeModuleLanguageResourcesName}function I(){return P.applicationDefaultTimeout}function N(e){P.applicationDefaultTimeout=e}function A(){var e=n.TransitionAnimation[P.defaultTransition];return n.createTransition(e)}function O(){return P.errorPageConfig}function C(){return P.isWeb}function R(){return P.showWatermark}function L(e){var t;return(null===(t=Object.keys(P.modules).map(function(e){return P.modules[e]}).filter(function(t){return t.moduleName===e})[0])||void 0===t?void 0:t.ownerAppKey)===a()}function M(e){var t,n,r=void 0===e?{}:e,i=r.applicationHomeModule,o=void 0===i?m:i;return("/"+(null!==(n=null===(t=("undefined"!=typeof window?window:global).OutSystemsApp)||void 0===t?void 0:t.basePath)&&void 0!==n?n:o())+"/").replace(/\/(\/)+/gm,"/")}Object.defineProperty(t,"__esModule",{value:!0}),t.getBasePath=t.moduleBelongsToApp=t.showWatermark=t.isWebApplication=t.getErrorPageConfig=t.getDefaultTransition=t.setApplicationDefaultTimeout=t.getApplicationDefaultTimeout=t.getHomeModuleLanguageResourcesName=t.getHomeModuleControllerName=t.isDebugEnabled=t.getUserProviderName=t.getUserCookieName=t.getDefaultModuleHomeScreenURL=t.getScreenDefinitionFromScreenName=t.getScreenDefinition=t.getHomeModuleDefinition=t.getHomeModuleKey=t.getHomeModuleName=t.setDatabaseName=t.setClientEntitiesModules=t.getClientEntitiesModules=t.getHomeScreen=t.getModuleFromKey=t.getModules=t.setModules=t.getDatabaseName=t.getApplicationName=t.getApplicationKey=t.getEnvironmentName=t.getEnvironmentKey=t.setApplicationDefinition=void 0;var P={environmentKey:"",environmentName:"",applicationKey:"",applicationName:"",userProviderName:"",debugEnabled:!1,homeModuleName:"",homeModuleKey:"",modules:{},homeModuleControllerName:"",homeModuleLanguageResourcesName:"",clientEntitiesModules:[],applicationDefaultTimeout:null,isWeb:!1,showWatermark:!1};t.setApplicationDefinition=r,t.getEnvironmentKey=i,t.getEnvironmentName=o,t.getApplicationKey=a,t.getApplicationName=s,t.getDatabaseName=u,t.setModules=c,t.getModules=l,t.getModuleFromKey=f,t.getHomeScreen=d,t.getClientEntitiesModules=p,t.setClientEntitiesModules=h,t.setDatabaseName=g,t.getHomeModuleName=m,t.getHomeModuleKey=y,t.getHomeModuleDefinition=v,t.getScreenDefinition=b,t.getScreenDefinitionFromScreenName=T,t.getDefaultModuleHomeScreenURL=_,t.getUserCookieName=E,t.getUserProviderName=w,t.isDebugEnabled=D,t.getHomeModuleControllerName=S,t.getHomeModuleLanguageResourcesName=x,t.getApplicationDefaultTimeout=I,t.setApplicationDefaultTimeout=N,t.getDefaultTransition=A,t.getErrorPageConfig=O,t.isWebApplication=C,t.showWatermark=R,t.moduleBelongsToApp=L,t.getBasePath=M}),
define("OutSystems/ClientRuntime/modules/Storage/StorageType",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n;!function(e){e[e.Persistent=0]="Persistent",e[e.Session=1]="Session"}(n||(n={})),t.default=n}),define("OutSystems/ClientRuntime/modules/Storage/InMemoryStorage",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){if(this.storageObj={},e)for(var t=0,n=e.key(t);null!==n;)this.storageObj[n]=e.getItem(n),n=e.key(++t)}return Object.defineProperty(e.prototype,"length",{get:function(){return Object.keys(this.storageObj).length},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this.storageObj={}},e.prototype.getItem=function(e){return this.storageObj.hasOwnProperty(e)?this.storageObj[e]:null},e.prototype.key=function(e){var t=Object.keys(this.storageObj);return e<t.length?t[e]:null},e.prototype.removeItem=function(e){this.storageObj.hasOwnProperty(e)&&delete this.storageObj[e]},e.prototype.setItem=function(e,t){this.storageObj[e]=t},e}();t.default=n}),define("OutSystems/ClientRuntime/modules/Storage/StorageNaming",["require","exports"],function(e,t){"use strict";function n(){return i}function r(e){i=e}Object.defineProperty(t,"__esModule",{value:!0}),t.setDefaultStorageNamespace=t.getDefaultStorageNamespace=t.OS_STORAGE_PREFIX=void 0,t.OS_STORAGE_PREFIX="$OS_";var i="OS";t.getDefaultStorageNamespace=n,t.setDefaultStorageNamespace=r}),define("OutSystems/ClientRuntime/modules/Storage/StorageEnvironment",["require","exports","./InMemoryStorage","./StorageNaming","./StorageType"],function(e,t,n,r,i){"use strict";function o(e){var t=r.OS_STORAGE_PREFIX+"test";try{var n=p(e);n.setItem(t,"1");var i="1"===n.getItem(t);return n.removeItem(t),i}catch(e){return!1}}function a(){return h}function s(){return g}function u(e){h=e}function c(e){g=e}function l(e){return e===i.default.Persistent&&h!==f?(console.warn("The localStorage is full... Proceding with a static Javascript object"),h=new n.default(h),!0):e===i.default.Session&&g!==d&&(console.warn("The sessionStorage is full... Proceding with a static Javascript object"),g=new n.default(g),!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.tryExpandStorage=t.setCustomSessionStorage=t.setCustomPersistentStorage=t.getSessionStorage=t.getPersistentStorage=t.isSpecificStorageAvailable=void 0;var f="undefined"==typeof window?void 0:window.localStorage,d="undefined"==typeof window?void 0:window.sessionStorage,p=function(e){return e===i.default.Persistent?f:d},h=o(i.default.Persistent)?p(i.default.Persistent):new n.default,g=o(i.default.Session)?p(i.default.Session):new n.default;t.isSpecificStorageAvailable=o,t.getPersistentStorage=a,t.getSessionStorage=s,t.setCustomPersistentStorage=u,t.setCustomSessionStorage=c,t.tryExpandStorage=l}),define("OutSystems/ClientRuntime/modules/Storage/StorageObject",["require","exports","./StorageEnvironment","./StorageNaming","./StorageType"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.freeze(Object()),a=function(){function e(e,t,n,i){this.storageType=e,this.key=t,this.defaultValue=n,this.getModuleName=function(){return r.getDefaultStorageNamespace()},this.clearCache(),i&&(this.getModuleName=i)}return e.prototype.get=function(){return this.getValueForModule(this.getModuleName())},e.prototype.set=function(e){this.setValueForModule(this.getModuleName(),e)},e.prototype.remove=function(){this.removeValueForModule(this.getModuleName())},e.prototype.isDefined=function(){return this.hasValueForModule(this.getModuleName())},e.prototype.getStorageKeyForModule=function(e){return r.OS_STORAGE_PREFIX+e+"$"+this.key},Object.defineProperty(e.prototype,"storage",{get:function(){return this.storageType===i.default.Persistent?n.getPersistentStorage():n.getSessionStorage()},enumerable:!1,configurable:!0}),e.prototype.getValueForModule=function(e){return this.cachedValue===o&&(this.cachedValue=this.getValueForModuleFromStorage(e)),this.cachedValue},e.prototype.getValueForModuleFromStorage=function(e){var t=this.storage.getItem(this.getStorageKeyForModule(e));return null===t?this.defaultValue:"undefined"===t||void 0===t?void 0:JSON.parse(t)},e.prototype.hasValueForModule=function(e){var t=this.storage.getItem(this.getStorageKeyForModule(e));return null!==t&&void 0!==t&&"undefined"!==t},e.prototype.setValueForModule=function(e,t){var r=this.getStorageKeyForModule(e),i=JSON.stringify(t),o=this.storage;if(!o||!o.setItem)throw Error("The storage object for "+this.key+" is invalid.");try{o.setItem(r,i),this.cachedValue=t}catch(e){if(!n.tryExpandStorage(this.storageType))throw e;this.storage.setItem(r,i)}},e.prototype.removeValueForModule=function(e){this.storage.removeItem(this.getStorageKeyForModule(e)),this.clearCache()},e.prototype.clearCache=function(){this.cachedValue=o},e}();t.default=a}),define("OutSystems/ClientRuntime/StorageProvider",["require","exports","./modules/Storage/StorageType","./modules/Storage/InMemoryStorage","./modules/Storage/StorageObject","./modules/Storage/StorageNaming","./modules/Storage/StorageEnvironment"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCustomSessionStorage=t.setCustomPersistentStorage=t.getSessionStorage=t.getPersistentStorage=t.getDefaultStorageNamespace=t.setDefaultStorageNamespace=t.StorageObject=t.DummyStorage=t.StorageType=void 0,Object.defineProperty(t,"StorageType",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"DummyStorage",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"StorageObject",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"setDefaultStorageNamespace",{enumerable:!0,get:function(){return o.setDefaultStorageNamespace}}),Object.defineProperty(t,"getDefaultStorageNamespace",{enumerable:!0,get:function(){return o.getDefaultStorageNamespace}}),Object.defineProperty(t,"getPersistentStorage",{enumerable:!0,get:function(){return a.getPersistentStorage}}),Object.defineProperty(t,"getSessionStorage",{enumerable:!0,get:function(){return a.getSessionStorage}}),Object.defineProperty(t,"setCustomPersistentStorage",{enumerable:!0,get:function(){return a.setCustomPersistentStorage}}),Object.defineProperty(t,"setCustomSessionStorage",{enumerable:!0,get:function(){return a.setCustomSessionStorage}})}),define("OutSystems/ClientRuntime/ClientInfo",["require","exports","./StorageProvider"],function(e,t,n){"use strict";function r(){var e=window.device;if(e){var t=new a(new s(e.platform,e.version,e.manufacturer,e.model,e.uuid,e.serial,e.cordova,e.isVirtual));u.set(o.serializeClientInfo(t))}}function i(){var e=u.get();if(e)return o.deserializeClientInfo(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getClientInfo=t.setClientInfo=void 0;var o,a=function(){function e(e){this._device=e}return Object.defineProperty(e.prototype,"device",{get:function(){return this._device},enumerable:!1,configurable:!0}),e}(),s=function(){function e(e,t,n,r,i,o,a,s){this._platform=e,this._version=t,this._manufacturer=n,this._model=r,this._uuid=i,this._serial=o,this._cordova=a,this._isVirtual=s}return Object.defineProperty(e.prototype,"platform",{get:function(){return this._platform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"manufacturer",{get:function(){return this._manufacturer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uuid",{get:function(){return this._uuid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serial",{get:function(){return this._serial},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cordova",{get:function(){return this._cordova},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isVirtual",{get:function(){return this._isVirtual},enumerable:!1,configurable:!0}),e}();!function(e){function t(e){var t=n(e);if(t)return JSON.stringify(t)}function n(e){if(e)return{device:e.device?r(e.device):void 0}}function r(e){if(e)return{platform:e.platform,version:e.version,manufacturer:e.manufacturer,model:e.model,uuid:e.uuid,serial:e.serial,cordova:e.cordova,isVirtual:e.isVirtual}}function i(e){var t;try{t=JSON.parse(e)}catch(e){}if(t)return o(t)}function o(e){if(e)return new a(u(e.device))}function u(e){if(e)return new s("string"==typeof e.platform?e.platform:void 0,"string"==typeof e.version?e.version:void 0,"string"==typeof e.manufacturer?e.manufacturer:void 0,"string"==typeof e.model?e.model:void 0,"string"==typeof e.uuid?e.uuid:void 0,"string"==typeof e.serial?e.serial:void 0,"string"==typeof e.cordova?e.cordova:void 0,"boolean"==typeof e.isVirtual?e.isVirtual:void 0)}e.serializeClientInfo=t,e.deserializeClientInfo=i}(o||(o={}));var u=new n.StorageObject(n.StorageType.Persistent,"ClientInfo");t.setClientInfo=r,t.getClientInfo=i}),define("OutSystems/ClientRuntime/CookiesManager",["require","exports"],function(e,t){"use strict";function n(e){o=e}function r(){return o?o.getCookies():document.cookie}function i(e){for(var t=e+"=",n=r().split(";"),i=0;i<n.length;i++){for(var o=n[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(t))return decodeURIComponent(o.substring(t.length,o.length))}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.readCookie=t.initialize=void 0;var o;t.initialize=n,t.readCookie=i}),define("OutSystems/ClientRuntime/Exceptions",["require","exports","tslib"],function(e,t,n){"use strict";function r(e,t,n){return void 0===n&&(n=""),t===l.Exception||e instanceof t&&(""===n||!!e.specificType&&e.specificType===n)}function i(e){if(void 0===e)return"";if(e instanceof Error)return e.message;var t=e.toString();return"[object SQLError]"===t?e.message.toString():t}function o(e){return(void 0!==e.extraStack?e.extraStack+"\r\n ":"")+(e.stack||"")||""}function a(e){return{name:e.name,message:i(e),stack:o(e),extraStack:e instanceof l.Exception?e.extraStack:void 0}}function s(e){return e.name?e.specificType?new l[e.name](e.specificType,e.message,e.extraStack):new l[e.name](e.message,e.extraStack):new l.Exception(e.message,e.extraStack)}function u(e){return r(e,l.SystemException)}function c(e){return r(e,l.LicensingException)}Object.defineProperty(t,"__esModule",{value:!0}),t.isApplicationOffline=t.isSystem=t.getException=t.getExceptionInfo=t.getStack=t.getMessage=t.isInstanceOf=t.Exceptions=void 0;var l;!function(e){e.CustomError=function(e){var t=Error.call(this,e);"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(t,this.constructor.prototype):t.__proto__=this.constructor.prototype,"stack"in this||Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)},e.CustomError.prototype=Error.prototype;var t=function(e){function t(t,n){var r=e.call(this,t)||this;return r.extraStack=n,r.message=t,r.name="Exception",r}return n.__extends(t,e),t}(e.CustomError);e.Exception=t;var i=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.specificType=t,i.name=t,i}return n.__extends(t,e),t}(t);e.ServerException=i;var o=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.specificType=t,i.name=t,i}return n.__extends(t,e),t}(t);e.DataBaseException=o;var a=function(e){function t(t,n){return e.call(this,"OpenDatabaseException",t,n)||this}return n.__extends(t,e),t}(o);e.OpenDatabaseException=a;var s=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="CommunicationException",r}return n.__extends(t,e),t}(t);e.CommunicationException=s;var u=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="NumberOverflowException",r}return n.__extends(t,e),t.prototype.valueOf=function(){return this.name+": "+this.message},t}(t);e.NumberOverflowException=u;var c=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="InvalidJavascriptType",r}return n.__extends(t,e),t.prototype.valueOf=function(){return this.name+": "+this.message},t}(t);e.InvalidJavascriptType=c;var l=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="SecurityException",r}return n.__extends(t,e),t}(t);e.SecurityException=l;var f=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="InvalidLoginException",r}return n.__extends(t,e),t}(l);e.InvalidLoginException=f;var d=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.specificType=t,i.name=t,i}return n.__extends(t,e),t}(l);e.NotRegisteredException=d;var p=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="SystemException",r}return n.__extends(t,e),t}(t);e.SystemException=p;var h=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="IgnorableSystemException",r}return n.__extends(t,e),t}(p);e.IgnorableSystemException=h;var g=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="ViewHasChangedException",r}return n.__extends(t,e),t}(h);e.ViewHasChangedException=g;var m=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="OutOfOrderException",r}return n.__extends(t,e),t}(h);e.OutOfOrderException=m;var y=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="OutOfContextException",r}return n.__extends(t,e),t}(h);e.OutOfContextException=y;var v=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="RedirectOccurredException",r}return n.__extends(t,e),t}(h);e.RedirectOccurredException=v;var b=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="UnhandledOrIgnoredErrorInEventException",r}return n.__extends(t,e),Object.defineProperty(t.prototype,"handleErrorResult",{get:function(){return this._handleErrorResult},enumerable:!1,configurable:!0}),t.create=function(e,n,r){var i=new t(n,r);return i._handleErrorResult=e,i},t.ignore=function(e){if(!r(e,t))throw e},t}(h);e.UnhandledOrIgnoredErrorInEventException=b;var T=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="ApplicationBackendUnavailableException",r}return n.__extends(t,e),t}(p);e.ApplicationBackendUnavailableException=T;var _=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="LicensingException",r}return n.__extends(t,e),t}(p);e.LicensingException=_;var E=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="IncompatibleProducerException",r}return n.__extends(t,e),t}(p);e.IncompatibleProducerException=E;var w=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="ControllerDisposedException",r}return n.__extends(t,e),t}(h);e.ControllerDisposedException=w;var D=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.name="AbortActivityChangeException",r}return n.__extends(t,e),t}(t);e.AbortActivityChangeException=D;var S=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;return i.specificType=t,i.name=t,i}return n.__extends(t,e),t}(t);e.UserException=S}(l=t.Exceptions||(t.Exceptions={})),t.isInstanceOf=r,t.getMessage=i,t.getStack=o,t.getExceptionInfo=a,t.getException=s,t.isSystem=u,t.isApplicationOffline=c}),define("OutSystems/ClientRuntime/Flow",["require","exports"],function(e,t){"use strict";function n(e){var t=e;return t&&"function"==typeof t.then&&"function"==typeof t.catch}function r(e,t){switch(t){case w:return e();case E:return;default:return Promise.reject(t)}}function i(e){return e()?Promise.resolve(void 0):s()}function o(e){return new Promise(e)}function a(e){return Promise.resolve(e)}function s(){return Promise.reject(E)}function u(){return Promise.reject(w)}function c(e){return Promise.reject(new _(e))}function l(e){return Promise.reject(e)}function f(e){return d(e)}function d(e,t){function r(e,n){return o?n?(clearTimeout(t),d(function(){return n(o)})):(s(),d(a,t)):d(e?function(){return e(i)}:function(){return i})}var i=void 0,o=void 0,a=function(){throw o},s=function(){clearTimeout(t),t=setTimeout(a,0)};try{i=e()}catch(e){o=e,s()}return n(i)?i:{then:function(e,t){return r(e,t)},catch:function(e){return r(void 0,e)}}}function p(e,t,n){return void 0===t&&(t=function(e){return Promise.reject(e)}),void 0===n&&(n=function(){return Promise.resolve(void 0)}),f(e).catch(t).then(function(e){return f(n).then(function(t){return void 0!==t?t:e})},function(e){return f(n).then(function(){return Promise.reject(e)})})}function h(e,t){return p(e,t,void 0)}function g(e,t){return p(e,void 0,t)}function m(e){return void 0===e&&(e=function(){}),f(e).catch(T)}function y(e,t){function n(){return i(e).then(t).then(n,r.bind(null,n))}return n()}function v(e,t){var n=0;return y(function(){return n<e.length},function(){var r=e[n++];return t(r)})}function b(e,t){function n(){return i(e).then(o,r.bind(null,o))}function o(){return f(t).then(function(){return i(e)}).then(o,r.bind(null,n))}return o()}function T(e){return e instanceof _?e.returnValue:Promise.reject(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.whileTrueAsync=t.doWhileAsync=t.forEachAsync=t.whileAsync=t.executeAsyncFlow=t.tryFinally=t.tryCatch=t.tryCatchFinally=t.executeSequence=t.throwAsync=t.returnAsync=t.continueAsync=t.breakAsync=t.resolve=t.promise=t.isPromiseCompatible=void 0;var _=function(){function e(e){this.returnValue=e}return e}(),E=new Object,w=new Object;t.isPromiseCompatible=n,t.promise=o,t.resolve=a,t.breakAsync=s,t.continueAsync=u,t.returnAsync=c,t.throwAsync=l,t.executeSequence=f,t.tryCatchFinally=p,t.tryCatch=h,t.tryFinally=g,t.executeAsyncFlow=m,t.whileAsync=y,t.forEachAsync=v,t.doWhileAsync=b,t.whileTrueAsync=y.bind(null,function(){return!0})}),define("OutSystems/ClientRuntime/VersionDefinition",["require","exports"],function(e,t){"use strict";function n(e,t){o=null,i.set(e,t)}function r(){if(!o){var e={"Client Runtime Packages":""};i.forEach(function(n,r){n&&r&&(e[t.clientRuntimeKey]+=r+"= "+n+";")}),o=e}return o}Object.defineProperty(t,"__esModule",{value:!0}),t.toObject=t.registerPackage=t.clientRuntimeKey=void 0;var i=new Map;t.clientRuntimeKey="Client Runtime Packages";var o;t.registerPackage=n,t.toObject=r}),define("OutSystems/ClientRuntime/Logger",["require","exports","./ClientInfo","./Exceptions","./StorageProvider","./VersionDefinition"],function(e,t,n,r,i,o){"use strict";function a(){z=[],H=fe,G=de,W=0,K=0,Q=!1,Y=!1,X=!1,$=!1,Z=!1,ee=!1,te=!1,ne=!1,re=!1,ce="",oe=new Promise(function(e,t){ue=function(t){te=!0,e(t),Y=!0}}),ie=new Promise(function(e,t){se=function(t){ne=!0,e(t),Y=!0}})}function s(e){var t=new k(e);ue(t)}function u(e){se(e)}function c(e){e.onOnline(function(){return T()}),e.onOffline(function(){return _()}),X=e.isOnline(),$=!0,Y=X,ae=e}function l(){re=!0,v(),J=t.LoggerStorage.hasTracingEnabled.get()}function f(){if(!ve){if(Q=!0,Y&&ne)return void b();Promise.resolve().then(function(){return X&&$&&te?p():ne?h():void(Q=!1)}).catch(function(){Q=!1})}}function d(){return!D()||Y}function p(){return W>=ge&&ae?($=!1,K=0,E(),void setTimeout(function(){return f()},G)):oe.then(function(e){return g(e,H)})}function h(e){return void 0===e&&(e=H),ie.then(function(t){return g(t,e)})}function g(e,t){if(D())return Q=!1,Promise.resolve(void 0);var n=z.slice(0,t);return e.writeLogBatch(n).then(function(){z.splice(0,n.length),W=0,d()?setTimeout(function(){return f()},G):Q=!1}).catch(function(){z.splice(0,n.length),z=z.concat(n),W++,setTimeout(function(){return f()},N(W))})}function m(){T()}function y(e){if(void 0===e&&(e=!1),ve=e,ne)return h(z.length);if(re){var n=z;Z&&(n=t.LoggerStorage.fallbackLogStorage.get().concat(z)),t.LoggerStorage.fallbackLogStorage.set(n),Z=!0,z=[]}return Promise.resolve(void 0)}function v(){var e=t.LoggerStorage.fallbackLogStorage.get();0!==e.length&&(x(e),X?t.LoggerStorage.fallbackLogStorage.remove():(ae.onOnline(function(){return t.LoggerStorage.fallbackLogStorage.remove()}),ie.then(function(){return t.LoggerStorage.fallbackLogStorage.remove()})),ee=!0)}function b(){return ie.then(function(e){e.getLogs().then(function(t){z=t.concat(z),t.length>0?e.removeLogs(t.length).then(function(){Y=!1,setTimeout(function(){return f()},G)}).catch(function(){z.splice(0,t.length),setTimeout(function(){return f()},G)}):(Y=!1,setTimeout(function(){return f()},G))}).catch(function(){setTimeout(function(){return f()},G)})})}function T(){X=!0,$=!0,Y=!0,W=0,Q||f()}function _(){X=!1,$=!1,Y=!1,W=0,Q||f()}function E(){ae&&ae.ping(me).then(function(){K=0,T()}).catch(function(){X&&!$&&(K++,setTimeout(function(){E()},N(K)))})}function w(e){H=e}function D(){return 0===z.length}function S(e){z.push(I(e)),Q||f()}function x(e){e.forEach(function(e){return S(e)})}function I(e){return e.message=e.message?e.message.substring(0,ye):e.message,e.stack=e.stack?e.stack.substring(0,ye):e.stack,e}function N(e){var t=Math.min(e,he);return Math.pow(pe,t)*G}function A(){return!D()}function O(){return ee}function C(e){void 0===e&&(e=!1),J=e;try{t.LoggerStorage.hasTracingEnabled.set(J)}catch(e){R(le,"Error saving the new value of 'tracingEnabled' property in the local storage. "+e)}}function R(e,n){if(e&&n&&(J||t.forceTracing)){var r="";"string"==typeof e?r=e:"Function"===(r=e.constructor.name)&&(r=e.name);var i=void 0;i="string"==typeof n?n:n(),U(r,i,t.LogTypes.Trace)}}function L(e,n){U(e,n,t.LogTypes.General)}function M(e,n,i){var o="",a="";"string"==typeof n?o=n:(o=r.getMessage(n),a=r.getStack(n)),i&&(o+="\n"+r.getMessage(i),a+=(a?"\n":"")+r.getStack(i)),U(e,o,t.LogTypes.Error,a)}function P(e){J&&e?(B(),R(le,"Device details initialized")):R(le,"Device details not initialized: isNative = ["+e+"] tracingEnabled = ["+J+"]")}function F(e,t,n,r,i){function o(e,t,r,s,u){return e&&"object"==typeof e?(u=a.has(e),a.set(e,!0),s=Array.isArray(e),u?r=i&&i(e)||null:JSON.stringify(e,function(i,a){if(s||t>0){if(n&&(a=n(i,a)),!i)return s=Array.isArray(a),e=a;r=r||(s?[]:{}),r[i]=o(a,s?t:t-1)}}),void 0===r?s?[]:"(...)":r):e}void 0===t&&(t=3),n=n||V,t=isNaN(+t)?1:t;var a=new WeakMap;return JSON.stringify(o(e,t),null,r)}function V(e,t){if(""===e){if(Array.isArray(t)){var n=t;return n.length>=10&&(n=n.slice(0,9),n.push("(...)")),n}return j(t,10)}if("string"==typeof t){var r=t;return r.length>25?r.substring(0,19)+" (...)":r}return t}function j(e,t){var n=0,r=!1,i=Object.keys(e).reduce(function(i,o){return n++,n<=t?i[o]=e[o]:r=!0,i},{});return r&&(i["..."]="(...)"),i}function U(e,n,r,i){if(!r||""===r.trim())throw new Error("Logger: Error sending log. LogType must be defined.");var a=(new Date).toISOString(),s=e?e+" ":"",u=""+n+ce,c=s+"["+a+"]: "+n+" "+(i?"\n"+i:""),l={instant:a,logType:r,message:u,moduleName:e,stack:i};r===t.LogTypes.Error?(l.extra=o.toObject(),console.error(c)):console.log(c),S(l)}function B(){if(!ce){var e=n.getClientInfo();if(e&&e.device){var t=e.device;ce=" ["+t.platform+"|"+t.version+"|"+t.manufacturer+"|"+t.model+"|"+t.uuid+"|"+t.cordova+"]"}}return ce}Object.defineProperty(t,"__esModule",{value:!0}),t.serializeObjectForLog=t.setDeviceDetails=t.error=t.log=t.trace=t.setTracingEnabled=t.hadSessionLogs=t.hasPendingLogs=t.setBatchSize=t.flushLogsToServerIfOnline=t.flushLogsToStorage=t.flushLogsToServer=t.enableFallbackStorage=t.setNetworkStatusChecker=t.setOfflineStorage=t.setPostLogsFunction=t.initialize=t.forceTracing=t.DummyLogStorage=t.ServerLogAppender=t.LogTypes=t.LoggerStorage=void 0,t.LoggerStorage={hasTracingEnabled:new i.StorageObject(i.StorageType.Persistent,"HasTracingEnabled"),fallbackLogStorage:new i.StorageObject(i.StorageType.Persistent,"FallbackLogStorage",[])},t.LogTypes={Error:"error",General:"general",Trace:"trace"};var k=function(){function e(e){this.postLog=e}return e.prototype.writeLog=function(e){return this.writeLogBatch([e])},e.prototype.writeLogBatch=function(e){return this.postLog(e)},e}();t.ServerLogAppender=k;var q=function(){function e(){}return e.prototype.writeLog=function(e){return Promise.resolve(void 0)},e.prototype.writeLogBatch=function(e){return Promise.resolve(void 0)},e.prototype.countLogs=function(){return Promise.resolve(0)},e.prototype.getLogs=function(e){return Promise.resolve([])},e.prototype.popLogs=function(e){return Promise.resolve([])},e.prototype.removeLogs=function(e){return Promise.resolve(void 0)},e}();t.DummyLogStorage=q;var z,H,G,W,K,J,Q,Y,X,$,Z,ee,te,ne,re,ie,oe,ae,se,ue,ce,le="Logger",fe=10,de=200,pe=1.2,he=40,ge=5,me=5e3,ye=2e3,ve=!1;t.initialize=a,t.setPostLogsFunction=s,t.setOfflineStorage=u,t.setNetworkStatusChecker=c,t.enableFallbackStorage=l,t.flushLogsToServer=m,t.flushLogsToStorage=y;var be=function(){X&&m()};t.flushLogsToServerIfOnline=be,t.setBatchSize=w,t.hasPendingLogs=A,t.hadSessionLogs=O,t.setTracingEnabled=C,t.trace=R,t.log=L,t.error=M,t.setDeviceDetails=P,t.serializeObjectForLog=F,a()}),define("OutSystems/ClientRuntime/Injector",["require","exports","./Logger"],function(e,t,n){"use strict";function r(e,t){try{n.trace(u,"Registering "+e+" service");var r=t();return c[e]=r,e in l&&l[e].forEach(function(t){return t(e,r)}),!0}catch(t){return n.trace(u,"Failed to initialize "+e+" service: "+t),!1}}function i(e){delete c[e]}function o(e,t){e in l?l[e].push(t):l[e]=[t]}function a(e,t){e in l&&(l[e]=l[e].filter(function(e){return e!==t}))}function s(e){return c[e]}Object.defineProperty(t,"__esModule",{value:!0}),t.resolve=t.removeRegistrationListener=t.addRegistrationListener=t.unregister=t.register=void 0;var u="Injector",c={},l={};t.register=r,t.unregister=i,t.addRegistrationListener=o,t.removeRegistrationListener=a,t.resolve=s;var f={register:r,unregister:i,resolve:s,addRegistrationListener:o,removeRegistrationListener:a};t.default=f}),define("OutSystems/ClientRuntime/Injector/KnownServices",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceNames=void 0;!function(e){e.DeviceHelperClassProvider="DeviceHelperClassProvider",e.ClientVariablesService="ClientVariablesService",e.TranslationsService="TranslationsService",e.LocaleService="LocaleService",e.EntityService="EntityService",e.GlobalExceptionHandler="GlobalExceptionHandler"}(t.ServiceNames||(t.ServiceNames={}))}),define("OutSystems/ClientRuntime/modules/Common/RequestUtils",["require","exports"],function(e,t){"use strict";function n(e,t){return void 0===t&&(t=r),(null===e||void 0===e?void 0:e.length)>=t?new Blob([e],{type:"text/plain"}):e}Object.defineProperty(t,"__esModule",{value:!0}),t.formatDataToBeSent=void 0;var r=104857600;t.formatDataToBeSent=n}),define("OutSystems/ClientRuntime/modules/Native/IOutSystemsNativeHost",["require","exports"],function(e,t){"use strict";function n(e){var t;return!!(null===(t=e)||void 0===t?void 0:t.OutSystemsNative)}Object.defineProperty(t,"__esModule",{value:!0}),t.isIOutSystemsNativeHost=void 0,t.isIOutSystemsNativeHost=n}),define("OutSystems/ClientRuntime/modules/Common/BrowserUtils",["require","exports"],function(e,t){"use strict";function n(e){try{return e&&e.self!==e.top}catch(e){return!0}}function r(e){return/^((?!chrome|android).)*safari/i.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isSafari=t.windowInsideIframe=void 0,t.windowInsideIframe=n,t.isSafari=r}),define("OutSystems/ClientRuntime/NativeHelper",["require","exports","./Flow","./Logger","./modules/Common/BrowserUtils"],function(e,t,n,r,i){"use strict";function o(e){r.trace("NativeHelper",e)}function a(){var e="undefined"!=typeof navigator&&/OutSystemsApp/i.test(navigator.userAgent),t=i.windowInsideIframe("undefined"!=typeof window?window:null);return o("Running on "+(e?"native shell":"browser")+(t?" inside an iframe":"")),!t&&e}function s(){return c(h.Android)}function u(){return c(h.iOS)}function c(e){return a()&&window.device.platform===e}function l(){return g||(g=n.promise(function(e,n){o("Waiting for 'deviceready' event"),a()?void 0===window.cordova?n("Running on native but cordova wasn't loaded"):e(t.whenDeviceReady):(o("'deviceready' event wait ignored"),e())})),g}function f(){return!!s()&&(navigator.app.exitApp(),!0)}function d(e,t){l().then(function(){return p(e,t)})}function p(e,t){return!("undefined"==typeof document||!document.addEventListener)&&(document.addEventListener(e,t),!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.addNativeEventListener=t.exitApp=t.ensureNativeReady=t.whenDeviceReady=t.isIOS=t.isAndroid=t.isRunningOnNative=void 0;var h={Android:"Android",iOS:"iOS"};t.isRunningOnNative=a,t.isAndroid=s,t.isIOS=u,t.whenDeviceReady=n.promise(function(e,t){p("deviceready",function(){return e()})||e()});var g=null;t.ensureNativeReady=l,t.exitApp=f,t.addNativeEventListener=d}),define("OutSystems/ClientRuntime/Settings",["require","exports"],function(e,t){"use strict";function n(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];i[r]=e[r]}}function r(){return i}Object.defineProperty(t,"__esModule",{value:!0}),t.getEnvParams=t.setPlatformSettings=t.EnvParam=void 0;var i;!function(e){e.DbNullDatesTZAware=!1,e.ForceXhrCommunication=!1,e.IndexedDBOffline=!1,e.CanDisableAutoUpgrade=!1,e.UseNewWebSQLImpl=!1,e.ListItemIdWithoutModelId=!1,e.SendEnvParamOnManifestRequest=!1,e.UseNewJSONSerialization=!1,e.CDNFilenameVersioning=!1}(i=t.EnvParam||(t.EnvParam={})),t.setPlatformSettings=n,t.getEnvParams=r}),define("OutSystems/ClientRuntime/NativeHttp",["require","exports","tslib","./modules/Native/IOutSystemsNativeHost","./NativeHelper","./Settings"],function(e,t,n,r,i,o){"use strict";function a(){return n.__awaiter(this,void 0,void 0,function(){var e;return n.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,i.ensureNativeReady()];case 1:return t.sent(),r.isIOutSystemsNativeHost(window)?[2,window.OutSystemsNative.Http]:[2,null];case 2:return e=t.sent(),[2,null];case 3:return[2]}})})}function s(){return n.__awaiter(this,void 0,void 0,function(){var e;return n.__generator(this,function(t){switch(t.label){case 0:return[4,a()];case 1:return e=t.sent(),[2,!o.getEnvParams().ForceXhrCommunication&&!!e]}})})}function u(e,t){return n.__awaiter(this,void 0,void 0,function(){var r;return n.__generator(this,function(n){switch(n.label){case 0:return[4,a()];case 1:return r=n.sent(),[2,new l(r,e,t)]}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.createNativeHttpRequest=t.isNativeHttpPluginAvailable=t.getNativeHttpPlugin=void 0,t.getNativeHttpPlugin=a,t.isNativeHttpPluginAvailable=s,t.createNativeHttpRequest=u;var c=function(){function e(e,t){this.requestHandler=e,this.nativeHttp=t}return Object.defineProperty(e.prototype,"complete",{get:function(){return this.requestHandler.isDone()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"responseUrl",{get:function(){return this.nativeHttp.responseUrl},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statusCode",{get:function(){return this.nativeHttp.status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statusText",{get:function(){return this.nativeHttp.statusText},enumerable:!1,configurable:!0}),e.prototype.getHeader=function(e){return e=e||"",this.nativeHttp.responseHeaders[e.toLowerCase()]},Object.defineProperty(e.prototype,"headers",{get:function(){return this.nativeHttp.responseHeaders},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"responseText",{get:function(){return this.nativeHttp.responseText},enumerable:!1,configurable:!0}),e}(),l=function(){function e(e,t,n){this.nativeRequest=e.createRequest(t,n),this._url=n}return Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),e.prototype.createRequestCallback=function(e){var t=this;return function(n){var r=new c(t,t.nativeRequest);e(r)}},e.prototype.setTimeout=function(e){this.nativeRequest.setTimeout(e)},e.prototype.setBody=function(e){this.nativeRequest.setBody(e)},e.prototype.setHeader=function(e,t){this.nativeRequest.setHeader(e,t)},e.prototype.isDone=function(){return 4===this.nativeRequest.readyState},e.prototype.send=function(){
this.onSuccess&&(this.nativeRequest.onSuccess=this.createRequestCallback(this.onSuccess)),this.onError&&(this.nativeRequest.onError=this.createRequestCallback(this.onError)),this.onTimeout&&(this.nativeRequest.onTimeout=this.createRequestCallback(this.onTimeout)),this.onAbort&&(this.nativeRequest.onAbort=this.createRequestCallback(this.onAbort)),this.onFinish&&(this.nativeRequest.onFinish=this.createRequestCallback(this.onFinish)),this.nativeRequest.send()},e.prototype.abort=function(){this.nativeRequest.abort()},e}()}),define("OutSystems/ClientRuntime/Request",["require","exports","tslib","./modules/Common/RequestUtils","./NativeHttp"],function(e,t,n,r,i){"use strict";function o(e){var t=e.method,r=e.url,o=e.basePath,a=void 0===o?u:o,s=e.nativeHttpPluginAvailable,c=void 0===s?i.isNativeHttpPluginAvailable:s,f=e.createNativeHttpRequest,d=void 0===f?i.createNativeHttpRequest:f;return n.__awaiter(this,void 0,void 0,function(){var e,i;return n.__generator(this,function(n){switch(n.label){case 0:return[4,c()];case 1:return e=n.sent(),i=("/"+a+"/"+r).replace(new RegExp("/(/)+","gm"),"/"),e?[4,d(t,i)]:[3,3];case 2:return[2,n.sent()];case 3:return[2,new l(t,i)]}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.createHttpRequest=void 0;var a={Unsent:0,Opened:1,HeadersReceived:2,Loading:3,Done:4},s=/[\r\n]+/,u="/",c=function(){function e(e,t){this.request=e,this.xhr=t}return Object.defineProperty(e.prototype,"complete",{get:function(){return this.request.isDone()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"responseUrl",{get:function(){return this.xhr.responseURL},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statusCode",{get:function(){return this.xhr.status},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"statusText",{get:function(){return this.xhr.statusText},enumerable:!1,configurable:!0}),e.prototype.getHeader=function(e){return this.xhr.getResponseHeader(e)},Object.defineProperty(e.prototype,"headers",{get:function(){var e={};return(this.xhr.getAllResponseHeaders()||"").split(s).reduce(function(e,t){var n=t.indexOf(":"),r=t.substr(0,n),i=t.substr(n+1).trim();return e[r]=i,e},e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"responseText",{get:function(){return this.xhr.responseText},enumerable:!1,configurable:!0}),e}(),l=function(){function e(e,t){this.xhr=new XMLHttpRequest,this.xhr.open(e,t,!0),this._url=t}return Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),e.prototype.createRequestCallback=function(e){var t=this;return function(n){var r=new c(t,t.xhr);e(r)}},e.prototype.setTimeout=function(e){this.xhr.timeout=e},e.prototype.setBody=function(e){this.body=e},e.prototype.setHeader=function(e,t){this.xhr.setRequestHeader(e,t)},e.prototype.isDone=function(){return this.xhr.readyState===a.Done},e.prototype.send=function(){this.onSuccess&&(this.xhr.onload=this.createRequestCallback(this.onSuccess)),this.onError&&(this.xhr.onerror=this.createRequestCallback(this.onError)),this.onTimeout&&(this.xhr.ontimeout=this.createRequestCallback(this.onTimeout)),this.onAbort&&(this.xhr.onabort=this.createRequestCallback(this.onAbort)),this.onFinish&&(this.xhr.onloadend=this.createRequestCallback(this.onFinish)),this.xhr.send(r.formatDataToBeSent(this.body))},e.prototype.abort=function(){this.xhr.abort()},e}();t.createHttpRequest=o}),define("OutSystems/ClientRuntime/Communication",["require","exports","tslib","./ApplicationInfo","./ClientInfo","./CookiesManager","./Exceptions","./Flow","./Injector","./Injector/KnownServices","./Request"],function(e,t,n,r,i,o,a,s,u,c,l){"use strict";function f(){return Math.floor(9007199254740992*Math.random())+0}function d(e,t){O&&O(e,t)}function p(e){var t=e.method,r=void 0===t?"POST":t,i=e.url,o=e.basePath,a=e.useLocaleInfo,s=void 0!==a&&a;return n.__awaiter(this,void 0,void 0,function(){var e,t;return n.__generator(this,function(n){switch(n.label){case 0:return[4,l.createHttpRequest({method:r,url:i,basePath:o})];case 1:return e=n.sent(),s&&(t=M.getLocaleValue())&&e.setHeader(M.LocaleHeader,t),e.setHeader(C.CSRFHeader,C.getCSRFToken()),e.setHeader("Content-Type","application/json; charset=UTF-8"),e.setHeader("Accept","application/json"),[2,e]}})})}function h(e,t){return s.promise(function(n,r){p({method:"GET",url:"/moduleservices/checkrequestsuspended?requestToken="+e,basePath:t}).then(function(e){var t=function(){return n(!1)};e.onSuccess=function(e){200===e.statusCode?n(JSON.parse(e.responseText)):t()},e.onTimeout=t,e.onError=t,e.onAbort=t,e.setTimeout(1e4),e.send()}).catch(r)})}function g(e,t,n,r,i){if(r)if(i){var o=f().toString(),a=setTimeout(function(){e.isDone()||h(o,n).then(function(t){t||(e.abort(),e.onTimeout(null))})},1e3*r);e.onFinish=function(){clearTimeout(a)},e.setHeader(I+"Request-Token",o)}else e.setTimeout(1e3*r);e.setBody(t),e.send()}function m(e,t,n){return void 0===n&&(n=!1),"Unable to access '"+e+"'"+(n?" (request aborted)":"")+". Error Code: "+t}function y(e,t,n,r,i,o){return void 0===t&&(t=void 0),void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=!0),new Promise(function(a,s){if(n&&"undefined"!=typeof navigator&&!navigator.onLine)return s("Unable to access '"+e+"' - There's no network connection.");var u=i?"":"?"+(new Date).getTime(),c=""+e+u;l.createHttpRequest({method:"GET",url:c,basePath:o}).then(function(n){n.onSuccess=function(t){if(!t.complete||200!==t.statusCode)return s(m(e,t.statusCode));var n;if(r){try{n=JSON.parse(t.responseText.substring(t.responseText.indexOf("{"),t.responseText.length))}catch(e){return s(e)}if(!n)return s(Error("Unable to parse payload downloaded from '"+e+"'."))}a(n)},n.onError=n.onTimeout=function(t){return s(Error(m(e,t.statusCode)))},n.onAbort=function(t){return s(Error(m(e,t.statusCode,!0)))},t&&n.setTimeout(t),n.setHeader("Accept","application/json"),T(n),n.send()}).catch(s)})}function v(e,t,n,r,i,o,u,c,l,f){return void 0===r&&(r=void 0),void 0===u&&(u=!1),void 0===c&&(c=0),void 0===f&&(f=!1),s.promise(function(s,h){var m=e+c,y=u?F.startTracking(m):-1,v=f?M.getLocaleValue():void 0;p({method:"POST",url:e,basePath:n,useLocaleInfo:f}).then(function(c){c.onSuccess=function(t){if(u)try{var n=F.getRequestInfo(y,m);if(n.isOutOfOrder)return h(new a.Exceptions.OutOfOrderException("Response out of endpoint order: Endpoint= "+e+" Last= "+n.lastRequestId+" Got= "+y))}finally{F.stopTracking(m)}var r=200===t.statusCode,i=503===t.statusCode&&"application/json"===t.getHeader("Content-Type");if(!r&&!i)return void(404===t.statusCode?(d(!0),h(new a.Exceptions.ViewHasChangedException)):h(new a.Exceptions.CommunicationException("Request failed with status "+t.statusCode)));try{if(f){var l=t.getHeader(M.LocaleHeader);l&&v&&l!==v&&M.setLocaleValue(l)}var p=void 0;try{p=JSON.parse(t.responseText)}catch(e){return h(new a.Exceptions.CommunicationException("Invalid server response from "+c.url+": "+e.message,e.stack))}if(!i){if(p.versionInfo&&p.versionInfo.hasModuleVersionChanged){if(p.versionInfo.hasApiVersionChanged)return d(!0,p.versionInfo.isAutoUpgradeDisabled),void h(new a.Exceptions.ViewHasChangedException);d(!1,p.versionInfo.isAutoUpgradeDisabled)}if(o){var g=E(t);o(p,g)}}p.exception?h(a.getException(p.exception)):s(p.data)}catch(e){h(e)}},c.onError=function(){h(new a.Exceptions.CommunicationException("Request failed with an error"))},void 0!==r&&(c.onTimeout=function(){i&&i(),h(new a.Exceptions.CommunicationException("The connection has timed out"))}),_(c,l),T(c),g(c,JSON.stringify(t),n,r,L)}).catch(h)})}function b(e,t){return void 0===t&&(t=r.getBasePath),s.promise(function(n,r){var i="moduleservices/log",o=(new Date).getTime();p({method:"POST",url:i+"?clientTimeInMillis="+o,basePath:t()}).then(function(t){t.onSuccess=function(e){200===e.statusCode?n():r(new a.Exceptions.CommunicationException("Logger: Error sending log to "+i+". Error Code: "+e.statusCode))},t.onError=function(e){r(new a.Exceptions.CommunicationException("Logger: Error sending log to "+i+". Error Code: "+e.statusCode))},t.onAbort=function(e){r(new a.Exceptions.CommunicationException("Logger: Error sending log to "+i+" (Aborted). Error Code: "+e.statusCode))},t.onTimeout=function(e){r(new a.Exceptions.CommunicationException("Logger: Error sending log to "+i+" (Timeout)."))},t.setTimeout(x),T(t),t.setBody(JSON.stringify(e)),t.send()}).catch(r)})}function T(e){var t=i.getClientInfo();t&&t.device&&t.device.uuid&&e.setHeader(I+"device-uuid",t.device.uuid)}function _(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&e.setHeader(I+n,t[n])}function E(e){var t={};if(!e)return t;var n=e.headers||{};return Object.keys(n).filter(function(e){return!!e.match(N)}).reduce(function(e,t){var r=t.substr(I.length),i=n[t];return e[r]=i,e},t)}function w(e,t,n){L=e,t&&(A=t),n&&(O=n)}function D(e){return void 0===e&&(e=r.getBasePath),n.__awaiter(this,void 0,void 0,function(){var r=this;return n.__generator(this,function(i){return[2,new Promise(function(i,o){return n.__awaiter(r,void 0,void 0,function(){var r,s,u,c,l;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),r=t.ROLES_REQUEST_ENDPOINT,s=(new Date).getTime(),u=r+"?"+s,[4,p({method:"GET",url:u,basePath:e()})];case 1:return c=n.sent(),c.onSuccess=function(e){if(200===e.statusCode)try{i(JSON.parse(e.responseText).rolesInfo)}catch(e){o(e)}else o(new a.Exceptions.CommunicationException(S(r,{errorCode:e.statusCode})))},c.onError=function(e){o(new a.Exceptions.CommunicationException(S(r,{errorCode:e.statusCode})))},c.onAbort=function(e){o(new a.Exceptions.CommunicationException(S(r,{detail:"Aborted",errorCode:e.statusCode})))},c.onTimeout=function(e){o(new a.Exceptions.CommunicationException(S(r,{detail:"Timeout"})))},c.setTimeout(R),T(c),c.send(),[3,3];case 2:return l=n.sent(),o(l),[3,3];case 3:return[2]}})})})]})})}function S(e,t){var n=t.detail,r=t.errorCode;return"Error getting user roles from "+e+(n?" ("+n+")":"")+"."+(r?" Error Code: "+r:"")}Object.defineProperty(t,"__esModule",{value:!0}),t.getRoles=t.initialize=t.postLog=t.post=t.get=t.NetworkStatus=t.LocaleInfo=t.CSRF=t.ROLES_REQUEST_ENDPOINT=void 0;var x=1e4,I="OutSystems-",N=new RegExp("^"+I,"i");t.ROLES_REQUEST_ENDPOINT="moduleservices/roles";var A,O,C,R=1e4,L=!1;!function(e){function t(){var t=o.readCookie(A);if(null===t)return e.AnonymousCSRFToken;var n=/crf=([^;]+)/,r=t.match(n);if(null===r)throw new Error("Cookie format error: no 'crf' key found");return r[1]}e.CSRFHeader="X-CSRFToken",e.AnonymousCSRFToken="T6C+9iB49TLra4jEsMeSckDMNhQ=",e.getCSRFToken=t}(C=t.CSRF||(t.CSRF={}));var M;!function(e){function t(){var e=u.resolve(c.ServiceNames.LocaleService);if(e)return e.getCurrentLocale()}function n(e){var t=u.resolve(c.ServiceNames.LocaleService);t&&t.setCurrentLocale(e)}e.LocaleHeader=I+"locale",e.getLocaleValue=t,e.setLocaleValue=n}(M=t.LocaleInfo||(t.LocaleInfo={}));var P;!function(e){function t(){var e="undefined"!=typeof window?window:global;return e&&e.cordova&&e.navigator&&e.navigator.connection?"none"!==e.navigator.connection.type:e.navigator.onLine}function n(e){"undefined"!=typeof document&&document.addEventListener&&document.addEventListener("online",e,!1)}function i(e){"undefined"!=typeof document&&document.addEventListener&&document.addEventListener("offline",e,!1)}function o(e,t){void 0===t&&(t=r.getBasePath);return y("moduleservices/ping",e,!0,!1,!1,t())}e.isOnline=t,e.onOnline=n,e.onOffline=i,e.ping=o}(P||(P={})),t.NetworkStatus=P,t.get=y,t.post=v,t.postLog=b;var F;!function(e){function t(e){i++;var t=o[e];return t?(t.requestId=i,t.counter++):o[e]={requestId:i,counter:1},i}function n(e){var t=o[e];if(!t)throw new Error("There's no requestInfo for url : "+e);--t.counter<=0&&delete o[e]}function r(e,t){var n=o[t];if(!n)throw new Error("There's no requestInfo for url : "+t);var r=n.requestId;return{isOutOfOrder:r>e,lastRequestId:r}}var i=0,o={};e.startTracking=t,e.stopTracking=n,e.getRequestInfo=r}(F||(F={})),t.initialize=w,t.getRoles=D}),define("OutSystems/ClientRuntime/CSSHelper",["require","exports","./Logger","./Settings"],function(e,t,n,r){"use strict";function i(e,t){return t&&(e.classList?e.classList.add(t):s(e,t)||(e.className=e.className+" "+t)),e}function o(e,t){return t&&(e.classList?e.classList.remove(t):s(e,t)&&(e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,""))),e}function a(e,t,n){return(n?i:o)(e,t)}function s(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")>-1}function u(e){n.trace(b,"Setting number of stylesheet's load retries to "+e),_=e}function c(){return _}function l(e,t,n){if(0===e.length)return{loadStylesPromise:Promise.resolve(),triggerRemoveStyles:function(){}};var r=document.head||document.querySelector("head"),i=[].slice.call(document.querySelectorAll("link[data-os]")||[]).reverse(),o=[],a=[],s=[],u=void 0,c=0;e:for(var l=0,p=e.reverse();l<p.length;l++){for(var h=p[l],g=c;g<i.length;g++){var m=i[g];if(m.id===h){u=m,a.push(m),c=g+1;continue e}}var y=v(h,o,t,_,n);s.push({beforeElement:u,element:y}),u=y}f("Adding",s);for(var b=0,E=s;b<E.length;b++){var w=E[b],D=w.beforeElement,S=w.element;d("Adding",S.id),D?r.insertBefore(S,D):r.appendChild(S)}T+=1;var x=T,I=function(){if(T===x){f("Retaining",a);for(var e=0,t=a;e<t.length;e++){d("Retaining",t[e].id)}for(var n=0,r=i;n<r.length;n++){var o=r[n];o.parentNode&&-1===a.indexOf(o)&&(d("Removing",o.id),o.parentNode.removeChild(o))}}};return{loadStylesPromise:Promise.all(o),triggerRemoveStyles:I}}function f(e,t){n.trace(b,e+" "+t.length+" stylesheets : document '"+document.baseURI+"':")}function d(e,t){n.trace(b,e+" stylesheet '"+t+"' : document '"+document.baseURI+"'")}function p(e){n.trace(b,"Setting ignore load errors to "+e),E=e}function h(){return E}function g(e,t,r){void 0===r&&(r=""),E?n.trace(b,"Ignored error while loading stylesheet '"+e+"'"+r):t("Error loading stylesheet: '"+e+"'"+r)}function m(e){var t=document.createElement("link");return t.type="text/css",t.rel="stylesheet",t.id=e,t.href=e,t.setAttribute("data-os","true"),t}function y(e,t,r,i,o,a,s){if(0===a)return g(i,o,"\nNo retries left.\nFailed to load this stylesheet."),r.parentNode.removeChild(r),void e(t);null===s||void 0===s||s(),n.trace(b,"Error while loading stylesheet '"+i+"'. Retrying...");var u=m(i);u.onerror=function(){y(e,t,u,i,o,a-1,s)},u.onabort=r.onabort,u.onload=r.onload;var c=r.parentNode,l=r.nextElementSibling;r.parentNode.removeChild(r),l?c.insertBefore(u,l):c.appendChild(u)}function v(e,t,i,o,a){n.trace(b,"Loading stylesheet '"+e+"'");var s=m(e);return t.push(new Promise(function(t){s.onerror=function(n){var u=r.getEnvParams().CDNFilenameVersioning?o:0;y(t,n,s,e,i,u,a)},s.onabort=function(n){g(e,i),s.parentNode.removeChild(s),t(n)},s.onload=t})),s}Object.defineProperty(t,"__esModule",{value:!0}),t.getIgnoreLoadErrors=t.setIgnoreLoadErrors=t.scheduleCSSPreparation=t.getNumberOfStylesheetLoadRetries=t.setNumberOfStylesheetLoadRetries=t.hasClass=t.conditionClass=t.removeClass=t.addClass=void 0;var b="CSSHelper";t.addClass=i,t.removeClass=o,t.conditionClass=a,t.hasClass=s;var T=0,_=3;t.setNumberOfStylesheetLoadRetries=u,t.getNumberOfStylesheetLoadRetries=c,t.scheduleCSSPreparation=l;var E=!1;t.setIgnoreLoadErrors=p,t.getIgnoreLoadErrors=h}),define("OutSystems/ClientRuntime/modules/Database/AutoNumber",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n;!function(e){e[e.No=0]="No",e[e.Yes=1]="Yes",e[e.YesIfEmpty=2]="YesIfEmpty"}(n||(n={})),t.default=n}),define("OutSystems/ClientRuntime/modules/Database/DBDataType",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n;!function(e){e[e.TEXT=0]="TEXT",e[e.BINARY_DATA=1]="BINARY_DATA",e[e.BOOLEAN=2]="BOOLEAN",e[e.INTEGER=3]="INTEGER",e[e.LONGINTEGER=4]="LONGINTEGER",e[e.DECIMAL=5]="DECIMAL",e[e.DATE_TIME=6]="DATE_TIME",e[e.DATE=7]="DATE",e[e.TIME=8]="TIME",e[e.UNKNOWN=9]="UNKNOWN"}(n||(n={})),t.default=n}),define("OutSystems/ClientRuntime/Interfaces",["require","exports","./modules/Database/AutoNumber","./modules/Database/DBDataType"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NativeHttp=t.FeedbackMessage=t.Model=t.ClientDB=t.Application=void 0;!function(e){!function(e){e[e.Full=0]="Full",e[e.Minimal=1]="Minimal"}(e.InitializationType||(e.InitializationType={}))}(t.Application||(t.Application={}));!function(e){e.AutoNumber=n.default,e.DBDataType=r.default}(t.ClientDB||(t.ClientDB={}));!function(e){!function(e){e[e.Fetching=0]="Fetching",e[e.Fetched=1]="Fetched",e[e.Error=2]="Error"}(e.DataFetchStatus||(e.DataFetchStatus={}))}(t.Model||(t.Model={}));!function(e){!function(e){e[e.Info=0]="Info",e[e.Success=1]="Success",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(e.FeedbackMessageType||(e.FeedbackMessageType={}))}(t.FeedbackMessage||(t.FeedbackMessage={}));!function(e){!function(e){e[e.Created=0]="Created",e[e.Sent=1]="Sent",e[e.Receiving=2]="Receiving",e[e.Aborting=3]="Aborting",e[e.Finished=4]="Finished"}(e.NativeHttpRequestReadyState||(e.NativeHttpRequestReadyState={}))}(t.NativeHttp||(t.NativeHttp={}))}),define("OutSystems/ClientRuntime/RegExpHelper",["require","exports"],function(e,t){"use strict";function n(e,t,n){void 0===n&&(n=!1);for(var r=[],i=new RegExp(t,"g"+(n?"i":"")),a=i.exec(e);a;)r.push(new o(a,i.lastIndex)),a=i.exec(e);return r}function r(e,t,r,i){void 0===r&&(r=!1);for(var o=n(e,t,r),a=e,s=0,u=0;u<o.length;u++){var c=o[u],l=i(c);a=a.substr(0,c.index+s)+l+a.substr(s+c.index+c.length),s+=l.length-c.length}return a}function i(e){return e?e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"):e}Object.defineProperty(t,"__esModule",{value:!0}),t.escape=t.replace=t.matches=t.Match=void 0;var o=function(){function e(e,t){this._groups=e,this._index=t-this._groups[0].length}return Object.defineProperty(e.prototype,"value",{get:function(){return this._groups[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._groups[0].length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groups",{get:function(){return this._groups},enumerable:!1,configurable:!0}),e}();t.Match=o,t.matches=n,t.replace=r,t.escape=i}),define("OutSystems/ClientRuntime/Database",["require","exports","tslib","./Exceptions","./Flow","./Interfaces","./Logger","./NativeHelper","./RegExpHelper"],function(e,t,n,r,i,o,a,s,u){"use strict";function c(e){a.error("Database",l),"undefined"!=typeof SQLError&&e instanceof SQLError?a.error("Database","SQLError "+e.code+": "+e.message):a.error("Database",e)}Object.defineProperty(t,"__esModule",{value:!0}),t.SqlDbIntrospector=t.SqlDbProvider=void 0;var l="Failed to execute canary query (probably due to zombie transaction)",f=function(){function e(e){this.callback=e}return e}(),d=function(e){function t(t){var n=e.call(this,t)||this;return n.callback=t,n}return n.__extends(t,e),t}(f),p=function(e){function t(t){var n=e.call(this,t)||this;return n.callback=t,n}return n.__extends(t,e),t}(f),h=function(){function e(e,t){void 0===t&&(t=!0),this.tx=e,this.allowTraces=t,this.chain=[],this.pendingResult=null,this.hasPendingResult=!1,this.pendingError=null,this.hasPendingError=!1,this.parent=null}return e.prototype.cloneForNext=function(){var t=new e(this.tx,this.allowTraces);return t.parent=this,t},e.prototype.andThen=function(e){return this.hasPendingError||(this.chain.push(new d(e)),this.triggerPendingResults()),this},e.prototype.withoutTraces=function(e){return this.andThen(function(t,n){return t.allowTraces=!1,e(t,n)})},e.prototype.andThenAll=function(e){return this.andThen(function(t,n){var r=e(n),i=t.feed(void 0);if(r)for(var o=0;o<r.length;o++)i=i.andThen(r[o]);return i.andThen(function(){})})},e.prototype.extractScalar=function(e){var t=Object.keys(e);if(1===t.length){return e[t[0]]}throw new r.Exceptions.DataBaseException("","Invalid use of 'extractScalar': the row should have a single column, but found '"+t.join("', '")+"'")},e.prototype.executeScalar=function(e,t){var n=this;return this.executeQueryRaw(e,t).andThen(function(e,t){return 0===t.rows.length?void 0:n.extractScalar(t.rows.item(0))})},e.prototype.executeQuery=function(e,t,n){return this.executeQueryRaw(e,n).andThen(function(e,n){for(var r=new Array(n.rows.length),i=0;i<n.rows.length;i++){var o=n.rows.item(i);r[i]=t(o)}return r})},e.prototype.executeNonQuery=function(e,t){return this.executeQueryRaw(e,t).andThen(function(e,t){})},e.prototype.executeQueryRaw=function(t,n){var r=this,i=e.queryCount++,o=n||[];return this.traceQuery(i,t,o),this.tx.executeSql(t,n,function(e,t){try{r.continueWithNext(t)}catch(t){r.abortExplicitly(e,t)}},function(e,t){return r.trace("SQL command #"+i+" failed with error "+t.message),r.abort(t)}),this},e.prototype.feed=function(e){return this.hasPendingResult=!0,this.pendingResult=e,this},e.prototype.onError=function(e){return this.chain.push(new p(e)),this.triggerPendingError(),this},e.prototype.nextCallback=function(e){for(var t=0;t<this.chain.length;t++)if(e(this.chain[t])){var n=this.chain[t].callback;return this.chain=this.chain.slice(t+1,this.chain.length),n}return null},e.prototype.nextErrorCallback=function(){return this.nextCallback(function(e){return e instanceof p})},e.prototype.hasErrorCallback=function(){return this.chain.some(function(e){return e instanceof p})},e.prototype.nextSuccessCallback=function(){return this.nextCallback(function(e){return e instanceof d})},e.prototype.abort=function(e){var t=this.nextErrorCallback();if(t){this.pendingError=null,this.hasPendingError=!1;try{var n=!1,r=function(){n=!0},i=t(e,r);return n?this.chain=[]:this.continueWithNext(i),n}catch(e){if(this.hasErrorCallback())return this.abort(e);if(this.parent)return this.parent.abort(e);throw e}}else this.pendingError=e,this.hasPendingError=!0;return!this.parent||this.parent.abort(e)},e.prototype.abortExplicitly=function(e,t){this.abort(t)&&e.executeSql("ABORT_TRANSACTION",null,function(){},function(){return!0})},e.prototype.continueWithNext=function(t){var n=this;if(this.hasPendingResult=!1,t instanceof e)return void t.andThen(function(e,t){n.continueWithNext(t)});if(t instanceof Array&&0!==t.length&&t[0]instanceof e){var r=0,i=function(){r<t.length?(t[r].andThen(i),r++):n.continueWithNext(t)};return void i()}if(this.chain.length>0){var o=this.nextSuccessCallback();if(o)return void this.continueWithNext(this.tryNextItem(o,this.cloneForNext(),t))}this.hasPendingResult=!0,this.pendingResult=t},e.prototype.tryNextItem=function(e,t,n){try{return e(t,n)}catch(e){this.abortExplicitly(this.tx,e)}},e.prototype.triggerPendingResults=function(){this.hasPendingResult&&(this.hasPendingResult=!1,this.continueWithNext(this.pendingResult))},e.prototype.triggerPendingError=function(){this.hasPendingError&&(this.hasPendingError=!1,this.abort(this.pendingError))},e.prototype.trace=function(e){this.allowTraces&&a.trace(this,e)},e.prototype.traceQuery=function(e,t,n){this.allowTraces&&a.trace(this,function(){var r=(n||[]).map(function(e){return String(e).substr(0,80)});return"Executing SQL command #"+e+": "+t+" with arguments "+r})},e.for=function(t){return new e(t)},e.queryCount=0,e}(),g=function(){function e(e,t){this.dbName=e,this.db=t,this.txCount=0,this.setDispose()}return e.prototype.setDispose=function(){var e=this,t=this.db;window&&t&&t.close&&window.addEventListener("unload",function(){e.trace("Closing database "+e.name),t.close(function(){return e.trace("Database "+e.name+" closed successfully")},function(t){return a.error("SqlDatabase","Database "+e.name+" failed to close",t)})},!1)},Object.defineProperty(e.prototype,"name",{get:function(){return this.dbName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMock",{get:function(){return!1},enumerable:!1,configurable:!0}),e.prototype.executeTransaction=function(e,t){return void 0===t&&(t=!0),this.innerExecuteTransaction(e,!1,t)},e.prototype.executeReadTransaction=function(e,t){return void 0===t&&(t=!0),this.innerExecuteTransaction(e,!0,t)},e.prototype.innerExecuteTransaction=function(e,t,n){var o=this,a=t?"READ":"WRITE",s=t?this.db.readTransaction:this.db.transaction,u=++this.txCount;return i.promise(function(t,i){var c,l;o.trace("Opening local storage "+a+" transaction #"+u+" on database "+o.name,n),s.call(o.db,function(t){o.trace("Executing local storage "+a+" transaction #"+u+" on database "+o.name,n);var r=h.for(t).feed(void 0);return r=n?r.andThen(e):r.withoutTraces(e),r.andThen(function(e,t){return c=t}).onError(function(e,t){l=e,t()})},function(e){l=l||e;var t=l&&l.message?l:new Error(l);return o.trace("Rolled back local storage "+a+" transaction #"+u+" on database "+o.name+": "+t.message,n),i(new r.Exceptions.DataBaseException("",t.message.toString())),!0},function(){o.trace("Committed local storage "+a+" transaction #"+u+" on database "+o.name,n),t(c)})})},e.prototype.testConnection=function(){var e=this,t=0;return this.trace("Starting to test on database connections. Performing #5 test queries."),Promise.all(Array.apply(null,{length:5}).map(function(n,r){return new Promise(function(n){e.executeTransaction(function(e){return e.executeQueryRaw("SELECT 1").onError(function(e,n){c(e),t++})}).catch(function(e){c(e),t++}).then(function(){n()})})})).then(function(){e.trace("Finished tests on database connections. #"+(5-t)+" out of #5 successfull queries.")})},e.prototype.trace=function(e,t){void 0===t&&(t=!0),t&&a.trace(this,e)},e}(),m=function(){function e(e,t){this.dbName=e,this.db=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this.dbName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMock",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.executeTransaction=function(e,t){return void 0===t&&(t=!0),i.resolve()},e.prototype.executeReadTransaction=function(e,t){return void 0===t&&(t=!0),i.resolve()},e.prototype.testConnection=function(){return Promise.resolve()},e}(),y=function(){function e(){this.dbCache={}}return e.prototype.trace=function(e){a.trace(this,e)},e.prototype.asSafeDbName=function(e){return e||""},e.prototype.openDb=function(e){var t=this;return e=this.asSafeDbName(e),i.promise(function(n,i){t.dbCache[e]?n(t.dbCache[e]):s.ensureNativeReady().then(function(){if("undefined"==typeof window)return i(new r.Exceptions.SystemException("Database is only available in the browser/web view"));var o=window;if(s.isRunningOnNative())if(o.sqlitePlugin){t.trace("Opening database '"+e+"'");try{o.sqlitePlugin.openDatabase({name:e,location:"default"},function(o){o?(t.trace("Database '"+e+"' opened successfully"),t.dbCache[e]=new g(e,o),n(t.dbCache[e])):(t.trace("Error opening database '"+e+"'"),i(new r.Exceptions.OpenDatabaseException("Could not open database '"+e+"'")))},function(n){t.trace("Error opening database '"+e+"' "+n.message),i(new r.Exceptions.OpenDatabaseException("Could not open database '"+e+"': "+n.message.toString()))})}catch(t){i(new r.Exceptions.OpenDatabaseException("Could not open database '"+e+"': "+t.message.toString()))}}else i(new r.Exceptions.OpenDatabaseException("No database driver available"));else if(o.openDatabase)try{t.trace("Opening database '"+e+"'");var a=o.openDatabase(e,"1.0",e,5242880);a?(t.trace("Database '"+e+"' opened successfully"),t.dbCache[e]=new g(e,a),n(t.dbCache[e])):(t.trace("Error opening database '"+e+"'"),i(new r.Exceptions.OpenDatabaseException("Could not open database '"+e+"'")))}catch(t){i(new r.Exceptions.OpenDatabaseException("Could not open database '"+e+"': "+t.message.toString()))}else{var u=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),c=!!o.chrome,l="Your app requires native access to a Local Storage database that is not available in your browser.\n\nPlease test your app in your mobile device"+(u||c?"":", or use Google Chrome or Safari web browsers")+".";alert(l),i(new r.Exceptions.SystemException(l))}}).catch(i)})},e.prototype.mockDb=function(e){return i.resolve(new m(e,null))},e}();t.SqlDbProvider=new y;var v;!function(e){e[e.Full=0]="Full",e[e.Type=1]="Type",e[e.Length=3]="Length",e[e.Decimals=5]="Decimals"}(v||(v={}));var b=function(){function e(){}return e.prototype.tableExists=function(e,t){return e.executeReadTransaction(function(e){return e.executeScalar("SELECT COUNT(*) FROM sqlite_master WHERE type = 'table' AND name = UPPER(?)",[t]).andThen(function(e,t){return 0!==t})})},e.prototype.columnExists=function(e,t,n){return e.executeReadTransaction(function(e){return e.executeScalar('SELECT "'+t+'"."'+n+'" FROM "'+t+'" LIMIT 1')}).then(function(){return!0}).catch(function(){return!1})},e.prototype.dbTypeFromSchemaType=function(e){switch(e=e||"",e.toUpperCase()){case"INTEGER":return o.ClientDB.DBDataType.INTEGER;case"BIGINT":return o.ClientDB.DBDataType.LONGINTEGER;case"REAL":return o.ClientDB.DBDataType.DECIMAL;case"BOOLEAN":return o.ClientDB.DBDataType.BOOLEAN;case"TEXT":return o.ClientDB.DBDataType.TEXT;case"DATE":return o.ClientDB.DBDataType.DATE;case"TIME":return o.ClientDB.DBDataType.TIME;case"DATETIME":return o.ClientDB.DBDataType.DATE_TIME;case"BLOB":return o.ClientDB.DBDataType.BINARY_DATA;default:return o.ClientDB.DBDataType.UNKNOWN}},e.prototype.pragmaToTableInfo=function(e,t,n){var r=this;return t=t||"",{tableName:e,idIsAutoNumber:t.search(/INTEGER PRIMARY KEY AUTOINCREMENT/i)>=0?o.ClientDB.AutoNumber.YesIfEmpty:o.ClientDB.AutoNumber.No,attributes:n.map(function(e){var t=u.matches(e.type,"^([a-z]+)(\\(([0-9]+)(\\,([0-9]+))?\\))?$",!0).shift();if(t){var n=r.dbTypeFromSchemaType(t.groups[1]);return{name:e.name,columnName:e.name?e.name.toUpperCase():null,type:n,length:t.groups[3]?parseInt(t.groups[3],10):void 0,decimals:t.groups[5]?parseInt(t.groups[5],10):void 0,isEntityReference:"NULL"===e.dflt_value&&r.isIdentifierUnderlyingType(n),isPrimaryKey:1===e.pk}}})}},e.prototype.isIdentifierUnderlyingType=function(e){switch(e){case o.ClientDB.DBDataType.INTEGER:case o.ClientDB.DBDataType.LONGINTEGER:case o.ClientDB.DBDataType.TEXT:return!0;default:return!1}},e.prototype.introspectTableInfo=function(e,t){var n=this;if(!s.isRunningOnNative())return e.feed(null);var r;return e.executeScalar("SELECT sql FROM sqlite_master WHERE type = 'table' AND name = '"+t+"'").andThen(function(e,t){return r=t}).andThen(function(e,n){return e.executeQuery("PRAGMA table_info('"+t+"')",function(e){return e})}).andThen(function(e,i){return n.pragmaToTableInfo(t,r,i)})},e}();t.SqlDbIntrospector=new b}),function(e){"use strict";function t(e){var t,n,r,i=e.length-1,o="",a=e[0];if(0<i){for(o+=a,t=1;t<i;t++)r=e[t]+"",(n=Le-r.length)&&(o+=h(n)),o+=r;a=e[t],(n=Le-(r=a+"").length)&&(o+=h(n))}else if(0===a)return"0";for(;a%10==0;)a/=10;return o+a}function n(e,t,n){if(e!==~~e||e<t||n<e)throw Error(we+e)}function r(e,t,n,r){for(var i,o,a=e[0];10<=a;a/=10)--t;return--t<0?(t+=Le,i=0):(i=Math.ceil((t+1)/Le),t%=Le),a=Ie(10,Le-t),o=e[i]%a|0,null==r?t<3?(0==t?o=o/100|0:1==t&&(o=o/10|0),n<4&&99999==o||3<n&&49999==o||5e4==o||0==o):(n<4&&o+1==a||3<n&&o+1==a/2)&&(e[i+1]/a/100|0)==Ie(10,t-2)-1||(o==a/2||0==o)&&0==(e[i+1]/a/100|0):t<4?(0==t?o=o/1e3|0:1==t?o=o/100|0:2==t&&(o=o/10|0),(r||n<4)&&9999==o||!r&&3<n&&4999==o):((r||n<4)&&o+1==a||!r&&3<n&&o+1==a/2)&&(e[i+1]/a/1e3|0)==Ie(10,t-3)-1}function i(e,t,n){for(var r,i,o=[0],a=0,s=e.length;a<s;){for(i=o.length;i--;)o[i]*=t;for(o[0]+=ye.indexOf(e.charAt(a++)),r=0;r<o.length;r++)o[r]>n-1&&(void 0===o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}function o(e,t,n){var r,i=0,o=e.length;for(e=e.slice();o--;)r=e[o]*t+i,e[o]=r%n|0,i=r/n|0;return i&&e.unshift(i),e}function a(e,t,n,r){var i,o;if(n!=r)o=r<n?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function s(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&1<e.length;)e.shift()}function u(e,t,n,r){var i,o,a,s,u,c,l,f,d,p=e.constructor
;e:if(null!=t){if(!(f=e.d))return e;for(i=1,s=f[0];10<=s;s/=10)i++;if((o=t-i)<0)o+=Le,a=t,u=(l=f[d=0])/Ie(10,i-a-1)%10|0;else if(d=Math.ceil((o+1)/Le),(s=f.length)<=d){if(!r)break e;for(;s++<=d;)f.push(0);l=u=0,a=(o%=Le)-Le+(i=1)}else{for(l=s=f[d],i=1;10<=s;s/=10)i++;u=(a=(o%=Le)-Le+i)<0?0:l/Ie(10,i-a-1)%10|0}if(r=r||t<0||void 0!==f[d+1]||(a<0?l:l%Ie(10,i-a-1)),c=n<4?(u||r)&&(0==n||n==(e.s<0?3:2)):5<u||5==u&&(4==n||r||6==n&&(0<o?0<a?l/Ie(10,i-a):0:f[d-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,c?(t-=e.e+1,f[0]=Ie(10,(Le-t%Le)%Le),e.e=-t||0):f[0]=e.e=0,e;if(0==o?(f.length=d,s=1,d--):(f.length=d+1,s=Ie(10,Le-o),f[d]=0<a?(l/Ie(10,i-a)%Ie(10,a)|0)*s:0),c)for(;;){if(0==d){for(o=1,a=f[0];10<=a;a/=10)o++;for(a=f[0]+=s,s=1;10<=a;a/=10)s++;o!=s&&(e.e++,f[0]==Re&&(f[0]=1));break}if(f[d]+=s,f[d]!=Re)break;f[d--]=0,s=1}for(o=f.length;0===f[--o];)f.pop()}return _e&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function c(e,n,r){if(!e.isFinite())return T(e);var i,o=e.e,a=t(e.d),s=a.length;return n?(r&&0<(i=r-s)?a=a.charAt(0)+"."+a.slice(1)+h(i):1<s&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):o<0?(a="0."+h(-o-1)+a,r&&0<(i=r-s)&&(a+=h(i))):s<=o?(a+=h(o+1-s),r&&0<(i=r-o-1)&&(a=a+"."+h(i))):((i=o+1)<s&&(a=a.slice(0,i)+"."+a.slice(i)),r&&0<(i=r-s)&&(o+1===s&&(a+="."),a+=h(i))),a}function l(e,t){var n=e[0];for(t*=Le;10<=n;n/=10)t++;return t}function f(e,t,n){if(Me<t)throw _e=!0,n&&(e.precision=n),Error(De);return u(new e(ve),t,1,!0)}function d(e,t,n){if(Pe<t)throw Error(De);return u(new e(be),t,n,!0)}function p(e){var t=e.length-1,n=t*Le+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];10<=t;t/=10)n++}return n}function h(e){for(var t="";e--;)t+="0";return t}function g(e,t,n,r){var i,o=new e(1),a=Math.ceil(r/Le+4);for(_e=!1;;){if(n%2&&x((o=o.times(t)).d,a)&&(i=!0),0===(n=xe(n/2))){n=o.d.length-1,i&&0===o.d[n]&&++o.d[n];break}x((t=t.times(t)).d,a)}return _e=!0,o}function m(e){return 1&e.d[e.d.length-1]}function y(e,t,n){for(var r,i=new e(t[0]),o=0;++o<t.length;){if(!(r=new e(t[o])).s){i=r;break}i[n](r)&&(i=r)}return i}function v(e,n){var i,o,a,s,c,l,f,d=0,p=0,h=0,g=e.constructor,m=g.rounding,y=g.precision;if(!e.d||!e.d[0]||17<e.e)return new g(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(f=null==n?(_e=!1,y):n,l=new g(.03125);-2<e.e;)e=e.times(l),h+=5;for(f+=o=Math.log(Ie(2,h))/Math.LN10*2+5|0,i=s=c=new g(1),g.precision=f;;){if(s=u(s.times(e),f,1),i=i.times(++p),t((l=c.plus(Ve(s,i,f,1))).d).slice(0,f)===t(c.d).slice(0,f)){for(a=h;a--;)c=u(c.times(c),f,1);if(null!=n)return g.precision=y,c;if(!(d<3&&r(c.d,f-o,m,d)))return u(c,g.precision=y,m,_e=!0);g.precision=f+=10,i=s=l=new g(1),p=0,d++}c=l}}function b(e,n){var i,o,a,s,c,l,d,p,h,g,m,y=1,v=e,T=v.d,_=v.constructor,E=_.rounding,w=_.precision;if(v.s<0||!T||!T[0]||!v.e&&1==T[0]&&1==T.length)return new _(T&&!T[0]?-1/0:1!=v.s?NaN:T?0:v);if(h=null==n?(_e=!1,w):n,_.precision=h+=10,o=(i=t(T)).charAt(0),!(Math.abs(s=v.e)<15e14))return p=f(_,h+2,w).times(s+""),v=b(new _(o+"."+i.slice(1)),h-10).plus(p),_.precision=w,null==n?u(v,w,E,_e=!0):v;for(;o<7&&1!=o||1==o&&3<i.charAt(1);)o=(i=t((v=v.times(e)).d)).charAt(0),y++;for(s=v.e,1<o?(v=new _("0."+i),s++):v=new _(o+"."+i.slice(1)),d=c=v=Ve((g=v).minus(1),v.plus(1),h,1),m=u(v.times(v),h,1),a=3;;){if(c=u(c.times(m),h,1),t((p=d.plus(Ve(c,new _(a),h,1))).d).slice(0,h)===t(d.d).slice(0,h)){if(d=d.times(2),0!==s&&(d=d.plus(f(_,h+2,w).times(s+""))),d=Ve(d,new _(y),h,1),null!=n)return _.precision=w,d;if(!r(d.d,h-10,E,l))return u(d,_.precision=w,E,_e=!0);_.precision=h+=10,p=c=v=Ve(g.minus(1),g.plus(1),h,1),m=u(v.times(v),h,1),a=l=1}d=p,a+=2}}function T(e){return String(e.s*e.s/0)}function _(e,t){var n,r,i;for(-1<(n=t.indexOf("."))&&(t=t.replace(".","")),0<(r=t.search(/e/i))?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(i=t.length;48===t.charCodeAt(i-1);--i);if(t=t.slice(r,i)){if(i-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%Le,n<0&&(r+=Le),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=Le;r<i;)e.d.push(+t.slice(r,r+=Le));t=t.slice(r),r=Le-t.length}else r-=i;for(;r--;)t+="0";e.d.push(+t),_e&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function E(e,t,n,r,i){var o,a,s,u,c=e.precision,l=Math.ceil(c/Le);for(_e=!1,u=n.times(n),s=new e(r);;){if(a=Ve(s.times(u),new e(t++*t++),c,1),s=i?r.plus(a):r.minus(a),r=Ve(a.times(u),new e(t++*t++),c,1),void 0!==(a=s.plus(r)).d[l]){for(o=l;a.d[o]===s.d[o]&&o--;);if(-1==o)break}o=s,s=r,r=a,a=o}return _e=!0,a.d.length=l+1,a}function w(e,t){for(var n=e;--t;)n*=e;return n}function D(e,t){var n,r=t.s<0,i=d(e,e.precision,1),o=i.times(.5);if((t=t.abs()).lte(o))return he=r?4:1,t;if((n=t.divToInt(i)).isZero())he=r?3:2;else{if((t=t.minus(n.times(i))).lte(o))return he=m(n)?r?2:3:r?4:1,t;he=m(n)?r?1:4:r?3:2}return t.minus(i).abs()}function S(e,t,r,o){var a,s,u,l,f,d,p,h,g,m=e.constructor,y=void 0!==r;if(y?(n(r,1,me),void 0===o?o=m.rounding:n(o,0,8)):(r=m.precision,o=m.rounding),e.isFinite()){for(y?(a=2,16==t?r=4*r-3:8==t&&(r=3*r-2)):a=t,0<=(u=(p=c(e)).indexOf("."))&&(p=p.replace(".",""),(g=new m(1)).e=p.length-u,g.d=i(c(g),10,a),g.e=g.d.length),s=f=(h=i(p,10,a)).length;0==h[--f];)h.pop();if(h[0]){if(u<0?s--:((e=new m(e)).d=h,e.e=s,h=(e=Ve(e,g,r,o,0,a)).d,s=e.e,d=de),u=h[r],l=a/2,d=d||void 0!==h[r+1],d=o<4?(void 0!==u||d)&&(0===o||o===(e.s<0?3:2)):l<u||u===l&&(4===o||d||6===o&&1&h[r-1]||o===(e.s<0?8:7)),h.length=r,d)for(;++h[--r]>a-1;)h[r]=0,r||(++s,h.unshift(1));for(f=h.length;!h[f-1];--f);for(u=0,p="";u<f;u++)p+=ye.charAt(h[u]);if(y){if(1<f)if(16==t||8==t){for(u=16==t?4:3,--f;f%u;f++)p+="0";for(f=(h=i(p,a,t)).length;!h[f-1];--f);for(u=1,p="1.";u<f;u++)p+=ye.charAt(h[u])}else p=p.charAt(0)+"."+p.slice(1);p=p+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)p="0"+p;p="0."+p}else if(++s>f)for(s-=f;s--;)p+="0";else s<f&&(p=p.slice(0,s)+"."+p.slice(s))}else p=y?"0p+0":"0";p=(16==t?"0x":2==t?"0b":8==t?"0o":"")+p}else p=T(e);return e.s<0?"-"+p:p}function x(e,t){return e.length>t&&(e.length=t,1)}function I(e){return new this(e).abs()}function N(e){return new this(e).acos()}function A(e){return new this(e).acosh()}function O(e,t){return new this(e).plus(t)}function C(e){return new this(e).asin()}function R(e){return new this(e).asinh()}function L(e){return new this(e).atan()}function M(e){return new this(e).atanh()}function P(e,t){e=new this(e),t=new this(t);var n,r=this.precision,i=this.rounding,o=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?d(this,r,i):new this(0)).s=e.s:!e.d||t.isZero()?(n=d(this,o,1).times(.5)).s=e.s:n=t.s<0?(this.precision=o,this.rounding=1,n=this.atan(Ve(e,t,o,1)),t=d(this,o,1),this.precision=r,this.rounding=i,e.s<0?n.minus(t):n.plus(t)):this.atan(Ve(e,t,o,1)):(n=d(this,o,1).times(0<t.s?.25:.75)).s=e.s:n=new this(NaN),n}function F(e){return new this(e).cbrt()}function V(e){return u(e=new this(e),e.e+1,2)}function j(e){if(!e||"object"!=typeof e)throw Error(Ee+"Object expected");for(var t,n,r=!0===e.defaults,i=["precision",1,me,"rounding",0,8,"toExpNeg",-ge,0,"toExpPos",0,ge,"maxE",0,ge,"minE",-ge,0,"modulo",0,9],o=0;o<i.length;o+=3)if(t=i[o],r&&(this[t]=Te[t]),void 0!==(n=e[t])){if(!(xe(n)===n&&i[o+1]<=n&&n<=i[o+2]))throw Error(we+t+": "+n);this[t]=n}if(t="crypto",r&&(this[t]=Te[t]),void 0!==(n=e[t])){if(!0!==n&&!1!==n&&0!==n&&1!==n)throw Error(we+t+": "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(Se);this[t]=!0}else this[t]=!1}return this}function U(e){return new this(e).cos()}function B(e){return new this(e).cosh()}function k(e,t){return new this(e).div(t)}function q(e){return new this(e).exp()}function z(e){return u(e=new this(e),e.e+1,3)}function H(){var e,t,n=new this(0);for(_e=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return _e=!0,new this(1/0);n=t}return _e=!0,n.sqrt()}function G(e){return e instanceof fe||e&&"[object Decimal]"===e.name||!1}function W(e){return new this(e).ln()}function K(e,t){return new this(e).log(t)}function J(e){return new this(e).log(2)}function Q(e){return new this(e).log(10)}function Y(){return y(this,arguments,"lt")}function X(){return y(this,arguments,"gt")}function $(e,t){return new this(e).mod(t)}function Z(e,t){return new this(e).mul(t)}function ee(e,t){return new this(e).pow(t)}function te(e){var t,r,i,o,a=0,s=new this(1),u=[];if(void 0===e?e=this.precision:n(e,1,me),i=Math.ceil(e/Le),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(i));a<i;)429e7<=(o=t[a])?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:u[a++]=o%1e7;else{if(!crypto.randomBytes)throw Error(Se);for(t=crypto.randomBytes(i*=4);a<i;)214e7<=(o=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((127&t[a+3])<<24))?crypto.randomBytes(4).copy(t,a):(u.push(o%1e7),a+=4);a=i/4}else for(;a<i;)u[a++]=1e7*Math.random()|0;for(i=u[--a],e%=Le,i&&e&&(o=Ie(10,Le-e),u[a]=(i/o|0)*o);0===u[a];a--)u.pop();if(a<0)u=[r=0];else{for(r=-1;0===u[0];r-=Le)u.shift();for(i=1,o=u[0];10<=o;o/=10)i++;i<Le&&(r-=Le-i)}return s.e=r,s.d=u,s}function ne(e){return u(e=new this(e),e.e+1,this.rounding)}function re(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function ie(e){return new this(e).sin()}function oe(e){return new this(e).sinh()}function ae(e){return new this(e).sqrt()}function se(e,t){return new this(e).sub(t)}function ue(e){return new this(e).tan()}function ce(e){return new this(e).tanh()}function le(e){return u(e=new this(e),e.e+1,1)}var fe,de,pe,he,ge=9e15,me=1e9,ye="0123456789abcdef",ve="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",be="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",Te={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-ge,maxE:ge,crypto:!1},_e=!0,Ee="[DecimalError] ",we=Ee+"Invalid argument: ",De=Ee+"Precision limit exceeded",Se=Ee+"crypto unavailable",xe=Math.floor,Ie=Math.pow,Ne=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Ae=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Oe=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Ce=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Re=1e7,Le=7,Me=ve.length-1,Pe=be.length-1,Fe={name:"[object Decimal]"};Fe.absoluteValue=Fe.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),u(e)},Fe.ceil=function(){return u(new this.constructor(this),this.e+1,2)},Fe.comparedTo=Fe.cmp=function(e){var t,n,r,i,o=this,a=o.d,s=(e=new o.constructor(e)).d,u=o.s,c=e.s;if(!a||!s)return u&&c?u!==c?u:a===s?0:!a^u<0?1:-1:NaN;if(!a[0]||!s[0])return a[0]?u:s[0]?-c:0;if(u!==c)return u;if(o.e!==e.e)return o.e>e.e^u<0?1:-1;for(t=0,n=(r=a.length)<(i=s.length)?r:i;t<n;++t)if(a[t]!==s[t])return a[t]>s[t]^u<0?1:-1;return r===i?0:i<r^u<0?1:-1},Fe.cosine=Fe.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Le,r.rounding=1,n=function(e,t){var n,r,i=t.d.length;r=i<32?(n=Math.ceil(i/3),(1/w(4,n)).toString()):(n=16,"2.3283064365386962890625e-10"),e.precision+=n,t=E(e,1,t.times(r),new e(1));for(var o=n;o--;){var a=t.times(t);t=a.times(a).minus(a).times(8).plus(1)}return e.precision-=n,t}(r,D(r,n)),r.precision=e,r.rounding=t,u(2==he||3==he?n.neg():n,e,t,!0)):new r(1):new r(NaN)},Fe.cubeRoot=Fe.cbrt=function(){var e,n,r,i,o,a,s,c,l,f,d=this,p=d.constructor;if(!d.isFinite()||d.isZero())return new p(d);for(_e=!1,(a=d.s*Ie(d.s*d,1/3))&&Math.abs(a)!=1/0?i=new p(a.toString()):(r=t(d.d),(a=((e=d.e)-r.length+1)%3)&&(r+=1==a||-2==a?"0":"00"),a=Ie(r,1/3),e=xe((e+1)/3)-(e%3==(e<0?-1:2)),(i=new p(r=a==1/0?"5e"+e:(r=a.toExponential()).slice(0,r.indexOf("e")+1)+e)).s=d.s),s=(e=p.precision)+3;;)if(f=(l=(c=i).times(c).times(c)).plus(d),i=Ve(f.plus(d).times(c),f.plus(l),s+2,1),t(c.d).slice(0,s)===(r=t(i.d)).slice(0,s)){if("9999"!=(r=r.slice(s-3,s+1))&&(o||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(u(i,e+1,1),n=!i.times(i).times(i).eq(d));break}if(!o&&(u(c,e+1,0),c.times(c).times(c).eq(d))){i=c;break}s+=4,o=1}return _e=!0,u(i,e,p.rounding,n)},Fe.decimalPlaces=Fe.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=((e=t.length-1)-xe(this.e/Le))*Le,e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},Fe.dividedBy=Fe.div=function(e){return Ve(this,new this.constructor(e))},Fe.dividedToIntegerBy=Fe.divToInt=function(e){var t=this.constructor;return u(Ve(this,new t(e),0,1,1),t.precision,t.rounding)},Fe.equals=Fe.eq=function(e){return 0===this.cmp(e)},Fe.floor=function(){return u(new this.constructor(this),this.e+1,3)},Fe.greaterThan=Fe.gt=function(e){return 0<this.cmp(e)},Fe.greaterThanOrEqualTo=Fe.gte=function(e){var t=this.cmp(e);return 1==t||0===t},Fe.hyperbolicCosine=Fe.cosh=function(){var e,t,n,r,i,o=this,a=o.constructor,s=new a(1);if(!o.isFinite())return new a(o.s?1/0:NaN);if(o.isZero())return s;n=a.precision,r=a.rounding,a.precision=n+Math.max(o.e,o.sd())+4,a.rounding=1,t=(i=o.d.length)<32?(1/w(4,e=Math.ceil(i/3))).toString():(e=16,"2.3283064365386962890625e-10"),o=E(a,1,o.times(t),new a(1),!0);for(var c,l=e,f=new a(8);l--;)c=o.times(o),o=s.minus(c.times(f.minus(c.times(f))));return u(o,a.precision=n,a.rounding=r,!0)},Fe.hyperbolicSine=Fe.sinh=function(){var e,t,n,r,i=this,o=i.constructor;if(!i.isFinite()||i.isZero())return new o(i);if(t=o.precision,n=o.rounding,o.precision=t+Math.max(i.e,i.sd())+4,o.rounding=1,(r=i.d.length)<3)i=E(o,2,i,i,!0);else{e=16<(e=1.4*Math.sqrt(r))?16:0|e,i=E(o,2,i=i.times(1/w(5,e)),i,!0);for(var a,s=new o(5),c=new o(16),l=new o(20);e--;)a=i.times(i),i=i.times(s.plus(a.times(c.times(a).plus(l))))}return u(i,o.precision=t,o.rounding=n,!0)},Fe.hyperbolicTangent=Fe.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,Ve(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},Fe.inverseCosine=Fe.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),i=n.precision,o=n.rounding;return-1!==r?0===r?t.isNeg()?d(n,i,o):new n(0):new n(NaN):t.isZero()?d(n,i+4,o).times(.5):(n.precision=i+6,n.rounding=1,t=t.asin(),e=d(n,i+4,o).times(.5),n.precision=i,n.rounding=o,e.minus(t))},Fe.inverseHyperbolicCosine=Fe.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,_e=!1,n=n.times(n).minus(1).sqrt().plus(n),_e=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},Fe.inverseHyperbolicSine=Fe.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,_e=!1,n=n.times(n).plus(1).sqrt().plus(n),_e=!0,r.precision=e,r.rounding=t,n.ln())},Fe.inverseHyperbolicTangent=Fe.atanh=function(){var e,t,n,r,i=this,o=i.constructor;return i.isFinite()?0<=i.e?new o(i.abs().eq(1)?i.s/0:i.isZero()?i:NaN):(e=o.precision,t=o.rounding,r=i.sd(),Math.max(r,e)<2*-i.e-1?u(new o(i),e,t,!0):(o.precision=n=r-i.e,i=Ve(i.plus(1),new o(1).minus(i),n+e,1),o.precision=e+4,o.rounding=1,i=i.ln(),o.precision=e,o.rounding=t,i.times(.5))):new o(NaN)},Fe.inverseSine=Fe.asin=function(){var e,t,n,r,i=this,o=i.constructor;return i.isZero()?new o(i):(t=i.abs().cmp(1),n=o.precision,r=o.rounding,-1!==t?0===t?((e=d(o,n+4,r).times(.5)).s=i.s,e):new o(NaN):(o.precision=n+6,o.rounding=1,i=i.div(new o(1).minus(i.times(i)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,i.times(2)))},Fe.inverseTangent=Fe.atan=function(){var e,t,n,r,i,o,a,s,c,l=this,f=l.constructor,p=f.precision,h=f.rounding;if(l.isFinite()){if(l.isZero())return new f(l);if(l.abs().eq(1)&&p+4<=Pe)return(a=d(f,p+4,h).times(.25)).s=l.s,a}else{if(!l.s)return new f(NaN);if(p+4<=Pe)return(a=d(f,p+4,h).times(.5)).s=l.s,a}for(f.precision=s=p+10,f.rounding=1,e=n=Math.min(28,s/Le+2|0);e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(_e=!1,t=Math.ceil(s/Le),r=1,c=l.times(l),a=new f(l),i=l;-1!==e;)if(i=i.times(c),o=a.minus(i.div(r+=2)),i=i.times(c),void 0!==(a=o.plus(i.div(r+=2))).d[t])for(e=t;a.d[e]===o.d[e]&&e--;);return n&&(a=a.times(2<<n-1)),_e=!0,u(a,f.precision=p,f.rounding=h,!0)},Fe.isFinite=function(){return!!this.d},Fe.isInteger=Fe.isInt=function(){return!!this.d&&xe(this.e/Le)>this.d.length-2},Fe.isNaN=function(){return!this.s},Fe.isNegative=Fe.isNeg=function(){return this.s<0},Fe.isPositive=Fe.isPos=function(){return 0<this.s},Fe.isZero=function(){return!!this.d&&0===this.d[0]},Fe.lessThan=Fe.lt=function(e){return this.cmp(e)<0},Fe.lessThanOrEqualTo=Fe.lte=function(e){return this.cmp(e)<1},Fe.logarithm=Fe.log=function(e){var n,i,o,a,s,c,l,d,p=this,h=p.constructor,g=h.precision,m=h.rounding;if(null==e)e=new h(10),n=!0;else{if(i=(e=new h(e)).d,e.s<0||!i||!i[0]||e.eq(1))return new h(NaN);n=e.eq(10)}if(i=p.d,p.s<0||!i||!i[0]||p.eq(1))return new h(i&&!i[0]?-1/0:1!=p.s?NaN:i?0:1/0);if(n)if(1<i.length)s=!0;else{for(a=i[0];a%10==0;)a/=10;s=1!==a}if(_e=!1,c=b(p,l=g+5),o=n?f(h,l+10):b(e,l),r((d=Ve(c,o,l,1)).d,a=g,m))do{if(c=b(p,l+=10),o=n?f(h,l+10):b(e,l),d=Ve(c,o,l,1),!s){+t(d.d).slice(a+1,a+15)+1==1e14&&(d=u(d,g+1,0));break}}while(r(d.d,a+=10,m));return _e=!0,u(d,g,m)},Fe.minus=Fe.sub=function(e){var t,n,r,i,o,a,s,c,f,d,p,h,g=this,m=g.constructor;if(e=new m(e),!g.d||!e.d)return g.s&&e.s?g.d?e.s=-e.s:e=new m(e.d||g.s!==e.s?g:NaN):e=new m(NaN),e;if(g.s!=e.s)return e.s=-e.s,g.plus(e);if(f=g.d,h=e.d,s=m.precision,c=m.rounding,!f[0]||!h[0]){if(h[0])e.s=-e.s;else{if(!f[0])return new m(3===c?-0:0);e=new m(g)}return _e?u(e,s,c):e}if(n=xe(e.e/Le),d=xe(g.e/Le),f=f.slice(),o=d-n){for(a=(p=o<0)?(t=f,o=-o,h.length):(t=h,n=d,f.length),(r=Math.max(Math.ceil(s/Le),a)+2)<o&&(o=r,t.length=1),t.reverse(),r=o;r--;)t.push(0);t.reverse()}else{for((p=(r=f.length)<(a=h.length))&&(a=r),r=0;r<a;r++)if(f[r]!=h[r]){p=f[r]<h[r];break}o=0}for(p&&(t=f,f=h,h=t,e.s=-e.s),a=f.length,r=h.length-a;0<r;--r)f[a++]=0;for(r=h.length;o<r;){if(f[--r]<h[r]){for(i=r;i&&0===f[--i];)f[i]=Re-1;--f[i],f[r]+=Re}f[r]-=h[r]}for(;0===f[--a];)f.pop();for(;0===f[0];f.shift())--n;return f[0]?(e.d=f,e.e=l(f,n),_e?u(e,s,c):e):new m(3===c?-0:0)},Fe.modulo=Fe.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?u(new r(n),r.precision,r.rounding):(_e=!1,9==r.modulo?(t=Ve(n,e.abs(),0,3,1)).s*=e.s:t=Ve(n,e,0,r.modulo,1),t=t.times(e),_e=!0,n.minus(t))},Fe.naturalExponential=Fe.exp=function(){return v(this)},Fe.naturalLogarithm=Fe.ln=function(){return b(this)},Fe.negated=Fe.neg=function(){var e=new this.constructor(this);return e.s=-e.s,u(e)},Fe.plus=Fe.add=function(e){var t,n,r,i,o,a,s,c,f,d,p=this,h=p.constructor;if(e=new h(e),!p.d||!e.d)return p.s&&e.s?p.d||(e=new h(e.d||p.s===e.s?p:NaN)):e=new h(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.minus(e);if(f=p.d,d=e.d,s=h.precision,c=h.rounding,!f[0]||!d[0])return d[0]||(e=new h(p)),_e?u(e,s,c):e;if(o=xe(p.e/Le),r=xe(e.e/Le),f=f.slice(),i=o-r){for((a=(a=i<0?(n=f,i=-i,d.length):(n=d,r=o,f.length))<(o=Math.ceil(s/Le))?o+1:a+1)<i&&(i=a,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for((a=f.length)-(i=d.length)<0&&(i=a,n=d,d=f,f=n),t=0;i;)t=(f[--i]=f[i]+d[i]+t)/Re|0,f[i]%=Re;for(t&&(f.unshift(t),++r),a=f.length;0==f[--a];)f.pop();return e.d=f,e.e=l(f,r),_e?u(e,s,c):e},Fe.precision=Fe.sd=function(e){var t;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(we+e);return this.d?(t=p(this.d),e&&this.e+1>t&&(t=this.e+1)):t=NaN,t},Fe.round=function(){var e=this.constructor;return u(new e(this),this.e+1,e.rounding)},Fe.sine=Fe.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+Le,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return E(e,2,t,t);n=16<(n=1.4*Math.sqrt(r))?16:0|n,t=t.times(1/w(5,n)),t=E(e,2,t,t);for(var i,o=new e(5),a=new e(16),s=new e(20);n--;)i=t.times(t),t=t.times(o.plus(i.times(a.times(i).minus(s))));return t}(r,D(r,n)),r.precision=e,r.rounding=t,u(2<he?n.neg():n,e,t,!0)):new r(NaN)},Fe.squareRoot=Fe.sqrt=function(){var e,n,r,i,o,a,s=this,c=s.d,l=s.e,f=s.s,d=s.constructor;if(1!==f||!c||!c[0])return new d(!f||f<0&&(!c||c[0])?NaN:c?s:1/0);for(_e=!1,i=0==(f=Math.sqrt(+s))||f==1/0?(((n=t(c)).length+l)%2==0&&(n+="0"),f=Math.sqrt(n),l=xe((l+1)/2)-(l<0||l%2),new d(n=f==1/0?"5e"+l:(n=f.toExponential()).slice(0,n.indexOf("e")+1)+l)):new d(f.toString()),r=(l=d.precision)+3;;)if(i=(a=i).plus(Ve(s,a,r+2,1)).times(.5),t(a.d).slice(0,r)===(n=t(i.d)).slice(0,r)){if("9999"!=(n=n.slice(r-3,r+1))&&(o||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(u(i,l+1,1),e=!i.times(i).eq(s));break}if(!o&&(u(a,l+1,0),a.times(a).eq(s))){i=a;break}r+=4,o=1}return _e=!0,u(i,l,d.rounding,e)},Fe.tangent=Fe.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=Ve(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,u(2==he||4==he?n.neg():n,e,t,!0)):new r(NaN)},Fe.times=Fe.mul=function(e){var t,n,r,i,o,a,s,c,f,d=this.constructor,p=this.d,h=(e=new d(e)).d;if(e.s*=this.s,!(p&&p[0]&&h&&h[0]))return new d(!e.s||p&&!p[0]&&!h||h&&!h[0]&&!p?NaN:p&&h?0*e.s:e.s/0);for(n=xe(this.e/Le)+xe(e.e/Le),(c=p.length)<(f=h.length)&&(o=p,p=h,h=o,a=c,c=f,f=a),o=[],r=a=c+f;r--;)o.push(0);for(r=f;0<=--r;){for(t=0,i=c+r;r<i;)s=o[i]+h[r]*p[i-r-1]+t,o[i--]=s%Re|0,t=s/Re|0;o[i]=(o[i]+t)%Re|0}for(;!o[--a];)o.pop();return t?++n:o.shift(),e.d=o,e.e=l(o,n),_e?u(e,d.precision,d.rounding):e},Fe.toBinary=function(e,t){return S(this,2,e,t)},Fe.toDecimalPlaces=Fe.toDP=function(e,t){var r=this.constructor,i=new r(this);return void 0===e?i:(n(e,0,me),void 0===t?t=r.rounding:n(t,0,8),u(i,e+i.e+1,t))},Fe.toExponential=function(e,t){var r=this,i=r.constructor,o=void 0===e?c(r,!0):(n(e,0,me),void 0===t?t=i.rounding:n(t,0,8),c(r=u(new i(r),e+1,t),!0,e+1));return r.isNeg()&&!r.isZero()?"-"+o:o},Fe.toFixed=function(e,t){var r,i=this,o=i.constructor,a=void 0===e?c(i):(n(e,0,me),void 0===t?t=o.rounding:n(t,0,8),c(r=u(new o(i),e+i.e+1,t),!1,e+r.e+1));return i.isNeg()&&!i.isZero()?"-"+a:a},Fe.toFraction=function(e){var n,r,i,o,a,s,u,c,l,f,d,h,g=this,m=g.d,y=g.constructor;if(!m)return new y(g);if(l=r=new y(1),i=c=new y(0),s=(a=(n=new y(i)).e=p(m)-g.e-1)%Le,n.d[0]=Ie(10,s<0?Le+s:s),null==e)e=0<a?n:l;else{if(!(u=new y(e)).isInt()||u.lt(l))throw Error(we+u);e=u.gt(n)?0<a?n:l:u}for(_e=!1,u=new y(t(m)),f=y.precision,y.precision=a=m.length*Le*2;d=Ve(u,n,0,1,1),1!=(o=r.plus(d.times(i))).cmp(e);)r=i,i=o,o=l,l=c.plus(d.times(o)),c=o,o=n,n=u.minus(d.times(o)),u=o;return o=Ve(e.minus(r),i,0,1,1),c=c.plus(o.times(l)),r=r.plus(o.times(i)),c.s=l.s=g.s,h=Ve(l,i,a,1).minus(g).abs().cmp(Ve(c,r,a,1).minus(g).abs())<1?[l,i]:[c,r],y.precision=f,_e=!0,h},Fe.toHexadecimal=Fe.toHex=function(e,t){return S(this,16,e,t)},Fe.toNearest=function(e,t){var r=(i=this).constructor,i=new r(i);if(null==e){if(!i.d)return i;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:n(t,0,8),!i.d)return e.s?i:e;if(!e.d)return e.s&&(e.s=i.s),e}return e.d[0]?(_e=!1,i=Ve(i,e,0,t,1).times(e),_e=!0,u(i)):(e.s=i.s,i=e),i},Fe.toNumber=function(){return+this},Fe.toOctal=function(e,t){return S(this,8,e,t)},Fe.toPower=Fe.pow=function(e){var n,i,o,a,s,c,l=this,f=l.constructor,d=+(e=new f(e));if(!(l.d&&e.d&&l.d[0]&&e.d[0]))return new f(Ie(+l,d));if((l=new f(l)).eq(1))return l;if(o=f.precision,s=f.rounding,e.eq(1))return u(l,o,s);if((n=xe(e.e/Le))>=e.d.length-1&&(i=d<0?-d:d)<=9007199254740991)return a=g(f,l,i,o),e.s<0?new f(1).div(a):u(a,o,s);if((c=l.s)<0){if(n<e.d.length-1)return new f(NaN);if(0==(1&e.d[n])&&(c=1),0==l.e&&1==l.d[0]&&1==l.d.length)return l.s=c,l}return(n=0!=(i=Ie(+l,d))&&isFinite(i)?new f(i+"").e:xe(d*(Math.log("0."+t(l.d))/Math.LN10+l.e+1)))>f.maxE+1||n<f.minE-1?new f(0<n?c/0:0):(_e=!1,f.rounding=l.s=1,i=Math.min(12,(n+"").length),(a=v(e.times(b(l,o+i)),o)).d&&r((a=u(a,o+5,1)).d,o,s)&&(n=o+10,+t((a=u(v(e.times(b(l,n+i)),n),n+5,1)).d).slice(o+1,o+15)+1==1e14&&(a=u(a,o+1,0))),a.s=c,_e=!0,u(a,o,f.rounding=s))},Fe.toPrecision=function(e,t){var r=this,i=r.constructor,o=void 0===e?c(r,r.e<=i.toExpNeg||r.e>=i.toExpPos):(n(e,1,me),void 0===t?t=i.rounding:n(t,0,8),c(r=u(new i(r),e,t),e<=r.e||r.e<=i.toExpNeg,e));return r.isNeg()&&!r.isZero()?"-"+o:o},Fe.toSignificantDigits=Fe.toSD=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(n(e,1,me),void 0===t?t=r.rounding:n(t,0,8)),u(new r(this),e,t)},Fe.toString=function(){var e=this,t=e.constructor,n=c(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},Fe.truncated=Fe.trunc=function(){return u(new this.constructor(this),this.e+1,1)},Fe.valueOf=Fe.toJSON=function(){var e=this,t=e.constructor,n=c(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var Ve=function(e,t,n,r,i,c){var l,f,d,p,h,g,m,y,v,b,T,_,E,w,D,S,x,I,N,A,O=e.constructor,C=e.s==t.s?1:-1,R=e.d,L=t.d;if(!(R&&R[0]&&L&&L[0]))return new O(e.s&&t.s&&(R?!L||R[0]!=L[0]:L)?R&&0==R[0]||!L?0*C:C/0:NaN);for(f=c?(h=1,e.e-t.e):(c=Re,h=Le,xe(e.e/h)-xe(t.e/h)),N=L.length,x=R.length,b=(v=new O(C)).d=[],d=0;L[d]==(R[d]||0);d++);if(L[d]>(R[d]||0)&&f--,null==n?(w=n=O.precision,r=O.rounding):w=i?n+(e.e-t.e)+1:n,w<0)b.push(1),g=!0;else{if(w=w/h+2|0,d=0,1==N){for(L=L[p=0],w++;(d<x||p)&&w--;d++)D=p*c+(R[d]||0),b[d]=D/L|0,p=D%L|0;g=p||d<x}else{for(1<(p=c/(L[0]+1)|0)&&(L=o(L,p,c),R=o(R,p,c),N=L.length,x=R.length),S=N,_=(T=R.slice(0,N)).length;_<N;)T[_++]=0;for((A=L.slice()).unshift(0),I=L[0],L[1]>=c/2&&++I;p=0,(l=a(L,T,N,_))<0?(E=T[0],N!=_&&(E=E*c+(T[1]||0)),1<(p=E/I|0)?(c<=p&&(p=c-1),1==(l=a(m=o(L,p,c),T,y=m.length,_=T.length))&&(p--,s(m,N<y?A:L,y,c))):(0==p&&(l=p=1),m=L.slice()),(y=m.length)<_&&m.unshift(0),s(T,m,_,c),-1==l&&(l=a(L,T,N,_=T.length))<1&&(p++,s(T,N<_?A:L,_,c)),_=T.length):0===l&&(p++,T=[0]),b[d++]=p,l&&T[0]?T[_++]=R[S]||0:(T=[R[S]],_=1),(S++<x||void 0!==T[0])&&w--;);g=void 0!==T[0]}b[0]||b.shift()}if(1==h)v.e=f,de=g;else{for(d=1,p=b[0];10<=p;p/=10)d++;v.e=d+f*h-1,u(v,i?n+v.e+1:n,r,g)}return v};(fe=function e(t){function n(e){var t,r,o,a=this;if(!(a instanceof n))return new n(e);if(e instanceof(a.constructor=n))return a.s=e.s,void(_e?!e.d||e.e>n.maxE?(a.e=NaN,a.d=null):e.e<n.minE?(a.e=0,a.d=[0]):(a.e=e.e,a.d=e.d.slice()):(a.e=e.e,a.d=e.d?e.d.slice():e.d));if("number"==(o=typeof e)){if(0===e)return a.s=1/e<0?-1:1,a.e=0,void(a.d=[0]);if(e<0?(e=-e,a.s=-1):a.s=1,e===~~e&&e<1e7){for(t=0,r=e;10<=r;r/=10)t++;return void(_e?n.maxE<t?(a.e=NaN,a.d=null):t<n.minE?(a.e=0,a.d=[0]):(a.e=t,a.d=[e]):(a.e=t,a.d=[e]))}return 0*e!=0?(e||(a.s=NaN),a.e=NaN,void(a.d=null)):_(a,e.toString())}if("string"!=o)throw Error(we+e);return 45===(r=e.charCodeAt(0))?(e=e.slice(1),a.s=-1):(43===r&&(e=e.slice(1)),a.s=1),(Ce.test(e)?_:function(e,t){var n,r,o,a,s,u,c,f,d;if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Ae.test(t))n=16,t=t.toLowerCase();else if(Ne.test(t))n=2;else{if(!Oe.test(t))throw Error(we+t);n=8}for(s=0<=(a=(t=0<(a=t.search(/p/i))?(c=+t.slice(a+1),t.substring(2,a)):t.slice(2)).indexOf(".")),r=e.constructor,s&&(a=(u=(t=t.replace(".","")).length)-a,o=g(r,new r(n),a,2*a)),a=d=(f=i(t,n,Re)).length-1;0===f[a];--a)f.pop();return a<0?new r(0*e.s):(e.e=l(f,d),e.d=f,_e=!1,s&&(e=Ve(e,o,4*u)),c&&(e=e.times(Math.abs(c)<54?Ie(2,c):fe.pow(2,c))),_e=!0,e)})(a,e)}var r,o,a;if(n.prototype=Fe,n.ROUND_UP=0,n.ROUND_DOWN=1,n.ROUND_CEIL=2,n.ROUND_FLOOR=3,n.ROUND_HALF_UP=4,n.ROUND_HALF_DOWN=5,n.ROUND_HALF_EVEN=6,n.ROUND_HALF_CEIL=7,n.ROUND_HALF_FLOOR=8,n.EUCLID=9,n.config=n.set=j,n.clone=e,n.isDecimal=G,n.abs=I,n.acos=N,n.acosh=A,n.add=O,n.asin=C,n.asinh=R,n.atan=L,n.atanh=M,n.atan2=P,n.cbrt=F,n.ceil=V,n.cos=U,n.cosh=B,n.div=k,n.exp=q,n.floor=z,n.hypot=H,n.ln=W,n.log=K,n.log10=Q,n.log2=J,n.max=Y,n.min=X,n.mod=$,n.mul=Z,n.pow=ee,n.random=te,n.round=ne,n.sign=re,n.sin=ie,n.sinh=oe,n.sqrt=ae,n.sub=se,n.tan=ue,n.tanh=ce,n.trunc=le,void 0===t&&(t={}),t&&!0!==t.defaults)for(a=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<a.length;)t.hasOwnProperty(o=a[r++])||(t[o]=this[o]);return n.config(t),n}(Te)).default=fe.Decimal=fe,ve=new fe(ve),be=new fe(be),"function"==typeof define&&define.amd?define("decimal",[],function(){return fe}):"undefined"!=typeof module&&module.exports?("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator&&(Fe[Symbol.for("nodejs.util.inspect.custom")]=Fe.toString,Fe[Symbol.toStringTag]="Decimal"),module.exports=fe):(e=e||("undefined"!=typeof self&&self&&self.self==self?self:window),pe=e.Decimal,fe.noConflict=function(){return e.Decimal=pe,fe},e.Decimal=fe)}(this),function(e){"use strict";function t(e){return e.prototype.toFormat=function(e,t,n){if(!this.e&&0!==this.e)return this.toString();var r,i,o,a,s,u,c,l,f,d,p,h,g,m,y,v=this.format||{},b=this.constructor.format||{};if(e!=s?"object"==typeof e?(n=e,e=s):t!=s?"object"==typeof t?(n=t,t=s):"object"!=typeof n&&(n={}):n={}:n={},l=(r=this.toFixed(e,t).split("."))[0],f=r[1],u=(c=this.s<0?l.slice(1):l).length,(d=n.decimalSeparator)==s&&(d=v.decimalSeparator)==s&&(d=b.decimalSeparator)==s&&(d="."),(p=n.groupSeparator)==s&&(p=v.groupSeparator)==s&&(p=b.groupSeparator),p&&((h=n.groupSize)==s&&(h=v.groupSize)==s&&(h=b.groupSize)==s&&(h=0),(g=n.secondaryGroupSize)==s&&(g=v.secondaryGroupSize)==s&&(g=b.secondaryGroupSize)==s&&(g=0),g?(i=+g,u-=o=+h):(i=+h,o=+g),0<i&&0<u)){for(a=u%i||i,l=c.substr(0,a);a<u;a+=i)l+=p+c.substr(a,i);0<o&&(l+=p+c.slice(a)),this.s<0&&(l="-"+l)}return f?((m=n.fractionGroupSeparator)==s&&(m=v.fractionGroupSeparator)==s&&(m=b.fractionGroupSeparator),m&&((y=n.fractionGroupSize)==s&&(y=v.fractionGroupSize)==s&&(y=b.fractionGroupSize)==s&&(y=0),(y=+y)&&(f=f.replace(new RegExp("\\d{"+y+"}\\B","g"),"$&"+m))),l+d+f):l},e.format={decimalSeparator:".",groupSeparator:",",groupSize:3,secondaryGroupSize:0,fractionGroupSeparator:"",fractionGroupSize:0},e}"function"==typeof define&&define.amd?define("toformat",["require","exports","module"],function(e,n){n.default=t}):"undefined"!=typeof module&&module.exports?module.exports=t:(e||(e="undefined"!=typeof self&&self&&self.self==self?self:window),noConflict=e.toFormat,t.noConflict=function(){return e.toFormat=noConflict,t},e.toFormat=t)}(this),
define("OutSystems/ClientRuntime/Decimal",["require","exports","decimal","toformat"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r.default(n.Decimal);var i;!function(e){e[e.roundUp=0]="roundUp",e[e.roundDown=1]="roundDown",e[e.roundCeil=2]="roundCeil",e[e.roundFloor=3]="roundFloor",e[e.roundHalfUp=4]="roundHalfUp",e[e.roundHalfDown=5]="roundHalfDown",e[e.roundHalfEven=6]="roundHalfEven",e[e.roundHalfCeil=7]="roundHalfCeil",e[e.roundHalfFloor=8]="roundHalfFloor"}(i||(i={}));var o=n.Decimal.config({precision:30,toExpNeg:-1024,toExpPos:1024,rounding:n.Decimal.Decimal.ROUND_HALF_EVEN}),a=function(){function e(t){this.add=this.plus,this.sub=this.minus,this.eq=this.equals,this.lt=this.lessThan,this.lte=this.lessThanOrEqualTo,this.gt=this.greaterThan,this.gte=this.greaterThanOrEqualTo;var n=e.unwrapInputValue(t);this.internalValue=new o(n)}return e.unwrapInputValue=function(e){return"string"==typeof e||"number"==typeof e?e:"internalValue"in e?e.internalValue:e},e.max=function(t,n){var r=[e.unwrapInputValue(t),e.unwrapInputValue(n)],i=r[0],a=r[1];return new e(o.max(i,a))},e.min=function(t,n){var r=[e.unwrapInputValue(t),e.unwrapInputValue(n)],i=r[0],a=r[1];return new e(o.min(i,a))},e.prototype.abs=function(){return new e(this.internalValue.abs())},e.prototype.neg=function(){return new e(this.internalValue.neg())},e.prototype.sqrt=function(){return new e(this.internalValue.sqrt())},e.prototype.trunc=function(){return new e(this.internalValue.trunc())},e.prototype.round=function(){return new e(this.internalValue.round())},e.prototype.isNaN=function(){return this.internalValue.isNaN()},e.prototype.isInteger=function(){return this.internalValue.isInteger()},e.prototype.decimalPlaces=function(){return this.internalValue.decimalPlaces()},e.prototype.plus=function(t){var n=e.unwrapInputValue(t);return new e(this.internalValue.plus(n))},e.prototype.minus=function(t){var n=e.unwrapInputValue(t);return new e(this.internalValue.minus(n))},e.prototype.times=function(t){var n=e.unwrapInputValue(t);return new e(this.internalValue.times(n))},e.prototype.div=function(t){var n=e.unwrapInputValue(t);return new e(this.internalValue.div(n))},e.prototype.pow=function(t){var n=e.unwrapInputValue(t);return new e(this.internalValue.pow(n))},e.prototype.mod=function(t){var n=e.unwrapInputValue(t);return new e(this.internalValue.mod(n))},e.prototype.equals=function(t){var n=e.unwrapInputValue(t);return this.internalValue.equals(n)},e.prototype.lessThan=function(t){var n=e.unwrapInputValue(t);return this.internalValue.lessThan(n)},e.prototype.lessThanOrEqualTo=function(t){var n=e.unwrapInputValue(t);return this.internalValue.lessThanOrEqualTo(n)},e.prototype.greaterThan=function(t){var n=e.unwrapInputValue(t);return this.internalValue.greaterThan(n)},e.prototype.greaterThanOrEqualTo=function(t){var n=e.unwrapInputValue(t);return this.internalValue.greaterThanOrEqualTo(n)},e.prototype.toString=function(){return this.internalValue.toString()},e.prototype.toNumber=function(){return this.internalValue.toNumber()},e.prototype.valueOf=function(){return this.internalValue.valueOf()},e.prototype.toFixed=function(e){return this.internalValue.toFixed(e)},e.prototype.toFormat=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this.internalValue).toFormat.apply(e,t)},e.prototype.toDecimalPlaces=function(t){return new e(this.internalValue.toDecimalPlaces(t))},e.rounding=o.rounding,e.defaultValue=new e(0),e}();t.default=a}),define("OutSystems/ClientRuntime/Format",["require","exports"],function(e,t){"use strict";function n(e,t){var n=o[e];if(void 0!==n)return n;var r,i=e.replace(new RegExp("["+t.join("")+"]","gi"),"").substr(0,1),a=[];for(r=0;r<t.length;r++)a.push({index:e.toLowerCase().indexOf(t[r]),character:t[r],length:e.replace(new RegExp("[^"+t[r]+"]","gi"),"").length});a.sort(function(e,t){return e.index<t.index?-1:1});var s={format:e,separator:i,parts:{},regExp:null};for(s.regExp="^",r=0;r<a.length;r++){var u="";switch(a[r].character.toLowerCase()){case"h":case"m":case"d":u="1,2";break;case"s":s.regExp+="(?"+i,u="1,2";break;default:u=a[r].length}r>0&&(s.regExp+="\\"+i),s.regExp+="([0-9]{"+u+"})"+("s"===a[r].character?")?":""),s.parts[a[r].character+"Index"]=r,s.parts[a[r].character+"Format"]=e.slice(a[r].index,a[r].index+a[r].length)}return s.regExp+="$",o[e]=s,s}function r(e){return n(e,["y","m","d"])}function i(e){return n(e,["h","m","s"])}Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationFormatInfo=t.NumberFormatInfo=t.DateTimeFormatInfo=void 0;var o={},a=function(){function e(e,t,n,o){void 0===n&&(n=" "),void 0===o&&(o=""),this.dateFmt=r(e),this.timeFmt=i(t),this.dateTimeSep=n,this.tzInformation=o}return e.getDayName=function(t){return e.DayNames[t]},e.getShortDayName=function(t){return e.DayNames[t].slice(0,3)},e.getMonthName=function(t){return e.MonthNames[t-1]},e.getShortMonthName=function(t){return e.MonthNames[t-1].slice(0,3)},e.get12HourNotation=function(e){return e<12?"AM":"PM"},e.getTimezoneInformationFull=function(t){return t=-t,e.getTimezoneSignal(t)+e.padLeadingZeros(Math.floor(t/60).toString(),2)+":"+e.padLeadingZeros(Math.floor(t%60).toString(),2)},e.getTimezoneInformationHoursFull=function(t){return t=-t,e.getTimezoneSignal(t)+e.padLeadingZeros(Math.floor(t/60).toString(),2)},e.getTimezoneInformationHoursShort=function(t){return t=-t,e.getTimezoneSignal(t)+Math.floor(t/60)},e.getTimezoneSignal=function(e){return e<0?"-":"+"},e.padLeadingZeros=function(e,t){for(var n=e||"";n.length<t;)n="0"+n;return n},e.removeTrailingZeros=function(e){return(e||"").replace(/0+$/gm,"")},Object.defineProperty(e.prototype,"dateFormat",{get:function(){return this.dateFmt.format},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeFormat",{get:function(){return this.timeFmt.format},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dateTimeFormat",{get:function(){return this.dateFmt.format+this.dateTimeSeparator+this.timeFmt.format},enumerable:!1,configurable:!0}),e.prototype.getRegExpForDate=function(){return new RegExp(this.dateFmt.regExp,"i")},Object.defineProperty(e.prototype,"yearIndexForDate",{get:function(){return this.dateFmt.parts.yIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"monthIndexForDate",{get:function(){return this.dateFmt.parts.mIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dayIndexForDate",{get:function(){return this.dateFmt.parts.dIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearFormatForDate",{get:function(){return this.dateFmt.parts.yFormat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"monthFormatForDate",{get:function(){return this.dateFmt.parts.mFormat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dayFormatForDate",{get:function(){return this.dateFmt.parts.dFormat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dateSeparator",{get:function(){return this.dateFmt.separator},enumerable:!1,configurable:!0}),e.prototype.getRegExpForTime=function(){return new RegExp(this.timeFmt.regExp,"i")},Object.defineProperty(e.prototype,"hoursIndexForTime",{get:function(){return this.timeFmt.parts.hIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minutesIndexForTime",{get:function(){return this.timeFmt.parts.mIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"secondsIndexForTime",{get:function(){return this.timeFmt.parts.sIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeSeparator",{get:function(){return this.timeFmt.separator},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dateTimeSeparator",{get:function(){return this.dateTimeSep},enumerable:!1,configurable:!0}),e.prototype.getRegExpForDateTime=function(){return new RegExp(this.dateFmt.regExp.substring(0,this.dateFmt.regExp.length-1)+this.dateTimeSeparator+this.timeFmt.regExp.substring(1,this.timeFmt.regExp.length-1)+this.tzInformation+"$","i")},Object.defineProperty(e.prototype,"yearIndexForDateTime",{get:function(){return this.dateFmt.parts.yIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"monthIndexForDateTime",{get:function(){return this.dateFmt.parts.mIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dayIndexForDateTime",{get:function(){return this.dateFmt.parts.dIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hoursIndexForDateTime",{get:function(){return this.timeFmt.parts.hIndex+3},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hoursFormatForTime",{get:function(){return this.timeFmt.parts.hFormat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minutesFormatForTime",{get:function(){return this.timeFmt.parts.mFormat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"secondsFormatForTime",{get:function(){return this.timeFmt.parts.sFormat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minutesIndexForDateTime",{get:function(){return this.timeFmt.parts.mIndex+3},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"secondsIndexForDateTime",{get:function(){return this.timeFmt.parts.sIndex+3},enumerable:!1,configurable:!0}),e.DayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e.MonthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],e}();t.DateTimeFormatInfo=a;var s=function(){function e(e,t){this.decimalSep=e,this.groupSep=t,this.integerFmtRegExp=null,this.decimalFmtRegExp=null,this.generateFormatRegExps(e,t)}return e.prototype.generateFormatRegExps=function(e,t){var n="\\"+e,r="(([0-9]{1,3}("+(t?"\\"+t:"")+"[0-9]{3})*)|([0-9]+))";this.integerFmtRegExp="^[-]?"+r+"$",this.decimalFmtRegExp="^[-]?(("+r+"("+n+"([0-9]+)?)?)|(("+r+")?"+n+"[0-9]+))$"},Object.defineProperty(e.prototype,"decimalSeparator",{get:function(){return this.decimalSep},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groupSeparator",{get:function(){return this.groupSep},enumerable:!1,configurable:!0}),e.prototype.getRegExpForInteger=function(){return new RegExp(this.integerFmtRegExp,"i")},e.prototype.getRegExpForDecimal=function(){return new RegExp(this.decimalFmtRegExp,"i")},e.prototype.getRegExpForJSNumber=function(){return new RegExp("^-?(?:0|[1-9]\\d*)(?:\\.\\d+)?(?:[eE][+-]?\\d+)?$","i")},e}();t.NumberFormatInfo=s;var u=function(){function e(e,t){this.defaultDateTimeFormats=[new a("yyyy-MM-dd","HH:mm:ss"),new a("yyyy-MM-dd","HH:mm:ss"),new a("yyyy/MM/dd","HH:mm:ss"),new a("yyyy.MM.dd","HH:mm:ss")],this.defaultNumberFmt=t,this.currentNumberFmt=t,this.defaultDateTimeFormats[0]=e}return Object.defineProperty(e.prototype,"defaultDateTimeFormat",{get:function(){return this.defaultDateTimeFormats[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dateTimeFormats",{get:function(){return this.defaultDateTimeFormats},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dateTimeFormat",{set:function(e){this.defaultDateTimeFormats[0]=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultNumberFormat",{get:function(){return this.defaultNumberFmt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this.currentNumberFmt},set:function(e){this.currentNumberFmt=e},enumerable:!1,configurable:!0}),e}();t.ApplicationFormatInfo=u}),define("OutSystems/ClientRuntime/LightImmutable",["require","exports"],function(e,t){"use strict";function n(e){for(var t=e.length,n=new Array(t);t-- >0;)n[t]=e[t];return n}function r(e){var t=Object.keys(e),n="function ImmutableRecord"+i+"(o) { this._ = o || defaults }\nfunction R"+i+"(o) {\n";t.forEach(function(e){return n+="this."+e+" = o."+e+";\n"}),n+="}\n";var r="switch(key){\n";t.forEach(function(e){r+='case "'+e+'": return this._.'+e+";\n"}),r+="}";var o="var clone = new R"+i+"(this._);\n";o+="switch (key) {\n",t.forEach(function(e){o+='case "'+e+'": clone.'+e+"=value;break;"}),o+="}\n",o+="return new ImmutableRecord"+i+"(clone);\n";var a="return {\n";a+=t.map(function(e){return e+": this._."+e}).join(",\n"),a+="\n};";var s=n+"ImmutableRecord"+i+".prototype.get = function(key){"+r+"};\nImmutableRecord"+i+".prototype.set = function(key,value){"+o+"};\nImmutableRecord"+i+".prototype.toJS = function(){"+a+"};\nreturn ImmutableRecord"+i+";";return i++,new Function("defaults",s)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.ImmutableList=t.defineRecordClass=void 0;var i=0;t.defineRecordClass=r;var o=function(){function e(t,n){if(void 0!==n)this._values=t,this._lengths=n;else if(void 0!==t){var r=e.fromJS(t);this._values=r._values,this._lengths=r._lengths}else this._values=[],this._lengths=[]}return e.prototype.clear=function(){return new e},e.prototype.clone=function(){return this},e.prototype.count=function(){for(var e=0,t=this._lengths.length;t-- >0;)e+=this._lengths[t];return e},e.prototype.isEmpty=function(){return 0===this._lengths.length},e.prototype.get=function(e){for(var t=0,n=e,r=this._lengths.length;t<r&&e>=0;){if(n<this._lengths[t])return this._values[t][n];n-=this._lengths[t],t++}},e.prototype.set=function(t,r){for(var i=0,o=t,a=n(this._values),s=this._lengths,u=s.length;i<u&&t>=0;){if(o<this._lengths[i])return a[i]=n(a[i]),a[i][o]=r,new e(a,s);o-=s[i],i++}},e.prototype.push=function(t){var r,i,o=this._values.length-1;o<0?(o=0,r=[[]],i=[0]):(r=n(this._values),i=n(this._lengths));var a=r[o];if(a.length<128){for(var s=a.length,u=new Array(s+1),c=s;c-- >0;)u[c]=a[c];u[s]=t,r[o]=u,i[o]++}else{var l=[t];r.push(l),i.push(1)}return new e(r,i)},e.prototype.insert=function(t,r){for(var i=0,o=t,a=n(this._values),s=n(this._lengths),u=s.length;i<u&&o>=0;){if(o<s[i]){if(128===s[i]){s.splice(i,1,64,64);for(var c=new Array(64),l=new Array(64),f=0;f<64;f++)c[f]=a[i][f];for(var d=0,p=64;d<64;)l[d++]=a[i][p++];a.splice(i,1,c,l),u++;continue}for(var h=0,g=s[i],m=new Array(g+1),y=a[i];h<o;h++)m[h]=y[h];m[o]=r;for(var v=h+1;h<g;)m[v++]=y[h++];return s[i]++,a[i]=m,new e(a,s)}o-=s[i],i++}return s.push(1),a.push([r]),new e(a,s)},e.prototype.remove=function(t){for(var r=0,i=t,o=n(this._lengths),a=n(this._values),s=o.length;r<s&&i>=0;){if(i<o[r]){for(var u=--o[r],c=new Array(u),l=0,f=0;l<u;)l===i&&f++,c[l++]=a[r][f++];return a[r]=c,0===o[r]&&(o.splice(r,1),a.splice(r,1)),new e(a,o)}i-=o[r],r++}},e.prototype.reduce=function(e,t){for(var n=0;n<this._values.length;n++)for(var r=this._values[n],i=0;i<r.length;i++)t=e(t,r[i]);return t},e.prototype.map=function(e){for(var t=new Array(this.count()),n=0,r=0;r<this._values.length;r++)for(var i=this._values[r],o=0;o<i.length;o++)t[n]=e(i[o],n),n++;return t},e.prototype.pushAll=function(t){if(0===t.length)return this;var n=new e(t);return new e(this._values.concat(n._values),this._lengths.concat(n._lengths))},e.prototype.forEach=function(e){for(var t=0;t<this._values.length;t++)for(var n=this._values[t],r=0;r<n.length;r++)e(n[r])},e.prototype.addFromOther=function(t){if(0===t.count())return this;if(0===this._values.length)return t;for(var n=new Array(this._lengths.length+t._lengths.length),r=new Array(this._values.length+t._values.length),i=0,o=0;i<this._values.length;)r[i]=this._values[i],n[i]=this._lengths[i],i++;for(;o<t._values.length;)r[i]=t._values[o],n[i]=t._lengths[o],i++,o++;return new e(r,n)},e.fromJS=function(t){for(var n=0|Math.ceil(t.length/128),r=new Array(n),i=new Array(n),o=0,a=0,s=0;s<n;s++){a=t.length-o;var u=a>128?128:a;i[s]=u,r[s]=new Array(u);for(var c=0;c<u;c++)r[s][c]=t[o+c];o+=u}return new e(r,i)},e}();t.ImmutableList=o}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("long",[],t):"object"==typeof exports?exports.Long=t():e.Long=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t){function n(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function r(e){return!0===(e&&e.__isLong__)}function i(e,t){var n,r,i;return t?(e>>>=0,(i=0<=e&&e<256)&&(r=f[e])?r:(n=a(e,(0|e)<0?-1:0,!0),i&&(f[e]=n),n)):(e|=0,(i=-128<=e&&e<128)&&(r=l[e])?r:(n=a(e,e<0?-1:0,!1),i&&(l[e]=n),n))}function o(e,t){if(isNaN(e))return t?v:y;if(t){if(e<0)return v;if(e>=h)return w}else{if(e<=-g)return D;if(e+1>=g)return E}return e<0?o(-e,t).neg():a(e%p|0,e/p|0,t)}function a(e,t,r){return new n(e,t,r)}function s(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return y;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return s(e.substring(1),t,n).neg();for(var i=o(d(n,8)),a=y,u=0;u<e.length;u+=8){var c=Math.min(8,e.length-u),l=parseInt(e.substring(u,u+c),n);if(c<8){var f=o(d(n,c));a=a.mul(f).add(o(l))}else a=a.mul(i),a=a.add(o(l))}return a.unsigned=t,a}function u(e,t){return"number"==typeof e?o(e,t):"string"==typeof e?s(e,t):a(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}e.exports=n;var c=null;try{c=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}n.prototype.__isLong__,Object.defineProperty(n.prototype,"__isLong__",{value:!0}),n.isLong=r;var l={},f={};n.fromInt=i,n.fromNumber=o,n.fromBits=a;var d=Math.pow;n.fromString=s,n.fromValue=u;var p=4294967296,h=p*p,g=h/2,m=i(1<<24),y=i(0);n.ZERO=y;var v=i(0,!0);n.UZERO=v;var b=i(1);n.ONE=b;var T=i(1,!0);n.UONE=T;var _=i(-1);n.NEG_ONE=_;var E=a(-1,2147483647,!1);n.MAX_VALUE=E;var w=a(-1,-1,!0);n.MAX_UNSIGNED_VALUE=w;var D=a(0,-2147483648,!1);n.MIN_VALUE=D;var S=n.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(D)){var t=o(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=o(d(e,6),this.unsigned),a=this,s="";;){var u=a.div(i),c=a.sub(u.mul(i)).toInt()>>>0,l=c.toString(e);if(a=u,a.isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(D)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1==(1&this.low)},S.isEven=function(){return 0==(1&this.low)},S.equals=function(e){return r(e)||(e=u(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){if(r(e)||(e=u(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(D)?D:this.not().add(b)},S.neg=S.negate,S.add=function(e){r(e)||(e=u(e));var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,o=65535&this.low,s=e.high>>>16,c=65535&e.high,l=e.low>>>16,f=65535&e.low,d=0,p=0,h=0,g=0;return g+=o+f,h+=g>>>16,g&=65535,h+=i+l,p+=h>>>16,h&=65535,p+=n+c,d+=p>>>16,p&=65535,d+=t+s,d&=65535,a(h<<16|g,d<<16|p,this.unsigned)},S.subtract=function(e){return r(e)||(e=u(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return y;if(r(e)||(e=u(e)),c)return a(c.mul(this.low,this.high,e.low,e.high),c.get_high(),this.unsigned);if(e.isZero())return y;if(this.eq(D))return e.isOdd()?D:y;if(e.eq(D))return this.isOdd()?D:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(m)&&e.lt(m))return o(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,n=65535&this.high,i=this.low>>>16,s=65535&this.low,l=e.high>>>16,f=65535&e.high,d=e.low>>>16,p=65535&e.low,h=0,g=0,v=0,b=0;return b+=s*p,v+=b>>>16,b&=65535,v+=i*p,g+=v>>>16,v&=65535,v+=s*d,g+=v>>>16,v&=65535,g+=n*p,h+=g>>>16,g&=65535,g+=i*d,h+=g>>>16,g&=65535,g+=s*f,h+=g>>>16,g&=65535,h+=t*p+n*d+i*f+s*l,h&=65535,a(v<<16|b,h<<16|g,this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(r(e)||(e=u(e)),e.isZero())throw Error("division by zero");if(c)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?a((this.unsigned?c.div_u:c.div_s)(this.low,this.high,e.low,e.high),c.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?v:y;var t,n,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return T;i=v}else{if(this.eq(D))return e.eq(b)||e.eq(_)?D:e.eq(D)?b:(t=this.shr(1).div(e).shl(1),t.eq(y)?e.isNegative()?b:_:(n=this.sub(e.mul(t)),i=t.add(n.div(e))));if(e.eq(D))return this.unsigned?v:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=y}for(n=this;n.gte(e);){t=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(t)/Math.LN2),l=s<=48?1:d(2,s-48),f=o(t),p=f.mul(e);p.isNegative()||p.gt(n);)t-=l,f=o(t,this.unsigned),p=f.mul(e);f.isZero()&&(f=b),i=i.add(f),n=n.sub(p)}return i},S.div=S.divide,S.modulo=function(e){return r(e)||(e=u(e)),c?a((this.unsigned?c.rem_u:c.rem_s)(this.low,this.high,e.low,e.high),c.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return a(~this.low,~this.high,this.unsigned)},S.and=function(e){return r(e)||(e=u(e)),a(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return r(e)||(e=u(e)),a(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return r(e)||(e=u(e)),a(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?a(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):a(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return r(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?a(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):a(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){if(r(e)&&(e=e.toInt()),0==(e&=63))return this;var t=this.high;return e<32?a(this.low>>>e|t<<32-e,t>>>e,this.unsigned):32===e?a(t,0,this.unsigned):a(t>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?a(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:a(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},n.fromBytes=function(e,t,r){return r?n.fromBytesLE(e,t):n.fromBytesBE(e,t)},n.fromBytesLE=function(e,t){return new n(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},n.fromBytesBE=function(e,t){return new n(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)}}])}),define("OutSystems/ClientRuntime/LongInteger",["require","exports","long"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("long"),i=function(){function e(e,t,n){this.neg=this.negate,this.eq=this.equals,this.lt=this.lessThan,this.lte=this.lessThanOrEqual,this.gt=this.greaterThan,this.gte=this.greaterThanOrEqual,this.internalValue=new r(e,t,n)}return e.fromNumber=function(t){var r=new e(0);return r.internalValue=n.fromNumber(t),r},e.fromString=function(t){var r=new e(0);return r.internalValue=n.fromString(t),r},e.fromValue=function(t){var r="object"==typeof t?t.internalValue:t,i=new e(0);return i.internalValue=n.fromValue(r),i},e.fromObject=function(t){var r=n.fromValue(t);return e.fromString(r.toString())},e.unwrapInputValue=function(e){return"string"==typeof e||"number"==typeof e?e:"internalValue"in e?e.internalValue:e},e.prototype.negate=function(){var t=this.internalValue.negate();return e.fromObject(t)},e.prototype.add=function(t){var n=e.unwrapInputValue(t),r=this.internalValue.add(n);return e.fromObject(r)},e.prototype.sub=function(t){var n=e.unwrapInputValue(t),r=this.internalValue.sub(n);return e.fromObject(r)},e.prototype.mul=function(t){var n=e.unwrapInputValue(t),r=this.internalValue.mul(n);return e.fromObject(r)},e.prototype.div=function(t){var n=e.unwrapInputValue(t),r=this.internalValue.div(n);return e.fromObject(r)},e.prototype.and=function(t){var n=e.unwrapInputValue(t),r=this.internalValue.and(n);return e.fromObject(r)},e.prototype.equals=function(t){var n=e.unwrapInputValue(t);return this.internalValue.equals(n)},e.prototype.lessThan=function(t){var n=e.unwrapInputValue(t);return this.internalValue.lessThan(n)},e.prototype.lessThanOrEqual=function(t){var n=e.unwrapInputValue(t);return this.internalValue.lessThanOrEqual(n)},e.prototype.greaterThan=function(t){var n=e.unwrapInputValue(t);return this.internalValue.greaterThan(n)},e.prototype.greaterThanOrEqual=function(t){var n=e.unwrapInputValue(t);return this.internalValue.greaterThanOrEqual(n)},e.prototype.toNumber=function(){return this.internalValue.toNumber()},e.prototype.toString=function(){return this.internalValue.toString()},e.prototype.valueOf=function(){return this.internalValue.valueOf()},e.defaultValue=e.fromObject(n.ZERO),e.MIN_VALUE=e.fromObject(n.MIN_VALUE),e.MAX_VALUE=e.fromObject(n.MAX_VALUE),e}();t.default=i}),define("OutSystems/ClientRuntime/DataTypes",["require","exports","tslib","./Decimal","./Exceptions","./Flow","./Format","./LightImmutable","./LongInteger","./Settings"],function(e,t,n,r,i,o,a,s,u,c){"use strict";function l(e,t){return null===e||void 0===e?t:e}function f(e,t){if("string"==typeof e){var n=e,r=t;return n.localeCompare(r)}return"number"==typeof e?e-t:"boolean"==typeof e?!e&&t?-1:e&&!t?1:0:e.lessThan(t)?-1:e.greaterThan(t)?1:0}function d(e,t){return e&&t&&t.equals instanceof Function?t.equals(e):t===e}function p(e,t){return!e.hasContent()&&!t.hasContent()}function h(e){switch(e){case y.Integer:return _.DEFAULT_INTEGER;case y.LongInteger:return _.DEFAULT_LONGINTEGER;case y.Decimal:return _.DEFAULT_DECIMAL;case y.Currency:return _.DEFAULT_CURRENCY;case y.Text:return _.DEFAULT_TEXT;case y.PhoneNumber:return _.DEFAULT_PHONENUMBER;case y.Email:return _.DEFAULT_EMAIL;case y.Date:return _.DEFAULT_DATE;case y.DateTime:return _.DEFAULT_DATETIME;case y.Time:return _.DEFAULT_TIME;case y.Boolean:return _.DEFAULT_BOOLEAN;case y.BinaryData:return _.DEFAULT_BINARYDATA;case y.Object:return _.DEFAULT_OBJECT;default:throw new TypeError("Records and Record lists are not basic types")}}function g(e){return e===y.Record||e===y.RecordList||e===y.LongInteger||e===y.Decimal||e===y.Currency||e===y.DateTime||e===y.Time||e===y.Date}function m(){return function(e){var t=e;void 0!==t.init&&t.init()}}Object.defineProperty(t,"__esModule",{value:!0}),t.TypeValidations=t.ComplexTypeKeyedTypeFactory=t.BasicTypeKeyedTypeFactory=t.TypeKeyedTypeFactory=t.RecordTypeFactory=t.ErrorHandlerOutputType=t.JSONSerializeOutputType=t.RecordWithStaticConstructor=t.VariableHolder=t.BasicVariableHolder=t.TextList=t.BinaryDataList=t.BooleanList=t.PhoneNumberList=t.EmailList=t.CurrencyList=t.DecimalList=t.TimeList=t.DateTimeList=t.DateList=t.LongIntegerList=t.IntegerList=t.GenericRecordList=t.BasicTypeList=t.List=t.GenericRecord=t.Record=t.ImmutableBase=t.ImmutableListWithTracking=t.defaultForType=t.areBinaryNulls=t.equals=t.compare=t.ListCache=t.Cache=t.Constants=t.DateTime=t.BinaryData=t.LongInteger=t.Decimal=t.mapDataTypeToName=t.DataTypes=void 0,t.Decimal=r.default,t.LongInteger=u.default;var y;!function(e){e[e.Integer=0]="Integer",e[e.LongInteger=1]="LongInteger",e[e.Decimal=2]="Decimal",e[e.Currency=3]="Currency",e[e.Text=4]="Text",e[e.PhoneNumber=5]="PhoneNumber",e[e.Email=6]="Email",e[e.Boolean=7]="Boolean",e[e.Date=8]="Date",e[e.DateTime=9]="DateTime",e[e.Time=10]="Time",e[e.Record=11]="Record",e[e.RecordList=12]="RecordList",e[e.BinaryData=13]="BinaryData",e[e.Object=14]="Object"}(y=t.DataTypes||(t.DataTypes={}));var v=function(e){switch(e){case y.Integer:return"Integer";case y.LongInteger:return"Long Integer";case y.Decimal:return"Decimal";case y.Currency:return"Currency";case y.Text:return"Text";case y.PhoneNumber:return"Phone Number";case y.Email:return"Email";case y.Boolean:return"Boolean";case y.Date:return"Date";case y.DateTime:return"Date Time";case y.Time:return"Time";case y.Record:return"Record";case y.RecordList:return"List";case y.BinaryData:return"Binary Data";case y.Object:return"Object";default:return"Unknown: "+e}};t.mapDataTypeToName=v;var b=function(){function e(t,n,r){var i=this;this._url=n,this.getOfflineContent=r,this._cachedBlob=null,"undefined"!=typeof Blob&&t instanceof Blob?(this._cachedBlob=t,this.getOfflineContent=function(){return i._content?Promise.resolve(i._content):e.blobToBase64(i._cachedBlob)}):this._content=t||null}return Object.defineProperty(e.prototype,"url",{get:function(){return this._url},set:function(e){this._url=e,this.clearCachedBlob()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cachedBlob",{get:function(){return this._cachedBlob},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this._content},set:function(e){this._content=e,this.clearCachedBlob()},enumerable:!1,configurable:!0}),e.prototype.loadContent=function(){var e=this;return this.getOfflineContent?this.getOfflineContent().then(function(t){return e.content=t,Promise.resolve(e)}):o.executeSequence(function(){return e})},e.prototype.hasContent=function(){
return!(!this._url&&!this._content)},e.prototype.fastEquals=function(e){return e&&this.constructor===e.constructor&&this._url===e._url&&this._content===e._content&&(!!this.getOfflineContent&&!!e.getOfflineContent||!this.getOfflineContent&&!e.getOfflineContent)},e.prototype.base64toHex=function(e){for(var t=atob(e),n="",r=0;r<t.length;r++){var i=t.charCodeAt(r).toString(16);n+=2===i.length?i:"0"+i}return n},e.prototype.getContentType=function(){if(this._content){var e=this.base64toHex(this._content.substr(0,16));return"00000100"===e.substr(0,8)?"image/x-icon":"ffd8ffdb"===e.substr(0,8)||"ffd8ffe0"===e.substr(0,8)||"ffd8ffe1"===e.substr(0,8)?"image/jpeg":"49492a00"===e.substr(0,8)||"4d4d002a"===e.substr(0,8)?"image/tiff":"424d"===e.substr(0,4)?"image/bmp":"474946"===e.substr(0,6)?"image/gif":"89504e47"===e.substr(0,8)?"image/png":"application/octet-stream"}return null},e.prototype.toDataURI=function(){return this._content?"data:"+this.getContentType()+";base64,"+this._content:null},e.prototype.toBlob=function(){return!this._cachedBlob&&this._content&&(this._cachedBlob=e.base64toBlob(this._content,this.getContentType())),this._cachedBlob},e.prototype.toArrayBuffer=function(){return this._content?e.base64ToArrayBuffer(this._content):null},Object.defineProperty(e.prototype,"length",{get:function(){var e=this.toBlob();return e?e.size:0},enumerable:!1,configurable:!0}),e.blobToBase64=function(e){return new Promise(function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){var e=r.result;t(e.substring(e.indexOf(",")+1))},r.onerror=function(){n(r.error)}})},e.base64toBlob=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=512);for(var r=atob((e||"").replace(/\s/g,"")),i=[],o=0;o<r.length;o+=n){for(var a=r.slice(o,o+n),s=new Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);var c=new Uint8Array(s);i.push(c)}return new Blob(i,{type:t})},e.base64ToArrayBuffer=function(e){return Uint8Array.from(atob(e),function(e){return e.charCodeAt(0)}).buffer},e.prototype.clearCachedBlob=function(){this._cachedBlob=null},e.defaultValue=new e,e}();t.BinaryData=b;var T=function(){function e(e,t,n,r,i,o,a){if(0===arguments.length)this.date=new Date(1900,0,1,0,0,0,0);else if(1===arguments.length)if(e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)){var s=e.getTime();isNaN(s)?this.date=new Date(1900,0,1,0,0,0,0):this.date=new Date(s)}else this.date=new Date(e);else l(e,1900)<100?(this.date=new Date(100,0,1,0,0,0,0),this.date.setFullYear(l(e,1900)),this.date.setMonth(l(t,1)-1),this.date.setDate(l(n,1)),this.date.setHours(l(r,0)),this.date.setMinutes(l(i,0)),this.date.setSeconds(l(o,0)),this.date.setMilliseconds(l(a,0))):this.date=new Date(l(e,1900),l(t,1)-1,l(n,1),l(r,0),l(i,0),l(o,0),l(a,0))}return Object.defineProperty(e,"defaultValue",{get:function(){return e.defaultValueField},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"year",{get:function(){return this.date.getFullYear()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"month",{get:function(){return this.date.getMonth()+1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"day",{get:function(){return this.date.getDate()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hours",{get:function(){return this.date.getHours()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minutes",{get:function(){return this.date.getMinutes()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seconds",{get:function(){return this.date.getSeconds()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"milliseconds",{get:function(){return this.date.getMilliseconds()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"weekDay",{get:function(){return this.date.getDay()},enumerable:!1,configurable:!0}),e.prototype.addYears=function(t){var n=new e(this.year+t,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliseconds);return 2===this.month&&29===this.day&&3===n.month?new e(n.year,2,28,n.hours,n.minutes,n.seconds,n.milliseconds):n},e.prototype.daysInMonth=function(e,t){return new Date(t,e,0).getDate()},e.prototype.addMonths=function(t){var n=new e(this.year,this.month+t,this.day,this.hours,this.minutes,this.seconds,this.milliseconds);return n.day===this.day?n:new e(n.year,n.month-1,this.daysInMonth(n.month-1,n.year),n.hours,n.minutes,n.seconds,n.milliseconds)},e.prototype.addDays=function(t){return new e(this.year,this.month,this.day+t,this.hours,this.minutes,this.seconds,this.milliseconds)},e.prototype.addHours=function(t){return new e(this.year,this.month,this.day,this.hours+t,this.minutes,this.seconds,this.milliseconds)},e.prototype.addMinutes=function(t){return new e(this.year,this.month,this.day,this.hours,this.minutes+t,this.seconds,this.milliseconds)},e.prototype.addSeconds=function(t){return new e(this.year,this.month,this.day,this.hours,this.minutes,this.seconds+t,this.milliseconds)},e.prototype.addMilliseconds=function(t){return new e(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliseconds+t)},e.prototype.equals=function(e){return!!e&&this.date.getTime()===e.date.getTime()},e.prototype.eq=function(e){return this.equals(e)},e.prototype.greaterThan=function(e){return this.date>e.date},e.prototype.gt=function(e){return this.greaterThan(e)},e.prototype.greaterThanOrEqualTo=function(e){return this.date>=e.date},e.prototype.gte=function(e){return this.greaterThanOrEqualTo(e)},e.prototype.lessThan=function(e){return this.date<e.date},e.prototype.lt=function(e){return this.lessThan(e)},e.prototype.lessThanOrEqualTo=function(e){return this.date<=e.date},e.prototype.lte=function(e){return this.lessThanOrEqualTo(e)},e.prototype.toNative=function(){return new Date(this.date.getTime())},e.prototype.getTime=function(){return this.date.getTime()},e.prototype.valueOf=function(){return this.date.valueOf()},e.fromISODate=function(t){return _.RFC3339_DATEPART.test(t)?e.internalFromUTCWithoutConversion(t+"T00:00:00Z"):e.defaultValue},e.prototype.toISODate=function(){return this.toString(_.RFC3339_DATEPART_FORMAT)},e.fromISOTime=function(t){return _.RFC3339_TIMEPART.test(t)?e.internalFromUTCWithoutConversion("1900-01-01T"+t+"Z"):e.defaultValue},e.prototype.toISOTime=function(){return this.toString(_.RFC3339_TIMEPART_FORMAT)},e.fromISODateTime=function(t){if(""===(t=t||"")||t.indexOf("1900-01-01")>=0&&t.indexOf("00:00:00")>=0)return e.defaultValue;var n=/([+\-]\d{2}((:\d{2})|(\d{2})?)|Z)$/;if(t.indexOf("T")>0&&!n.test(t))return e.internalFromUTCWithoutConversion(t.trim()+"Z");t=t.replace(/([+-]\d{2})$/,function(e){return e+"00"});var r=Date.parse(t);return isNaN(r)?e.defaultValue:new e(r)},e.internalFromUTCWithoutConversion=function(t){var n=Date.parse(t);if(!isNaN(n)){var r=new Date(n);return new e(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds())}return e.defaultValue},e.prototype.getMillisecondsString=function(){return(this.milliseconds/1e3).toFixed(3).substring(2,5)},e.prototype.toString=function(t){var n=this;return 0===arguments.length?this.equals(e.defaultValue)?"1900-01-01T00:00:00":this.date.toISOString():t.replace(/(\\.)|dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|ff?f?|FF?F?|\.FF?F?|tt?|zz?z?/g,function(e){if(0===e.indexOf("\\"))return e.substring(1);switch(e){case"hh":case"h":var t=n.hours<13?n.hours:n.hours-12;return a.DateTimeFormatInfo.padLeadingZeros((0===n.hours?12:t).toString(),e.length);case"HH":case"H":return a.DateTimeFormatInfo.padLeadingZeros(n.hours.toString(),e.length);case"mm":case"m":return a.DateTimeFormatInfo.padLeadingZeros(n.minutes.toString(),e.length);case"ss":case"s":return a.DateTimeFormatInfo.padLeadingZeros(n.seconds.toString(),e.length);case"fff":return n.getMillisecondsString();case"ff":return n.getMillisecondsString().substring(0,2);case"f":return n.getMillisecondsString().substring(0,1);case".FFF":case".FF":case".F":return 0===n.milliseconds?"":"."+a.DateTimeFormatInfo.removeTrailingZeros(n.getMillisecondsString());case"FFF":return a.DateTimeFormatInfo.removeTrailingZeros(n.getMillisecondsString());case"FF":return a.DateTimeFormatInfo.removeTrailingZeros(n.getMillisecondsString()).substring(0,2);case"F":return a.DateTimeFormatInfo.removeTrailingZeros(n.getMillisecondsString()).substring(0,1);case"yyyy":case"yyy":var r=n.year.toString();return"0"===r.charAt(0)?n.year.toString().substring(1):r;case"yy":return n.year.toString().substring(2,4);case"y":return Number(n.year.toString().substring(2,4)).toString();case"dddd":return a.DateTimeFormatInfo.getDayName(n.weekDay);case"ddd":return a.DateTimeFormatInfo.getShortDayName(n.weekDay);case"dd":case"d":return a.DateTimeFormatInfo.padLeadingZeros(n.day.toString(),e.length);case"MMMM":return a.DateTimeFormatInfo.getMonthName(n.month);case"MMM":return a.DateTimeFormatInfo.getShortMonthName(n.month);case"MM":case"M":return a.DateTimeFormatInfo.padLeadingZeros(n.month.toString(),e.length);case"t":return a.DateTimeFormatInfo.get12HourNotation(n.hours).substring(0,1);case"tt":return a.DateTimeFormatInfo.get12HourNotation(n.hours);case"zzz":return a.DateTimeFormatInfo.getTimezoneInformationFull(n.date.getTimezoneOffset());case"zz":return a.DateTimeFormatInfo.getTimezoneInformationHoursFull(n.date.getTimezoneOffset());case"z":return a.DateTimeFormatInfo.getTimezoneInformationHoursShort(n.date.getTimezoneOffset());default:return e}})},e.defaultValueField=new e,e}();t.DateTime=T;var _;!function(e){e.RFC3339_TIMEPART=/^([01][0-9]|2[0-3]):([0-5][0-9])(:[0-5][0-9](\.\d+)?)?$/,e.RFC3339_DATEPART=/^\d{4,}-(0\d|1[012])-([0-2]\d|3[01])$/,e.RFC3339_TIMEPART_FORMAT="HH:mm:ss",e.RFC3339_DATEPART_FORMAT="yyyy-MM-dd",e.MIN_INTEGER_VALUE=-2147483648,e.MAX_INTEGER_VALUE=2147483647,e.MIN_LONGINTEGER_VALUE=u.default.MIN_VALUE,e.MAX_LONGINTEGER_VALUE=u.default.MAX_VALUE,e.MIN_DECIMAL_VALUE=new r.default("2").pow(96).neg(),e.MAX_DECIMAL_VALUE=new r.default("2").pow(96).minus(1),e.MIN_DATE_VALUE=new T(1753,1,1),e.MAX_DATE_VALUE=new T(9999,12,31),e.MIN_TIME_VALUE=T.defaultValue,e.MAX_TIME_VALUE=T.defaultValue.addHours(23).addMinutes(59).addSeconds(59),e.MIN_DATETIME_VALUE=new T(1753,1,1,0,0,0),e.MAX_DATETIME_VALUE=new T(9999,12,31,23,59,59),e.DEFAULT_INTEGER=0,e.DEFAULT_LONGINTEGER=u.default.defaultValue,e.DEFAULT_DECIMAL=r.default.defaultValue,e.DEFAULT_CURRENCY=r.default.defaultValue,e.DEFAULT_TEXT="",e.DEFAULT_PHONENUMBER="",e.DEFAULT_EMAIL="",e.DEFAULT_BOOLEAN=!1,e.DEFAULT_DATE=T.defaultValue,e.DEFAULT_DATETIME=T.defaultValue,e.DEFAULT_TIME=T.defaultValue,e.DEFAULT_BINARYDATA=b.defaultValue,e.DEFAULT_OBJECT=null,e.FORMAT=new a.ApplicationFormatInfo(new a.DateTimeFormatInfo("yyyy-MM-dd","HH:mm:ss"),new a.NumberFormatInfo(".","")),e.ISO_DATE_FORMAT_REGEXP=/^\d{4,}-(0\d|1[012])-([0-2]\d|3[01])([T ]\d{2}:\d{2}(:\d{2}(\.\d+)?(([+\-]\d{2}((:\d{2})|(\d{2})?))|Z)?)?)?$/i}(_=t.Constants||(t.Constants={}));var E=function(){function e(){this.map={}}return e.prototype.getItem=function(e){return this.map[e]},e.prototype.setItem=function(e,t){this.map[e]=t},e.prototype.invalidate=function(e){void 0===e?this.map={}:this.setItem(e,void 0)},e.prototype.clone=function(){var t=new e;for(var n in this.map)t.setItem(n,this.map[n]);return t},e}();t.Cache=E;var w=function(){function e(){this.list=[]}return e.prototype.getItem=function(e){if(!(e>=this.length))return this.list[e]},e.prototype.append=function(e){this.list.push(e)},e.prototype.appendMultiple=function(e){this.list=this.list.concat(new Array(e))},e.prototype.setItem=function(e,t){this.list[e]=t},e.prototype.insert=function(e,t){this.list.splice(e,0,t)},e.prototype.invalidate=function(e){void 0===e?this.list=[]:this.list.splice(e,1)},Object.defineProperty(e.prototype,"length",{get:function(){return this.list.length},enumerable:!1,configurable:!0}),e}();t.ListCache=w,t.compare=f,t.equals=d,t.areBinaryNulls=p,t.defaultForType=h;var D=function(){function e(t,n,r,i,o){if(this.emptyListItem=t,this.data=n||new s.ImmutableList,this.itemIds=r||new s.ImmutableList,this._itemIdSeed=i||0,this._modelId=o||e.nextModelId++,n&&!r)for(var a=0,u=this.data.count();a<u;a++)this.itemIds=this.itemIds.push(this._itemIdSeed),this._itemIdSeed=this._itemIdSeed+1|0}return Object.defineProperty(e.prototype,"modelId",{get:function(){return this._modelId},enumerable:!1,configurable:!0}),e.prototype.push=function(t){return new e(this.emptyListItem,this.data.push(t),this.itemIds.push(this._itemIdSeed),this._itemIdSeed+1|0,this._modelId)},e.prototype.addFromOther=function(t){var n=this;return new e(this.emptyListItem,this.data.addFromOther(t.data),this.itemIds.pushAll(t.data.map(function(){return n._itemIdSeed++})),this._itemIdSeed,this._modelId)},e.prototype.pushAll=function(t){var n=this;return new e(this.emptyListItem,this.data.pushAll(t),this.itemIds.pushAll(t.map(function(){return n._itemIdSeed++})),this._itemIdSeed,this._modelId)},e.prototype.remove=function(t){return new e(this.emptyListItem,this.data.remove(t),this.itemIds.remove(t),this._itemIdSeed,this._modelId)},e.prototype.insert=function(t,n){return new e(this.emptyListItem,this.data.insert(t,n),this.itemIds.insert(t,this._itemIdSeed),this._itemIdSeed+1|0,this._modelId)},e.prototype.sort=function(t,n,r){var i=this,o=this.data.map(function(e,r){return{item:t(r),itemId:i.itemIds.get(r),by:n(t(r))}}),a=r?1:-1;o.sort(function(e,t){return a*f(e.by,t.by)});var u=s.ImmutableList.fromJS(o.map(function(e){return e.item})),c=s.ImmutableList.fromJS(o.map(function(e){return e.itemId}));return new e(this.emptyListItem,u,c,this._itemIdSeed,this._modelId)},e.prototype.getEmptyListItem=function(){return this.emptyListItem},e.prototype.setEmptyListItem=function(t){return new e(t,this.data,this.itemIds,this._itemIdSeed,this._modelId)},e.prototype.get=function(e){return this.data.get(e)},e.prototype.getId=function(e){return c.getEnvParams().ListItemIdWithoutModelId?this.itemIds.get(e)+"":this.modelId+"_"+this.itemIds.get(e)},e.prototype.count=function(){return this.data.count()},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.set=function(t,n){return new e(this.emptyListItem,this.data.set(t,n),this.itemIds,this._itemIdSeed,this._modelId)},e.prototype.clear=function(){return new e(this.emptyListItem,this.data.clear(),this.itemIds.clear(),this._itemIdSeed,this._modelId)},e.prototype.forEach=function(e){return this.data.forEach(e)},e.prototype.reduce=function(e,t){return this.data.reduce(e,t)},e.fromJS=function(t,n){return new e(n,s.ImmutableList.fromJS(t))},e.fromJSON=function(t,n){return new e(n,s.ImmutableList.fromJS(t))},e.prototype.clone=function(){return new e(this.emptyListItem,this.data.clone(),this.itemIds.clone(),this._itemIdSeed)},e.nextModelId=1,e}();t.ImmutableListWithTracking=D;var S=function(){function e(){this.writePropagateHandler=this.defaultWritePropagate,this.propagationParent=this}return e.getData=function(e){if(void 0!==e&&e.constructor!==D)return e.data},e.setPropagationHandler=function(t,n,r,i){t.writePropagateHandler=i,e.setPropagationParent(t,n),e.setPropagationKey(t,r)},e.setPropagationParent=function(e,t){e.propagationParent=t},e.setPropagationKey=function(e,t){e.propagationKey=t},e.prototype.writePropagate=function(e,t){if(this.data.constructor!==e.constructor)throw new Error("Unexpected new data type");this.data=e,this.writePropagateHandler.apply(this.propagationParent,[this.propagationKey,e,t])},e.prototype.defaultWritePropagate=function(e,t,n){this.onDefaultWritePropagate(n)},e.prototype.onDefaultWritePropagate=function(e){},e}();t.ImmutableBase=S;var x=function(e){function t(t,n){var r=e.call(this)||this;return r.cache=n||new E,r.data=t||r.constructor.createDefaultData(),r}return n.__extends(t,e),t.createDefaultData=function(){var e=this,t=e.RecordClass;if(t)return new t},t.prototype.getBasicProperty=function(e){return this.data.get(e)},t.prototype.setBasicProperty=function(e,n,r,i){this.data.get(e)!==n&&(t.checkType(r,n,i),this.writePropagate(this.data.set(e,n),this.cache),this.onPropertyValueChanged(e))},t.prototype.onPropertyValueChanged=function(e){},t.prototype.getComplexProperty=function(e,n){var r=this.cache.getItem(e);if(r)return t.setPropagationParent(r,this),r;var i=this.data.get(e),o=this.cache.getItem(e+"__cache");return r=new n(i,o||null),this.cache.setItem(e,r),o&&this.cache.invalidate(e+"__cache"),t.setPropagationHandler(r,this,e,this.internalSetComplexProperty),r},t.prototype.setComplexProperty=function(e,t,n,r){this.setProperties([{name:e,value:t,expectedType:n,valueType:r,isBasicType:!1}])},t.prototype.internalSetComplexProperty=function(e,t,n){this.internalSetProperties([{name:e,value:t,isBasicType:!1}],n)},t.prototype.setProperties=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r],a=t.getData(o.value)||o.value;this.data.get(o.name)!==a&&(void 0!==o.expectedType&&t.checkType(o.expectedType,o.value,o.valueType),n.push({name:o.name,value:a,isBasicType:o.isBasicType}))}n.length>0&&this.internalSetProperties(n)},t.prototype.internalSetProperties=function(e,t){for(var n=this.data,r=this.cloneCache(),i=0,o=e;i<o.length;i++){var a=o[i];n=n.set(a.name,a.value),a.isBasicType||(r.invalidate(a.name),r.invalidate(a.name+"__cache"),t&&r.setItem(a.name+"__cache",t))}this.writePropagate(n,r);for(var s=0,u=e;s<u.length;s++){var a=u[s];this.onPropertyValueChanged(a.name)}},t.prototype.cloneCache=function(){return this.cache.clone()},t.prototype.onDefaultWritePropagate=function(e){this.cache=e},t.checkType=function(e,n,r){switch(e){case y.Integer:t.ensureValidInteger(n);break;case y.LongInteger:t.ensureValidLongInteger(n);break;case y.Decimal:case y.Currency:t.ensureValidDecimal(n);break;case y.Text:case y.PhoneNumber:t.ensureValidText(n);break;case y.Email:t.ensureValidEmail(n);break;case y.Boolean:t.ensureValidBoolean(n);break;case y.Date:t.ensureValidDate(n);break;case y.Time:t.ensureValidTime(n);break;case y.DateTime:t.ensureValidDateTime(n);break;case y.Record:case y.RecordList:t.ensureValidComplexType(n,r);break;case y.BinaryData:t.ensureValidBinaryData(n);break;case y.Object:break;default:throw new TypeError("Unexpected data type: "+e)}},t.ensureValidBinaryData=function(e){if(!("string"==typeof e||e instanceof b))throw new TypeError("Expecting a Binary Data, found: "+e)},t.ensureValidInteger=function(e){if("number"!=typeof e||isNaN(e)||e%1!=0)throw new TypeError("Expecting an Integer, found: "+e);if(e<_.MIN_INTEGER_VALUE)throw new TypeError("Integers must be greater than "+_.MIN_INTEGER_VALUE+", found: "+e);if(e>_.MAX_INTEGER_VALUE)throw new TypeError("Integers must be lower than "+_.MAX_INTEGER_VALUE+", found: "+e)},t.ensureValidLongInteger=function(e){if(!e||e.constructor!==u.default)throw new TypeError("Expecting a LongInteger, found: "+e);if(e.lessThan(_.MIN_LONGINTEGER_VALUE))throw new TypeError("Long Integers must be greater than "+_.MIN_LONGINTEGER_VALUE.toString()+", found: "+e.toString());if(e.greaterThan(_.MAX_LONGINTEGER_VALUE))throw new TypeError("Long Integers must be lower than "+_.MAX_LONGINTEGER_VALUE.toString()+", found: "+e.toString())},t.ensureValidDecimal=function(e){if(!e||e.constructor!==r.default)throw new TypeError("Expecting a Decimal, found: "+e);if(e.lessThan(_.MIN_DECIMAL_VALUE))throw new TypeError("Decimals must be greater than "+_.MIN_DECIMAL_VALUE.toString()+", found: "+e.toString());if(e.greaterThan(_.MAX_DECIMAL_VALUE))throw new TypeError("Decimals must be lower than "+_.MAX_DECIMAL_VALUE.toString()+", found: "+e.toString())},t.ensureValidText=function(e){if("string"!=typeof e)throw new TypeError("Expecting a Text, found: "+e)},t.ensureValidEmail=function(e){if("string"!=typeof e)throw new TypeError("Expecting an Email, found: "+e)},t.ensureValidBoolean=function(e){if("boolean"!=typeof e)throw new TypeError("Expecting a Boolean, found: "+e)},t.ensureValidDate=function(e){if(!e||e.constructor!==T)throw new TypeError("Expecting a Date, found: "+e)},t.ensureValidTime=function(e){if(!e||e.constructor!==T)throw new TypeError("Expecting a Time, found: "+e)},t.ensureValidDateTime=function(e){if(!e||e.constructor!==T)throw new TypeError("Expecting a DateTime, found: "+e)},t.ensureValidComplexType=function(e,t){if(e){if(e.constructor===t)return;if(void 0!==e.isCompatibleWith){if(e.isCompatibleWith(t))return;throw new TypeError("Expecting a "+t.name+" type, found:  "+e.constructor.name)}}throw new TypeError("Expecting a Record or RecordList, found: "+e)},t.prototype.replaceWith=function(e){var n=t.getData(e);this.writePropagate(n,new E)},t.prototype.fastEquals=function(e){return this===e},t.prototype.equals=function(e){return!(!e||this.constructor!==e.constructor)},t.defineRecordClass=function(e){return s.defineRecordClass(e)},t.prototype.clone=function(){return new(0,this.constructor)(this.data,this.cloneCache())},t}(S);t.Record=x;var I=function(){function e(e,t,n,r,i,o,a,s,u){this.name=e,this.attrName=t,this.nameForJson=n,this.mandatory=r,this.ignoreForServer=i,this.dataType=o,this.optimizeList=s,this.complexType=u,this.defaultValue=a()}return e}(),N=function(){function e(e,t,n,r,i,o,a,s,u){this.name=e,this.attrName=t,this.nameForJson=n,this.mandatory=r,this.ignoreForServer=i,this.dataType=o,this.defaultValueGetter=a,this.optimizeList=s,this.complexType=u}return Object.defineProperty(e.prototype,"defaultValue",{get:function(){return this.defaultValueGetter()},enumerable:!1,configurable:!0}),e}(),A=function(e){function t(t,n){return e.call(this,t,n)||this}return n.__extends(t,e),Object.defineProperty(t,"isGenericRecordType",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getAttributes=function(){return this.constructor.Attributes||[]},t.getAttributes=function(){return this.Attributes||[]},t.isAnonymousRecord=function(){return this._isAnonymousRecord},t.attr=function(e,t,n,r,i,o,a,s,u){void 0===s&&(s=!0);var c;return"boolean"!=typeof s?(u=s,c=!0):c=s,o===y.DateTime||o===y.Date||o===y.Time?new N(e,t,n,r,i,o,a,c,u):new I(e,t,n,r,i,o,a,c,u)},t.attributesToDeclare=function(){return[]},t.init=function(){var e=this,n=e.attributesToDeclare();e.Attributes=n,n.forEach(function(t){t.attrName in e.prototype||(t.dataType===y.Record||t.dataType===y.RecordList?e.defineComplexProperty(t.attrName,t.dataType,t.complexType):e.defineBasicProperty(t.attrName,t.dataType))}),e.RecordClass=x.defineRecordClass(n.reduce(function(e,t){return e[t.attrName]=null,e},{}));var r="return function equals(other) {\n";r+="    return _super.prototype.equals.call(this, other)",n.forEach(function(e){g(e.dataType)?r+=" &&\n        this."+e.attrName+".equals(other."+e.attrName+")":r+=" &&\n        (this."+e.attrName+" === other."+e.attrName+")"}),r+=";\n",r+="};",e.prototype.equals=new Function("_super",r)(t)},t.createDefaultData=function(){var e=this,t=e.RecordClass;if(t){for(var n={},r=0,i=e.Attributes;r<i.length;r++){var o=i[r];o.dataType===y.Record||o.dataType===y.RecordList?n[o.attrName]=x.getData(o.defaultValue):n[o.attrName]=o.defaultValue}return new t(n)}},t.defineBasicProperty=function(e,t){Object.defineProperty(this.prototype,e,{enumerable:!0,configurable:!0,get:function(){return this.getBasicProperty(e)},set:function(n){this.setBasicProperty(e,n,t)}})},t.defineComplexProperty=function(e,t,n){Object.defineProperty(this.prototype,e,{enumerable:!0,configurable:!0,get:function(){return this.getComplexProperty(e,n)},set:function(r){this.setComplexProperty(e,r,t,n)}})},t.isCompatibleWith=function(e){return this===e||this.isAnonymousRecord()&&e.isAnonymousRecord()&&this.UniqueId===e.UniqueId},t.prototype.isCompatibleWith=function(e){return e.prototype instanceof t&&this.constructor.isCompatibleWith(e)},t.prototype.getNonSerializableAttributes=function(){return this.getAttributes().filter(function(e){return e.dataType===y.Object}).map(function(e){return e.attrName})},t.UniqueId="",t._isAnonymousRecord=!1,t}(x);t.GenericRecord=A;var O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.getItemType=function(){return this.itemType},t.prototype.getCache=function(){return null},t.prototype.newItem=function(e){throw new Error("@abstract")},t.prototype.resetEmptyListItem=function(){this.data=this.data.setEmptyListItem(this.newItem())},Object.defineProperty(t.prototype,"emptyListItem",{get:function(){return this.isEmpty?this.data.getEmptyListItem():this.data.get(0)},set:function(e){if(this.isEmpty){if(this.data.getEmptyListItem()===e)return;this.writePropagate(this.data.setEmptyListItem(e),this.getCache())}else{if(this.data.get(0)===e)return;this.writePropagate(this.data.set(0,e),this.getCache())}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"modelId",{get:function(){return this.data.modelId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return this.data.isEmpty()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.data.count()},enumerable:!1,configurable:!0}),t.prototype.isValidIndex=function(e,t){return void 0===t&&(t=!1),e%1==0&&e>=0&&e<this.length+(t?1:0)},t.prototype.checkIndex=function(e,t){if(void 0===t&&(t=!1),!this.isValidIndex(e,t)){var n="Index out of bounds. Index "+e+" for ";throw this.isEmpty?n+="empty list.":n+="bounds [0, "+(this.length-1)+"].",new Error(n)}},t.prototype.idOf=function(e){return this.checkIndex(e),this.data.getId(e)},t.prototype.append=function(e){this.writePropagate(this.data.push(e),this.getCache())},t.prototype.appendAll=function(e){e.length>0&&this.writePropagate(this.data.addFromOther(e.data),this.getCache())},t.prototype.pushAll=function(e){e.length>0&&this.writePropagate(this.data.pushAll(e),this.getCache())},t.prototype.insert=function(e,t){this.checkIndex(e,!0),this.writePropagate(this.data.insert(e,t),this.getCache())},t.prototype.remove=function(e){this.checkIndex(e),1===this.length&&this.resetEmptyListItem(),this.writePropagate(this.data.remove(e),this.getCache())},t.prototype.clear=function(){this.resetEmptyListItem(),this.writePropagate(this.data.clear(),this.getCache())},t.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(e(this.getItem(t)))return t;return-1},t.prototype.any=function(e){return-1!==this.indexOf(e)},t.prototype.all=function(e){return!this.any(function(t){return!e(t)})},t.prototype.filter=function(e){for(var t=new this.constructor,n=[],r=0;r<this.length;r++){var i=this.getItem(r);e(i)&&n.push(i)}return t.pushAll(n),t},t.prototype.distinct=function(){for(var e=new this.constructor,t=new Array,n=0;n<this.length;n++){for(var r=this.getItem(n),i=!0,o=0;o<t.length;o++)if(d(r,this.getItem(t[o]))){i=!1;break}i&&(t.push(n),e.append(r))}return e},t.prototype.sort=function(e,t){for(var n=[],r=0;r<this.length;r++)n[r]=this.getItem(r);var i=t?1:-1;n.sort(function(t,n){return i*f(e(t),e(n))}),this.clear(),this.pushAll(n)},t.prototype.getCurrent=function(e){if(this.isEmpty)return this.emptyListItem;var t=this.getCurrentRowNumber(e);return this.getItem(t)},t.prototype.getCurrentRowNumber=function(e){return e.getCurrentRowNumber(this)},t.prototype.getItem=function(e){return this.checkIndex(e),this.data.get(e)},t.prototype.setCurrent=function(e,t){if(this.isEmpty)this.emptyListItem=t;else{var n=this.getCurrentRowNumber(e);this.setItem(n,t)}},t.prototype.setItem=function(e,t){this.checkIndex(e),this.data.get(e)!==t&&this.writePropagate(this.data.set(e,t),this.getCache())},t.prototype.fastEquals=function(e){return this===e},t.prototype.equals=function(e){if(!e||this.constructor!==e.constructor||this.length!==e.length)return!1;if(this.isEmpty){return d(this.emptyListItem,e.emptyListItem)}for(var t=0;t<this.length;t++){if(!d(this.getItem(t),e.getItem(t)))return!1}return!0},t}(S);t.List=O;var C=function(e){function t(t){var n=e.call(this)||this;return n.data=t||new D(n.newItem()),n}return n.__extends(t,e),Object.defineProperty(t,"isBasicTypeListType",{get:function(){return!0},enumerable:!1,configurable:!0}),t.getTypeDefaultValue=function(){throw new Error("Not implemented: getTypeDefaultValue")},t.prototype.newItem=function(){return this.constructor.getTypeDefaultValue()},t.prototype.clone=function(){return new(0,this.constructor)(this.data.clone())},t}(O);t.BasicTypeList=C;var R=function(e){function t(t,n){var r=e.call(this)||this;if(r._recordType=r.constructor.getItemType(),!r._recordType)throw new TypeError("GenericRecordLists must define a RecordType");return r.data=t||new D(A.getData(r.newItem())),r.cache=n||new w,r}return n.__extends(t,e),Object.defineProperty(t,"isGenericRecordListType",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.getCache=function(){return this.cache},t.prototype.newItem=function(e){return new(this.getRecordType())(e)},t.prototype.resetEmptyListItem=function(){this.data=this.data.setEmptyListItem(A.getData(this.newItem()))},t.prototype.getRecordType=function(){return this._recordType},Object.defineProperty(t.prototype,"emptyListItem",{get:function(){return this.internalGetItem(0,this.isEmpty)},set:function(e){this.isEmpty?this.internalSetEmptyListItem(0,e):this.internalSetItem(0,e)},enumerable:!1,configurable:!0}),t.prototype.append=function(t){this.isEmpty&&this.cache.invalidate(0),e.prototype.append.call(this,A.getData(t)),this.cache.append(void 0)},t.prototype.appendAll=function(t){this.isEmpty&&this.cache.invalidate(0),e.prototype.appendAll.call(this,t),this.cache.appendMultiple(t.length)},t.prototype.pushAll=function(t){this.isEmpty&&this.cache.invalidate(0),e.prototype.pushAll.call(this,t.map(function(e){return x.getData(e)})),this.cache.appendMultiple(t.length)},t.prototype.insert=function(t,n){this.checkIndex(t,!0),this.isEmpty&&this.cache.invalidate(0),e.prototype.insert.call(this,t,A.getData(n)),this.cache.insert(t,void 0)},t.prototype.getItem=function(e){return this.internalGetItem(e,!1)},t.prototype.internalGetItem=function(e,n){n||this.checkIndex(e);var r=this.cache.getItem(e);return r?(t.setPropagationParent(r,this),t.setPropagationKey(r,e),r):(n?(r=this.newItem(this.data.getEmptyListItem()),t.setPropagationHandler(r,this,e,this.internalSetEmptyListItem)):(r=this.newItem(this.data.get(e)),t.setPropagationHandler(r,this,e,this.internalSetItem)),this.cache.setItem(e,r),r)},t.prototype.setItem=function(e,t){this.internalSetItem(e,t)},t.prototype.internalSetItem=function(e,t,n){var r=A.getData(t)||t;this.checkIndex(e),this.data.get(e)!==r&&(this.writePropagate(this.data.set(e,r),this.cache),this.cache.setItem(e,void 0))},t.prototype.internalSetEmptyListItem=function(e,t,n){var r=A.getData(t)||t;this.data.getEmptyListItem()!==r&&(this.writePropagate(this.data.setEmptyListItem(r),this.cache),this.cache.setItem(e,void 0))},t.prototype.remove=function(t){e.prototype.remove.call(this,t),this.cache.invalidate(t)},t.prototype.clear=function(){e.prototype.clear.call(this),this.cache.invalidate()},t.prototype.readAll=function(e,t){for(var n=[],r=0;r<t.length;r++){var i=this.newItem();e(i,t.item(r)),n.push(i)}this.pushAll(n)},t.prototype.clone=function(){return new(0,this.constructor)(this.data.clone())},t.isCompatibleWith=function(e){return this===e||this.getItemType().isCompatibleWith(e.getItemType())},t.prototype.isCompatibleWith=function(e){return e.prototype instanceof t&&this.constructor.isCompatibleWith(e)},t}(O);t.GenericRecordList=R;var L=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.getTypeDefaultValue=function(){return _.DEFAULT_INTEGER},t.itemType=y.Integer,t}(C);t.IntegerList=L;var M=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.getTypeDefaultValue=function(){return _.DEFAULT_LONGINTEGER},t.itemType=y.LongInteger,t}(C);t.LongIntegerList=M;var P=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.getTypeDefaultValue=function(){return _.DEFAULT_DATE},t.itemType=y.Date,t}(C);t.DateList=P;var F=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.getTypeDefaultValue=function(){return _.DEFAULT_DATETIME},t.itemType=y.DateTime,t}(C)
;t.DateTimeList=F;var V=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.getTypeDefaultValue=function(){return _.DEFAULT_TIME},t.itemType=y.Time,t}(C);t.TimeList=V;var j=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.getTypeDefaultValue=function(){return _.DEFAULT_DECIMAL},t.itemType=y.Decimal,t}(C);t.DecimalList=j;var U=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.getTypeDefaultValue=function(){return _.DEFAULT_CURRENCY},t.itemType=y.Currency,t}(C);t.CurrencyList=U;var B=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.getTypeDefaultValue=function(){return _.DEFAULT_EMAIL},t.itemType=y.Email,t}(C);t.EmailList=B;var k=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.getTypeDefaultValue=function(){return _.DEFAULT_PHONENUMBER},t.itemType=y.PhoneNumber,t}(C);t.PhoneNumberList=k;var q=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.getTypeDefaultValue=function(){return _.DEFAULT_BOOLEAN},t.itemType=y.Boolean,t}(C);t.BooleanList=q;var z=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.getTypeDefaultValue=function(){return _.DEFAULT_BINARYDATA},t.itemType=y.BinaryData,t}(C);t.BinaryDataList=z;var H=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.getTypeDefaultValue=function(){return _.DEFAULT_TEXT},t.itemType=y.Text,t}(C);t.TextList=H;var G=function(){function e(e){this.varValue=e}return Object.defineProperty(e.prototype,"value",{get:function(){return this.varValue},set:function(e){this.setValue(e)},enumerable:!1,configurable:!0}),e.prototype.setValue=function(e){this.varValue=e},e}();t.BasicVariableHolder=G;var W=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.prototype.setValue=function(t){e.prototype.setValue.call(this,t?t.clone():t)},t}(G);t.VariableHolder=W,t.RecordWithStaticConstructor=m;var K=function(e){function t(t,n){return e.call(this,t,n)||this}return n.__extends(t,e),t.attributesToDeclare=function(){return[this.attr("JSON","jSONOut","jSONOut",!0,!0,y.Text,function(){return h(y.Text)})].concat(e.attributesToDeclare.call(this))},t=n.__decorate([m()],t)}(A);t.JSONSerializeOutputType=K;var J=function(e){function t(t,n){return e.call(this,t,n)||this}return n.__extends(t,e),t.attributesToDeclare=function(){return[this.attr("ExceptionMessage","exceptionMessageAttr","exceptionMessageAttr",!0,!0,y.Text,function(){return h(y.Text)})].concat(e.attributesToDeclare.call(this))},t=n.__decorate([m()],t)}(A);t.ErrorHandlerOutputType=J;var Q=function(){function e(){this.typeDefinitions=new Map,this.typeCache=new Map}return e.prototype.isTypeRegistered=function(e){return void 0!==this.typeDefinitions.get(e)},e.prototype.registerTypeDefinition=function(e,t){this.typeDefinitions.set(e,t)},e.prototype.getType=function(e){var t=this.typeCache.get(e);if(t)return t;var r=this.typeDefinitions.get(e);if(!r)throw new TypeError("Type "+e+" was not registered");var i=function(e){function t(t,n){return e.call(this,t,n)||this}return n.__extends(t,e),t.attributesToDeclare=function(){var t=this;return r.map(function(e){return t.attr(e.name,e.attrName,e.nameForJson||e.attrName,void 0!==e.mandatory&&e.mandatory,void 0===e.ignoreForServer||e.ignoreForServer,e.dataType,e.defaultValue,void 0===e.optimizeList||e.optimizeList,e.complexType)}).concat(e.attributesToDeclare.call(this))},t=n.__decorate([m()],t)}(A);return this.typeCache.set(e,i),i},e}();t.RecordTypeFactory=Q;var Y=function(e){function t(t,n,r){var i=e.call(this)||this;return i.mainAttributeName=t,i.mainAttributeAttrName=n,i.additionalAttributes=r,i}return n.__extends(t,e),t.prototype.registerTypeDefinition=function(e,t){throw new Error("Invalid operation")},t.prototype.createMainAttributeInfo=function(e){return{name:this.mainAttributeName,attrName:this.mainAttributeAttrName,mandatory:!0,dataType:this.getDataType(e),defaultValue:this.getDefaultValue(e),complexType:this.getComplexType(e)}},t.prototype.registerTypeIfNeeded=function(t){if(!this.isTypeRegistered(t)){var n=[this.createMainAttributeInfo(t)];this.additionalAttributes&&(n=n.concat(this.additionalAttributes)),e.prototype.registerTypeDefinition.call(this,t,n)}},t.prototype.getType=function(t){return this.registerTypeIfNeeded(t),e.prototype.getType.call(this,t)},t}(Q);t.TypeKeyedTypeFactory=Y;var X=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}return n.__extends(t,e),t.prototype.getDataType=function(e){return e},t.prototype.getDefaultValue=function(e){return function(){return h(e)}},t.prototype.getComplexType=function(e){},t}(Y);t.BasicTypeKeyedTypeFactory=X;var $=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}return n.__extends(t,e),t.prototype.getDataType=function(e){return y.Record},t.prototype.getDefaultValue=function(e){return function(){return S.getData(new e)}},t.prototype.getComplexType=function(e){return e},t}(Y);t.ComplexTypeKeyedTypeFactory=$;!function(e){function t(e){return e&&e.constructor===r.default}function n(e){return e&&e.value&&e.value.constructor===b}function o(e){return t(e)&&!e.isNaN()}function a(e){return _.MIN_DECIMAL_VALUE.lessThanOrEqualTo(e)&&_.MAX_DECIMAL_VALUE.greaterThanOrEqualTo(e)}function s(e){return"string"==typeof e}function c(e){return"boolean"==typeof e}function l(e){return s(e)||p(e)||c(e)||E(e)||m(e)||t(e)}function f(e){return d(e)&&e%1==0}function d(e){return p(e)&&!isNaN(e)}function p(e){return"number"==typeof e}function h(e){return e>=_.MIN_INTEGER_VALUE&&e<=_.MAX_INTEGER_VALUE}function g(e){return m(e)}function m(e){return e&&e.constructor===u.default}function y(e){return w(e)&&e.hours===_.DEFAULT_DATE.hours&&e.minutes===_.DEFAULT_DATE.minutes&&e.seconds===_.DEFAULT_DATE.seconds}function v(e){return w(e)&&e.year===_.DEFAULT_TIME.year&&e.month===_.DEFAULT_TIME.month&&e.day===_.DEFAULT_TIME.day}function E(e){return e instanceof T}function w(e){return E(e)&&!isNaN(e.getTime())}function D(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function S(e){return D(e)&&!isNaN(e.getTime())}function x(e){return!!e&&(void 0!==e.content||void 0!==e.url)}function I(e){var t="",n="";if(e.greaterThan(M))t="maximum",n=M.toString();else{if(!e.lessThan(P))return;t="minimum",n=P.toString()}var r="Unable to convert "+e.toString()+" to the Javascript Number type since exceeds the "+t+" value allowed which is "+n+".";throw new i.Exceptions.NumberOverflowException(r)}function N(e){if(e.decimalPlaces()>16){var t="Unable to convert "+e.toString()+" to the Javascript Number type because it will lead to precision loss. The maximum safe number of digits after the decimal point is 16.";throw new i.Exceptions.NumberOverflowException(t)}}function A(e,t,n,r){return"Unable to convert "+e+" to the "+t+" type since it exceeds the "+n+" value allowed which is "+r+"."}function O(e,t,n,r){var o=F.None,a="",s=Math.max(t,P),u=Math.min(n,M);if(e<s)o=F.Minimum,a=s.toString();else{if(!(e>u))return null;o=F.Maximum,a=u.toString()}throw new i.Exceptions.NumberOverflowException(A(e.toString(),r,o,a))}function C(e){O(e,_.MIN_INTEGER_VALUE,_.MAX_INTEGER_VALUE,"Integer")}function R(e){O(e,_.MIN_LONGINTEGER_VALUE.toNumber(),_.MAX_LONGINTEGER_VALUE.toNumber(),"Long Integer")}function L(e){O(e,_.MIN_DECIMAL_VALUE.toNumber(),_.MAX_DECIMAL_VALUE.toNumber(),"Decimal")}e.isDecimal=t,e.isBinaryData=n,e.isValidDecimal=o,e.isWithinDecimalRange=a,e.isText=s,e.isBoolean=c,e.isBasicType=l,e.isValidInteger=f,e.isValidJsNumber=d,e.isJsNumber=p,e.isWithinIntegerRange=h,e.isValidLongInteger=g,e.isLongInteger=m,e.isValidDate=y,e.isValidTime=v,e.isDateTime=E,e.isValidDateTime=w,e.isJsDate=D,e.isValidJsDate=S,e.hasBinaryDataInterface=x;var M=9007199254740991,P=-9007199254740991;e.ensureNumberInsideBounds=I,e.ensureNumberPrecision=N;var F=function(){function e(){}return Object.defineProperty(e,"None",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Minimum",{get:function(){return"minimum"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"Maximum",{get:function(){return"maximum"},enumerable:!1,configurable:!0}),e}();e.ensureIntegerInsideBounds=C,e.ensureLongIntegerInsideBounds=R,e.ensureDecimalInsideBounds=L}(t.TypeValidations||(t.TypeValidations={}))}),define("path-to-regexp",["exports"],function(e){"use strict";function t(e){for(var t=[],n=0;n<e.length;){var r=e[n];if("*"!==r&&"+"!==r&&"?"!==r)if("\\"!==r)if("{"!==r)if("}"!==r)if(":"!==r)if("("!==r)t.push({type:"CHAR",index:n,value:e[n++]});else{var i=1,o="",a=n+1;if("?"===e[a])throw new TypeError('Pattern cannot start with "?" at '+a);for(;a<e.length;)if("\\"!==e[a]){if(")"===e[a]){if(0===--i){a++;break}}else if("("===e[a]&&(i++,"?"!==e[a+1]))throw new TypeError("Capturing groups are not allowed at "+a);o+=e[a++]}else o+=e[a++]+e[a++];if(i)throw new TypeError("Unbalanced pattern at "+n);if(!o)throw new TypeError("Missing pattern at "+n);t.push({type:"PATTERN",index:n,value:o}),n=a}else{for(var s="",a=n+1;a<e.length;){var u=e.charCodeAt(a);{if(!(u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||95===u))break;s+=e[a++]}}if(!s)throw new TypeError("Missing parameter name at "+n);t.push({type:"NAME",index:n,value:s}),n=a}else t.push({type:"CLOSE",index:n,value:e[n++]});else t.push({type:"OPEN",index:n,value:e[n++]});else t.push({type:"ESCAPED_CHAR",index:n++,value:e[n++]});else t.push({type:"MODIFIER",index:n,value:e[n++]})}return t.push({type:"END",index:n,value:""}),t}function n(e,n){void 0===n&&(n={});for(var r=t(e),i=n.prefixes,o=void 0===i?"./":i,a="[^"+s(n.delimiter||"/#?")+"]+?",u=[],c=0,l=0,f="",d=function(e){if(l<r.length&&r[l].type===e)return r[l++].value},p=function(e){var t=d(e);if(void 0!==t)return t;var n=r[l],i=n.type,o=n.index;throw new TypeError("Unexpected "+i+" at "+o+", expected "+e)},h=function(){for(var e,t="";e=d("CHAR")||d("ESCAPED_CHAR");)t+=e;return t};l<r.length;){var g=d("CHAR"),m=d("NAME"),y=d("PATTERN");if(m||y){var v=g||"";-1===o.indexOf(v)&&(f+=v,v=""),f&&(u.push(f),f=""),u.push({name:m||c++,prefix:v,suffix:"",pattern:y||a,modifier:d("MODIFIER")||""})}else{var b=g||d("ESCAPED_CHAR");if(b)f+=b;else{f&&(u.push(f),f="");if(d("OPEN")){var v=h(),T=d("NAME")||"",_=d("PATTERN")||"",E=h();p("CLOSE"),u.push({name:T||(_?c++:""),pattern:T&&!_?a:_,prefix:v,suffix:E,modifier:d("MODIFIER")||""})}else p("END")}}}return u}function r(e,t){return i(n(e,t),t)}function i(e,t){void 0===t&&(t={});var n=u(t),r=t.encode,i=void 0===r?function(e){return e}:r,o=t.validate,a=void 0===o||o,s=e.map(function(e){if("object"==typeof e)return new RegExp("^(?:"+e.pattern+")$",n)});return function(t){for(var n="",r=0;r<e.length;r++){var o=e[r];if("string"!=typeof o){var u=t?t[o.name]:void 0,c="?"===o.modifier||"*"===o.modifier,l="*"===o.modifier||"+"===o.modifier;if(Array.isArray(u)){if(!l)throw new TypeError('Expected "'+o.name+'" to not repeat, but got an array');if(0===u.length){if(c)continue;throw new TypeError('Expected "'+o.name+'" to not be empty')}for(var f=0;f<u.length;f++){var d=i(u[f],o);if(a&&!s[r].test(d))throw new TypeError('Expected all "'+o.name+'" to match "'+o.pattern+'", but got "'+d+'"');n+=o.prefix+d+o.suffix}}else if("string"!=typeof u&&"number"!=typeof u){if(!c){var p=l?"an array":"a string";throw new TypeError('Expected "'+o.name+'" to be '+p)}}else{var d=i(String(u),o);if(a&&!s[r].test(d))throw new TypeError('Expected "'+o.name+'" to match "'+o.pattern+'", but got "'+d+'"');n+=o.prefix+d+o.suffix}}else n+=o}return n}}function o(e,t){var n=[];return a(p(e,n,t),n,t)}function a(e,t,n){void 0===n&&(n={});var r=n.decode,i=void 0===r?function(e){return e}:r;return function(n){var r=e.exec(n);if(!r)return!1;for(var o=r[0],a=r.index,s=Object.create(null),u=1;u<r.length;u++)!function(e){if(void 0===r[e])return"continue";var n=t[e-1];"*"===n.modifier||"+"===n.modifier?s[n.name]=r[e].split(n.prefix+n.suffix).map(function(e){return i(e,n)}):s[n.name]=i(r[e],n)}(u);return{path:o,index:a,params:s}}}function s(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function u(e){return e&&e.sensitive?"":"i"}function c(e,t){if(!t)return e;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,i=n.exec(e.source);i;)t.push({name:i[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),i=n.exec(e.source);return e}function l(e,t,n){var r=e.map(function(e){return p(e,t,n).source});return new RegExp("(?:"+r.join("|")+")",u(n))}function f(e,t,r){return d(n(e,r),t,r)}function d(e,t,n){void 0===n&&(n={});for(var r=n.strict,i=void 0!==r&&r,o=n.start,a=void 0===o||o,c=n.end,l=void 0===c||c,f=n.encode,d=void 0===f?function(e){return e}:f,p="["+s(n.endsWith||"")+"]|$",h="["+s(n.delimiter||"/#?")+"]",g=a?"^":"",m=0,y=e;m<y.length;m++){var v=y[m];if("string"==typeof v)g+=s(d(v));else{var b=s(d(v.prefix)),T=s(d(v.suffix));if(v.pattern)if(t&&t.push(v),b||T)if("+"===v.modifier||"*"===v.modifier){var _="*"===v.modifier?"?":"";g+="(?:"+b+"((?:"+v.pattern+")(?:"+T+b+"(?:"+v.pattern+"))*)"+T+")"+_}else g+="(?:"+b+"("+v.pattern+")"+T+")"+v.modifier;else g+="("+v.pattern+")"+v.modifier;else g+="(?:"+b+T+")"+v.modifier}}if(l)i||(g+=h+"?"),g+=n.endsWith?"(?="+p+")":"$";else{var E=e[e.length-1],w="string"==typeof E?h.indexOf(E[E.length-1])>-1:void 0===E;i||(g+="(?:"+h+"(?="+p+"))?"),w||(g+="(?="+h+"|"+p+")")}return new RegExp(g,u(n))}function p(e,t,n){return e instanceof RegExp?c(e,t):Array.isArray(e)?l(e,t,n):f(e,t,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.parse=n,e.compile=r,e.tokensToFunction=i,e.match=o,e.regexpToFunction=a,e.tokensToRegexp=d,e.pathToRegexp=p}),define("OutSystems/ClientRuntime/modules/Common/IndexedStack",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this.stack=[],this.map={},this.counter=0}return e.prototype.push=function(e){var t=this.counter++;return this.stack.push(t),this.map[t]=e,t},e.prototype.remove=function(e){var t=this.stack.indexOf(e),n=t>-1;return n&&(this.stack.splice(t,1),delete this.map[e]),n},e.prototype.pop=function(){if(0===this.stack.length)throw new Error("IndexedStack: pop from empty stack.");var e=this.stack.pop(),t=this.map[e];return delete this.map[e],t},e.prototype.clear=function(){this.stack=[],this.map={}},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.stack.length},enumerable:!1,configurable:!0}),e}();t.default=n}),define("OutSystems/ClientRuntime/Navigation",["require","exports","path-to-regexp","./ApplicationInfo","./Exceptions","./Flow","./Logger","./modules/Common/IndexedStack","./RegExpHelper"],function(e,t,n,r,i,o,a,s,u){"use strict";function c(e){if(!l(e))throw new i.Exceptions.OutOfContextException}function l(e){return!e||!e.isOutOfContext}function f(e){if(e)throw new i.Exceptions.RedirectOccurredException}function d(e){ie.push(e)}function p(){return ie[ie.length-1]}function h(){return ie.pop()}function g(e){void 0===e&&(e=!1),a.trace(J,"Next navigation will force a reload..."),ae=!0,se=e}function m(){return ae}function y(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),ae=e,se=t}function v(){return de}function b(){return"undefined"!=typeof window&&window.location.search.indexOf(ee)>=0}function T(e){var t=e.indexOf(X)<0?X:Z,n=""+t+ee+"="+(new Date).valueOf(),r=e.indexOf($);return r>=0?[e.slice(0,r),n,e.slice(r)].join(""):""+e+n}function _(e){void 0===e&&(e=!1);var n=W();t.changeWindowLocation(n,e)}function E(e){void 0===e&&(e=!1),t.changeWindowLocation(t.getCurrentLocation().href,e,!0)}function w(e){return W(r.getBasePath(),e)}function D(e){for(var t=(new Date).getTime(),n=t-ne;re.length>0&&re[0].timestamp<n;)re.shift();return re.reduce(function(t,n){return n.url===e?t+1:t},0)<te?(re.push({timestamp:t,url:e}),!1):(a.trace(J,"Identified a recursive navigation to '"+e+"'."),!0)}function S(e){return oe.push(e)}function x(e){oe.remove(e)}function I(e){var t={};return e.length>0&&e.split(Z).forEach(function(e){var n=e.split("=");if(2===n.length){var r=N(n[0]),i=N(n[1]);t[r]=i}}),t}function N(e){return decodeURIComponent(e.replace(/\+/g," "))}function A(e,n){var i=ae;if(ae&&(ae=!1),n&&!oe.isEmpty){var s=oe.pop();return o.tryCatch(s,function(e){a.error(r.getHomeModuleName(),e)}),!1}var u=V(e);if(u||i){var c=t.getUrlInfo(e.pathname),l=r.getModules(),f=r.getBasePath(),d=void 0;if(c.isInternal){d=!0;for(var p in l)if(l.hasOwnProperty(p)){var h=c.url.replace(/\/$/,""),g=l[p];if(O(h,W(f),g)||g.moduleName!==r.getHomeModuleName()&&O(h,g.moduleName,g)){d=!1;break}}}else d=!1;if(i||d){var m=void 0;if(d)m=W();else{var y=e.search||"";m=f===e.pathname&&""===y?/\/$/.test(e.pathname)?e.pathname:e.pathname+"/":e.pathname+y}return t.changeWindowLocation(m,se,u),!d}}return oe.clear(),!0}function O(e,t,r){return t.replace(/\/$/,"")===e||r.screens.some(function(r){var i=W(t,r.screenUrl);return n.pathToRegexp(i).test(e)})}function C(){r.isWebApplication()&&window.stop&&"complete"===document.readyState&&(a.trace(J,"Stopping all currently pending resources."),window.stop())}function R(e,n,r,i,o){if(c(r),D(e))throw Error("Too many redirects.");i||C();var a=t.getUrlInfo(e);ie&&p().goTo&&a.isInternal?p().goTo(a,n,o):t.changeWindowLocation(e),f(i)}function L(e,t,n){c(t),n||C(),ie&&p().goBack?p().goBack(e):window.history.back(),f(n)}function M(e,t,n){c(t),n||C(),ie&&p().goForward?p().goForward(e):window.history.forward(),f(n)}function P(e,t,n){return n+e.substring(t.length)}function F(){var e=t.getCurrentLocation();if("http:"===e.protocol.toLocaleLowerCase()){if("localhost"!==e.hostname.toLocaleLowerCase()){var n=P(e.href,e.protocol,"https:");return t.changeWindowLocation(n,!1,!0),!0}a.log("Navigation","Accessing through http://localhost is not supported. Please access the application using the hostname instead.")}return!1}function V(e){return e.action.toUpperCase()===t.NAVIGATE_FROM_HISTORY_ACTION}function j(e,t,n){var r,i=e,o=e;return"string"==typeof t?(o=t,r=U(i,o,n)):(n=t,i="",r=B(o,n)),r}function U(e,t,n){var r=H(n,t),i=G(n,r);return k(i,t),z(e,t,i,r)}function B(e,t){var n=Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&");return e+(n.length>0?"?"+n:"")}function k(e,t){var r,i=n.parse(t),o=i.filter(function(e){return"string"!=typeof e&&"?"===e.modifier}).map(function(t){var n;return{name:t.name,value:null!==(n=e[t.name])&&void 0!==n?n:""}}),a=!1;o.forEach(function(e){if(a&&!q(e.value))throw new Error("Error processing optional parameters on path "+t+". The parameter "+r.name+" has an empty value while "+e.name+" has a non-empty value. All optional parameters before "+e.name+" must have a value when "+e.name+" has a value.");q(e.value)&&(r=e,a=!0)})}function q(e){return""===e||null===e||void 0===e}function z(e,t,r,i){var o=Object.keys(i).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(i[e])}).join("&");try{var s=n.compile(t,{encode:function(e){return encodeURIComponent(e)}}),u=s(r),c=u+(o.length>0?"?"+o:"");return K(e,c)}catch(n){var l=new RegExp('^Expected "(.*)" to be a string$',"g").exec(n.message);if(l){var f=l[1],d="Error building URL for "+t+". Parameter "+f+" is missing or has an empty value";return void a.error(e,d)}throw n}}function H(e,t){var r=n.parse(t);return Object.keys(e).filter(function(e){return!r.some(function(t){return"string"!=typeof t&&t.name===e})}).reduce(function(t,n){return t[n]=e[n],t},{})}function G(e,t){return Object.keys(e).filter(function(n){return""!==e[n]&&!(n in t)}).reduce(function(t,n){return t[n]=e[n],t},{})}function W(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?r.getBasePath():"/"+e.join("/")).replace(Y,"/")}function K(e,t){var n=r.getBasePath(),i=t.replace(/^\//,"");return e===r.getHomeModuleName()?""+n+i:"/"+e+"/"+i}Object.defineProperty(t,"__esModule",{value:!0}),t.VersionedURL=t.buildApplicationRelativeUrl=t.generateScreenURL=t.locationReachedFromHistory=t.ensureRequestSecurity=t.switchUrlProtocol=t.navigateForward=t.navigateBack=t.navigateTo=t.urlBelongsToPrefix=t.onBeforeNavigate=t.getUrlInfo=t.unregisterBackNavigationHandler=t.registerBackNavigationHandler=t.reloadCurrentLocation=t.reloadApplication=t.addInvalidationSuffixToUrl=t.currentLocationHasTimestamp=t.changeWindowLocation=t.hasPendingReload=t.getLocationFromUrl=t.urlBelongsToCurrentApplication=t.getSearchParameterValue=t.getCurrentLocation=t.resetReloadState=t.willReloadInNextNavigation=t.forceReloadOnNextNavigation=t.removeNavigationCallbacks=t.getNavigationCallbacks=t.setNavigationCallbacks=t.throwRedirectOccurredExceptionIfNeeded=t.isValidContext=t.validateContext=t.SCREEN_URL_PART_SEPARATOR=t.NAVIGATE_FROM_HISTORY_ACTION=t.NAVIGATE_TO_URL_ACTION=void 0;var J="Navigation",Q=new RegExp("/([^/]*)"),Y=new RegExp(/\/(\/)+/gm),X=(new RegExp(/^\/|\/$/g),"?"),$="#",Z="&",ee="_ts",te=10,ne=1e3;t.NAVIGATE_TO_URL_ACTION="PUSH",t.NAVIGATE_FROM_HISTORY_ACTION="POP",t.SCREEN_URL_PART_SEPARATOR="-";var re=[],ie=[],oe=new s.default;t.validateContext=c,t.isValidContext=l,t.throwRedirectOccurredExceptionIfNeeded=f,t.setNavigationCallbacks=d,t.getNavigationCallbacks=p,t.removeNavigationCallbacks=h;var ae=!1,se=!1;t.forceReloadOnNextNavigation=g,t.willReloadInNextNavigation=m,t.resetReloadState=y;var ue=function(){var e;return{protocol:(e=window.location,e.protocol),pathname:e.pathname,href:e.href,search:e.search,hostname:window.location.hostname||window.location.host.split(":")[0]}};t.getCurrentLocation=ue;var ce=function(e){return void 0===e?null:I(window.location.search.substring(1))[e]};t.getSearchParameterValue=ce;var le=function(e,n){var i=void 0===n?{}:n,o=i.getLocation,a=void 0===o?t.getCurrentLocation:o,s=i.getBasePath,c=void 0===s?r.getBasePath:s;if("http:"!==e.protocol&&"https:"!==e.protocol&&"outsystems:"!==e.protocol)return!1;var l=a().hostname;if(l!==(""!==e.hostname?e.hostname:l))return!1;var f=Q.exec(e.pathname);return!(!f||f.length<2)&&new RegExp("^"+u.escape(c()),"i").test(e.pathname+"/")};t.urlBelongsToCurrentApplication=le;var fe=function(e){var t=document.createElement("a");return t.href=e,t};t.getLocationFromUrl=fe;var de=!1;t.hasPendingReload=v;var pe=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),t&&(e=T(e)),a.trace(J,"Reloading application with url: '"+e+"' (replace = "+n+")");var r=function(){n?window.location.replace(e):window.location.href=e};de=!0,a.flushLogsToStorage(!0).then(r).catch(r)};t.changeWindowLocation=pe,t.currentLocationHasTimestamp=b,t.addInvalidationSuffixToUrl=T,t.reloadApplication=_,t.reloadCurrentLocation=E,t.registerBackNavigationHandler=S,t.unregisterBackNavigationHandler=x;var he=function(e){var n,r=!1,i="",o=e,a=-1!==e.indexOf(":")||0===e.indexOf("/"),s=o.indexOf($);-1!==s&&(n=o.substring(s+1).trim(),o=o.substring(0,s));var u=o.indexOf(X);if(-1!==u&&(i=o.substring(u+1).trim(),o=o.substring(0,u)),a){var c=t.getLocationFromUrl(o);r=t.urlBelongsToCurrentApplication(c),r&&(o=c.pathname)}else o=w(o),r=!0;return{url:e,isInternal:r,path:o,queryParams:I(i),hash:n}};t.getUrlInfo=he,t.onBeforeNavigate=A,t.urlBelongsToPrefix=O,t.navigateTo=R,t.navigateBack=L,t.navigateForward=M,t.switchUrlProtocol=P,t.ensureRequestSecurity=F,t.locationReachedFromHistory=V,t.generateScreenURL=j,t.buildApplicationRelativeUrl=W;!function(e){function t(e){r=e}function n(e){return r(e)}var r=function(e){return e};e.setUrlVersionProvider=t,e.getVersionedUrl=n}(t.VersionedURL||(t.VersionedURL={}))}),define("OutSystems/ClientRuntime/RolesInfo",["require","exports","tslib","./ApplicationInfo","./Communication","./CookiesManager","./Exceptions","./Logger","./StorageProvider"],function(e,t,n,r,i,o,a,s,u){"use strict";function c(e){return n.__awaiter(this,void 0,void 0,function(){var r,i,o,a;return n.__generator(this,function(n){switch(n.label){case 0:return t.RolesInfoPersistentStorage=e,i=!!t.RolesInfoPersistentStorage,i?[4,t.RolesInfoPersistentStorage.isReady()]:[3,2];case 1:i=n.sent(),n.label=2;case 2:return r=i,o=this.getUserId(),p()||0===o||!r?[3,4]:[4,t.RolesInfoPersistentStorage.getValue(t.ROLES_INFO_MODULE_NAME)];case 3:a=n.sent(),t.RolesInfoStorage.rolesInfo.set("undefined"===a?void 0:a),n.label=4;case 4:return[2]}})})}function l(){return n.__awaiter(this,void 0,void 0,function(){var e,t,r;return n.__generator(this,function(n){switch(n.label){case 0:if(e=this.getUserId(),p()&&!d()||0===e||!i.NetworkStatus.isOnline())return[3,5];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,i.getRoles()];case 2:return t=n.sent(),[4,f(t)];case 3:return n.sent(),[3,5];case 4:return r=n.sent(),s.log("RolesInfo","Failed to load role data from the server for user "+e+" after not finding it locally: "+(null===r||void 0===r?void 0:r.message)),[3,5];case 5:return[2]}})})}function f(e){return n.__awaiter(this,void 0,void 0,function(){var r,i;return n.__generator(this,function(n){switch(n.label){case 0:return r=!p()||e!==t.RolesInfoStorage.rolesInfo.get(),t.RolesInfoStorage.rolesInfo.set(e),[4,null===t.RolesInfoPersistentStorage||void 0===t.RolesInfoPersistentStorage?void 0:t.RolesInfoPersistentStorage.isReady()];case 1:return i=n.sent(),r&&i?[4,t.RolesInfoPersistentStorage.setValue(t.ROLES_INFO_MODULE_NAME,e)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})}function d(){var e;return","===(null===(e=t.RolesInfoStorage.rolesInfo.get())||void 0===e?void 0:e.trim())}function p(){return t.RolesInfoStorage.rolesInfo.isDefined()}function h(){var e=o.readCookie(r.getUserCookieName());if(s.trace(t.ROLES_INFO_MODULE_NAME,"Checking User's ID: User cookie value ("+e+")"),null===e)return 0;var n=/uid=(\d+)/,i=e.match(n);return null===i?(s.trace(t.ROLES_INFO_MODULE_NAME,"Checking User's ID: User is Anonymous"),0):parseInt(i[1],10)}function g(){if(0===this.getUserId())throw s.trace(t.ROLES_INFO_MODULE_NAME,"Checking authorization: Not authorized since user is not registered"),new a.Exceptions.NotRegisteredException("","Registered role required");s.trace(t.ROLES_INFO_MODULE_NAME,"Checking authorization: User authorized since it is registered")}function m(e){if(0===this.getUserId())throw s.trace(t.ROLES_INFO_MODULE_NAME,"Checking authorization: Not authorized because user is not logged in"),e[e.length-1].roleException;if(!p())throw s.trace(t.ROLES_INFO_MODULE_NAME,"Checking authorization: Not authorized since user don't have roles for the specified user provider"),e[e.length-1].roleException;s.trace(t.ROLES_INFO_MODULE_NAME,function(){var t="";return e.forEach(function(e){return t+=e.roleException.message+" [RoleKey="+e.roleKey+"] "}),"Checking authorization: Required Roles ( "+t+")"});var n=t.RolesInfoStorage.rolesInfo.get();if(s.trace(t.ROLES_INFO_MODULE_NAME,"Checking authorization: User roles keys ("+n+")"),!e.some(function(e){return n.indexOf(e.roleKey)>=0}))throw s.trace(t.ROLES_INFO_MODULE_NAME,"Checking authorization: Not authorized since roles don't match"),e[e.length-1].roleException;s.trace(t.ROLES_INFO_MODULE_NAME,"Checking authorization: User authorized due to role match")}Object.defineProperty(t,"__esModule",{value:!0}),t.checkRoles=t.checkRegistered=t.getUserId=t.areRolesDefined=t.areRolesEmpty=t.storeRoleInformation=t.initializeRolesFromServer=t.initialize=t.RolesInfoPersistentStorage=t.RolesInfoStorage=t.ROLES_INFO_MODULE_NAME=void 0,t.ROLES_INFO_MODULE_NAME="RolesInfo",t.RolesInfoStorage={rolesInfo:new u.StorageObject(u.StorageType.Persistent,t.ROLES_INFO_MODULE_NAME,null,r.getUserProviderName)},t.initialize=c,t.initializeRolesFromServer=l,t.storeRoleInformation=f,t.areRolesEmpty=d,t.areRolesDefined=p,t.getUserId=h,t.checkRegistered=g,t.checkRoles=m}),define("OutSystems/ClientRuntime/BuiltinFunctions",["require","exports","./ApplicationInfo","./DataTypes","./Injector","./Injector/KnownServices","./Navigation","./RolesInfo"],function(e,t,n,r,i,o,a,s){"use strict";function u(e){return void 0===e&&(e=r.Constants.FORMAT.defaultDateTimeFormat),{year:parseInt(RegExp["$"+(e.yearIndexForDate+1)],10),month:parseInt(RegExp["$"+(e.monthIndexForDate+1)],10),day:parseInt(RegExp["$"+(e.dayIndexForDate+1)],10)}}function c(e){void 0===e&&(e=r.Constants.FORMAT.defaultDateTimeFormat);var t=parseInt(RegExp["$"+(e.secondsIndexForTime+1)],10);return{hours:parseInt(RegExp["$"+(e.hoursIndexForTime+1)],10),minutes:parseInt(RegExp["$"+(e.minutesIndexForTime+1)],10),seconds:isNaN(t)?0:t}}function l(e){void 0===e&&(e=r.Constants.FORMAT.defaultDateTimeFormat);var t=parseInt(RegExp["$"+(e.secondsIndexForDateTime+1)],10);return{year:parseInt(RegExp["$"+(e.yearIndexForDateTime+1)],10),month:parseInt(RegExp["$"+(e.monthIndexForDateTime+1)],10),day:parseInt(RegExp["$"+(e.dayIndexForDateTime+1)],10),hours:parseInt(RegExp["$"+(e.hoursIndexForDateTime+1)],10),minutes:parseInt(RegExp["$"+(e.minutesIndexForDateTime+1)],10),seconds:isNaN(t)?0:t}}function f(e){var t=e.abs();return t.isNaN()?r.Constants.DEFAULT_DECIMAL:t}function d(e,t){var n=e.mod(t);return n.isNaN()?r.Constants.DEFAULT_DECIMAL:n}function p(e,t){var n=e.pow(t);return n.isNaN()?r.Constants.DEFAULT_DECIMAL:n}function h(e,t){void 0===t&&(t=0);var n=e.toDecimalPlaces(t);return n.isNaN()?r.Constants.DEFAULT_DECIMAL:n}function g(e){try{var t=e.sqrt();return t.isNaN()?r.Constants.DEFAULT_DECIMAL:t}catch(e){return r.Constants.DEFAULT_DECIMAL}}function m(e){var t=e.trunc();return t.isNaN()?r.Constants.DEFAULT_DECIMAL:t}function y(e,t){var n=r.Decimal.max(e,t);return n.isNaN()?r.Constants.DEFAULT_DECIMAL:n}function v(e,t){var n=r.Decimal.min(e,t);return n.isNaN()?r.Constants.DEFAULT_DECIMAL:n}function b(e){var t=new r.Decimal(0);return e.eq(t)||e.isNaN()?r.Constants.DEFAULT_INTEGER:e>t?1:-1}function T(e){return e>=0&&e<=65535?String.fromCharCode(e):r.Constants.DEFAULT_TEXT}function _(e,t){return(e||"")+(t||"")}function E(e){if(void 0===e||""===e)return e;var t=[],n=" ".charCodeAt(0),r="\n".charCodeAt(0);e.charCodeAt(0)===n?t[0]="":t[0]=e.charAt(0);for(var i=1;i<e.length-1;++i)e.charCodeAt(i)!==n||e.charCodeAt(i-1)!==r&&e.charCodeAt(i+1)!==n?t[i]=e.charAt(i):t[i]="";return 1!==e.length&&(e.charCodeAt(e.length-1)===n?t[e.length-1]="":t[e.length-1]=e.charAt(e.length-1)),t.join("")}function w(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);60===r?t.push("&lt;"):62===r?t.push("&gt;"):38===r?t.push("&amp;"):34===r?t.push("&quot;"):39===r?t.push("&#39;"):r>=160&&r<=255?t.push("&#"+r+";"):t.push(e.charAt(n))}return t.join("")}function D(e){return void 0===e?"":E(w(e)).replace(/\r/g,"").replace(/&#13;/g,"").replace(/\n/g,"<br/>").replace(/&#10;/g,"<br/>")}function S(e){return e.replace(/\\/g,"\\x5c").replace(/'/g,"\\x27").replace(/\"/g,"\\x22").replace("&","\\x26").replace("<","\\x3c").replace(/>/g,"\\x3e").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}function x(e){return encodeURIComponent(e).replace(/'/g,"%27").replace(/%20/g,"+")}function I(e,t,n,r,i){try{if(0===t.length||n<0||n>N(e))return-1;i&&(e=e.toLocaleLowerCase(),t=t.toLocaleLowerCase()),n&&n>0&&(n=e.match(new RegExp("("+zt+".|.){"+n+"}"))[0].length);var o=r?e.lastIndexOf(t,n||e.length):e.indexOf(t,n||0);return o<0?-1:N(e.substr(0,o))}catch(e){return-1}}function N(e){var t=e.match(Ht);return e.length-(t?t.length:0)}function A(e,t,n){var r=t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1");return e.replace(new RegExp(r,"g"),n)}function O(e,t,n){var i=N(e);if(t>=0&&n>0&&i>=t+1)i=n;else{if(!(t>=0&&n>0&&i>t))return r.Constants.DEFAULT_TEXT;i-=t}return e.match(Ht)?e.match(new RegExp("("+zt+".|.){"+t+"}(("+zt+".|.){"+i+"})"))[2]:e.substr(t,i)}function C(e){return e.toLowerCase()}function R(e){return e.toUpperCase()}function L(e){return e.trim()}function M(e){for(var t=0;" "===e[t];)t++;return e.substr(t)}function P(e){for(var t=e.length-1;" "===e[t];)t--;return e.substr(0,t+1)}function F(e,t){if(!t)return!1;var n=t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&").replace(/%/g,".*").replace(/_/g,".");return RegExp("^"+n+"$","gi").test(e)}function V(e,t){return e.addDays(t)}function j(e,t){return e.addHours(t)}function U(e,t){return e.addMinutes(t)}function B(e,t){return e.addSeconds(t)}function k(e,t){return e.addYears(t)}function q(e,t){return e.addMonths(t)}function z(e,t){
return new r.DateTime(e.year,e.month,e.day,t.hours,t.minutes,t.seconds,t.milliseconds)}function H(){var e=new r.DateTime(new Date);return new r.DateTime(e.year,e.month,e.day)}function G(){return new r.DateTime(new Date)}function W(){var e=new r.DateTime(new Date);return new r.DateTime(1900,1,1,e.hours,e.minutes,e.seconds)}function K(e){return e.weekDay}function J(e){var t=new Date(e.getTime());return t.setMinutes(e.getMinutes()-e.getTimezoneOffset()),t.getTime()}function Q(e,t,n,r){void 0===r&&(r=!1);var i=n<=36e5,o=n<=6e4,a=n<=1e3,s=Y(e,i,o,a).toNative(),u=Y(t,i,o,a).toNative(),c=Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),0),l=Date.UTC(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),0),f=r?J(u)-J(s):l-c;return Math.floor(f/n)}function Y(e,t,n,i){return new r.DateTime(e.year,e.month,e.day,t?e.hours:0,n?e.minutes:0,i?e.seconds:0)}function X(e,t){return Q(e,t,864e5,!0)}function $(e,t){return Q(e,t,36e5)}function Z(e,t){return Q(e,t,6e4)}function ee(e,t){return Q(e,t,1e3)}function te(e){return e.year}function ne(e){return e.month}function re(e){return e.day}function ie(e){return e.hours}function oe(e){return e.minutes}function ae(e){return e.seconds}function se(e,t,n){return fe(e,t,n,0,0,0)?new r.DateTime(e,t,n):r.Constants.DEFAULT_DATE}function ue(e,t,n,i,o,a){return fe(e,t,n,i,o,a)?new r.DateTime(e,t,n,i,o,a):r.Constants.DEFAULT_DATETIME}function ce(e,t,n){return le(e,t,n)?new r.DateTime(1900,1,1,e,t,n):r.Constants.DEFAULT_TIME}function le(e,t,n){var i=new r.DateTime(1900,1,1,e,t,n);return i.hours===e&&i.minutes===t&&i.seconds===n}function fe(e,t,n,i,o,a){var s=new r.DateTime(e,t,n,i,o,a);return s.year===e&&s.month===t&&s.day===n&&s.hours===i&&s.minutes===o&&s.seconds===a}function de(e){return e?1:0}function pe(e){return e?r.LongInteger.fromNumber(1):r.LongInteger.fromNumber(0)}function he(e){return new r.Decimal(e?1:0)}function ge(e){return!0===e?"True":!1===e?"False":r.Constants.DEFAULT_TEXT}function me(e){return new r.DateTime(e.year,e.month,e.day)}function ye(e){return new r.DateTime(1900,1,1,e.hours,e.minutes,e.seconds)}function ve(e){return e.toString(r.Constants.FORMAT.defaultDateTimeFormat.dateTimeFormat)}function be(e){return e.toString(r.Constants.FORMAT.defaultDateTimeFormat.dateFormat)}function Te(e){return e}function _e(e){return!e.eq(new r.Decimal(0))}function Ee(e){return r.TypeValidations.isValidDecimal(e)?e.toString():r.Constants.DEFAULT_TEXT}function we(e){return e.gte(r.Constants.MIN_INTEGER_VALUE)&&e.lte(r.Constants.MAX_INTEGER_VALUE)}function De(e){return we(e)?e.round().toNumber():r.Constants.DEFAULT_INTEGER}function Se(e){return e.gte(r.Constants.MIN_LONGINTEGER_VALUE.toString())&&e.lte(r.Constants.MAX_LONGINTEGER_VALUE.toString())}function xe(e){return Se(e)?r.LongInteger.fromString(e.round().toString()):r.Constants.DEFAULT_LONGINTEGER}function Ie(e){return new r.Decimal(e.toString())}function Ne(e){return r.TypeValidations.isWithinIntegerRange(e.toNumber())}function Ae(e){var t=e.toNumber();return r.TypeValidations.isWithinIntegerRange(t)?t:r.Constants.DEFAULT_INTEGER}function Oe(e){return e}function Ce(e){return r.TypeValidations.isValidLongInteger(e)?e.toString():r.Constants.DEFAULT_TEXT}function Re(e){return e}function Le(e){return e}function Me(e){return e}function Pe(e){return r.LongInteger.fromNumber(e)}function Fe(e){return e}function Ve(e){return 0!==e}function je(e){return r.TypeValidations.isValidInteger(e)?e.toString():r.Constants.DEFAULT_TEXT}function Ue(e){return new r.Decimal(e)}function Be(){return 0}function ke(){return""}function qe(){return r.Constants.DEFAULT_DATE}function ze(){return null}function He(){return r.Constants.DEFAULT_BINARYDATA}function Ge(e,t){var n=t.getRegExpForDate().test(e);if(n){var i=u(t),o=new r.DateTime(i.year,i.month,i.day);n=o.year===i.year&&o.month===i.month&&o.day===i.day}return n}function We(e,t){if(!Ge(e,t))return r.DateTime.defaultValue;t.getRegExpForDate().test(e);var n=u(t);return new r.DateTime(n.year,n.month,n.day)}function Ke(e,t){var n=t.getRegExpForDateTime().test(e);if(n){var r=l(t);n=fe(r.year,r.month,r.day,r.hours,r.minutes,r.seconds)}return n}function Je(e,t){if(!Ke(e,t))return r.DateTime.defaultValue;var n=l(t);return new r.DateTime(n.year,n.month,n.day,n.hours,n.minutes,n.seconds)}function Qe(e){return-1!==e.toUpperCase().indexOf("T")}function Ye(e){return-1!==e.indexOf(" ")}function Xe(e){var t=e.toUpperCase().search("T| ");return-1!==t&&(e=e.substring(0,t)),e}function $e(e){var t=r.Constants.FORMAT.dateTimeFormats;e=Xe(e);for(var n=0;n<t.length;++n)if(Ge(e,t[n]))return!0;return!1}function Ze(e){var t=r.Constants.FORMAT.dateTimeFormats;e=Xe(e);for(var n=0;n<t.length;++n){var i=We(e,t[n]);if(!i.eq(r.DateTime.defaultValue))return i}return r.DateTime.defaultValue}function et(e){return!Qe(e)||!isNaN(Date.parse(e))}function tt(e){var t=r.Constants.FORMAT.dateTimeFormats;if(Qe(e))return et(e);Ye(e)||(e+=" 00:00:00");for(var n=0;n<t.length;++n)if(Ke(e,t[n]))return!0;return!1}function nt(e){var t=r.Constants.FORMAT.dateTimeFormats;if(Qe(e))return r.DateTime.fromISODateTime(e);Ye(e)||(e+=" 00:00:00");for(var n=0;n<t.length;++n){var i=Je(e,t[n]);if(!i.eq(r.DateTime.defaultValue))return i}return r.DateTime.defaultValue}function rt(e){var t=e.indexOf(" ");return-1!==t&&(e=e.substring(t+1,e.length)),e}function it(e,t){if(void 0===t&&(t=r.Constants.FORMAT.defaultDateTimeFormat),Qe(e))return et(e);Ye(e)&&(e=rt(e));var n=t.getRegExpForTime().test(e);if(n){var i=c(t);n=le(i.hours,i.minutes,i.seconds)}return n}function ot(e){if(Qe(e)){var t=r.DateTime.fromISODateTime(e);return new r.DateTime(1900,1,1,t.hours,t.minutes,t.seconds,t.milliseconds)}return Ye(e)&&(e=rt(e)),at(e,r.Constants.FORMAT.defaultDateTimeFormat)}function at(e,t){if(!it(e,t))return r.DateTime.defaultValue;t.getRegExpForTime().test(e);var n=c(t);return new r.DateTime(1900,1,1,n.hours,n.minutes,n.seconds)}function st(e){return e.toString(r.Constants.FORMAT.defaultDateTimeFormat.timeFormat)}function ut(e){if(r.Constants.FORMAT.numberFormat.getRegExpForInteger().test(e)){var t=parseInt(e,10);if(!isNaN(t)&&t>=r.Constants.MIN_INTEGER_VALUE&&t<=r.Constants.MAX_INTEGER_VALUE)return t}return null}function ct(e){if(r.Constants.FORMAT.numberFormat.getRegExpForDecimal().test(e)){var t=new r.Decimal(e);if(!t.isNaN()&&t.gte(r.Constants.MIN_DECIMAL_VALUE)&&t.lte(r.Constants.MAX_DECIMAL_VALUE))return t}return null}function lt(e){if(!r.Constants.FORMAT.numberFormat.getRegExpForInteger().test(e))return null;var t="-"===e.charAt(0);if(t&&e.length<r.Constants.MIN_LONGINTEGER_VALUE.toString().length||!t&&e.length<r.Constants.MAX_LONGINTEGER_VALUE.toString().length||Se(new r.Decimal(e)))try{return r.LongInteger.fromString(e)}catch(e){}return null}function ft(e){return null!==ct(e)}function dt(e){return null===ct(e)?r.Constants.DEFAULT_DECIMAL:new r.Decimal(e)}function pt(e){return null!==ut(e)}function ht(e){var t=ut(e);return null===t?r.Constants.DEFAULT_INTEGER:t}function gt(e){return null!==lt(e)}function mt(e){var t=lt(e);return null===t?r.Constants.DEFAULT_LONGINTEGER:t}function yt(e){return"true"===e.toLowerCase()}function vt(e){return e}function bt(e){if("number"==typeof e||r.TypeValidations.isLongInteger(e)||r.TypeValidations.isDecimal(e))return new r.Decimal(e.toString()).round().toNumber();throw new TypeError("Cannot convert type '"+typeof e+"' to 'Integer'")}function Tt(e){if("number"==typeof e||r.TypeValidations.isLongInteger(e)||r.TypeValidations.isDecimal(e))return r.LongInteger.fromString(new r.Decimal(e.toString()).round().toString());throw new TypeError("Cannot convert type '"+typeof e+"' to 'LongInteger'")}function _t(e){if("boolean"==typeof e)return e;throw new TypeError("Cannot convert type '"+typeof e+"' to 'Boolean'")}function Et(e){if("number"==typeof e||r.TypeValidations.isLongInteger(e)||r.TypeValidations.isDecimal(e))return new r.Decimal(e.toString());throw new TypeError("Cannot convert type '"+typeof e+"' to 'Decimal'")}function wt(e){if("string"==typeof e)return e;throw new TypeError("Cannot convert type '"+typeof e+"' to 'Text'")}function Dt(e){return It(e,!0,!1)}function St(e){return It(e,!1,!0)}function xt(e){return It(e,!0,!0)}function It(e,t,n){if(e instanceof r.DateTime||"[object Date]"===Object.prototype.toString.call(e)){var i=new r.DateTime(e.getTime()),o=t?i.year:1900,a=t?i.month:1,s=t?i.day:1,u=n?i.hours:0,c=n?i.minutes:0,l=n?i.seconds:0;return new r.DateTime(o,a,s,u,c,l)}throw new TypeError("Cannot convert type '"+typeof e+"' to 'DateTime'")}function Nt(e){return e}function At(e,t){return e.toString(t)}function Ot(e,t,n,i,o){var a=Ct(e,n,i,o);return a===r.Constants.DEFAULT_TEXT?r.Constants.DEFAULT_TEXT:t+a}function Ct(e,t,n,i){return t<0?r.Constants.DEFAULT_TEXT:(n.length>1&&(n=n.substr(0,1)),i.length>1&&(i=i.substr(0,1)),e.toFormat(t,r.Decimal.rounding,{decimalSeparator:n,groupSeparator:i}))}function Rt(e,t,n){try{return t<0?"":(n.length>1&&(n=n.substr(0,1)),e.times(100).toFormat(t,r.Decimal.rounding,{decimalSeparator:n,groupSeparator:""})+"%")}catch(e){return""}}function Lt(e,t,n,r,i,o,a){try{return/^\d+$/.test(e)?e.length!==t+n+r?e:i+e.substr(0,t)+o+e.substr(t,n)+a+e.substr(t+n,r):e}catch(e){return""}}function Mt(e,t,n,r,i){try{var o=N(e);if(o<t){i=O(i,0,1);for(var a=t-o;a-- >0;)r?e=i+e:e+=i;return e}return o>n?r?O(e,o-n,n):O(e,0,n):e}catch(e){return""}}function Pt(e){return""===e||!/\.@/.test(e)&&(Kt.test(e)||Jt.test(e)||Qt.test(e))}function Ft(){var e=i.resolve(o.ServiceNames.LocaleService);if(e)return e.getCurrentLocale()}function Vt(){return navigator.userAgent}function jt(){return n.getHomeModuleName()}function Ut(){return window.location.href}function Bt(){return a.buildApplicationRelativeUrl()}function kt(){return s.getUserId()}function qt(e,t,n){return e?t:n}Object.defineProperty(t,"__esModule",{value:!0}),t.iif=t.getUserId=t.getOwnerURLPath=t.getBookmarkableURL=t.getEntryEspaceName=t.getUserAgent=t.getCurrentLocale=t.emailAddressValidate=t.formatText=t.formatPhoneNumber=t.formatPercent=t.formatDecimal=t.formatCurrency=t.formatDateTime=t.toObject=t.objectToDateTime=t.objectToTime=t.objectToDate=t.objectToText=t.objectToDecimal=t.objectToBoolean=t.objectToLongInteger=t.objectToInteger=t.textToIdentifier=t.textToBoolean=t.textToLongInteger=t.textToLongIntegerValidate=t.textToInteger=t.textToIntegerValidate=t.textToDecimal=t.textToDecimalValidate=t.timeToText=t.textToTime=t.textToTimeValidate=t.textToDateTime=t.textToDateTimeValidate=t.textToDate=t.textToDateValidate=t.nullBinary=t.nullObject=t.nullDate=t.nullTextIdentifier=t.nullIdentifier=t.integerToDecimal=t.integerToText=t.integerToBoolean=t.integerToIdentifier=t.integerToLongInteger=t.identifierToText=t.identifierToLongInteger=t.identifierToInteger=t.longIntegerToText=t.longIntegerToIdentifier=t.longIntegerToInteger=t.longIntegerToIntegerValidate=t.longIntegerToDecimal=t.decimalToLongInteger=t.decimalToLongIntegerValidate=t.decimalToInteger=t.decimalToIntegerValidate=t.decimalToText=t.decimalToBoolean=t.dateToDateTime=t.dateToText=t.dateTimeToText=t.dateTimeToTime=t.dateTimeToDate=t.booleanToText=t.booleanToDecimal=t.booleanToLongInteger=t.booleanToInteger=t.newTime=t.newDateTime=t.newDate=t.second=t.minute=t.hour=t.day=t.month=t.year=t.diffSeconds=t.diffMinutes=t.diffHours=t.diffDays=t.dayOfWeek=t.currTime=t.currDateTime=t.currDate=t.buildDateTime=t.addMonths=t.addYears=t.addSeconds=t.addMinutes=t.addHours=t.addDays=t.like=t.trimEnd=t.trimStart=t.trim=t.toUpper=t.toLower=t.substr=t.replace=t.length=t.index=t.encodeUrl=t.encodeJavascript=t.encodeHtml=t.concat=t.chr=t.sign=t.min=t.max=t.trunc=t.sqrt=t.round=t.power=t.mod=t.abs=void 0,t.abs=f,t.mod=d,t.power=p,t.round=h,t.sqrt=g,t.trunc=m,t.max=y,t.min=v,t.sign=b,t.chr=T,t.concat=_,t.encodeHtml=D,t.encodeJavascript=S,t.encodeUrl=x;var zt="["+String.fromCharCode(55296)+"-"+String.fromCharCode(56319)+"]",Ht=new RegExp(zt,"g");t.index=I,t.length=N,t.replace=A,t.substr=O,t.toLower=C,t.toUpper=R,t.trim=L,t.trimStart=M,t.trimEnd=P,t.like=F,t.addDays=V,t.addHours=j,t.addMinutes=U,t.addSeconds=B,t.addYears=k,t.addMonths=q,t.buildDateTime=z,t.currDate=H,t.currDateTime=G,t.currTime=W,t.dayOfWeek=K,t.diffDays=X,t.diffHours=$,t.diffMinutes=Z,t.diffSeconds=ee,t.year=te,t.month=ne,t.day=re,t.hour=ie,t.minute=oe,t.second=ae,t.newDate=se,t.newDateTime=ue,t.newTime=ce,t.booleanToInteger=de,t.booleanToLongInteger=pe,t.booleanToDecimal=he,t.booleanToText=ge,t.dateTimeToDate=me,t.dateTimeToTime=ye,t.dateTimeToText=ve,t.dateToText=be,t.dateToDateTime=Te,t.decimalToBoolean=_e,t.decimalToText=Ee,t.decimalToIntegerValidate=we,t.decimalToInteger=De,t.decimalToLongIntegerValidate=Se,t.decimalToLongInteger=xe,t.longIntegerToDecimal=Ie,t.longIntegerToIntegerValidate=Ne,t.longIntegerToInteger=Ae,t.longIntegerToIdentifier=Oe,t.longIntegerToText=Ce,t.identifierToInteger=Re,t.identifierToLongInteger=Le,t.identifierToText=Me,t.integerToLongInteger=Pe,t.integerToIdentifier=Fe,t.integerToBoolean=Ve,t.integerToText=je,t.integerToDecimal=Ue,t.nullIdentifier=Be,t.nullTextIdentifier=ke,t.nullDate=qe,t.nullObject=ze,t.nullBinary=He,t.textToDateValidate=$e,t.textToDate=Ze,t.textToDateTimeValidate=tt,t.textToDateTime=nt,t.textToTimeValidate=it,t.textToTime=ot,t.timeToText=st,t.textToDecimalValidate=ft,t.textToDecimal=dt,t.textToIntegerValidate=pt,t.textToInteger=ht,t.textToLongIntegerValidate=gt,t.textToLongInteger=mt,t.textToBoolean=yt,t.textToIdentifier=vt,t.objectToInteger=bt,t.objectToLongInteger=Tt,t.objectToBoolean=_t,t.objectToDecimal=Et,t.objectToText=wt,t.objectToDate=Dt,t.objectToTime=St,t.objectToDateTime=xt,t.toObject=Nt,t.formatDateTime=At,t.formatCurrency=Ot,t.formatDecimal=Ct,t.formatPercent=Rt,t.formatPhoneNumber=Lt,t.formatText=Mt;var Gt="[a-zA-Z0-9.!#$%&'*+\\-/=?^_`{|}~]+@[a-zA-Z0-9-]+(\\.[a-zA-Z0-9-]+)*",Wt="([0-9a-zA-Z\\\\= ]*|=\\?([^?]*)\\?([qQbB])\\?([^?]*)\\?=)",Kt=new RegExp("^"+Gt+"$"),Jt=new RegExp("^"+Wt+"[ ]*<"+Gt+">$"),Qt=new RegExp('^\\"'+Wt+'\\"[ ]*<'+Gt+">$");t.emailAddressValidate=Pt,t.getCurrentLocale=Ft,t.getUserAgent=Vt,t.getEntryEspaceName=jt,t.getBookmarkableURL=Ut,t.getOwnerURLPath=Bt,t.getUserId=kt,t.iif=qt}),define("OutSystems/ClientRuntime/modules/Database/DatabaseTypeUtils",["require","exports","../../DataTypes","../../Exceptions","./DBDataType"],function(e,t,n,r,i){"use strict";function o(e){switch(e){case i.default.INTEGER:case i.default.LONGINTEGER:case i.default.DECIMAL:case i.default.TEXT:case i.default.BOOLEAN:case i.default.DATE:case i.default.DATE_TIME:case i.default.TIME:case i.default.BINARY_DATA:return n.defaultForType(a(e));default:throw new r.Exceptions.DataBaseException("","Unable to determine default value for type "+s(e))}}function a(e){switch(e){case i.default.TEXT:return n.DataTypes.Text;case i.default.BINARY_DATA:return n.DataTypes.BinaryData;case i.default.BOOLEAN:return n.DataTypes.Boolean;case i.default.DATE:return n.DataTypes.Date;case i.default.DATE_TIME:return n.DataTypes.DateTime;case i.default.TIME:return n.DataTypes.Time;case i.default.DECIMAL:return n.DataTypes.Decimal;case i.default.INTEGER:return n.DataTypes.Integer;case i.default.LONGINTEGER:return n.DataTypes.LongInteger;default:throw new Error("Missing case for conversion of DB data type '"+e+"' to a model data type.")}}function s(e){var t=a(e);return n.DataTypes[t]}function u(e){var n=t.dataTypeToDBDataType[e];return null!==n&&void 0!==n?n:i.default.UNKNOWN}var c;Object.defineProperty(t,"__esModule",{value:!0}),t.convertDataTypeToDBDataType=t.typeDisplayName=t.convertToModelDataType=t.typeDefaultValue=t.dataTypeToDBDataType=void 0,t.dataTypeToDBDataType=(c={},c[n.DataTypes.Integer]=i.default.INTEGER,c[n.DataTypes.LongInteger]=i.default.LONGINTEGER,c[n.DataTypes.Decimal]=i.default.DECIMAL,c[n.DataTypes.Currency]=i.default.DECIMAL,c[n.DataTypes.Text]=i.default.TEXT,c[n.DataTypes.PhoneNumber]=i.default.TEXT,c[n.DataTypes.Email]=i.default.TEXT,c[n.DataTypes.Boolean]=i.default.BOOLEAN,c[n.DataTypes.Date]=i.default.DATE,c[n.DataTypes.DateTime]=i.default.DATE_TIME,c[n.DataTypes.Time]=i.default.TIME,c[n.DataTypes.Record]=i.default.UNKNOWN,c[n.DataTypes.RecordList]=i.default.UNKNOWN,c[n.DataTypes.BinaryData]=i.default.BINARY_DATA,c[n.DataTypes.Object]=i.default.UNKNOWN,c),t.typeDefaultValue=o,t.convertToModelDataType=a,t.typeDisplayName=s,t.convertDataTypeToDBDataType=u}),define("OutSystems/ClientRuntime/DataConversion",["require","exports","./BuiltinFunctions","./DataTypes","./Exceptions","./Interfaces","./modules/Database/DatabaseTypeUtils","./Settings"],function(e,t,n,r,i,o,a,s){"use strict";function u(e){return!!e.isGenericRecordType}function c(e){return!!e.isGenericRecordListType}function l(e){return!!e.isBasicTypeListType}Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageConverter=t.NewJSONConverter=t.JSONConverter=t.JSNodeParamConverter=t.JSConversions=t.ServerDataConverter=void 0;var f;!function(e){function t(e,n,i,a){if(void 0===n&&(n=r.DataTypes.Record),void 0===i&&(i=!1),void 0===a&&(a=!1),void 0!==e&&null!==e){var u,c=r.DataTypes.Record;if("number"!=typeof n?(a=!0===i,u=n,c=r.DataTypes.Record):(c=n,"boolean"!=typeof i&&(u=i)),e instanceof r.GenericRecord){var l=e,f=l.constructor,d=s.get(f);if(!d){var p=l.getAttributes(),h="return function to(record, callContext, optimizeList) {\n";h+="    return {\n",p.forEach(function(e,t){e.ignoreForServer||(e.dataType===r.DataTypes.Record||e.dataType===r.DataTypes.RecordList?h+="        "+e.name+": toServerData(record."+e.attrName+", callContext, "+e.optimizeList+" && optimizeList),\n":e.dataType!==r.DataTypes.Object&&(h+="        "+e.name+": basicTypeToJS(record."+e.attrName+", attributes["+t+"].dataType),\n"))}),h+="    };\n",h+="};",d=new Function("toServerData","basicTypeToJS","attributes",h)(t,o,p),s.set(f,d)}return d(e,u,a)}if(e instanceof r.List){var g=e,m=g.constructor.getItemType(),y={List:[]};if(a&&u){if(g.length>0&&u){var v=u.iterationContext.getCurrentRowNumber(e);y.List.push(t(g.getItem(v),m,u,a))}}else for(var b=0;b<g.length;b++)y.List.push(t(g.getItem(b),m));return g.isEmpty&&(y.EmptyListItem=t(g.emptyListItem,m,u,a)),y}return c!==r.DataTypes.Object?o(e,c):void 0}}function i(e,t){if(u(t)){var n=t,o=f.get(n);if(!o){var s=n.getAttributes(),d="return function from(obj) {\n";d+="    if (!obj) { obj = {}; }\n",d+="    return new classDef(new classDef.RecordClass({\n",s.forEach(function(e,t){e.dataType===r.DataTypes.Record||e.dataType===r.DataTypes.RecordList?d+="        "+e.attrName+": GenericRecord.getData(fromServerData(obj."+e.name+", attributes["+t+"].complexType)),\n":e.dataType===r.DataTypes.BinaryData?d+="        "+e.attrName+": jsToBasicType({ content: obj."+e.name+", url: obj._"+e.name+"URL }, attributes["+t+"].dataType),\n":d+="        "+e.attrName+": jsToBasicType(obj."+e.name+", attributes["+t+"].dataType),\n"}),d+="    }));\n",d+="};",o=new Function("fromServerData","jsToBasicType","GenericRecord","attributes","classDef",d)(i,a,r.GenericRecord,s,n),f.set(n,o)}return o(e)}if(c(t)||l(t)){if(void 0===t.getItemType()||null===t.getItemType())throw Error("A List can only be deserialized if its ItemType is defined.");var p=t,h=new p;return 0===e.List.length?h.emptyListItem=i(e.EmptyListItem,t.getItemType()):h.pushAll(e.List.map(function(e){return i(e,t.getItemType())})),h}return a(e,t)}function o(e,t){switch(t){case r.DataTypes.Integer:return e;case r.DataTypes.LongInteger:return n.longIntegerToText(e);case r.DataTypes.Decimal:case r.DataTypes.Currency:return n.decimalToText(e);case r.DataTypes.Text:case r.DataTypes.PhoneNumber:case r.DataTypes.Email:return e;case r.DataTypes.Date:return e.toISODate();case r.DataTypes.DateTime:return e.toString();case r.DataTypes.Time:return e.toISOTime();case r.DataTypes.Boolean:return e;case r.DataTypes.Record:case r.DataTypes.RecordList:throw new TypeError("Records and Record lists are not basic types");case r.DataTypes.BinaryData:return"string"==typeof e?e:e.content;case r.DataTypes.Object:default:return e}}function a(e,t){switch(t){case r.DataTypes.Integer:return r.TypeValidations.ensureIntegerInsideBounds(e),0|e;case r.DataTypes.LongInteger:return"string"==typeof e?r.LongInteger.fromString(e):r.LongInteger.fromNumber(e);case r.DataTypes.Decimal:case r.DataTypes.Currency:return new r.Decimal(e||"0");case r.DataTypes.Boolean:return"string"==typeof e?n.textToBoolean(e):e;case r.DataTypes.Text:case r.DataTypes.PhoneNumber:case r.DataTypes.Email:return void 0===e?"":e+"";case r.DataTypes.Date:return e instanceof Date?new r.DateTime(e):r.DateTime.fromISODate(e);case r.DataTypes.DateTime:return e instanceof Date?new r.DateTime(e):r.DateTime.fromISODateTime(e);case r.DataTypes.Time:return e instanceof Date?new r.DateTime(e):r.DateTime.fromISOTime(e);case r.DataTypes.Record:case r.DataTypes.RecordList:throw new TypeError("Records and Record lists are not basic types");case r.DataTypes.BinaryData:return r.TypeValidations.hasBinaryDataInterface(e)?new r.BinaryData(e.content,e.url):new r.BinaryData(e);case r.DataTypes.Object:default:return e}}var s=new Map,f=new Map;e.to=t,e.from=i}(f=t.ServerDataConverter||(t.ServerDataConverter={}));var d;!function(e){function t(e){return!!(r.TypeValidations.isValidJsNumber(e)&&e>=r.Constants.MIN_INTEGER_VALUE&&e<=r.Constants.MAX_INTEGER_VALUE)||(r.TypeValidations.isLongInteger(e)?n.longIntegerToIntegerValidate(e):r.TypeValidations.isDecimal(e)?n.decimalToIntegerValidate(e):r.TypeValidations.isText(e)?n.textToIntegerValidate(e):!!r.TypeValidations.isBoolean(e))}function i(e){return!!r.TypeValidations.isValidJsNumber(e)||(!!r.TypeValidations.isValidLongInteger(e)||(r.TypeValidations.isValidDecimal(e)?n.decimalToLongIntegerValidate(e):r.TypeValidations.isText(e)?n.textToLongIntegerValidate(e):!!r.TypeValidations.isBoolean(e)))}function o(e){return!!r.TypeValidations.isValidJsNumber(e)||(!!(r.TypeValidations.isValidDecimal(e)&&r.Constants.MIN_DECIMAL_VALUE.lte(e)&&r.Constants.MAX_DECIMAL_VALUE.gte(e))||(!!r.TypeValidations.isValidLongInteger(e)||(r.TypeValidations.isText(e)?n.textToDecimalValidate(e):!!r.TypeValidations.isBoolean(e))))}function a(e){return o(e)}function s(e){return r.TypeValidations.isJsNumber(e)?r.TypeValidations.isValidJsNumber(e):r.TypeValidations.isLongInteger(e)?r.TypeValidations.isValidLongInteger(e):r.TypeValidations.isDecimal(e)?r.TypeValidations.isValidDecimal(e):!!r.TypeValidations.isText(e)||(!!r.TypeValidations.isBoolean(e)||(r.TypeValidations.isDateTime(e)?r.TypeValidations.isValidDateTime(e):!!r.TypeValidations.isJsDate(e)&&r.TypeValidations.isValidJsDate(e)))}function u(e){return s(e)}function c(e){return s(e)}function l(e){return r.TypeValidations.isJsNumber(e)?r.TypeValidations.isValidJsNumber(e):r.TypeValidations.isLongInteger(e)?r.TypeValidations.isValidLongInteger(e):r.TypeValidations.isDecimal(e)?r.TypeValidations.isValidDecimal(e):r.TypeValidations.isText(e)?/^(true)|(false)$/gi.test(e):!!r.TypeValidations.isBoolean(e)}function f(e){if(r.TypeValidations.isValidDateTime(e)&&e.gte(r.Constants.MIN_DATE_VALUE)&&e.lte(r.Constants.MAX_DATE_VALUE))return!0;if(r.TypeValidations.isValidJsDate(e)&&new r.DateTime(e).gte(r.Constants.MIN_DATE_VALUE)&&new r.DateTime(e).lte(r.Constants.MAX_DATE_VALUE))return!0;if(r.TypeValidations.isText(e)){if(r.Constants.ISO_DATE_FORMAT_REGEXP.test(e)){var t=new r.DateTime(new Date(e));return t.gte(r.Constants.MIN_DATE_VALUE)&&t.lte(r.Constants.MAX_DATE_VALUE)}if(n.textToDateValidate(e)){var t=n.textToDate(e);return t.gte(r.Constants.MIN_DATE_VALUE)&&t.lte(r.Constants.MAX_DATE_VALUE)}return!1}return!1}function d(e){return!!r.TypeValidations.isValidDateTime(e)||(!!r.TypeValidations.isValidJsDate(e)||!!r.TypeValidations.isText(e)&&(!(!r.Constants.RFC3339_TIMEPART.test(e)&&!r.Constants.ISO_DATE_FORMAT_REGEXP.test(e))||n.textToTimeValidate(e)))}function p(e){if(r.TypeValidations.isValidDateTime(e)&&e.gte(r.Constants.MIN_DATETIME_VALUE)&&e.lte(r.Constants.MAX_DATETIME_VALUE))return!0;if(r.TypeValidations.isValidJsDate(e)&&new r.DateTime(e).gte(r.Constants.MIN_DATETIME_VALUE)&&new r.DateTime(e).lte(r.Constants.MAX_DATETIME_VALUE))return!0;if(r.TypeValidations.isText(e)){if(r.Constants.ISO_DATE_FORMAT_REGEXP.test(e)){var t=new r.DateTime(new Date(e));return t.gte(r.Constants.MIN_DATETIME_VALUE)&&t.lte(r.Constants.MAX_DATETIME_VALUE)}if(n.textToDateTimeValidate(e)){var t=n.textToDateTime(e);return t.gte(r.Constants.MIN_DATETIME_VALUE)&&t.lte(r.Constants.MAX_DATETIME_VALUE)}return!1}return!1}function h(e){return r.TypeValidations.isBinaryData(e)}function g(e,n){switch(n){case r.DataTypes.Integer:return t(e);case r.DataTypes.LongInteger:return i(e);case r.DataTypes.Decimal:return o(e);case r.DataTypes.Currency:return a(e);case r.DataTypes.Text:return s(e);case r.DataTypes.PhoneNumber:return u(e);case r.DataTypes.Email:return c(e);case r.DataTypes.Boolean:return l(e);case r.DataTypes.Date:return f(e);case r.DataTypes.Time:return d(e);case r.DataTypes.DateTime:return p(e);case r.DataTypes.BinaryData:return h(e);default:return!1}}function m(e){return r.TypeValidations.isValidJsNumber(e)&&e===r.Constants.DEFAULT_INTEGER||r.TypeValidations.isValidLongInteger(e)&&e.equals(r.Constants.DEFAULT_LONGINTEGER)||r.TypeValidations.isValidDecimal(e)&&e.equals(r.Constants.DEFAULT_DECIMAL)||r.TypeValidations.isText(e)&&e===r.Constants.DEFAULT_TEXT||r.TypeValidations.isBoolean(e)&&e===r.Constants.DEFAULT_BOOLEAN||r.TypeValidations.isValidDateTime(e)&&e.equals(r.Constants.DEFAULT_DATETIME)}function y(e){if(t(e)){if(r.TypeValidations.isJsNumber(e))return n.objectToInteger(e);if(r.TypeValidations.isLongInteger(e))return n.objectToInteger(e);if(r.TypeValidations.isDecimal(e))return n.objectToInteger(e);if(r.TypeValidations.isText(e)&&""!==e)return n.textToInteger(e);if(r.TypeValidations.isBoolean(e))return n.booleanToInteger(e)}return r.Constants.DEFAULT_INTEGER}function v(e){if(i(e)){if(r.TypeValidations.isJsNumber(e))return n.objectToLongInteger(e);if(r.TypeValidations.isLongInteger(e))return n.objectToLongInteger(e);if(r.TypeValidations.isDecimal(e))return n.objectToLongInteger(e);if(r.TypeValidations.isText(e)&&""!==e)return n.textToLongInteger(e);if(r.TypeValidations.isBoolean(e))return n.booleanToLongInteger(e)}return r.Constants.DEFAULT_LONGINTEGER}function b(e){if(o(e)){if(r.TypeValidations.isJsNumber(e))return n.objectToDecimal(e);if(r.TypeValidations.isLongInteger(e))return n.objectToDecimal(e);if(r.TypeValidations.isDecimal(e))return n.objectToDecimal(e);if(r.TypeValidations.isText(e)&&""!==e)return n.textToDecimal(e);if(r.TypeValidations.isBoolean(e))return n.booleanToDecimal(e)}return r.Constants.DEFAULT_DECIMAL}function T(e){return b(e)}function _(e){if(s(e)){if(r.TypeValidations.isJsNumber(e))return r.TypeValidations.isValidInteger(e)?n.integerToText(e):n.decimalToText(new r.Decimal(e));if(r.TypeValidations.isLongInteger(e))return n.longIntegerToText(e);if(r.TypeValidations.isDecimal(e))return n.decimalToText(e);if(r.TypeValidations.isText(e))return e;if(r.TypeValidations.isBoolean(e))return n.booleanToText(e);if(r.TypeValidations.isValidDate(e))return n.dateToText(e);if(r.TypeValidations.isValidTime(e))return n.timeToText(e);if(r.TypeValidations.isDateTime(e))return n.dateTimeToText(e);if(r.TypeValidations.isJsDate(e)){var t=new r.DateTime(e);return r.TypeValidations.isValidDate(t)?n.dateToText(t):r.TypeValidations.isValidTime(t)?n.timeToText(t):n.dateTimeToText(t)}}return r.Constants.DEFAULT_TEXT}function E(e){return _(e)}function w(e){return c(e)&&r.TypeValidations.isText(e)?e:r.Constants.DEFAULT_EMAIL}function D(e){if(l(e)){if(r.TypeValidations.isJsNumber(e))return 0!==e;if(r.TypeValidations.isLongInteger(e))return!e.eq(0);if(r.TypeValidations.isDecimal(e))return!e.eq(0);if(r.TypeValidations.isText(e)&&""!==e)return!/^(false)$/gi.test(e);if(r.TypeValidations.isBoolean(e))return e}return r.Constants.DEFAULT_BOOLEAN}function S(e){if(f(e)){if(r.TypeValidations.isDateTime(e)){var t=e;return new r.DateTime(t.year,t.month,t.day)}if(r.TypeValidations.isJsDate(e)){var i=e;return new r.DateTime(i.getFullYear(),i.getMonth()+1,i.getDate())}if(r.TypeValidations.isText(e)&&""!==e)return r.Constants.RFC3339_DATEPART.test(e)?r.DateTime.fromISODate(e):r.Constants.ISO_DATE_FORMAT_REGEXP.test(e)?n.dateTimeToDate(r.DateTime.fromISODateTime(e)):n.textToDate(e)}return r.Constants.DEFAULT_DATE}function x(e){if(d(e)){if(r.TypeValidations.isDateTime(e)){var t=e;return new r.DateTime(null,null,null,t.hours,t.minutes,t.seconds,t.milliseconds)}if(r.TypeValidations.isJsDate(e)){var i=e;return new r.DateTime(null,null,null,i.getHours(),i.getMinutes(),i.getSeconds())}if(r.TypeValidations.isText(e)&&""!==e)return r.Constants.RFC3339_TIMEPART.test(e)?r.DateTime.fromISOTime(e):r.Constants.ISO_DATE_FORMAT_REGEXP.test(e)?n.dateTimeToTime(r.DateTime.fromISODateTime(e)):n.textToTime(e)}return r.Constants.DEFAULT_TIME}function I(e){if(p(e)){if(r.TypeValidations.isDateTime(e)){var t=e;return new r.DateTime(t.year,t.month,t.day,t.hours,t.minutes,t.seconds,t.milliseconds)}if(r.TypeValidations.isJsDate(e)){var i=e;return new r.DateTime(i)}if(r.TypeValidations.isText(e)&&""!==e)return r.Constants.ISO_DATE_FORMAT_REGEXP.test(e)?r.DateTime.fromISODateTime(e):n.textToDateTime(e)}return r.Constants.DEFAULT_DATETIME}function N(e){return e}function A(e,t){switch(t){case r.DataTypes.Integer:return y(e);case r.DataTypes.LongInteger:return v(e);case r.DataTypes.Decimal:return b(e);case r.DataTypes.Currency:return T(e);case r.DataTypes.Text:return _(e);case r.DataTypes.PhoneNumber:return E(e);case r.DataTypes.Email:return w(e);case r.DataTypes.Boolean:return D(e);case r.DataTypes.Date:return S(e);case r.DataTypes.Time:return x(e);case r.DataTypes.DateTime:return I(e);case r.DataTypes.BinaryData:return N(e);default:return null}}function O(e,t,n){return n(e,t)}function C(e,t,n){for(var r=0;r<e.length;)t.append(n(e.getItem(r),t.newItem())),r++;return t}e.isConvertibleTo=g,e.isDefault=m,e.convertTo=A,e.typeConvertRecord=O,e.typeConvertRecordList=C}(d=t.JSConversions||(t.JSConversions={}));var p;!function(e){function t(e){return e-e%1}function o(e,t){return s(e,t)}function a(e,t){return u(e,t)}function s(e,t){switch(t){case r.DataTypes.Integer:return e;case r.DataTypes.LongInteger:var n=e;return r.TypeValidations.ensureNumberInsideBounds(n),n.toNumber();case r.DataTypes.Decimal:case r.DataTypes.Currency:var i=e;return r.TypeValidations.ensureNumberPrecision(i),r.TypeValidations.ensureNumberInsideBounds(i),i.toNumber();case r.DataTypes.Text:case r.DataTypes.PhoneNumber:case r.DataTypes.Email:return e;case r.DataTypes.Date:case r.DataTypes.DateTime:case r.DataTypes.Time:return e.toNative();case r.DataTypes.Boolean:return e;case r.DataTypes.Record:case r.DataTypes.RecordList:throw new TypeError("Records and Record lists are not basic types");case r.DataTypes.BinaryData:var o=e;return"string"==typeof e?e:o.content;case r.DataTypes.Object:default:return e}}function u(e,o){switch(o){case r.DataTypes.Integer:if(r.TypeValidations.isValidJsNumber(e))return r.TypeValidations.ensureIntegerInsideBounds(e),t(e);break;case r.DataTypes.LongInteger:if(r.TypeValidations.isValidJsNumber(e))return r.TypeValidations.ensureLongIntegerInsideBounds(e),r.LongInteger.fromNumber(t(e));break;case r.DataTypes.Decimal:case r.DataTypes.Currency:if(r.TypeValidations.isValidJsNumber(e))return r.TypeValidations.ensureDecimalInsideBounds(e),new r.Decimal(e);break;case r.DataTypes.Boolean:if(r.TypeValidations.isBoolean(e))return e;break;case r.DataTypes.Text:case r.DataTypes.PhoneNumber:case r.DataTypes.Email:if(r.TypeValidations.isText(e))return e;if(r.TypeValidations.isValidJsNumber(e))return r.TypeValidations.ensureDecimalInsideBounds(e),n.decimalToText(new r.Decimal(e));if(r.TypeValidations.isBoolean(e))return n.booleanToText(e);break;case r.DataTypes.Date:if(r.TypeValidations.isValidJsDate(e)){var a=e;return new r.DateTime(a.getFullYear(),a.getMonth()+1,a.getDate())}break;case r.DataTypes.DateTime:if(r.TypeValidations.isValidJsDate(e))return new r.DateTime(e);break;case r.DataTypes.Time:
if(r.TypeValidations.isValidJsDate(e)){var a=e;return new r.DateTime(null,null,null,a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds())}break;case r.DataTypes.BinaryData:return r.TypeValidations.hasBinaryDataInterface(e)?new r.BinaryData(e.content,e.url):new r.BinaryData(e);case r.DataTypes.Object:return e}throw new i.Exceptions.InvalidJavascriptType("Cannot assign a JavaScript "+typeof e+" with value "+(void 0===e||null===e?JSON.stringify(e):e.toString())+" to an output parameter of type "+r.DataTypes[o])}e.to=o,e.from=a}(p=t.JSNodeParamConverter||(t.JSNodeParamConverter={}));!function(e){function t(e,n,i,o,s){if(void 0===o&&(o=r.DataTypes.Record),void 0!==e&&null!==e){if(e instanceof r.GenericRecord){var u=e,c=u.constructor,l=v.get(c);if(!l){var f=u.getAttributes(),d="return function to(record, serializeDefaultValues, useUnixDateFormat) {\n";d+="     if (serializeDefaultValues === void 0) { serializeDefaultValues = true; }\n",d+="     return {\n",f.forEach(function(e,t){""!==e.nameForJson&&(e.dataType===r.DataTypes.Record||e.dataType===r.DataTypes.RecordList?d+='        "'+e.nameForJson+'": toJSON(record.'+e.attrName+", serializeDefaultValues, useUnixDateFormat),\n":d+='        "'+e.nameForJson+'": basicTypeToJSON(record.'+e.attrName+", attributes["+t+"].dataType, attributes["+t+"].defaultValue, "+(e.mandatory?"true":"serializeDefaultValues")+", useUnixDateFormat),\n")}),d+="    };\n",d+="};",l=new Function("toJSON","basicTypeToJSON","attributes",d)(t,a,f),v.set(c,l)}return l(e,n,i)}if(e instanceof r.List){for(var p=e,h=p.constructor.getItemType(),g=[],m=0;m<p.length;m++)g.push(t(p.getItem(m),n,i,h));return g}return a(e,o,void 0===s?r.defaultForType(o):s,n,i)}}function o(e,t,n,i){if(u(t)){var a=t,f=b.get(a);if(!f){var d=a.getAttributes(),p="return function from(obj, useUnixDateFormat) {\n";p+="     if (!obj) { obj = {}; }\n",p+="     return new classDef(new classDef.RecordClass({\n",d.forEach(function(e,t){""!==e.nameForJson&&(e.dataType===r.DataTypes.Record||e.dataType===r.DataTypes.RecordList?p+="        "+e.attrName+': GenericRecord.getData(fromJSON(obj["'+e.nameForJson+'"], attributes['+t+"].complexType, useUnixDateFormat)),\n":p+="        "+e.attrName+': jsonToBasicType(obj["'+e.nameForJson+'"], attributes['+t+"].dataType, attributes["+t+"].defaultValue, useUnixDateFormat),\n")}),p+="    }));\n",p+="};",f=new Function("fromJSON","jsonToBasicType","GenericRecord","attributes","classDef",p)(o,s,r.GenericRecord,d,t),b.set(a,f)}return f(e,n)}if(c(t)||l(t)){if(void 0===t.getItemType()||null===t.getItemType())throw Error("A List can only be deserialized if its ItemType is defined.");var h=e;if(null!==h&&void 0!==h||(h=[]),h.constructor!==Array)throw new TypeError("Could not convert '"+h+"' to List");var g=t,m=new g;return m.pushAll(h.map(function(e){return o(e,t.getItemType(),n)})),m}return s(e,t,void 0===i?r.defaultForType(t):i,n)}function a(e,t,n,i,o){if(void 0===i&&(i=!0),!1===i&&r.equals(e,n))return null;switch(t){case r.DataTypes.Time:return e.toISOTime();case r.DataTypes.Date:return e.toISODate();case r.DataTypes.DateTime:return!0===o?""+Math.floor(e.getTime()/1e3):e.toString().replace(/\.\d+/,"");default:return p.to(e,t)}}function s(e,t,n,i){if(void 0===e||null===e)return n;switch(t){case r.DataTypes.Integer:return h(e);case r.DataTypes.LongInteger:return g(e);case r.DataTypes.Currency:case r.DataTypes.Decimal:return m(e);case r.DataTypes.DateTime:return y(e,i);default:return f.from(e,t)}}function h(e){var t;if(r.Constants.FORMAT.numberFormat.getRegExpForInteger().test(e)?t=new r.Decimal(e):r.Constants.FORMAT.numberFormat.getRegExpForJSNumber().test(e)&&(t=new r.Decimal(+e)),void 0===t||!t.isInteger()||!n.decimalToIntegerValidate(t))throw new i.Exceptions.Exception("Could not convert '"+e+"' to Integer");return n.decimalToInteger(t)}function g(e){var t;if(r.Constants.FORMAT.numberFormat.getRegExpForInteger().test(e)?t=new r.Decimal(e):r.Constants.FORMAT.numberFormat.getRegExpForJSNumber().test(e)&&(t=new r.Decimal(+e)),void 0===t||!t.isInteger()||!n.decimalToLongIntegerValidate(t))throw new i.Exceptions.Exception("Could not convert '"+e+"' to Long Integer");return n.decimalToLongInteger(t)}function m(e){var t;if(r.Constants.FORMAT.numberFormat.getRegExpForInteger().test(e)?t=new r.Decimal(e):r.Constants.FORMAT.numberFormat.getRegExpForJSNumber().test(e)&&(t=new r.Decimal(+e)),void 0===t||t.lt(r.Constants.MIN_DECIMAL_VALUE)||t.gt(r.Constants.MAX_DECIMAL_VALUE))throw new i.Exceptions.Exception("Could not convert '"+e+"' to Decimal");return t}function y(e,t){if(!t){if(!d.isConvertibleTo(e,r.DataTypes.DateTime))throw new i.Exceptions.Exception("Could not convert '"+e+"' to DateTime");return f.from(e,r.DataTypes.DateTime)}e instanceof Date&&(e=new r.DateTime(e.getTime()));try{return new r.DateTime(1e3*+e)}catch(t){throw new i.Exceptions.Exception("Could not convert '"+e+"' to DateTime")}}var v=new Map,b=new Map;e.to=t,e.from=o}(t.JSONConverter||(t.JSONConverter={}));!function(e){function t(e,t,n,i,o,a){if(void 0===i&&(i=!0),void 0===a&&(a=!1),!1!==i||a||!r.equals(e,n))switch(t){case r.DataTypes.Time:return e.toISOTime();case r.DataTypes.Date:return e.toISODate();case r.DataTypes.DateTime:return!0===o?""+Math.floor(e.getTime()/1e3):e.toString().replace(/\.\d+/,"");case r.DataTypes.LongInteger:var s=e;return r.TypeValidations.ensureNumberInsideBounds(s),s.toNumber();case r.DataTypes.Decimal:case r.DataTypes.Currency:var u=e;return r.TypeValidations.ensureNumberPrecision(u),r.TypeValidations.ensureNumberInsideBounds(u),u.toNumber();case r.DataTypes.Record:case r.DataTypes.RecordList:throw new TypeError("Records and Record lists are not basic types");case r.DataTypes.BinaryData:var c=e;return"string"==typeof e?e:c.content;default:return e}}function n(e){var n=e.value,a=e.serializeDefaultValues,s=e.useUnixDateFormat,u=e.dataType,c=void 0===u?r.DataTypes.Record:u,l=e.defaultValue,f=e.enforceDefaultValueSerializationAtThisLevel,d=void 0!==f&&f;if(void 0!==n&&null!==n)return n instanceof r.GenericRecord?i(n,a,s,d):n instanceof r.List?o(n,a,s,d):t(n,c,void 0===l?r.defaultForType(c):l,a,s,d)}function i(e,i,o,a){void 0===a&&(a=!1);var s=e.getAttributes().reduce(function(a,s){if(s.dataType===r.DataTypes.Record||s.dataType===r.DataTypes.RecordList){var u=n({value:e[s.attrName],serializeDefaultValues:i,useUnixDateFormat:o});u&&(a[s.nameForJson]=u)}else{var c=t(e[s.attrName],s.dataType,s.defaultValue,i,o);void 0!==c&&(a[s.nameForJson]=c)}return a},{});if(0!==Object.keys(s).length||a)return s}function o(e,t,r,i){void 0===i&&(i=!1);for(var o=[],a=e.constructor.getItemType(),s=0;s<e.length;s++)o.push(n({value:e.getItem(s),serializeDefaultValues:t,useUnixDateFormat:r,dataType:a,enforceDefaultValueSerializationAtThisLevel:!0}));if(o.length>0||t||i)return o}e.to=n}(t.NewJSONConverter||(t.NewJSONConverter={}));!function(e){function t(e,n,i,o){if(u(n)){var a=e,s=n,f=i,d=v.get(s);if(!d){var p=s.getAttributes(),h="return function from(row, indexRef, readerImplementation, attributeOrder) {\n";h+="     var data = null;\n",h+="     if (attributeOrder && attributeOrder.length > 0) {\n",h+="         data = {\n",p.forEach(function(e,t){e.dataType!==r.DataTypes.RecordList&&(h+="             "+e.attrName+": null,\n")}),h+="         };\n",h+="         for (var i = 0; i < attributeOrder.length; i++) {\n",h+="             var attrName = attributeOrder[i];\n",h+="             var attr = attributes.filter(function(attr) { return attr.attrName === attrName; })[0];\n",h+="             if (attr.complexType) {\n",h+="                 data[attrName] = fromLocalStorage(row, attr.complexType, indexRef);\n",h+="             } else {\n",h+="                 data[attrName] = readerImplementation(row, indexRef.value++, attr.name, attr.dataType);\n",h+="             }\n",h+="         }\n",h+="     } else {\n",h+="         data = {\n",p.forEach(function(e,t){e.dataType!==r.DataTypes.RecordList&&(e.dataType===r.DataTypes.Record&&n.isAnonymousRecord()?h+="            "+e.attrName+": fromLocalStorage(row, attributes["+t+"].complexType, indexRef),\n":h+="            "+e.attrName+": readerImplementation(row, indexRef.value++, attributes["+t+"].name, attributes["+t+"].dataType),\n")}),h+="        };\n",h+="     }\n",h+="     return new classDef.RecordClass(data);\n",h+="};",d=new Function("fromLocalStorage","GenericRecord","attributes","classDef",h)(t,r.GenericRecord,p,n),v.set(s,d)}return d(a,f,l(n),o)}if(c(n)){if(void 0===n.getItemType()||null===n.getItemType())throw Error("A List can only be deserialized if its ItemType is defined.");for(var g=e,m=n.getItemType(),y=i,b=n,T=new b,_=[],E=0;E<g.length;E++)_.push(new m(y(null,g.item(E))));return T.pushAll(_),T}var w=n;throw new Error("Unable to read data from Local Storage. Unknown type "+(w&&w.name?w.name:w))}function n(e){var t=a.dataTypeToDBDataType[e];return void 0===t?o.ClientDB.DBDataType.UNKNOWN:t}function l(e){return e.isAnonymousRecord()?d:f}function f(t,r,i,o){return e.deserializeFromDB(t["o"+r],n(o))}function d(t,r,i,o){return e.deserializeFromDB(t[i],n(o))}function p(e,t){var n=t.length,r=e.toString();return t.substr(0,Math.max(0,n-r.length))+r}function h(t,n){if(n.isEntityReference&&r.equals(t,e.typeDefaultValue(n.type)))return null;switch(n.type){case o.ClientDB.DBDataType.INTEGER:return t;case o.ClientDB.DBDataType.LONGINTEGER:var a=t;return a?a.toString():null;case o.ClientDB.DBDataType.DECIMAL:var u=t;return n.decimals?u.toFixed(n.decimals):u.toString();case o.ClientDB.DBDataType.TEXT:return t;case o.ClientDB.DBDataType.BOOLEAN:return t?1:0;case o.ClientDB.DBDataType.DATE_TIME:var c=t.toNative();return!s.getEnvParams().DbNullDatesTZAware&&t.eq(r.DateTime.defaultValue)?y:(c=t.toNative(),p(c.getUTCFullYear(),"0000")+"-"+p(c.getUTCMonth()+1,"00")+"-"+p(c.getUTCDate(),"00")+" "+p(c.getUTCHours(),"00")+":"+p(c.getUTCMinutes(),"00")+":"+p(c.getUTCSeconds(),"00"));case o.ClientDB.DBDataType.DATE:var l=t.toNative();return p(l.getFullYear(),"0000")+"-"+p(l.getMonth()+1,"00")+"-"+p(l.getDate(),"00");case o.ClientDB.DBDataType.TIME:var f=t.toNative();return"1900-01-01 "+p(f.getHours(),"00")+":"+p(f.getMinutes(),"00")+":"+p(f.getSeconds(),"00");case o.ClientDB.DBDataType.BINARY_DATA:var d=t;return void 0===d.content?null:d.content;default:throw new i.Exceptions.DataBaseException("","Unable to serialize "+t+" to a database value.")}}function g(t,n){if(null===t)return e.typeDefaultValue(n);switch(n){case o.ClientDB.DBDataType.INTEGER:return t;case o.ClientDB.DBDataType.LONGINTEGER:return r.LongInteger.fromValue(t);case o.ClientDB.DBDataType.DECIMAL:var a=t;return new r.Decimal(a);case o.ClientDB.DBDataType.TEXT:return t;case o.ClientDB.DBDataType.BOOLEAN:return 0!==t;case o.ClientDB.DBDataType.DATE_TIME:case o.ClientDB.DBDataType.DATE:case o.ClientDB.DBDataType.TIME:var u=/^(\d{4})-(\d{2})-(\d{2})( (\d{2}):(\d{2}):(\d{2}))?$/,c=t,l=u.exec(c),f=new Date;switch(n){case o.ClientDB.DBDataType.DATE_TIME:if(t===y&&!s.getEnvParams().DbNullDatesTZAware)return r.DateTime.defaultValue;f.setUTCFullYear(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10)),f.setUTCHours(parseInt(l[5],10)||0,parseInt(l[6],10)||0,parseInt(l[7],10)||0,0);break;case o.ClientDB.DBDataType.DATE:f.setFullYear(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10)),f.setHours(0,0,0,0);break;case o.ClientDB.DBDataType.TIME:f.setFullYear(1900,0,1),f.setHours(parseInt(l[5],10)||0,parseInt(l[6],10)||0,parseInt(l[7],10)||0,0)}return new r.DateTime(f);case o.ClientDB.DBDataType.BINARY_DATA:return new r.BinaryData(t);default:throw new i.Exceptions.DataBaseException("","Unable to deserialize "+t+" to a runtime value.")}}function m(e){return new r.BinaryData(null,null,e)}e.typeDefaultValue=a.typeDefaultValue,e.convertToModelDataType=a.convertToModelDataType,e.typeDisplayName=a.typeDisplayName;var y="1900-01-01 00:00:00",v=new Map;e.from=t,e.serializeToDB=h,e.deserializeFromDB=g,e.deserializeLazyBinaryFromDB=m}(t.LocalStorageConverter||(t.LocalStorageConverter={}))}),define("OutSystems/ClientRuntime/Entities",["require","exports","./Database","./DataConversion","./DataTypes","./Exceptions","./Interfaces","./Logger","./RegExpHelper"],function(e,t,n,r,i,o,a,s,u){"use strict";function c(e){}function l(e){for(var t in e)if(e.hasOwnProperty(t))return e[t];return null}function f(e,t,n){for(var r=e.getAllAttributesFromRecord(t).toArray(),i=0;i<e.attributes.length;i++){var o=e.attributes[i];d(r[i],o,n+" '"+e.name+"."+o.name+"'")}}function d(e,t,n){if(t.type===a.ClientDB.DBDataType.TEXT){if(null===e)return;var r=e,i=r.length-t.length;if(i>0)throw new o.Exceptions.DataBaseException("","Unable to "+n+" because it exceeds the maximum allowed length by "+i+" characters.")}else if(t.type===a.ClientDB.DBDataType.DECIMAL){var r=e,i=r.split(".")[0].length-(t.length-t.decimals);if(i>0)throw new o.Exceptions.DataBaseException("","Unable to "+n+" because it exceeds the maximum allowed length by "+i+" characters.")}}function p(e){switch(e){case a.ClientDB.DBDataType.TEXT:return"Text";case a.ClientDB.DBDataType.BINARY_DATA:return"Binary Data";case a.ClientDB.DBDataType.BOOLEAN:return"Boolean";case a.ClientDB.DBDataType.INTEGER:return"Integer";case a.ClientDB.DBDataType.LONGINTEGER:return"Long Integer";case a.ClientDB.DBDataType.DECIMAL:return"Decimal";case a.ClientDB.DBDataType.DATE_TIME:return"DateTime";case a.ClientDB.DBDataType.DATE:return"Date";case a.ClientDB.DBDataType.TIME:return"Time";default:return"Unknown"}}Object.defineProperty(t,"__esModule",{value:!0}),t.QueryArgumentsList=t.Entity=t.webSQLStorageInstance=t.WebSQLStorage=t.Upgrades=t.PersistentKeyValue=t.LogTable=t.BACKUP_TABLE_PREFIX=void 0,t.BACKUP_TABLE_PREFIX="BACKUP_";!function(e){function t(){return'CREATE TABLE IF NOT EXISTS "'+e.TABLE_NAME+'" ("'+c.join('","')+'")'}function n(t){return t.executeScalar('SELECT "'+e.TABLE_NAME+'"."'+o.ExtraInfo+'" FROM "'+e.TABLE_NAME+'" LIMIT 0').onError(function(){return t.executeNonQuery('ALTER TABLE "'+e.TABLE_NAME+'" ADD "'+o.ExtraInfo+'"')}).andThen(function(){})}function r(e){u=e}function i(e,r){return e.executeNonQuery(t()).andThen(n).andThen(function(e){var t=new l(r);return t.initialize(e).andThen(function(){return s.setOfflineStorage(t)})})}var o={Instant:"Instant",LogType:"LogType",Message:"Message",ModuleName:"ModuleName",Stack:"Stack",MessageType:"MessageType",ExtraInfo:"ExtraInfo"};e.TABLE_NAME="OSSYS_LOG";var u=1e3,c=Object.keys(o).map(function(e){return o[e]});e.createSql=t,e.setMaxRecords=r,e.initialize=i;var l=function(){function t(e){this.db=e}return t.prototype.initialize=function(e){var t=this;return e.feed(null).withoutTraces(function(e){return t.internalCountLogs(e).andThen(function(e,n){t.count=n})})},t.prototype.insertEntity=function(t,n){var r=this,i=new _;return i.add(o.Instant,a.ClientDB.DBDataType.TEXT,n.instant),i.add(o.LogType,a.ClientDB.DBDataType.TEXT,n.logType),i.add(o.Message,a.ClientDB.DBDataType.TEXT,n.message),i.add(o.ModuleName,a.ClientDB.DBDataType.TEXT,n.moduleName),i.add(o.Stack,a.ClientDB.DBDataType.TEXT,n.stack),i.add(o.MessageType,a.ClientDB.DBDataType.TEXT,n.messageType),i.add(o.ExtraInfo,a.ClientDB.DBDataType.TEXT,n.extra?JSON.stringify(n.extra):null),t.executeNonQuery('INSERT INTO "'+e.TABLE_NAME+'" ("'+c.join('", "')+'") VALUES ('+c.map(function(){return"?"}).join(", ")+")",i.toArray()).andThen(function(){r.updateCount(1)})},t.prototype.internalWriteLog=function(e){var t=this;return this.db.executeTransaction(function(n){var r;if(t.count+e.length>=u){var i=t.count+e.length-u;r=t.discardLogs(n,t.count,i)}else r=n.feed(null);return r.andThenAll(function(n){return e.map(function(e){return function(n){return t.insertEntity(n,e)}})})},!1)},t.prototype.writeLog=function(e){return this.internalWriteLog([e])},t.prototype.writeLogBatch=function(e){if(e.length>u){var t=e.length-u;e.splice(0,t)}return this.internalWriteLog(e)},t.prototype.getLogs=function(t){var n=this;return this.db.executeReadTransaction(function(r){return void 0===t&&(t=n.count),r.executeQuery('SELECT * FROM "'+e.TABLE_NAME+'" ORDER BY rowid ASC LIMIT '+t,n.dbRecordToLogMessage)},!1)},t.prototype.popLogs=function(e){var t=this;return void 0===e&&(e=this.count),this.getLogs(e).then(function(n){return t.removeLogs(e).then(function(){return n})})},t.prototype.internalCountLogs=function(t){return t.executeScalar('SELECT COUNT(*) AS count FROM "'+e.TABLE_NAME+'"').andThen(function(e,t){return t})},t.prototype.updateCount=function(e){this.count+=e,this.count=Math.max(this.count,0)},t.prototype.countLogs=function(){var e=this;return this.db.executeReadTransaction(function(t){return e.internalCountLogs(t)},!1)},t.prototype.discardLogs=function(e,t,n){var r=this,i=this.buildDeleteQuery(n,!1);return e.executeNonQuery(i,[s.LogTypes.Error]).andThen(function(e){return r.internalCountLogs(e)}).andThen(function(e,o){var a=t-o;if(a<n){var u=n-a;i=r.buildDeleteQuery(u,!0),e.executeNonQuery(i,[s.LogTypes.Error])}}).andThen(function(){r.updateCount(-n)})},t.prototype.buildDeleteQuery=function(t,n){return'DELETE FROM "'+e.TABLE_NAME+'" WHERE rowid IN (SELECT rowid FROM "'+e.TABLE_NAME+'" WHERE LogType '+(n?"=":"<>")+" ? ORDER BY rowid ASC LIMIT "+t+")"},t.prototype.removeLogs=function(t){var n=this;return this.db.executeTransaction(function(r){var i='DELETE FROM "'+e.TABLE_NAME+'" WHERE rowid IN (SELECT rowid FROM "'+e.TABLE_NAME+'" ORDER BY rowid ASC LIMIT '+t+")";return r.executeNonQuery(i).andThen(function(){n.updateCount(-t)})},!1)},t.prototype.dbRecordToLogMessage=function(e){return{instant:e.Instant,logType:e.LogType,message:e.Message,moduleName:e.ModuleName,stack:e.Stack,messageType:e.MessageType,extra:e.ExtraInfo?JSON.parse(e.ExtraInfo):void 0}},t}();e.LogDatabaseStorage=l}(t.LogTable||(t.LogTable={}));var h;!function(e){e[e.Unchanged=0]="Unchanged",e[e.Deleted=1]="Deleted",e[e.Recreated=2]="Recreated",e[e.New=3]="New"}(h||(h={}));!function(e){function t(t,r){return e.storage=new a(r),n(t)}function n(t){return t.executeNonQuery('CREATE TABLE IF NOT EXISTS "'+e.TABLE_NAME+'" ('+o+")")}var r=[{columnName:"Id",options:"INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL"},{columnName:"Key",options:"UNIQUE NOT NULL"},{columnName:"Value"}];e.TABLE_NAME="OSSYS_PERSISTENTKEYVALUE";var i='"'+r.map(function(e){return e.columnName}).join('", "')+'"',o=r.map(function(e){return"'"+e.columnName+(e.options?"' "+e.options:"'")}).join(", ");e.initialize=t,e.create=n;var a=function(){function t(e){this.db=e}return t.prototype.isReady=function(){return Promise.resolve(!0)},t.prototype.getValue=function(t){return this.db.executeTransaction(function(n){return n.executeScalar("SELECT VALUE FROM "+e.TABLE_NAME+" WHERE Key = ?",[t])})},t.prototype.setValue=function(t,n){return this.db.executeTransaction(function(r){return r.executeNonQuery("INSERT OR REPLACE INTO "+e.TABLE_NAME+" ("+i+") VALUES (COALESCE((SELECT Id FROM "+e.TABLE_NAME+" WHERE Key = ?), null), ?, ?)",[t,t,n])})},t}();e.PersistentKeyValueStorage=a}(t.PersistentKeyValue||(t.PersistentKeyValue={}));var g;!function(e){function n(e,t){for(var n=0,i=t.attributes;n<i.length;n++){var o=i[n],a=o.name.toLowerCase();if(void 0===e[a]){var s=void 0===o.default?r.LocalStorageConverter.typeDefaultValue(o.type):o.default;e[a]=r.LocalStorageConverter.serializeToDB(s,o)}}}function u(e,t){if(void 0===e)return!0;if(e===t)return!1;switch(e){case a.ClientDB.DBDataType.BOOLEAN:return t!==a.ClientDB.DBDataType.INTEGER&&t!==a.ClientDB.DBDataType.LONGINTEGER;case a.ClientDB.DBDataType.INTEGER:return t!==a.ClientDB.DBDataType.LONGINTEGER&&t!==a.ClientDB.DBDataType.TEXT;case a.ClientDB.DBDataType.LONGINTEGER:return t!==a.ClientDB.DBDataType.TEXT;default:return!0}}function c(e,t){return!!u(e.type,t.type)||(!e.isEntityReference!=!t.isEntityReference||void 0!==e.length&&(void 0!==e.decimals?e.length-e.decimals>t.length-t.decimals:e.length>t.length))}function l(e,t,n){if(c(t,n)){var i=r.LocalStorageConverter.deserializeFromDB(e,t.type),a=r.LocalStorageConverter.convertToModelDataType(n.type),s=f(e,i,t.type,a);if(r.JSConversions.isConvertibleTo(i,a)){var u=r.JSConversions.convertTo(i,a),l=r.LocalStorageConverter.serializeToDB(u,n);return d(l,n,s),l}throw new o.Exceptions.DataBaseException("","Unable to "+s+".")}return e}function f(e,t,n,r){var o=e,a=t,s=p(n),u=i.DataTypes[r];if("string"==typeof e&&e&&(o=e.substr(0,50)+" (length:"+e.length+")"),i.TypeValidations.isText(t)){var c=t;a=c.substr(0,50)+" (length:"+c.length+")"}if(t instanceof i.BinaryData){var l=t.content;a=l.substr(0,50)+" (length:"+l.length+")"}return"convert databaseValue:'"+o+"'/deserializedValue:'"+a+"' from type "+s+" to "+u}function h(e,t){var n=e.name.toLowerCase(),r=t.attributes.filter(function(e){return e.name.toLowerCase()===n});return 0===r.length?null:r[0]}function g(t,n,r,i){if(r){var o=h(n,r);if(null!==o){if(i&&o.type===a.ClientDB.DBDataType.DATE_TIME){var s=i.attrs[n.name.toLowerCase()];if(s)return e.upgradeDbValue(t,s,n)}return e.upgradeDbValue(t,o,n)}}var u=i.attrs[n.name.toLowerCase()];return u?e.upgradeDbValue(t,u,n):t}function m(e,t,i,a){for(var s={},u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];s[l.toLowerCase()]=e[l]}n(s,t);for(var f={},d=0,p=t.attributes;d<p.length;d++){var h=p[d];try{var m=h.name.toLowerCase(),y=s[m];f[m]=g(y,h,i,a)}catch(e){throw new o.Exceptions.DataBaseException("","Unable to upgrade attribute '"+h.name+"' data type to '"+r.LocalStorageConverter.typeDisplayName(h.type)+"':\n"+o.getMessage(e))}}return f}function y(e,t,n){var r;return(r=t?t.idIsAutoNumber:n.idIsAutoNumber)!==e.idIsAutoNumber||T(e,t,n).some(function(e){return!e.entityAttribute||(e.dbAttribute||e.dbMetaAttribute?v(e.entityAttribute,e.dbAttribute,e.dbMetaAttribute,r!==a.ClientDB.AutoNumber.No):e.entityAttribute.isPrimaryKey)})}function v(e,t,n,r){if(void 0===r&&(r=!1),t){return!(void 0===n||void 0===n.type||n.type===e.type)||b(e,t,r,n)||!t.isPrimaryKey!=!e.isPrimaryKey}return b(e,n,r)||!n.isPrimaryKey!=!e.isPrimaryKey}function b(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=null);var i=t;return r&&t.type===a.ClientDB.DBDataType.DATE_TIME&&(i=r),(e.isPrimaryKey&&i.isPrimaryKey&&n?!!(a.ClientDB.DBDataType.INTEGER!==e.type&&a.ClientDB.DBDataType.LONGINTEGER!==e.type||a.ClientDB.DBDataType.INTEGER!==i.type&&a.ClientDB.DBDataType.LONGINTEGER!==i.type):e.type!==i.type)||i.type!==a.ClientDB.DBDataType.DECIMAL&&i.length!==e.length||i.type!==a.ClientDB.DBDataType.DECIMAL&&i.decimals!==e.decimals||!i.isEntityReference!=!e.isEntityReference&&!e.isPrimaryKey}function T(e,t,n){for(var r={},i=0,o=e.attributes;i<o.length;i++){var a=o[i],s=a.name.toLowerCase();r[s]={},r[s].entityAttribute=a}for(var u=0,c=Object.keys(n.attrs);u<c.length;u++){var l=c[u],s=l.toLowerCase();r[s]=r[s]||{},r[s].dbMetaAttribute=n.attrs[l]}if(t)for(var f=0,d=t.attributes;f<d.length;f++){var p=d[f],s=p.name.toLowerCase();r[s]=r[s]||{},r[s].dbAttribute=p}return Object.keys(r).map(function(e){return r[e]})}!function(e){function n(){return{v:-1,attrs:{}}}function r(e){return i(e,y).andThen(function(e){return i(e,""+t.BACKUP_TABLE_PREFIX+y)})}function i(e,t){return e.executeNonQuery('CREATE TABLE IF NOT EXISTS "'+t+'" ('+T+", UNIQUE (SS_Key, Module_SS_Key))")}function o(e){return u(e,y).andThen(function(e){return u(e,v)})}function u(e,t){var n=!0,r=b.map(function(e){return'"ent"."'+e.name+'"'});return e.executeQueryRaw("SELECT "+r.join(", ")+' FROM "'+t+'" "ent" LIMIT 0').onError(function(e){n=!1}).andThen(function(){return n})}function c(e){return e.feed(null).andThenAll(function(e){return b.map(function(e){return function(t){return l(t,e.name,e.defaultValue)}})})}function l(e,t,n){return f(e,y,t,n).andThen(function(e){return f(e,v,t,n)})}function f(e,t,n,r){var i=!1;return e.feed(null).andThenAll(function(e){return[function(e){return e.executeNonQuery('SELECT "ent"."'+n+'" FROM '+t+' "ent" LIMIT 0').onError(function(e){i=!0})},function(e){return i?e.executeNonQuery("ALTER TABLE "+t+' ADD "'+n+'"').andThen(function(e){return r?e.executeNonQuery("UPDATE "+t+' SET "'+n+'" = '+r):e.feed(null)}):e.feed(null)}]})}function d(e,t,n){var r=n?v:y,i=n?y:v,o=e.executeNonQuery("DELETE FROM "+i+" WHERE Physical_Table_name = ?",[t]).andThen(function(e){return e.executeNonQuery("INSERT INTO "+i+"("+T+") SELECT "+T+" FROM "+r+" WHERE Physical_Table_name = ?",[t])});return n&&(o=o.andThen(function(e){return e.executeNonQuery("DELETE FROM "+r+" WHERE Physical_Table_name = ?",[t])})),o}function p(e){s.trace("Metamodel","Extracting metadata for table "+e.tableName+" ("+e.name+")");for(var t={v:0,idIsAutoNumber:e.idIsAutoNumber,attrs:{}},n=0,r=e.attributes;n<r.length;n++){var i=r[n];t.attrs[i.name.toLowerCase()]=h(i)}return t}function h(e){var t={type:e.type};return void 0!==e.decimals&&(t.decimals=e.decimals),void 0!==e.length&&(t.length=e.length),e.isPrimaryKey&&(t.isPrimaryKey=e.isPrimaryKey),e.isEntityReference&&(t.isEntityReference=e.isEntityReference),t}function g(e,t,n){var r=p(t);s.trace("Metamodel","Updating metadata for table "+t.tableName+" ("+t.name+")");var i=new _;return i.add("Hash",a.ClientDB.DBDataType.TEXT,t.hash),i.add("Name",a.ClientDB.DBDataType.TEXT,t.name),i.add("Physical_Table_name",a.ClientDB.DBDataType.TEXT,t.tableName),i.add("Extra_Info",a.ClientDB.DBDataType.TEXT,JSON.stringify(r)),i.add("Key",a.ClientDB.DBDataType.TEXT,t.key),i.add("ModuleKey",a.ClientDB.DBDataType.TEXT,n),e.executeNonQuery("UPDATE "+y+" SET Hash = ?, Name = ?, Physical_Table_name = ?, Extra_Info = ? WHERE SS_Key = ? AND Module_SS_Key = ?",i.toArray())}function m(e,t,n){var r=p(t),i=new _;return i.add("Key",a.ClientDB.DBDataType.TEXT,t.key),i.add("ModuleKey",a.ClientDB.DBDataType.TEXT,n),i.add("Name",a.ClientDB.DBDataType.TEXT,t.name),i.add("TableName",a.ClientDB.DBDataType.TEXT,t.tableName),i.add("Hash",a.ClientDB.DBDataType.TEXT,t.hash),i.add("Extra_Info",a.ClientDB.DBDataType.TEXT,JSON.stringify(r)),i.add("Upgrade_Status",a.ClientDB.DBDataType.TEXT,3),e.executeNonQuery("INSERT INTO "+y+"(SS_Key, Module_SS_Key, Name, Physical_Table_name, Hash, Extra_Info, Upgrade_Status) VALUES (?, ?, ?, ?, ?, ?, ?)",i.toArray())}var y="OSSYS_ENTITY",v=""+t.BACKUP_TABLE_PREFIX+y,b=[{name:"SS_Key"},{name:"Module_SS_Key"},{name:"Name"},{name:"Physical_Table_name"},{name:"Hash"},{name:"Extra_Info",defaultValue:"'{\"attrs\":{}}'"},{name:"Upgrade_Status",defaultValue:(0).toString()}],T='"'+b.map(function(e){return e.name}).join('", "')+'"';e.getDefaultMetaData=n,e.create=r,e.innerCreate=i,e.verifyColumns=o,e.innerVerifyColumns=u,e.addMissingColumns=c,e.addColumnIfNeeded=l,e.copyMetaInfo=d,e.extractEntityMetadata=p,e.updateEntity=g,e.insertEntity=m}(e.Metamodel||(e.Metamodel={})),e.upgradeDbValue=l,e.upgradeDbRecord=m,e.requiresFullUpgrade=y}(g=t.Upgrades||(t.Upgrades={}));var m;!function(e){e[e.Auto=0]="Auto",e[e.Single=1]="Single",e[e.Bulk=2]="Bulk"}(m||(m={}));var y=new i.BasicTypeKeyedTypeFactory("Id","idOut"),v=new i.ComplexTypeKeyedTypeFactory("Record","recordOut"),b=function(){function e(){}return e.prototype.getDatabase=function(){var e=this;return this._db?Promise.resolve(this._db):(this.dbReadyPromise||(this.dbReadyPromise=new Promise(function(t){e.onDbInit=function(){return t(e._db)}})),this.dbReadyPromise)},e.prototype.trace=function(e){s.trace(this,e)},e.prototype.initDb=function(e){s.trace(this,"Setting platform database to '"+(e?e.name:"none")+"'"),this._db=e,this.onDbInit&&(this.onDbInit(),this.onDbInit=null)},e.prototype.clearDb=function(){this._db=null},e.prototype.initModule=function(e,t,n){var r=this;return this.recoverBackupTables(t,e,n).andThen(function(t){return 0===e.length?t.feed(null):r.dropInconsistentTables(t,e,n)}).andThen(function(t){return r.backupDeletedTables(t,e,n)}).andThen(function(e){var t=new _;return t.add("ModuleKey",a.ClientDB.DBDataType.TEXT,n),e.executeQuery("SELECT SS_Key, Hash, Extra_Info FROM OSSYS_ENTITY WHERE Module_SS_Key = ?",function(e){return{hash:e.Hash,extraInfo:JSON.parse(e.Extra_Info||"{}"),ssKey:e.SS_Key}},t.toArray())}).andThenAll(function(t){return e.map(function(e){var i=t.filter(function(t){return t.ssKey===e.key});return function(t){return r.createOrUpgradeTable(t,e,1===i.length?i[0]:void 0,n)}})})},e.prototype.initMetamodel=function(e){return g.Metamodel.create(e).andThen(function(e){return g.Metamodel.verifyColumns(e)}).andThen(function(e,t){if(!t)return g.Metamodel.addMissingColumns(e)})},e.prototype.createOrUpgradeTable=function(e,t,r,i){var o=this;this.trace("Checking the status of table "+t.tableName+" ("+t.name+")"),r||(r={hash:null,extraInfo:g.Metamodel.getDefaultMetaData()});var a=r.hash,s=r.extraInfo;return a?a!==t.hash?n.SqlDbIntrospector.introspectTableInfo(e,t.tableName).andThen(function(e,n){return g.requiresFullUpgrade(t,n,s)?(o.trace("Table "+t.tableName+" ("+t.name+") exists and will be fully upgraded"),o.recreateTable(e,t,n,i,s)):(o.trace("Table "+t.tableName+" ("+t.name+") exists and will be incrementally upgraded"),o.upgradeTable(e,t,n,i,s))}):(this.trace("Table "+t.tableName+" ("+t.name+") exists and is up to date"),null):(this.trace("Table "+t.tableName+" ("+t.name+") does not exist and will be created"),this.createTable(e,t,i).andThen(function(e){return g.Metamodel.insertEntity(e,t,i)}))},e.prototype.recreateTable=function(e,t,n,r,i){var a=this;return e.executeQuery('SELECT * FROM "'+t.tableName+'"',function(e){return e}).onError(function(e){throw a.trace("Unable to upgrade the definition of entity '"+t.name+"':\n"+o.getMessage(e)),new o.Exceptions.DataBaseException("","Unable to upgrade the definition of entity '"+t.name+"':\n"+o.getMessage(e))}).andThen(function(e,o){return a.backupTable(e,t.tableName,2).andThen(function(e){return a.createTable(e,t,r)}).andThenAll(function(){return o.map(function(e){for(var r=g.upgradeDbRecord(e,t,n,i),o=new _(!0),a=0,s=t.attributes;a<s.length;a++){var u=s[a];o.add(u.name,u.type,r[u.name.toLowerCase()])}return function(e){return e.executeNonQuery(t.insert.sql,o.toArray())}})})}).andThen(function(e){return g.Metamodel.updateEntity(e,t,r)})},e.prototype.upgradeTable=function(e,t,n,r,i,o){var a=this;return void 0===o&&(o=null),e.feed(null).andThenAll(function(){var e=t.attributes.filter(function(e){return n?!n.attributes.some(function(t){return e.name===t.name}):!Object.keys(i.attrs).some(function(t){return t===e.name.toLowerCase()})});return a.trace("Entity '"+t.name+"' - newAttributes - "+JSON.stringify(e)+" - hash - "+o+" - info.hash - "+t.hash),e.map(function(e){return function(n){var r=n.executeNonQuery(e.addColumn.sql);if(void 0!==e.default){var i=new _;i.add("value",e.type,e.default),r=r.andThen(function(n){return n.executeNonQuery('UPDATE "'+t.tableName+'" SET "'+e.name+'" = ?',i.toArray())})}return r}})}).andThen(function(e){return g.Metamodel.updateEntity(e,t,r)})},e.prototype.switchModule=function(e,t){return this.dropBackupTables(e,t)},e.prototype.recoverBackupTables=function(e,t,n){var r=this;return this.doForEachTable(e,function(e){r.trace("Recovering table "+e);var i=t.filter(function(t){return t.tableName===e});return function(t){return r.recoverBackupTable(t,e,1===i.length?i[0]:null,n)}},n,"Upgrade_Status <> 0")},e.prototype.dropInconsistentTables=function(e,t,n){var r=this;return this.doForEachTable(e,function(e){return r.trace("Dropping inconsistent table "+e+" (same key, different physical table name)"),function(t){return r.dropTableIfExists(t,e).andThen(function(t){return t.executeNonQuery("DELETE FROM OSSYS_ENTITY WHERE upper(Physical_Table_name) = '"+e+"'")})}},n,"Upgrade_Status = 0"+(0===t.length?"":" AND SS_Key IN ("+t.map(function(e){return"'"+e.key+"'"}).join(", ")+") AND Physical_Table_name NOT IN ("+t.map(function(e){return"'"+e.tableName+"'"}).join(", ")+")"))},e.prototype.dropBackupTables=function(e,t){var n=this;return this.doForEachTable(e,function(e){return n.trace("Dropping table "+e),function(t){return n.dropBackupTable(t,e)}},t,"Upgrade_Status <> 0")},e.prototype.backupDeletedTables=function(e,t,n){var r=this;return this.doForEachTable(e,function(e){return r.trace("Backing up old table "+e),function(t){return r.backupTable(t,e,1)}
},n,"Upgrade_Status = 0"+(0===t.length?"":" AND Physical_Table_name NOT IN ("+t.map(function(e){return"'"+e.tableName+"'"}).join(", ")+")"))},e.prototype.doForEachTable=function(e,t,n,r){var i="SELECT Physical_Table_name as name FROM OSSYS_ENTITY WHERE Module_SS_Key = '"+n+"'";return r&&(i+=" AND "+r),e.executeQuery(i,function(e){return e.name}).andThenAll(function(e){var n=[];return e.forEach(function(e){n.push(t(e))}),n})},e.prototype.dropTableIfExists=function(e,t){return e.executeNonQuery('DROP TABLE IF EXISTS "'+t+'"')},e.prototype.createTable=function(e,t,n){return this.trace("createTable '"+t.createTable.sql+"'"),e.executeNonQuery(t.createTable.sql)},e.prototype.backupTable=function(e,t,n){var r=this;return this.trace("backupTable '"+t+"'"),g.Metamodel.copyMetaInfo(e,t,!1).andThen(function(e){return r.dropTableIfExists(e,r.getBackupTableName(t))}).andThen(function(e){return r.renameTableAndSetStatus(e,t,r.getBackupTableName(t),t,n)})},e.prototype.recoverBackupTable=function(e,t,n,r){var i=this,o=!0;return this.dropTableIfExists(e,t).andThen(function(e){return e.executeScalar("SELECT 1 FROM "+i.getBackupTableName(t))}).onError(function(e){e&&(o=!1)}).andThen(function(e){if(o)return i.renameTableAndSetStatus(e,i.getBackupTableName(t),t,t,0)}).andThen(function(e){return g.Metamodel.copyMetaInfo(e,t,!0)})},e.prototype.dropBackupTable=function(e,n){return this.dropTableIfExists(e,this.getBackupTableName(n)).andThen(function(e){return e.executeScalar("SELECT Upgrade_Status FROM OSSYS_ENTITY WHERE upper(Physical_Table_name) = '"+n+"'")}).andThen(function(e,t){return e.executeNonQuery(1===t?"DELETE FROM OSSYS_ENTITY WHERE upper(Physical_Table_name) = '"+n+"'":"UPDATE OSSYS_ENTITY SET Upgrade_Status = 0 WHERE upper(Physical_Table_name) = '"+n+"'")}).andThen(function(e){return e.executeNonQuery("DELETE FROM "+t.BACKUP_TABLE_PREFIX+"OSSYS_ENTITY WHERE Physical_Table_name = ?",[n])})},e.prototype.renameTableAndSetStatus=function(e,t,n,r,i){var o=this;return this.trace("renameTableAndSetStatus '"+r+" to "+n+"'"),this.renameTable(e,t,n).andThen(function(e){return o.setTableUpgradeStatus(e,r,i)})},e.prototype.renameTable=function(e,t,n){return e.executeNonQuery('ALTER TABLE "'+t+'" RENAME TO "'+n+'"')},e.prototype.setTableUpgradeStatus=function(e,t,n){return e.executeNonQuery("UPDATE OSSYS_ENTITY SET Upgrade_Status = "+n+" WHERE upper(Physical_Table_name) = '"+t+"'")},e.prototype.getBackupTableName=function(e){return t.BACKUP_TABLE_PREFIX+e},e.prototype.executeNonQuery=function(e,t){return this.getDatabase().then(function(n){return n.executeTransaction(function(n){return n.executeNonQuery(e,t&&t.toArray())})})},e.prototype.executeQuery=function(e,t,n,i){return this.getDatabase().then(function(o){return o.executeReadTransaction(function(o){return o.executeQueryRaw(e,i&&i.toArray()).andThen(function(e,i){return r.LocalStorageConverter.from(i.rows,t,n)})})})},e.prototype.rawExecuteQuery=function(e,t,n){return this.getDatabase().then(function(r){return r.executeReadTransaction(function(r){return r.executeQueryRaw(e,n&&n.toArray()).andThen(function(e,n){for(var r=new Array(n.rows.length),i=0;i<n.rows.length;i++){var o=n.rows.item(i);r[i]=t(o)}return r})})})},e.prototype.executeCount=function(e,t){return this.getDatabase().then(function(n){return n.executeReadTransaction(function(n){return n.executeScalar(e,t&&t.toArray()).andThen(function(e,t){return r.LocalStorageConverter.deserializeFromDB(t,a.ClientDB.DBDataType.LONGINTEGER)})})})},e.prototype.rawExecuteScalar=function(e,t){return this.getDatabase().then(function(n){return n.executeReadTransaction(function(n){return n.executeQueryRaw(e,t&&t.toArray()).andThen(function(e,t){return 0===t.rows.length?null:l(t.rows.item(0))})})})},e.prototype.create=function(e,t){var n=this;return f(e,t,"create"),this.getDatabase().then(function(r){return r.executeTransaction(function(r){return n.createInner(r,e,t,!0)})})},e.prototype.createInner=function(e,t,n,i){var o=t.insert.getArguments(n);return e.executeQueryRaw(t.insert.sql,o.toArray()).andThen(function(e,o){if(null===t.getIdAttribute())return null;(t.idIsAutoNumber===a.ClientDB.AutoNumber.No||t.idIsAutoNumber===a.ClientDB.AutoNumber.YesIfEmpty&&!t.hasNullId(n))&&(i=!1);var s=t.getIdAttribute().type,u=r.LocalStorageConverter.convertToModelDataType(s),c=new(y.getType(u)),l=null;return l=i?r.LocalStorageConverter.deserializeFromDB(o.insertId,s):t.getIdFromRecord(n),c.idOut=l,c})},e.prototype.update=function(e,t){f(e,t,"update");var n=e.update.getArguments(t);return this.executeNonQuery(e.update.sql,n)},e.prototype.createOrUpdate=function(e,t){var n=this;return this.getDatabase().then(function(r){return r.executeTransaction(function(r){return n.createOrUpdateInner(r,e,t,!0)})})},e.prototype.createOrUpdateInner=function(e,t,n,i){if(f(t,n,"create or update"),t.hasNullId(n))return this.createInner(e,t,n,!0);var o=t.upsert.getArguments(n);return e.executeQueryRaw(t.upsert.sql,o.toArray()).andThen(function(e,i){var o=t.getIdFromRecord(n),a=t.getIdAttribute().type,s=r.LocalStorageConverter.convertToModelDataType(a),u=new(y.getType(s));return u.idOut=o,u})},e.prototype.createOrUpdateAll=function(t,n){var r=this;return this.getDatabase().then(function(i){return i.executeTransaction(function(i){return e.ForceCreateOrUpdateAllMethod===m.Bulk||e.ForceCreateOrUpdateAllMethod===m.Auto&&0===t.attributes.filter(function(e){return e.type===a.ClientDB.DBDataType.BINARY_DATA}).length?r.createOrUpdateAllBulk(i,t,n):r.createOrUpdateAllSingle(i,t,n)}).then(c)})},e.prototype.createOrUpdateAllBulk=function(t,n,r){var i=[],o=Math.floor(e.MaxQueryParameters/n.attributes.length);if(0===o)return this.createOrUpdateAllSingle(t,n,r);for(var a=Math.ceil(r.length/o),s=0;s<a;s++){for(var u=[],c=0;c<o;){var l=s*o+c;if(l===r.length)break;var d=r.getItem(l);f(n,d,"create or update"),u=u.concat(n.upsert.getArguments(d).toArray()),c++}var p=n.upsert.getBulkSql(c);!function(e,t){i.push(function(n){return n.executeQueryRaw(e,t)})}(p,u)}return t.feed(null).andThenAll(function(e){return i})},e.prototype.createOrUpdateAllSingle=function(e,t,n){for(var r=this,i=[],o=0;o<n.length;o++){var a=n.getItem(o);!function(e){i.push(function(n){return r.createOrUpdateInner(n,t,e,!1)})}(a)}return e.feed(null).andThenAll(function(e){return i})},e.prototype.get=function(e,t){var n=e.getIdAttribute(),r=new _;return r.add(n.name,n.type,t),this.rawExecuteQuery(e.select.sql,e.dbRecordToRecord,r).then(function(n){if(0===n.length)throw new o.Exceptions.DataBaseException("",e.name+" with id "+t+" was not found");var r=new(v.getType(n[0].constructor));return r.recordOut=n[0],r})},e.prototype.delete=function(e,t){var n=e.getIdAttribute(),r=new _;return r.add(n.name,n.type,t),this.executeNonQuery(e.delete.sql,r)},e.prototype.deleteAll=function(e){return this.executeNonQuery(e.deleteAll.sql)},e.prototype.getBinary=function(e,t,n){var i=this,o=e.getIdAttribute(),a=o.name,s=o.type,u='SELECT "'+t+'" FROM "'+e.tableName+'" WHERE "'+a+'" = ?',c=new _;return c.add(a,s,n),r.LocalStorageConverter.deserializeLazyBinaryFromDB(function(){return i.getDatabase().then(function(e){return e.executeReadTransaction(function(e){return e.executeScalar(u,c.toArray())})})})},e.prototype.replaceEntityReferencesInOrderBy=function(e,t,n){var r=this,i=null,a=null,s=null;if(e=e.trim(),a=u.matches(e,'(^|\\s|\\.)(\\[|"|)(ossys_|osltm_|oslog_|osevt_|osusr_|osext_)',!0),a.length>0)throw s=a[0],new o.Exceptions.DataBaseException("","'"+(s.groups[2]+s.groups[3])+"' found in 'Order By' parameter is a reserved prefix");if(""!==e&&(a=u.matches(e,"((((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)(( )*,( )*(((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)*",!0),1!==a.length||a[0].value!==e))throw new o.Exceptions.DataBaseException("","Invalid syntax in 'Order By' parameter.");var c=function(e){return r.replaceEntityNameInOrderBy(e,t,n)},l=function(e){return r.replaceAttributeName(e)};return i=u.replace(e,"(\\{\\w+\\}|\\w+\\.)",!1,c),i=u.replace(i,"(\\[\\w+\\])",!1,l)},e.prototype.replaceEntityNameInOrderBy=function(e,t,n){for(var r="",i=this.getEntityNameFromMatch(e),a=!1,s=0;s<t.length;s++)if(t[s].toLowerCase()===i.toLowerCase()){a=!0,r='"'+n[s]+'"';break}if(!a)throw new o.Exceptions.DataBaseException("","'"+i+"' found in 'Order By' parameter is an invalid Entity");return"."===e.value.charAt(e.value.length-1)?r+".":r},e.prototype.replaceAttributeName=function(e){var t=e.value.substr(1,e.value.length-2);return t?('"'===t.charAt(0)?"":'"')+t+('"'===t.charAt(t.length-1)?"":'"'):""},e.prototype.getEntityNameFromMatch=function(e){return"."===e.value.charAt(e.value.length-1)?e.value.substr(0,e.value.length-1):e.value.substr(1,e.value.length-2)},e.prototype.getOrderByColumnsWithoutDuplicates=function(e){return this.filterDuplicateOrderByColumns(e).join(", ")},e.prototype.filterDuplicateOrderByColumns=function(e){var t=new Array,n={};return e.forEach(function(e){var r=e.trim();if(""!==r){var i=r.replace(new RegExp("\b((ASC)|(DESC))$","im"),"").replace('"',"").replace("[","").replace("]","").trim().toLowerCase();!0!==n[i]&&(t.push(r),n[i]=!0)}}),t},e.MaxQueryParameters=500,e.ForceCreateOrUpdateAllMethod=m.Auto,e}();t.WebSQLStorage=b,t.webSQLStorageInstance=new b;var T=function(){function e(e,t,n){var r=this;this.storage=e,this.info=t,this.moduleKey=n,this.getBinary=function(e,t,n){return n.hasContent()?n:r.storage.getBinary(r.info,e,t)}}return e.prototype.getStorage=function(){return this.storage},e.prototype.getInfo=function(){return this.info},e.prototype.create=function(e){return this.storage.create(this.info,e)},e.prototype.createOrUpdate=function(e){return this.storage.createOrUpdate(this.info,e)},e.prototype.createOrUpdateAll=function(e){return this.storage.createOrUpdateAll(this.info,e)},e.prototype.update=function(e){return this.storage.update(this.info,e)},e.prototype.get=function(e){return this.storage.get(this.info,e)},e.prototype.delete=function(e){return this.storage.delete(this.info,e)},e.prototype.deleteAll=function(){return this.storage.deleteAll(this.info)},e}();t.Entity=T;var _=function(){function e(e){this.skipConversion=e,this.argumentList=[],this.existingArguments={}}return e.prototype.add=function(e,t,n,i,o,a){if(!this.existingArguments[e])if(this.existingArguments[e]=!0,void 0===n)this.argumentList.push(null);else{var s=void 0;s=this.skipConversion?n:r.LocalStorageConverter.serializeToDB(n,{type:t,length:i,decimals:o,isEntityReference:a}),this.argumentList.push(s)}},e.prototype.toArray=function(){return this.argumentList},e}();t.QueryArgumentsList=_}),define("OutSystems/ClientRuntime/ErrorHandling",["require","exports","./ApplicationInfo","./Exceptions","./Logger","./Navigation","./StorageProvider"],function(e,t,n,r,i,o,a){"use strict";function s(e,n,a,s){if(void 0===n&&(n=""),void 0===a&&(a=""),!o.hasPendingReload()&&(e&&i.error(null,e),o.isValidContext(s))){var u=o.VersionedURL.getVersionedUrl(t.ERROR_PAGE_HTML);t.ErrorHandlingStorage.errorPageMessage.set(n),t.ErrorHandlingStorage.errorPageExtraMessage.set(a),e?t.ErrorHandlingStorage.errorPageExceptionInfo.set(r.getExceptionInfo(e)):t.ErrorHandlingStorage.errorPageExceptionInfo.remove(),o.changeWindowLocation(u)}}function u(e,t){var r=n.getErrorPageConfig(),i=r&&r.messages&&r.messages.incompatibleProducer;this.navigateToErrorPage(e,i||e.message,null,t)}function c(e){var t=n.getErrorPageConfig(),r=t&&t.messages&&t.messages.appOffline;this.navigateToErrorPage(null,r||"This application is temporarily unavailable. Try reloading or contact the administrator.",null,e)}function l(e,t){i.trace(h,"Error thrown by the application: "+e),r.isApplicationOffline(e)?this.navigateToAppOffline(t):r.isInstanceOf(e,r.Exceptions.IncompatibleProducerException)?this.navigateToIncompatibleProducer(e,t):this.navigateToErrorPage(e,null,null,t)}function f(e,n){return i.trace("ErrorHandling",r.getMessage(e)),this.ignoreError(e,n)?t.IGNORED_ERROR_RESULT:(this.handleError(e,n),t.UNHANDLED_ERROR_RESULT)}function d(e,t){return!!r.isInstanceOf(e,r.Exceptions.IgnorableSystemException)||!!r.isApplicationOffline(e)&&(this.navigateToAppOffline(t),!0)}function p(e){return e===t.UNHANDLED_ERROR_RESULT||e===t.IGNORED_ERROR_RESULT}Object.defineProperty(t,"__esModule",{value:!0}),t.isSpecialHandleErrorResult=t.ignoreError=t.defaultErrorHandler=t.handleError=t.navigateToAppOffline=t.navigateToIncompatibleProducer=t.navigateToErrorPage=t.ErrorHandlingStorage=t.IGNORED_ERROR_RESULT=t.UNHANDLED_ERROR_RESULT=t.ERROR_PAGE_HTML=void 0,t.ERROR_PAGE_HTML="_error.html",t.UNHANDLED_ERROR_RESULT={errorCode:"UNHANDLED"},t.IGNORED_ERROR_RESULT={errorCode:"IGNORED"};var h="ErrorHandling";t.ErrorHandlingStorage={errorPageMessage:new a.StorageObject(a.StorageType.Session,"ErrorPageMessage",""),errorPageExtraMessage:new a.StorageObject(a.StorageType.Session,"ErrorPageExtraMessage",""),errorPageExceptionInfo:new a.StorageObject(a.StorageType.Session,"ErrorPageExceptionInfo",null)},t.navigateToErrorPage=s,t.navigateToIncompatibleProducer=u,t.navigateToAppOffline=c,t.handleError=l,t.defaultErrorHandler=f,t.ignoreError=d,t.isSpecialHandleErrorResult=p}),define("OutSystems/ClientRuntime/FeedbackMessageService",["require","exports"],function(e,t){"use strict";function n(e){a=e,s&&(s(),s=null)}function r(e){u=e}function i(e,t,n,r,i,o){if(void 0===n&&(n=!0),void 0===r&&(r=""),void 0===i&&(i=!0),u){var c=function(){return a.showMessage(e,t,n,r,i,o)};a?c():s=c}}function o(){if(u){a?function(){a.closeMessage()}():s=null}}Object.defineProperty(t,"__esModule",{value:!0}),t.closeFeedbackMessage=t.showFeedbackMessage=t.setEnabled=t.registerFeedbackMessageService=void 0;var a,s,u=!0;t.registerFeedbackMessageService=n,t.setEnabled=r,t.showFeedbackMessage=i,t.closeFeedbackMessage=o}),define("OutSystems/ClientRuntime/modules/PubSub/Publisher",["require","exports","../../Logger"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this.moduleName=e,this.context=t,this.subscribers=[]}return e.prototype.subscribe=function(e){if(!e)throw new Error("Argument 'handler' cannot be null or undefined");for(var t=0;t<this.subscribers.length;t++)if(this.subscribers[t]===e)return!1;return this.subscribers.push(e),n.trace(this.moduleName,"Subscribing handler for "+this.context),!0},e.prototype.unsubscribe=function(e){if(!e)throw new Error("Argument 'handler' cannot be null or undefined");for(var t=0;t<this.subscribers.length;t++)if(this.subscribers[t]===e)return this.subscribers.splice(t,1),n.trace(this.moduleName,"Unsubscribing handler for "+this.context),!0;return!1},e.prototype.publish=function(e){for(var t=0,r=this.subscribers;t<r.length;t++){(0,r[t])(e)}n.trace(this.moduleName,"Notifying subscribers for "+this.context)},e}();t.default=r}),define("OutSystems/ClientRuntime/modules/ClientVariables/LocalStorageSerializer",["require","exports","../../DataTypes"],function(e,t,n){"use strict";function r(e){return"Unsupported data type ("+e+") for client variable"}function i(e,t){switch(t){case n.DataTypes.Integer:return n.TypeValidations.isValidInteger(e);case n.DataTypes.LongInteger:return n.TypeValidations.isValidLongInteger(e);case n.DataTypes.Decimal:case n.DataTypes.Currency:return n.TypeValidations.isValidDecimal(e);case n.DataTypes.Boolean:return n.TypeValidations.isBoolean(e);case n.DataTypes.Text:case n.DataTypes.PhoneNumber:case n.DataTypes.Email:return n.TypeValidations.isText(e);case n.DataTypes.Date:return n.TypeValidations.isValidDate(e);case n.DataTypes.DateTime:return n.TypeValidations.isValidDateTime(e);case n.DataTypes.Time:return n.TypeValidations.isValidTime(e);default:var i=n.mapDataTypeToName(t),o=r(i);throw new TypeError(o)}}function o(e,t){if(void 0===e||null===e)throw new TypeError("Value "+e+" is not a valid value for a client variable.");if(!i(e,t)){var o=n.mapDataTypeToName(t);throw new TypeError("Value "+e+" is not a valid value for a client variable of the specified type ("+o+").")}switch(t){case n.DataTypes.Integer:case n.DataTypes.LongInteger:case n.DataTypes.Decimal:case n.DataTypes.Currency:return e.toString();case n.DataTypes.Boolean:return e?s:u;case n.DataTypes.Text:case n.DataTypes.PhoneNumber:case n.DataTypes.Email:return e;case n.DataTypes.Date:return e.toISODate();case n.DataTypes.DateTime:return e.toString();case n.DataTypes.Time:return e.toISOTime();default:throw new TypeError(r(""+t))}}function a(e,t){switch(t){case n.DataTypes.Integer:var i=Number(e);return n.TypeValidations.isValidInteger(i)&&n.TypeValidations.isWithinIntegerRange(i)?i:n.Constants.DEFAULT_INTEGER;case n.DataTypes.LongInteger:if(!e)return n.Constants.DEFAULT_LONGINTEGER;var o=n.LongInteger.fromString(e);return n.TypeValidations.isValidLongInteger(o)?o:n.Constants.DEFAULT_LONGINTEGER;case n.DataTypes.Decimal:if(!e)return n.Constants.DEFAULT_DECIMAL;var a=new n.Decimal(e);return n.TypeValidations.isValidDecimal(a)&&n.TypeValidations.isWithinDecimalRange(a)?a:n.Constants.DEFAULT_DECIMAL;case n.DataTypes.Currency:if(!e)return n.Constants.DEFAULT_CURRENCY;var c=new n.Decimal(e);return n.TypeValidations.isValidDecimal(c)&&n.TypeValidations.isWithinDecimalRange(c)?c:n.Constants.DEFAULT_CURRENCY;case n.DataTypes.Boolean:return e===s||e!==u&&n.Constants.DEFAULT_BOOLEAN;case n.DataTypes.Text:return n.TypeValidations.isText(e)?e:n.Constants.DEFAULT_TEXT;case n.DataTypes.PhoneNumber:return n.TypeValidations.isText(e)?e:n.Constants.DEFAULT_PHONENUMBER;case n.DataTypes.Email:return n.TypeValidations.isText(e)?e:n.Constants.DEFAULT_EMAIL;case n.DataTypes.Date:var l=n.DateTime.fromISODate(e);return n.TypeValidations.isValidDate(l)?l:n.Constants.DEFAULT_DATE;case n.DataTypes.DateTime:var f=n.DateTime.fromISODateTime(e);return n.TypeValidations.isValidDateTime(f)?f:n.Constants.DEFAULT_DATETIME;case n.DataTypes.Time:var d=n.DateTime.fromISOTime(e);return n.TypeValidations.isValidTime(d)?d:n.Constants.DEFAULT_TIME;case n.DataTypes.Record:throw new TypeError(r("Record"));case n.DataTypes.RecordList:throw new TypeError(r("List"));case n.DataTypes.BinaryData:throw new TypeError(r("Binary Data"));case n.DataTypes.Object:throw new TypeError(r("Object"));default:throw new TypeError(r("Unknown: "+e))}}Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=t.serialize=void 0;var s="true",u="false";t.serialize=o,t.deserialize=a}),define("OutSystems/ClientRuntime/modules/ClientVariables/LocalStorageClientVariablesService",["require","exports","../../DataTypes","../../Logger","../../RegExpHelper","../../RolesInfo","../PubSub/Publisher","../Storage/StorageNaming","./LocalStorageSerializer"],function(e,t,n,r,i,o,a,s,u){"use strict";function c(e){return void 0===e||null===e}Object.defineProperty(t,"__esModule",{value:!0});var l="Client Variables",f="$SESSION_USER_ID",d=function(){function e(e){this.namespace=e,this.fullKeyMatcher=null,this.publisher=new a.default(l,e),this.fullKeyMatcher=new RegExp("^"+i.escape(s.OS_STORAGE_PREFIX)+i.escape(this.namespace)+"\\$[^$]*\\$ClientVars\\$"),this.checkSessionExpires(),this.innerSetVariable(f,"",n.DataTypes.Integer,o.getUserId())}return e.prototype.subscribe=function(e){return this.publisher.subscribe(e)},e.prototype.unsubscribe=function(e){return this.publisher.unsubscribe(e)},e.prototype.getFullKey=function(e,t){return""+s.OS_STORAGE_PREFIX+this.namespace+"$"+t+"$ClientVars$"+e},e.prototype.getVariable=function(e,t,n,r){return this.checkSessionExpires(),this.innerGetVariable(e,t,n,r)},e.prototype.innerGetVariable=function(e,t,i,o){var a=window.localStorage.getItem(this.getFullKey(e,t));return r.trace(l,"Reading Client Variable "+e+" of module "+t+" for "+this.namespace),c(a)?c(o)?n.defaultForType(i):o:u.deserialize(a,i)},e.prototype.setVariable=function(e,t,n,r){this.checkSessionExpires(),this.innerSetVariable(e,t,n,r),this.publisher.publish({key:e,module:t,value:r})},e.prototype.innerSetVariable=function(e,t,n,i){window.localStorage.setItem(this.getFullKey(e,t),u.serialize(i,n)),r.trace(l,"Set Client Variable "+e+" of module "+t+" for "+this.namespace)},e.prototype.removeAllVariables=function(){for(var e=[],t=0;t<window.localStorage.length;t++){var n=window.localStorage.key(t);this.fullKeyMatcher.test(n)&&e.push(n)}if(e.length>0){for(var r=0,i=e;r<i.length;r++){var n=i[r];window.localStorage.removeItem(n)}this.publisher.publish()}},e.prototype.checkSessionExpires=function(){var e=this.innerGetVariable(f,"",n.DataTypes.Integer);o.getUserId()!==e&&(0!==e&&(r.trace(l,"Removing all Client Variables for user provider "+this.namespace),this.removeAllVariables()),this.innerSetVariable(f,"",n.DataTypes.Integer,o.getUserId()))},e}();t.default=d}),define("OutSystems/ClientRuntime/modules/Database/IDatabase",["require","exports"],function(e,t){"use strict";function n(e){return"name"in e&&"registerInitializer"in e&&"initialize"in e&&"initializerCleanup"in e&&"testConnection"in e&&"close"in e&&"executeReadTransaction"in e&&"executeTransaction"in e&&"executeUpgradeTransaction"in e}Object.defineProperty(t,"__esModule",{value:!0}),t.instanceOfIDatabase=void 0,t.instanceOfIDatabase=n}),define("OutSystems/ClientRuntime/modules/Database/Common/Database",["require","exports","tslib","../../../Exceptions"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){this.databaseName=e,this.isInitialized=!1,this.allInitializers=[],this.initializersToRun=[]}return Object.defineProperty(e.prototype,"name",{get:function(){return this.databaseName},enumerable:!1,configurable:!0}),e.prototype.registerInitializer=function(e){if(this.isInitialized)throw new r.Exceptions.DataBaseException("","Cannot register a database initializer on the already initialized database '"+this.name+"'");this.allInitializers.push(e)},e.prototype.initialize=function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:if(this.isInitialized)throw new r.Exceptions.DataBaseException("","Cannot initialize the already initialized database '"+this.name+"'");return this.markInitialized(),[4,this.identifyNeededInitializers()];case 1:return e.sent(),[4,this.runNeededInitializers()];case 2:return e.sent(),[2]}})})},e.prototype.initializerCleanup=function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:if(!this.isInitialized)throw new r.Exceptions.DataBaseException("","Cannot perform database initializer cleanup on the non-initialized database '"+this.name+"'");return[4,this.cleanupNeededInitializers()];case 1:return e.sent(),[2]}})})},e.prototype.identifyNeededInitializers=function(){return n.__awaiter(this,void 0,void 0,function(){var e=this;return n.__generator(this,function(t){switch(t.label){case 0:return this.allInitializers&&this.allInitializers.length>0?[4,this.executeReadTransaction(function(t){return n.__awaiter(e,void 0,void 0,function(){var e,r,i;return n.__generator(this,function(n){switch(n.label){case 0:e=0,r=this.allInitializers,n.label=1;case 1:return e<r.length?(i=r[e],[4,i.isNeeded(t)]):[3,4];case 2:n.sent()&&this.initializersToRun.push(i),n.label=3;case 3:return e++,[3,1];case 4:return[2]}})})})]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.releaseUnneededInitializers(),[2]}})})},e.prototype.runNeededInitializers=function(){return n.__awaiter(this,void 0,void 0,function(){var e=this;return n.__generator(this,function(t){switch(t.label){case 0:return this.initializersToRun.length>0?[4,this.executeUpgradeTransaction(function(t){return n.__awaiter(e,void 0,void 0,function(){var e,r,i;return n.__generator(this,function(n){switch(n.label){case 0:e=0,r=this.initializersToRun,n.label=1;case 1:return e<r.length?(i=r[e],[4,i.run(t)]):[3,4];case 2:n.sent(),n.label=3;case 3:return e++,[3,1];case 4:return[2]}})})})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.cleanupNeededInitializers=function(){return n.__awaiter(this,void 0,void 0,function(){var e=this;return n.__generator(this,function(t){switch(t.label){case 0:return this.initializersToRun.length>0?[4,this.executeUpgradeTransaction(function(t){return n.__awaiter(e,void 0,void 0,function(){var e,r,i;return n.__generator(this,function(n){switch(n.label){case 0:e=0,r=this.initializersToRun,n.label=1;case 1:return e<r.length?(i=r[e],i.cleanup?[4,i.cleanup(t)]:[3,3]):[3,4];case 2:n.sent(),n.label=3;case 3:return e++,[3,1];case 4:return[2]}})})})]:[3,2];case 1:t.sent(),this.releaseNeededInitializers(),t.label=2;case 2:return[2]}})})},e.prototype.markInitialized=function(){this.isInitialized=!0},e.prototype.releaseUnneededInitializers=function(){this.allInitializers=[]},e.prototype.releaseNeededInitializers=function(){this.initializersToRun=[]},e}();t.default=i}),define("OutSystems/ClientRuntime/modules/Database/TableInfoUtils",["require","exports","../../DataTypes"],function(e,t,n){"use strict";function r(e){return e?e.toUpperCase():e}function i(e,t){return e.attributes.filter(function(e){return e.name===t.name})[0]||null}function o(e){return a(e)[0]||null}function a(e){return e.attributes.filter(function(e){return e.isPrimaryKey})}function s(e){var t=a(e);return t.length>0?t.map(function(e){return e.columnName}):null}function u(e,t){var n=o(e);return n?t.getAttributes().filter(function(e){return e.name===n.name})[0]||null:null}function c(e,t){var n=o(e);if(!n)return null;var r=t.getAttributes().filter(function(e){return e.name===n.name})[0];return r?t[r.attrName]:null}function l(e,t){var r=o(e);if(!r)return!0;var i=t.getAttributes().filter(function(e){return e.name===r.name})[0];return!i||n.equals(t[i.attrName],n.defaultForType(i.dataType))}Object.defineProperty(t,"__esModule",{value:!0}),t.hasNullIdentifier=t.getIdentifierValue=t.getIdentifierAttribute=t.getIdentifierColumnNames=t.getIdentifierColumns=t.getIdentifierColumn=t.getMatchingColumn=t.formatObjectName=t.METADATA_TABLE_NAME=t.BACKUP_TABLE_PREFIX=void 0,t.BACKUP_TABLE_PREFIX="BACKUP_",t.METADATA_TABLE_NAME="OSSYS_ENTITY",t.formatObjectName=r,t.getMatchingColumn=i,t.getIdentifierColumn=o,t.getIdentifierColumns=a,t.getIdentifierColumnNames=s,t.getIdentifierAttribute=u,t.getIdentifierValue=c,t.hasNullIdentifier=l}),define("OutSystems/ClientRuntime/modules/Database/IndexedDB/IndexedDBTransactionWithoutObjectStores",["require","exports","tslib","../../../Logger","../TableInfoUtils"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){this.allowTraces=e,this.database=t,this.allowTraces&&r.trace(this,"Starting transaction "+this.transactionId+" over "+t.objectStoreNames.length+" store(s)")}return e.prototype.createTable=function(e){var t=this;return new Promise(function(n){t.trace("Creating table '"+e.tableName+"'");var r=i.getIdentifierColumnNames(e),o=t.database.createObjectStore(e.tableName,{autoIncrement:!r,keyPath:r});t.trace("Creating columns for '"+e.tableName+"' table");for(var a=0;a<e.attributes.length;a++)t.trace("Creating column '"+e.attributes[a].name+"'"),o.createIndex(e.attributes[a].columnName,e.attributes[a].columnName);n()})},e.prototype.deleteTableIfExists=function(e){var t,n=this;return t="string"==typeof e?e:e.tableName,new Promise(function(e,r){if(n.trace("Deleting table '"+t+"'"),!n.database.objectStoreNames.contains(t))return n.trace("Table '"+t+"' does not exist"),e();try{n.database.deleteObjectStore(t),n.trace("Table '"+t+"' deleted successfuly")}catch(e){return n.trace("Error deleting table '"+t+"'",e),r(e)}e()})},e.prototype.existsTable=function(e){var t="string"==typeof e?e:e.tableName;return Promise.resolve(this.database.objectStoreNames.contains(t))},e.prototype.renameTable=function(e,t){throw new Error("You can't execute this method on a database without object stores.")},e.prototype.addColumn=function(e,t){throw new Error("You can't execute this method on a database without object stores.")},e.prototype.existsColumn=function(e,t){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){throw new Error("You can't execute this method on a database without object stores.")})})},e.prototype.getRecord=function(e,t){throw new Error("You can't execute this method on a database without object stores.")},e.prototype.insertRecord=function(e,t){throw new Error("You can't execute this method on a database without object stores.")},e.prototype.updateRecord=function(e,t){throw new Error("You can't execute this method on a database without object stores.")},e.prototype.upsertRecord=function(e,t){throw new Error("You can't execute this method on a database without object stores.")},e.prototype.upsertAllRecords=function(e,t){throw new Error("You can't execute this method on a database without object stores.")},e.prototype.removeRecord=function(e,t){throw new Error("You can't execute this method on a database without object stores.")},e.prototype.removeAllRecords=function(e){throw new Error("You can't execute this method on a database without object stores.")},e.prototype.findRecords=function(e,t){throw new Error("You can't execute this method on a database without object stores.")},e.prototype.getAllRecords=function(e){throw new Error("You can't execute this method on a database without object stores.")},e.prototype.trace=function(e,t){this.allowTraces&&r.trace(this,e+" on transaction "+this.transactionId+(t?": "+t.message:""))},e}();t.default=o}),define("OutSystems/ClientRuntime/modules/Database/EntityInfoUtils",["require","exports","../../Exceptions","../../RegExpHelper"],function(e,t,n,r){"use strict";function i(e){return"."===e.value.charAt(e.value.length-1)?e.value.substr(0,e.value.length-1):e.value.substr(1,e.value.length-2)}function o(e,t){var r=i(e),o=t.some(function(e){return e.toLowerCase()===r.toLowerCase()})?r:"";if(""===o)throw new n.Exceptions.DataBaseException("","'"+r+"' found in 'Order By' parameter is an invalid Entity");return"."===e.value.charAt(e.value.length-1)?o+".":o}function a(e,t){var i=null,a=e.trim();if(""===a)return[];var s=r.matches(a,"((((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)(( )*,( )*(((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)*",!0);if(1!==s.length||s[0].value!==a)throw new n.Exceptions.DataBaseException("","Invalid syntax in 'Order By' parameter.");var u=function(e){return o(e,t)},c=function(e){return e.value.substr(1,e.value.length-2)};return i=r.replace(a,"(\\{\\w+\\}|\\w+\\.)",!1,u),i=r.replace(i,"(\\[\\w+\\])",!1,c),i.split(/, ?/).map(function(e){var t=e.trim().split(" "),n=2!==t.length||"asc"===t[1].toLowerCase();return{attributeParts:t[0].split("."),isAscending:n}})}Object.defineProperty(t,"__esModule",{value:!0}),t.getDynamicSortList=void 0,t.getDynamicSortList=a}),define("OutSystems/ClientRuntime/modules/Database/IndexedDB/IndexedDBUtils",["require","exports","tslib","../../../DataTypes","../../../Exceptions","../EntityInfoUtils"],function(e,t,n,r,i,o){"use strict";function a(e){e.stopPropagation(),e.preventDefault()}function s(e){return n.__awaiter(this,void 0,void 0,function(){var t,i;return n.__generator(this,function(n){switch(n.label){case 0:if(!(e instanceof r.List))return[3,5];t=0,n.label=1;case 1:return t<e.length?(i=e.getItem(t),[4,u(i)]):[3,4];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:return[3,7];case 5:return e instanceof r.GenericRecord?[4,u(e)]:[3,7];case 6:n.sent(),n.label=7;case 7:return[2]}})})}function u(e){return n.__awaiter(this,void 0,void 0,function(){var t,i,o=this;return n.__generator(this,function(a){switch(a.label){case 0:return t=e.getAttributes(),i=t.map(function(t){return n.__awaiter(o,void 0,void 0,function(){var i,o;return n.__generator(this,function(n){switch(n.label){case 0:return i=e[t.attrName],t.dataType!==r.DataTypes.Record?[3,2]:[4,u(i)];case 1:return n.sent(),[3,4];case 2:return t.dataType!==r.DataTypes.BinaryData?[3,4]:(o=i,[4,o.loadContent()]);case 3:n.sent(),n.label=4;case 4:return[2]}})})}),[4,Promise.all(i)];case 1:return a.sent(),[2]}})})}function c(e){return e.charAt(0).toLowerCase()+e.substr(1)+"Attr"}function l(e,t){
var n=o.getDynamicSortList(e,t);return function(e){return n.map(function(t){for(var n=e,r=0;r<t.attributeParts.length;r++)!function(e){var r=c(t.attributeParts[e]).toLowerCase(),o=n.getAttributes().filter(function(e){return e.attrName.toLowerCase()===r});if(0===o.length)throw new i.Exceptions.DataBaseException("","Invalid attribute in 'Order By' parameter: "+t.attributeParts.join("."));n=n[o[0].attrName]}(r);return{value:n,isAscending:t.isAscending}})}}Object.defineProperty(t,"__esModule",{value:!0}),t.getDynamicSortsObjGenerator=t.loadBinaryDataContent=t.markEventAsHandled=void 0,t.markEventAsHandled=a,t.loadBinaryDataContent=s,t.getDynamicSortsObjGenerator=l}),define("OutSystems/ClientRuntime/modules/Database/IndexedDB/IndexedDBTransaction",["require","exports","tslib","../../../Logger","../TableInfoUtils","./IndexedDBTransactionWithoutObjectStores","./IndexedDBUtils"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=1e12,u=function(e){function t(n,r,i){var o=e.call(this,n,i)||this;return o.transaction=r,t.lastTransactionId=(t.lastTransactionId+1)%s,o.transactionId=t.lastTransactionId+1,o}return n.__extends(t,e),Object.defineProperty(t.prototype,"onComplete",{set:function(e){var t=this;this.transaction.oncomplete=function(){return t.allowTraces&&r.trace(t,"Committing transaction "+t.transactionId),e()}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onAbort",{set:function(e){var t=this;this.transaction.onabort=function(){return t.allowTraces&&r.trace(t,"Aborting transaction "+t.transactionId+": "+t.transaction.error),e(t.transaction.error)}},enumerable:!1,configurable:!0}),t.prototype.executeQuery=function(e){return e(this.transaction)},t.prototype.renameTable=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r;return n.__generator(this,function(n){return r=this.transaction.objectStore(e),r.name=t,[2]})})},t.prototype.getRecord=function(e,n){var r=this;return new Promise(function(i,o){r.trace("Getting record with keys '"+n+"' from table '"+e.tableName+"'");var s=r.transaction.objectStore(e.tableName),u=s.get(t.wrapKeyIfNeeded(n,e));u.onsuccess=function(){r.trace("Retrieved record with keys '"+n+"' from table '"+e.tableName+"' successfully"),i(u.result||null)},u.onerror=function(t){r.trace("Error retrieving record with keys '"+n+"' from table '"+e.tableName+"'",r.transaction.error),a.markEventAsHandled(t),o(r.transaction.error)}})},t.prototype.removeRecord=function(e,n){var r=this;return new Promise(function(i,o){r.trace("Deleting record with key '"+n+"' from table '"+e.tableName+"'");var s=r.transaction.objectStore(e.tableName),u=s.delete(t.wrapKeyIfNeeded(n,e));u.onsuccess=function(){r.trace("Deleted record with key '"+n+"' from table '"+e.tableName+"' successfully"),i()},u.onerror=function(t){r.trace("Error deleting record with key '"+n+"' from table '"+e.tableName+"'",u.error),a.markEventAsHandled(t),o(u.error)}})},t.prototype.removeAllRecords=function(e){var t=this;return new Promise(function(n,r){t.trace("Deleting all records from table '"+e.tableName+"'");var i=t.transaction.objectStore(e.tableName),o=i.clear();o.onsuccess=function(){t.trace("Deleted all records from table '"+e.tableName+"' successfully"),n()},o.onerror=function(n){t.trace("Error deleting all records from table '"+e.tableName+"'",o.error),a.markEventAsHandled(n),r(o.error)}})},t.prototype.insertRecord=function(e,n){var r=this;return new Promise(function(i,o){r.trace("Inserting record on table '"+e.tableName+"'");var s=r.transaction.objectStore(e.tableName).add(n);s.onsuccess=function(){r.trace("Inserted record on table '"+e.tableName+"' successfully"),i(t.unwrapKeyIfNeeded(s))},s.onerror=function(t){r.trace("Error inserting record on table '"+e.tableName+"'",s.error),a.markEventAsHandled(t),o(s.error)}})},t.prototype.upsertRecord=function(e,n){var r=this;return new Promise(function(i,o){r.trace("Adding/Updating record on table '"+e.tableName+"'");var s=r.transaction.objectStore(e.tableName).put(n);s.onsuccess=function(){r.trace("Added/Updated record on table '"+e.tableName+"' successfully"),i(t.unwrapKeyIfNeeded(s))},s.onerror=function(t){r.trace("Error adding/updating record on table '"+e.tableName+"'",s.error),a.markEventAsHandled(t),o(s.error)}})},t.prototype.upsertAllRecords=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r,i,o,a;return n.__generator(this,function(n){switch(n.label){case 0:this.trace("Adding/updating "+(null===t||void 0===t?void 0:t.length)+" record(s) on table '"+e.tableName+"'"),n.label=1;case 1:n.trys.push([1,6,,7]),r=0,i=t,n.label=2;case 2:return r<i.length?(o=i[r],[4,this.upsertRecord(e,o)]):[3,5];case 3:n.sent(),n.label=4;case 4:return r++,[3,2];case 5:return this.trace("Added/updated "+(null===t||void 0===t?void 0:t.length)+" record(s) on table '"+e.tableName+"' successfully"),[3,7];case 6:throw a=n.sent(),this.trace("Error adding/updating "+(null===t||void 0===t?void 0:t.length)+" record(s) on table '"+e.tableName+"'",a),a;case 7:return[2]}})})},t.prototype.updateRecord=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r=this;return n.__generator(this,function(n){return[2,new Promise(function(n,o){var s=i.getIdentifierColumnNames(e);if(0===s.length){var u=new Error("Cannot perform an update on table '"+e.tableName+"' since it has no primary key column");return r.trace(u.message),o(u)}r.trace("Checking if record exists on table '"+e.tableName+"'");var c=r.transaction.objectStore(e.tableName).get(s.map(function(e){return t[e]}));c.onsuccess=function(){try{if(!c.result){var i=new Error("Record to update does not exist on table '"+e.tableName+"'");return r.trace(i.message),o(i)}r.trace("Updating record on table '"+e.tableName+"'");var s=r.transaction.objectStore(e.tableName).put(t);s.onsuccess=function(){r.trace("Updated record on table '"+e.tableName+"' successfully"),n()},s.onerror=function(t){r.trace("Error updating record on table '"+e.tableName+"'",s.error),a.markEventAsHandled(t),o(s.error)}}catch(i){r.trace("Error updating record on table '"+e.tableName+"'",i),o(i)}},c.onerror=function(t){r.trace("Error checking if record exists on table '"+e.tableName+"'",c.error),a.markEventAsHandled(t),o(c.error)}})]})})},t.prototype.addColumn=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var i,o,a,s,u=this;return n.__generator(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n,i){u.trace("Adding column '"+r.serializeObjectForLog(t)+"' on table '"+e.tableName+"'");try{u.transaction.objectStore(e.tableName).createIndex(t.columnName,t.columnName),n()}catch(n){u.trace("Error adding column '"+r.serializeObjectForLog(t)+"' on table '"+e.tableName+"'",n),i(n)}})];case 1:return n.sent(),[4,this.getAllRecords(e)];case 2:i=n.sent(),o=0,a=i,n.label=3;case 3:return o<a.length?(s=a[o],s[t.columnName]=t.serializedDefault,[4,this.upsertRecord(e,s)]):[3,6];case 4:n.sent(),n.label=5;case 5:return o++,[3,3];case 6:return[2]}})})},t.prototype.existsColumn=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r=this;return n.__generator(this,function(n){return[2,new Promise(function(n,i){r.trace("Checking if column '"+t+"' exists on table '"+e+"'");try{n(r.transaction.objectStoreNames.contains(e)&&r.transaction.objectStore(e).indexNames.contains(t))}catch(n){r.trace("Error checking if column '"+t+"' exists on table '"+e+"'",n),i(n)}})]})})},t.prototype.findRecords=function(e,t){var r=this;return new Promise(function(o,s){r.trace("Searching for all records on table '"+e.tableName+"' that match the specified criteria.");var u=[],c=i.getIdentifierColumns(e).length>0,l=r.transaction.objectStore(e.tableName),f=l.openCursor();f.onsuccess=function(){var a=f.result;if(a){var s=a.value;c||(s=n.__assign(n.__assign({},s),{$KEY:a.primaryKey}));Object.keys(t).reduce(function(e,n){return e&&t.hasOwnProperty(n)&&s[i.formatObjectName(n)]===t[n]},!0)&&u.push(s),a.continue()}else r.trace("Search on table '"+e.tableName+"' found "+u.length+" record(s) matching the specified criteria."),o(u)},f.onerror=function(t){r.trace("Error searching for records on table '"+e.tableName+"'",f.error),a.markEventAsHandled(t),s(f.error)}})},t.prototype.getAllRecords=function(e){var t=this;return new Promise(function(n,r){t.trace("Getting all records from table '"+e.tableName+"'");var i=t.transaction.objectStore(e.tableName),o=i.getAll();o.onsuccess=function(){t.trace("Retrieved all the records from table '"+e.tableName+"'"),n(o.result)},o.onerror=function(n){t.trace("Error retrieving all the records from table '"+e.tableName+"'",o.error),a.markEventAsHandled(n),r(o.error)}})},t.wrapKeyIfNeeded=function(e,t){return i.getIdentifierColumns(t).length>0?e instanceof Array?e:[e]:e},t.unwrapKeyIfNeeded=function(e){return e.result instanceof Array?e.result[0]:e.result},t.lastTransactionId=0,t}(o.default);t.default=u}),define("OutSystems/ClientRuntime/modules/Database/IndexedDB/IndexedDBDatabase",["require","exports","tslib","../../../Exceptions","../../../Logger","../../Common/BrowserUtils","../Common/Database","./IndexedDBTransaction","./IndexedDBTransactionWithoutObjectStores","./IndexedDBUtils"],function(e,t,n,r,i,o,a,s,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.databaseImplementation=n,i.onNewDatabaseVersionDetected=r,i.setOnVersionChangeEvent(),i}return n.__extends(t,e),t.asSafeDbName=function(e){return e||""},t.executeTransactionPromiseWithRetry=function(e,t){return void 0===t&&(t=3),n.__awaiter(this,void 0,void 0,function(){var r,i,o,a,s;return n.__generator(this,function(n){switch(n.label){case 0:r=!0,i=0,n.label=1;case 1:if(!r)return[3,6];i++,n.label=2;case 2:return n.trys.push([2,4,,5]),[4,new Promise(e)];case 3:return o=n.sent(),r=!1,[3,5];case 4:if(a=n.sent(),s=a,!/the transaction is inactive or finished/i.test(s.message)||i>=t)throw a;return[3,5];case 5:return[3,1];case 6:return[2,o]}})})},t.open=function(e,n){var a=this;return e=this.asSafeDbName(e),new Promise(function(s,u){if(a.cache[e])s(a.cache[e]);else{if("undefined"==typeof window)return u(new r.Exceptions.SystemException("Database is only available in the browser/web view"));if(!("indexedDB"in window))return i.trace(t,"This browser doesn't support IndexedDB"),u(new r.Exceptions.SystemException("This browser doesn't support IndexedDB"));if(o.isSafari(navigator.userAgent)&&o.windowInsideIframe(window)){var c="Your app requires native access to a Local Storage database that is not available in your browser while using an iframe.\nPlease test your app in your mobile device or use Google Chrome";return alert(c),u(new r.Exceptions.SystemException(c))}i.trace(t,"Opening database '"+e+"' on IndexedDB");var l=window.indexedDB.open(e);l.onsuccess=function(){i.trace(t,"Database '"+e+"' opened successfully with version '"+l.result.version+"'");var r=l.result;a.cache[e]=new t(e,r,n),s(a.cache[e])},l.onerror=function(){i.trace(t,"Error opening database '"+e+"'"),u(new r.Exceptions.OpenDatabaseException("Could not open database '"+e+"'"))}}})},t.prototype.setOnVersionChangeEvent=function(){var e=this;this.databaseImplementation.onversionchange=function(){e.databaseImplementation.close(),e.onNewDatabaseVersionDetected&&e.onNewDatabaseVersionDetected()}},t.prototype.close=function(){return i.trace(this,"Closing database "+this.name+" with version '"+this.databaseImplementation.version+"'"),this.databaseImplementation.close(),delete t.cache[this.name],Promise.resolve()},t.prototype.testConnection=function(){return Promise.resolve()},t.prototype.executeQuery=function(e,t,n){return void 0===t&&(t=!0),this.executeReadTransaction(function(t){return t.executeQuery(e)},t,n)},t.prototype.executeTransaction=function(e,t,n){return void 0===t&&(t=!0),this.innerExecuteDMLTransaction(e,t,"readwrite",n)},t.prototype.executeReadTransaction=function(e,t,n){return void 0===t&&(t=!0),this.innerExecuteDMLTransaction(e,t,"readonly",n)},t.prototype.innerExecuteDMLTransaction=function(e,t,n,r){return 0===this.databaseImplementation.objectStoreNames.length?this.innerExecuteIDBTransactionWithoutObjectStores(e,t):this.innerExecuteIDBTransaction(e,t,n,r)},t.prototype.innerExecuteIDBTransaction=function(e,r,i,o){var a=this,u=function(t,u){return n.__awaiter(a,void 0,void 0,function(){var a,l,f,d,p,h,g,m=this;return n.__generator(this,function(y){switch(y.label){case 0:if(a=null,l=null,f=o?o.map(function(e){return e.tableName}):[],0===f.length)for(d=0;d<this.databaseImplementation.objectStoreNames.length;d++)f.push(this.databaseImplementation.objectStoreNames.item(d));p=this.databaseImplementation.transaction(f,i),h=new s.default(r,p,this.databaseImplementation),h.onComplete=function(){return n.__awaiter(m,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:return[4,c.loadBinaryDataContent(a)];case 1:return e.sent(),t(a),[2]}})})},h.onAbort=function(e){return u(l||e)},y.label=1;case 1:return y.trys.push([1,3,,4]),[4,e(h)];case 2:return a=y.sent(),[3,4];case 3:return g=y.sent(),l=g,null===p||void 0===p||p.abort(),[3,4];case 4:return[2]}})})};return t.executeTransactionPromiseWithRetry(u)},t.prototype.innerExecuteIDBTransactionWithoutObjectStores=function(e,t){return e(new u.default(t,this.databaseImplementation))},t.prototype.executeUpgradeTransaction=function(e,t){return void 0===t&&(t=!0),n.__awaiter(this,void 0,void 0,function(){var r=this;return n.__generator(this,function(n){return[2,new Promise(function(n,i){var o=null,a=null,u=r.databaseImplementation.version;r.databaseImplementation.close();var c=window.indexedDB.open(r.name,u+1);c.onsuccess=function(){return r.trace("Database '"+r.name+"' opened successfully with version '"+(u+1)+"'",t),r.databaseImplementation=c.result,r.setOnVersionChangeEvent(),n(o)},c.onerror=function(){return r.trace("Error opening '"+r.name+"' database with version '"+(u+1)+"'",t),i(a||c.error)},c.onupgradeneeded=function(){r.trace("Upgrading database '"+r.name+"' with version '"+(u+1)+"'",t),r.databaseImplementation=c.result;var n=new s.default(t,c.transaction,c.result);n.onAbort=function(e){return a=a||e},e(n).then(function(e){return o=e}).catch(function(e){a=e,c.transaction.abort()})}})]})})},t.prototype.trace=function(e,t){void 0===t&&(t=!0),t&&i.trace(this,e)},t.cache={},t}(a.default);t.default=l}),define("OutSystems/ClientRuntime/modules/Database/Metadata/MetadataTableInfo",["require","exports","../AutoNumber","../DBDataType","../TableInfoUtils"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={tableName:i.METADATA_TABLE_NAME,idIsAutoNumber:n.default.No,attributes:[{name:"Key",columnName:"KEY",type:r.default.TEXT,isPrimaryKey:!0},{name:"ModuleKey",columnName:"MODULEKEY",type:r.default.TEXT,isPrimaryKey:!0},{name:"UpgradeStatus",columnName:"UPGRADESTATUS",type:r.default.INTEGER},{name:"Name",columnName:"NAME",type:r.default.TEXT},{name:"TableName",columnName:"TABLENAME",type:r.default.TEXT},{name:"Hash",columnName:"HASH",type:r.default.TEXT},{name:"ExtraInfo",columnName:"EXTRAINFO",type:r.default.TEXT}]};t.default=o}),define("OutSystems/ClientRuntime/modules/Database/Metadata/MetadataBackupTableInfo",["require","exports","tslib","../TableInfoUtils","./MetadataTableInfo"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n.__assign(n.__assign({},i.default),{tableName:""+r.BACKUP_TABLE_PREFIX+r.METADATA_TABLE_NAME});t.default=o}),define("OutSystems/ClientRuntime/modules/Database/Metadata/MetadataTableInitializer",["require","exports","tslib","../../../Logger","./MetadataBackupTableInfo","./MetadataTableInfo"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={isNeeded:function(e){return n.__awaiter(void 0,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return[4,e.existsTable(o.default)];case 1:return[2,!t.sent()]}})})},run:function(e){return n.__awaiter(void 0,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return r.trace(this,"Running initializer for entity meta info table."),[4,e.createTable(o.default)];case 1:return t.sent(),[4,e.createTable(i.default)];case 2:return t.sent(),r.trace(this,"Initializer for entity meta info table ran successfully."),[2]}})})}};t.default=a}),define("OutSystems/ClientRuntime/modules/Database/Metadata/EntityUpgradeStatus",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n;!function(e){e[e.Unchanged=0]="Unchanged",e[e.Deleted=1]="Deleted",e[e.Recreated=2]="Recreated",e[e.New=3]="New"}(n||(n={})),t.default=n}),define("OutSystems/ClientRuntime/modules/Database/Common/ValueConstraintValidation",["require","exports","../../../Exceptions","../DBDataType","../TableInfoUtils"],function(e,t,n,r,i){"use strict";function o(e,t,n){for(var r=0,o=t.getAttributes();r<o.length;r++){var s=o[r];a(t[s.attrName],i.getMatchingColumn(e,s),n+" '"+e.tableName+"."+s.name+"'")}}function a(e,t,i){if(t.type===r.default.TEXT){if(!e)return;var o=e,a=o.length-t.length;if(a>0)throw new n.Exceptions.DataBaseException("","Unable to "+i+" because it exceeds the maximum allowed length by "+a+" characters.")}else if(t.type===r.default.DECIMAL){var o=e,a=o.trunc().abs().toString().length-(t.length-t.decimals);if(a>0)throw new n.Exceptions.DataBaseException("","Unable to "+i+" because it exceeds the maximum allowed length by "+a+" characters.")}}Object.defineProperty(t,"__esModule",{value:!0}),t.validateValueForCreateOrUpdate=t.validateRecordForCreateOrUpdate=void 0,t.validateRecordForCreateOrUpdate=o,t.validateValueForCreateOrUpdate=a}),define("OutSystems/ClientRuntime/modules/Database/Common/EntityModelUtils",["require","exports","tslib","../../../DataConversion","../../../DataTypes","../../../Exceptions","../../../Logger","../AutoNumber","../DatabaseTypeUtils","../DBDataType","../Metadata/EntityUpgradeStatus","../Metadata/MetadataBackupTableInfo","../Metadata/MetadataTableInfo","../TableInfoUtils","./ValueConstraintValidation"],function(e,t,n,r,i,o,a,s,u,c,l,f,d,p,h){"use strict";function g(e){a.trace("EntityModelUtils",e)}function m(e){return e[0]}function y(e,t){return n.__awaiter(this,void 0,void 0,function(){var r;return n.__generator(this,function(n){switch(n.label){case 0:return[4,e.findRecords(d.default,{MODULEKEY:t})];case 1:return r=n.sent(),[2,r]}})})}function v(e,t,r,i){var o;return n.__awaiter(this,void 0,void 0,function(){var a,s;return n.__generator(this,function(n){switch(n.label){case 0:return g("Checking the status of table "+t.tableName+" ("+t.name+")"),(s={},r&&(a=r.HASH,s=JSON.parse(null!==(o=r.EXTRAINFO)&&void 0!==o?o:"{}")),a)?[3,3]:(g("Table "+t.tableName+" ("+t.name+") does not exist and will be created"),[4,L(e,t,i)]);case 1:return n.sent(),[4,M(e,t)];case 2:return n.sent(),[3,4];case 3:if(a!==t.hash)return z(t,s)?(g("Table "+t.tableName+" ("+t.name+") exists and will be fully upgraded"),[2,F(e,t,s,i)]):(g("Table "+t.tableName+" ("+t.name+") exists and will be incrementally upgraded"),[2,V(e,t,s,i)]);g("Table "+t.tableName+" ("+t.name+") exists and is up to date"),n.label=4;case 4:return[2]}})})}function b(e,t,r){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(n){return[2,S(e,function(e){g("Recovering table "+e+" from backup");var n=t.filter(function(t){return t.tableName===e});return function(t){return T(t,e,1===n.length?n[0]:null,r)}},r,function(e){return e.UPGRADESTATUS!==l.default.Unchanged})]})})}function T(e,t,r,i){return n.__awaiter(this,void 0,void 0,function(){var r;return n.__generator(this,function(n){switch(n.label){case 0:return[4,I(e,t)];case 1:return n.sent(),[4,e.existsTable(R(t))];case 2:return r=n.sent(),r?[4,A(e,R(t),t,t,l.default.Unchanged)]:[3,4];case 3:n.sent(),n.label=4;case 4:return[4,K(e,t,!0)];case 5:return n.sent(),[2]}})})}function _(e,t,r){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(n){return[2,S(e,function(e){return g("Dropping inconsistent table "+e+" (same key, different physical table name)"),function(t){return E(t,e)}},r,function(e){var n=e.UPGRADESTATUS===l.default.Unchanged,r=t.some(function(t){return t.key===e.KEY}),i=!t.some(function(t){return t.tableName===e.TABLENAME}),o=0===t.length||r&&i;return n&&o})]})})}function E(e,t){return n.__awaiter(this,void 0,void 0,function(){var r,i;return n.__generator(this,function(n){switch(n.label){case 0:return[4,I(e,t)];case 1:return n.sent(),i=m,[4,e.findRecords(d.default,{TABLENAME:t})];case 2:return r=i.apply(void 0,[n.sent()]),r?[4,e.removeRecord(d.default,[r.KEY,r.MODULEKEY])]:[3,4];case 3:n.sent(),n.label=4;case 4:return[2]}})})}function w(e,t){return S(e,function(e){return g("Dropping backup table for "+e),function(t){return N(t,e)}},t,function(e){return e.UPGRADESTATUS!==l.default.Unchanged})}function D(e,t,r){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(n){return[2,S(e,function(e){return g("Backing up table "+e+" before deletion"),function(t){return x(t,e,l.default.Deleted)}},r,function(e){return e.UPGRADESTATUS===l.default.Unchanged&&!t.some(function(t){return t.tableName===e.TABLENAME})})]})})}function S(e,t,r,i){return n.__awaiter(this,void 0,void 0,function(){var o,a,s,u,c,l,f,c;return n.__generator(this,function(n){switch(n.label){case 0:return[4,e.findRecords(d.default,{MODULEKEY:r})];case 1:if(o=n.sent(),a=[],i)for(s=0,u=o;s<u.length;s++)c=u[s],i(c)&&a.push(c);else a=o;l=0,f=a,n.label=2;case 2:return l<f.length?(c=f[l],[4,t(c.TABLENAME)(e)]):[3,5];case 3:n.sent(),n.label=4;case 4:return l++,[3,2];case 5:return[2]}})})}function x(e,t,r){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(n){switch(n.label){case 0:return g("Backing up table '"+t+"'"),[4,K(e,t,!1)];case 1:return n.sent(),[4,I(e,R(t))];case 2:return n.sent(),[2,A(e,t,R(t),t,r)]}})})}function I(e,t){return e.deleteTableIfExists(t)}function N(e,t){return n.__awaiter(this,void 0,void 0,function(){var r,i,o,a;return n.__generator(this,function(n){switch(n.label){case 0:return[4,I(e,R(t))];case 1:return n.sent(),i=m,[4,e.findRecords(d.default,{TABLENAME:t})];case 2:return r=i.apply(void 0,[n.sent()]),r?r.UPGRADESTATUS!==l.default.Deleted?[3,4]:[4,e.removeRecord(d.default,[r.KEY,r.MODULEKEY])]:[3,6];case 3:return n.sent(),[3,6];case 4:return r.UPGRADESTATUS=l.default.Unchanged,[4,e.updateRecord(d.default,r)];case 5:n.sent(),n.label=6;case 6:return a=m,[4,e.findRecords(f.default,{TABLENAME:t})];case 7:return o=a.apply(void 0,[n.sent()]),o?[4,e.removeRecord(f.default,[o.KEY,o.MODULEKEY])]:[3,9];case 8:n.sent(),n.label=9;case 9:return[2]}})})}function A(e,t,r,i,o){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(n){switch(n.label){case 0:return g("Renaming table '"+t+"' to '"+r+"' and setting status to "+l.default[o]),[4,O(e,t,r)];case 1:return n.sent(),[2,C(e,i,o)]}})})}function O(e,t,n){return e.renameTable(t,n)}function C(e,t,r){return n.__awaiter(this,void 0,void 0,function(){var i,o;return n.__generator(this,function(n){switch(n.label){case 0:return o=m,[4,e.findRecords(d.default,{TABLENAME:t})];case 1:return i=o.apply(void 0,[n.sent()]),i.UPGRADESTATUS=r,[2,e.updateRecord(d.default,i)]}})})}function R(e){return""+p.BACKUP_TABLE_PREFIX+e}function L(e,t,r){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(i){return g("Creating table "+t.tableName+" ("+t.name+")"),[2,e.createTable(n.__assign(n.__assign({},t),{attributes:n.__spreadArray([],t.attributes.map(function(e){var t;return n.__assign(n.__assign({},e),{serializedDefault:r.serialize(null!==(t=e.default)&&void 0!==t?t:u.typeDefaultValue(e.type),e)})}))}))]})})}function M(e,t){return n.__awaiter(this,void 0,void 0,function(){var r;return n.__generator(this,function(n){switch(n.label){case 0:return r=J(t),r.UPGRADESTATUS=l.default.New,g("Creating metadata for table "+t.tableName+" ("+t.name+")"),[4,e.insertRecord(d.default,r)];case 1:return n.sent(),[2]}})})}function P(e,t){return n.__awaiter(this,void 0,void 0,function(){var r,i;return n.__generator(this,function(n){switch(n.label){case 0:return g("Updating metadata for table "+t.tableName+" ("+t.name+")"),[4,e.getRecord(d.default,[t.key,t.moduleKey])];case 1:return r=n.sent(),i=J(t),i.UPGRADESTATUS=r.UPGRADESTATUS,i.LASTIDENTIFIER=r.LASTIDENTIFIER,[4,e.updateRecord(d.default,i)];case 2:return n.sent(),[2]}})})}function F(e,t,r,i){return n.__awaiter(this,void 0,void 0,function(){var a,s,u,c,f,d,p;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,9,,10]),[4,e.getAllRecords(t)];case 1:return a=n.sent(),[4,x(e,t.tableName,l.default.Recreated)];case 2:return n.sent(),[4,L(e,t,i)];case 3:n.sent(),s=0,u=a,n.label=4;case 4:return s<u.length?(c=u[s],f=j(c,t,r,i),[4,e.insertRecord(t,f)]):[3,7];case 5:n.sent(),n.label=6;case 6:return s++,[3,4];case 7:return[4,P(e,t)];case 8:return n.sent(),[3,10];case 9:throw d=n.sent(),p="Unable to upgrade the definition of entity '"+t.name+"':\n"+o.getMessage(d),g(p),new o.Exceptions.DataBaseException("",p);case 10:return[2]}})})}function V(e,t,r,i){var o;return n.__awaiter(this,void 0,void 0,function(){var a,s,c,l,f;return n.__generator(this,function(d){switch(d.label){case 0:a=t.attributes.filter(function(e){return!Object.keys(r.attrs).some(function(t){return t===e.columnName})}),g("Upgrading table "+t.tableName+" ("+t.name+") with new attributes ("+function(){return JSON.stringify(a)}()+") and new hash ("+t.hash+")"),s=0,c=a,d.label=1;case 1:return s<c.length?(l=c[s],f=i.serialize(null!==(o=l.default)&&void 0!==o?o:u.typeDefaultValue(l.type),l),[4,e.addColumn(t,n.__assign(n.__assign({},l),{serializedDefault:f}))]):[3,4];case 2:d.sent(),d.label=3;case 3:return s++,[3,1];case 4:return[4,P(e,t)];case 5:return d.sent(),[2]}})})}function j(e,t,n,r){for(var i={},a=0,s=t.attributes;a<s.length;a++){var c=s[a];try{var l=c.columnName,f=e[l];i[l]=B(f,c,n,r)}catch(e){throw new o.Exceptions.DataBaseException("","Unable to upgrade attribute '"+c.name+"' data type to '"+u.typeDisplayName(c.type)+"':\n"+o.getMessage(e))}}return U(i,t,r),i}function U(e,t,n){for(var r=0,i=t.attributes;r<i.length;r++){var o=i[r],a=o.columnName;if(void 0===e[a]){var s=void 0===o.default?u.typeDefaultValue(o.type):o.default;e[a]=n.serialize(s,o)}}}function B(e,t,n,r){var i=n.attrs[t.columnName];return i?k(e,i,t,r):e}function k(e,t,n,i){if(i.isConversionNeeded(t,n)){var a=i.deserialize(e,t),s=u.convertToModelDataType(n.type),c=q(t,n);if(r.JSConversions.isConvertibleTo(a,s)){var l=r.JSConversions.convertTo(a,s);h.validateValueForCreateOrUpdate(l,n,c);return i.serialize(l,n)}throw new o.Exceptions.DataBaseException("","Unable to "+c+".")}return e}function q(e,t){var n=i.DataTypes[u.convertToModelDataType(e.type)],r=i.DataTypes[u.convertToModelDataType(t.type)];return"convert column '"+t.name+"' from type "+n+" to "+r}function z(e,t){return t.idIsAutoNumber!==e.idIsAutoNumber||H(e,t).some(function(e){return!e.entityAttr||(e.metadataAttr?G(e.entityAttr,e.metadataAttr):e.entityAttr.isPrimaryKey)})}function H(e,t){for(var n={},r=0,i=e.attributes;r<i.length;r++){var o=i[r],a=o.columnName;n[a]={},n[a].entityAttr=o}for(var s=0,u=Object.keys(t.attrs);s<u.length;s++){var c=u[s];n[c]=n[c]||{},n[c].metadataAttr=t.attrs[c]}return Object.keys(n).map(function(e){return n[e]})}function G(e,t){return W(e,t)||!t.isPrimaryKey!=!e.isPrimaryKey}function W(e,t){return e.type!==t.type||t.length!==e.length||t.decimals!==e.decimals||!!t.isEntityReference!=!!e.isEntityReference&&!e.isPrimaryKey}function K(e,t,r){return n.__awaiter(this,void 0,void 0,function(){var i,o,a,s,u,c,l,p;return n.__generator(this,function(n){switch(n.label){case 0:return i=r?f.default:d.default,o=r?d.default:f.default,s=m,[4,e.findRecords(o,{TABLENAME:t})];case 1:return a=s.apply(void 0,[n.sent()]),a?[4,e.removeRecord(o,[a.KEY,a.MODULEKEY])]:[3,3];case 2:n.sent(),n.label=3;case 3:return c=m,[4,e.findRecords(i,{TABLENAME:t})];case 4:return u=c.apply(void 0,[n.sent()]),u?[4,e.insertRecord(o,u)]:[3,6];case 5:n.sent(),n.label=6;case 6:return r?(p=m,[4,e.findRecords(i,{TABLENAME:t})]):[3,9];case 7:return l=p.apply(void 0,[n.sent()]),l?[4,e.removeRecord(i,[l.KEY,l.MODULEKEY])]:[3,9];case 8:n.sent(),n.label=9;case 9:return[2]}})})}function J(e){var t=Q(e),n=p.getIdentifierColumn(e),r=(null===n||void 0===n?void 0:n.type)===c.default.INTEGER?0:"0";return{KEY:e.key,MODULEKEY:e.moduleKey,UPGRADESTATUS:l.default.Unchanged,NAME:e.name,TABLENAME:e.tableName,HASH:e.hash,LASTIDENTIFIER:n&&e.idIsAutoNumber!==s.default.No?r:void 0,EXTRAINFO:JSON.stringify(t)}}function Q(e){var t={};return e.attributes.map(function(e){t[e.columnName]={type:e.type,isPrimaryKey:e.isPrimaryKey,length:e.length,decimals:e.decimals,isEntityReference:e.isEntityReference}}),{v:2,idIsAutoNumber:e.idIsAutoNumber,attrs:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.recreateTable=t.backupDeletedTables=t.dropBackupTables=t.dropInconsistentTables=t.recoverBackupTables=t.createOrUpgradeTable=t.loadStoredMetadata=t.getFirstItem=void 0,t.getFirstItem=m,t.loadStoredMetadata=y,t.createOrUpgradeTable=v,t.recoverBackupTables=b,t.dropInconsistentTables=_,t.dropBackupTables=w,t.backupDeletedTables=D,t.recreateTable=F}),define("OutSystems/ClientRuntime/modules/Database/Common/EntityModelInitializer",["require","exports","tslib","../../../Logger","../Metadata/EntityUpgradeStatus","../Metadata/MetadataTableInfo","./EntityModelUtils"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){this.entityInfos=e,this.serializer=t}return e.prototype.isNeeded=function(e){return n.__awaiter(this,void 0,void 0,function(){var t,r,s,u,c,l,f,d,p,h,g,m,y,v;return n.__generator(this,function(n){switch(n.label){case 0:return this.hasEntityInfos()?[4,e.existsTable(o.default)]:[3,3];case 1:return(t=n.sent())?(r=a.getFirstItem(this.entityInfos).moduleKey,[4,a.loadStoredMetadata(e,r)]):[2,!0];case 2:for(s=n.sent(),u=function(e){var t=a.getFirstItem(s.filter(function(t){return t.KEY===e.key}));if(!t||t.HASH!==e.hash||t.UPGRADESTATUS!==i.default.Unchanged||t.TABLENAME!==e.tableName)return{value:!0}},c=0,l=this.entityInfos;c<l.length;c++)if(f=l[c],"object"==typeof(d=u(f)))return[2,d.value];for(p=function(e){if(!h.entityInfos.some(function(t){return t.key===e.KEY}))return{value:!0}},h=this,g=0,m=s;g<m.length;g++)if(y=m[g],"object"==typeof(v=p(y)))return[2,v.value];n.label=3;case 3:return[2,!1]}})})},e.prototype.run=function(e){return n.__awaiter(this,void 0,void 0,function(){var t,r,i,o,s,u,c;return n.__generator(this,function(l){switch(l.label){case 0:return this.hasEntityInfos()?(t=a.getFirstItem(this.entityInfos).moduleKey,this.trace("Running initializer for entities of module '"+t+"'."),[4,a.recoverBackupTables(e,this.entityInfos,t)]):[2];case 1:return l.sent(),this.entityInfos.length>0?[4,a.dropInconsistentTables(e,this.entityInfos,t)]:[3,3];case 2:l.sent(),l.label=3;case 3:return[4,a.backupDeletedTables(e,this.entityInfos,t)];case 4:return l.sent(),[4,a.loadStoredMetadata(e,t)];case 5:r=l.sent(),i=function(t){var i,s;return n.__generator(this,function(n){switch(n.label){case 0:return i=t,s=a.getFirstItem(r.filter(function(e){return e.KEY===i.key})),[4,a.createOrUpgradeTable(e,i,s,o.serializer)];case 1:return n.sent(),[2]}})},o=this,s=0,u=this.entityInfos,l.label=6;case 6:return s<u.length?(c=u[s],[5,i(c)]):[3,9];case 7:l.sent(),l.label=8;case 8:return s++,[3,6];case 9:return this.trace("Initializer for entities of module '"+t+"' ran successfully."),[2]}})})},e.prototype.cleanup=function(e){return n.__awaiter(this,void 0,void 0,function(){var t;return n.__generator(this,function(n){switch(n.label){case 0:return this.hasEntityInfos()?(t=a.getFirstItem(this.entityInfos).moduleKey,this.trace("Running initializer cleanup for entities of module '"+t+"'."),[4,a.dropBackupTables(e,t)]):[2];case 1:return n.sent(),
this.trace("Initializer cleanup for entities of module '"+t+"' ran successfully."),[2]}})})},e.prototype.hasEntityInfos=function(){return this.entityInfos&&this.entityInfos.length>0},e.prototype.trace=function(e){r.trace(this,e)},e}();t.default=s}),define("OutSystems/ClientRuntime/modules/Database/Common/EntityService",["require","exports","tslib","../../../DataTypes","../../../Exceptions","../../../Logger","../Metadata/MetadataTableInfo","../Metadata/MetadataTableInitializer","../TableInfoUtils","./EntityModelInitializer","./ValueConstraintValidation"],function(e,t,n,r,i,o,a,s,u,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=new r.BasicTypeKeyedTypeFactory("Id","idOut"),d=new r.ComplexTypeKeyedTypeFactory("Record","recordOut"),p=function(){function e(e){this._serializer=e}return Object.defineProperty(e.prototype,"database",{get:function(){return this._database},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serializer",{get:function(){return this._serializer},enumerable:!1,configurable:!0}),e.prototype.setDatabase=function(e){o.trace(this,"Registering initializer for entity meta info table."),this._database=e,this._database.registerInitializer(s.default)},e.prototype.getDatabase=function(){var e=this;return this.databasePromise||(this.databasePromise=new Promise(function(t){e.releaseDatabaseForUse=function(){return t(e.database)}})),this.databasePromise},e.prototype.registerInitializer=function(e){if(e&&e.length>0){o.trace(this,"Registering initializer for entities of module '"+e[0].moduleKey+"'.");var t=new c.default(e,this.serializer);this.database.registerInitializer(t)}},e.prototype.setReady=function(){o.trace(this,"Releasing the database as ready for use."),this.databasePromise?this.releaseDatabaseForUse():this.databasePromise=Promise.resolve(this.database)},e.wrap=function(e,t){var n=t.getAttributes()[0],r=new t;return r[n.attrName]=e,r},e.unwrap=function(e){return e[e.getAttributes()[0].attrName]},e.getWrappedType=function(e){return e.getAttributes()[0].complexType},e.prototype.create=function(t,r){return n.__awaiter(this,void 0,void 0,function(){var o,s,c,d,p,h,g=this;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.getDatabase()];case 1:o=n.sent(),s=e.unwrap(r),l.validateRecordForCreateOrUpdate(t,s,"create"),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,o.executeTransaction(function(e){return g.innerCreate(e,t,s)},!0,[a.default,t])];case 3:return c=n.sent(),[3,5];case 4:throw d=n.sent(),new i.Exceptions.DataBaseException("",d.message,d.stack);case 5:return null===c?[2,null]:(p=u.getIdentifierAttribute(t,s),h=new(f.getType(p.dataType)),h.idOut=c,[2,h])}})})},e.prototype.innerCreate=function(e,t,r){return n.__awaiter(this,void 0,void 0,function(){var i,o;return n.__generator(this,function(n){switch(n.label){case 0:return[4,e.insertRecord(t,this.serializer.serialize(r,t))];case 1:return i=n.sent(),o=u.getIdentifierColumn(t),o?[2,this.serializer.deserialize(i,o)]:[2,null]}})})},e.prototype.update=function(t,r){return n.__awaiter(this,void 0,void 0,function(){var o,s,u,c=this;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.getDatabase()];case 1:o=n.sent(),s=e.unwrap(r),l.validateRecordForCreateOrUpdate(t,s,"update"),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,o.executeTransaction(function(e){return c.innerUpdate(e,t,s)},!0,[a.default,t])];case 3:return n.sent(),[3,5];case 4:throw u=n.sent(),new i.Exceptions.DataBaseException("",u.message,u.stack);case 5:return[2]}})})},e.prototype.innerUpdate=function(e,t,r){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(n){return[2,e.updateRecord(t,this.serializer.serialize(r,t))]})})},e.prototype.createOrUpdate=function(t,r){return n.__awaiter(this,void 0,void 0,function(){var o,s,c,d,p,h,g=this;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.getDatabase()];case 1:o=n.sent(),s=e.unwrap(r),l.validateRecordForCreateOrUpdate(t,s,"create or update"),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,o.executeTransaction(function(e){return g.innerCreateOrUpdate(e,t,s)},!0,[a.default,t])];case 3:return c=n.sent(),[3,5];case 4:throw d=n.sent(),new i.Exceptions.DataBaseException("",d.message,d.stack);case 5:return p=u.getIdentifierAttribute(t,s),h=new(f.getType(p.dataType)),h.idOut=c,[2,h]}})})},e.prototype.innerCreateOrUpdate=function(e,t,r){return n.__awaiter(this,void 0,void 0,function(){var i,o;return n.__generator(this,function(n){switch(n.label){case 0:return[4,e.upsertRecord(t,this.serializer.serialize(r,t))];case 1:return i=n.sent(),o=u.getIdentifierColumn(t),o?[2,this.serializer.deserialize(i,o)]:[2,null]}})})},e.prototype.createOrUpdateAll=function(t,r){return n.__awaiter(this,void 0,void 0,function(){var o,s,u,c,f,d,p=this;return n.__generator(this,function(h){switch(h.label){case 0:return[4,this.getDatabase()];case 1:for(o=h.sent(),s=[],u=0;u<r.length;u++)c=r.getItem(u),f=e.unwrap(c),l.validateRecordForCreateOrUpdate(t,f,"create or update"),s.push(f);h.label=2;case 2:return h.trys.push([2,4,,5]),[4,o.executeTransaction(function(e){return n.__awaiter(p,void 0,void 0,function(){return n.__generator(this,function(n){return[2,this.innerCreateOrUpdateAll(e,t,s)]})})},!0,[a.default,t])];case 3:return h.sent(),[3,5];case 4:throw d=h.sent(),new i.Exceptions.DataBaseException("",d.message,d.stack);case 5:return[2]}})})},e.prototype.innerCreateOrUpdateAll=function(e,t,r){return n.__awaiter(this,void 0,void 0,function(){var i=this;return n.__generator(this,function(n){return[2,e.upsertAllRecords(t,r.map(function(e){return i.serializer.serialize(e,t)}))]})})},e.prototype.get=function(t,r){return n.__awaiter(this,void 0,void 0,function(){var o,a,s,u,c=this;return n.__generator(this,function(l){switch(l.label){case 0:return[4,this.getDatabase()];case 1:o=l.sent(),a=null,l.label=2;case 2:return l.trys.push([2,4,,5]),[4,o.executeReadTransaction(function(e){return n.__awaiter(c,void 0,void 0,function(){return n.__generator(this,function(n){return[2,this.innerGet(e,t,r)]})})},!0,[t])];case 3:return a=l.sent(),[3,5];case 4:throw s=l.sent(),new i.Exceptions.DataBaseException("",s.message,s.stack);case 5:if(a)return u=new(d.getType(t.implicitAnonymousType)),u.recordOut=e.wrap(a,t.implicitAnonymousType),[2,u];throw new i.Exceptions.DataBaseException("",t.tableName+" with id "+r+" was not found")}})})},e.prototype.innerGet=function(t,r,i){return n.__awaiter(this,void 0,void 0,function(){var o,a;return n.__generator(this,function(n){switch(n.label){case 0:return o=u.getIdentifierColumn(r),[4,t.getRecord(r,this.serializer.serialize(i,o))];case 1:return a=n.sent(),a?[2,this.serializer.deserialize(a,r,e.getWrappedType(r.implicitAnonymousType))]:[2,null]}})})},e.prototype.delete=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r,o,s=this;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.getDatabase()];case 1:r=n.sent(),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,r.executeTransaction(function(n){return s.innerDelete(n,e,t)},!0,[a.default,e])];case 3:return n.sent(),[3,5];case 4:throw o=n.sent(),new i.Exceptions.DataBaseException("",o.message,o.stack);case 5:return[2]}})})},e.prototype.innerDelete=function(e,t,r){return n.__awaiter(this,void 0,void 0,function(){var i;return n.__generator(this,function(n){return i=u.getIdentifierColumn(t),[2,e.removeRecord(t,this.serializer.serialize(r,i))]})})},e.prototype.deleteAll=function(e){return n.__awaiter(this,void 0,void 0,function(){var t,r,o=this;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.getDatabase()];case 1:t=n.sent(),n.label=2;case 2:return n.trys.push([2,4,,5]),[4,t.executeTransaction(function(t){return o.innerDeleteAll(t,e)},!0,[a.default,e])];case 3:return n.sent(),[3,5];case 4:throw r=n.sent(),new i.Exceptions.DataBaseException("",r.message,r.stack);case 5:return[2]}})})},e.prototype.innerDeleteAll=function(e,t){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(n){return[2,e.removeAllRecords(t)]})})},e}();t.default=p}),define("OutSystems/ClientRuntime/modules/Database/Common/Serializer",["require","exports","../../../DataTypes","../../../Exceptions","../../../Logger","../AutoNumber","../DatabaseTypeUtils","../DBDataType","../TableInfoUtils"],function(e,t,n,r,i,o,a,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(){var e=this;this.serializers=new Map,this.deserializers=new Map,this.serializers.set(s.default.BINARY_DATA,function(t,n){return e.serializeBinaryData(t,n)}),this.serializers.set(s.default.BOOLEAN,function(t,n){return e.serializeBoolean(t,n)}),this.serializers.set(s.default.DATE,function(t,n){return e.serializeDate(t,n)}),this.serializers.set(s.default.DATE_TIME,function(t,n){return e.serializeDateTime(t,n)}),this.serializers.set(s.default.DECIMAL,function(t,n){return e.serializeDecimal(t,n)}),this.serializers.set(s.default.INTEGER,function(t,n){return e.serializeInteger(t,n)}),this.serializers.set(s.default.LONGINTEGER,function(t,n){return e.serializeLongInteger(t,n)}),this.serializers.set(s.default.TEXT,function(t,n){return e.serializeText(t,n)}),this.serializers.set(s.default.TIME,function(t,n){return e.serializeTime(t,n)}),this.deserializers.set(s.default.BINARY_DATA,function(t,n){return e.deserializeBinaryData(t,n)}),this.deserializers.set(s.default.BOOLEAN,function(t,n){return e.deserializeBoolean(t,n)}),this.deserializers.set(s.default.DATE,function(t,n){return e.deserializeDate(t,n)}),this.deserializers.set(s.default.DATE_TIME,function(t,n){return e.deserializeDateTime(t,n)}),this.deserializers.set(s.default.DECIMAL,function(t,n){return e.deserializeDecimal(t,n)}),this.deserializers.set(s.default.INTEGER,function(t,n){return e.deserializeInteger(t,n)}),this.deserializers.set(s.default.LONGINTEGER,function(t,n){return e.deserializeLongInteger(t,n)}),this.deserializers.set(s.default.TEXT,function(t,n){return e.deserializeText(t,n)}),this.deserializers.set(s.default.TIME,function(t,n){return e.deserializeTime(t,n)})}return Object.defineProperty(e,"NULLDATE_IN_DB",{get:function(){return"1900-01-01 00:00:00"},enumerable:!1,configurable:!0}),e.maskValue=function(e,t){var n=t.length,r=e.toString();return t.substr(0,Math.max(0,n-r.length))+r},e.maskFourZeroes=function(t){return e.maskValue(t,"0000")},e.maskTwoZeroes=function(t){return e.maskValue(t,"00")},e.prototype.serialize=function(e,t,r){return void 0===r&&(r=o.default.No),e instanceof n.GenericRecord?this.serializeRecord(e,t):this.serializeBasicType(e,t,r)},e.prototype.serializeRecord=function(e,t){var n=this;i.trace(this,"Starting to serialize a record");var r={};return e.getAttributes().forEach(function(i){var a=u.getMatchingColumn(t,i);r[a.columnName]=n.serializeBasicType(e[i.attrName],a,a.isPrimaryKey?t.idIsAutoNumber:o.default.No)}),i.trace(this,"Finished serializing a record"),r},e.prototype.serializeInteger=function(e,t){return null!==e&&void 0!==e?e:0},e.prototype.serializeText=function(e,t){return null!==e&&void 0!==e?e:""},e.prototype.serializeBoolean=function(e,t){return e?1:0},e.prototype.serializeLongInteger=function(e,t){return e?e.toString():"0"},e.prototype.serializeDecimal=function(e,t){return t.decimals?e.toFixed(t.decimals):e.toString()},e.prototype.serializeDate=function(t,n){var r=t.toNative();return e.maskFourZeroes(r.getFullYear())+"-"+e.maskTwoZeroes(r.getMonth()+1)+"-"+e.maskTwoZeroes(r.getDate())},e.prototype.serializeTime=function(t,n){var r=t.toNative();return e.maskTwoZeroes(r.getHours())+":"+e.maskTwoZeroes(r.getMinutes())+":"+e.maskTwoZeroes(r.getSeconds())},e.prototype.serializeDateTime=function(t,r){if(t.eq(n.DateTime.defaultValue))return"1900-01-01 00:00:00";var i=t.toNative();return e.maskFourZeroes(i.getUTCFullYear())+"-"+e.maskTwoZeroes(i.getUTCMonth()+1)+"-"+e.maskTwoZeroes(i.getUTCDate())+" "+e.maskTwoZeroes(i.getUTCHours())+":"+e.maskTwoZeroes(i.getUTCMinutes())+":"+e.maskTwoZeroes(i.getUTCSeconds())},e.prototype.innerSerializeBasicType=function(e,t,n){},e.prototype.serializeBasicType=function(e,t,n){if(i.trace(this,"Serializing a value of type "+t.type),!this.serializers.has(t.type))throw new r.Exceptions.DataBaseException("","Unable to serialize "+t.type+" to a database value.");var o=this.innerSerializeBasicType(e,t,n);return void 0!==o?o:this.serializers.get(t.type)(e,t)},e.prototype.deserialize=function(e,t,n){return n?this.deserializeRecord(e,t,n):this.deserializeBasicType(e,t)},e.prototype.deserializeRecord=function(e,t,n){var r=this,i=new n;return n.getAttributes().forEach(function(n){var o=u.getMatchingColumn(t,n);i[n.attrName]=r.deserializeBasicType(e[o.columnName],o)}),i},e.prototype.deserializeInteger=function(e,t){return e},e.prototype.deserializeLongInteger=function(e,t){return n.LongInteger.fromValue(e)},e.prototype.deserializeDecimal=function(e,t){return new n.Decimal(e)},e.prototype.deserializeText=function(e,t){return e},e.prototype.deserializeBoolean=function(e,t){return 0!==e},e.prototype.deserializeDateTime=function(e,t){if("1900-01-01 00:00:00"===e)return n.DateTime.defaultValue;var r=/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})$/,i=r.exec(e),o=new Date;return o.setUTCFullYear(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10)),o.setUTCHours(parseInt(i[4],10)||0,parseInt(i[5],10)||0,parseInt(i[6],10)||0,0),new n.DateTime(o)},e.prototype.deserializeDate=function(e,t){var r=/^(\d{4})-(\d{2})-(\d{2})$/,i=r.exec(e),o=new Date;return o.setFullYear(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10)),o.setHours(0,0,0,0),new n.DateTime(o)},e.prototype.deserializeTime=function(e,t){var r=/^(\d{2}):(\d{2}):(\d{2})$/,i=r.exec(e),o=new Date;return o.setFullYear(1900,0,1),o.setHours(parseInt(i[1],10)||0,parseInt(i[2],10)||0,parseInt(i[3],10)||0,0),new n.DateTime(o)},e.prototype.innerDeserializeBasicType=function(e,t){},e.prototype.deserializeBasicType=function(e,t){if(!this.deserializers.has(t.type))throw new r.Exceptions.DataBaseException("","Unable to deserialize "+t+" to a runtime value.");var n=this.innerDeserializeBasicType(e,t);return void 0!==n?n:null===e?a.typeDefaultValue(t.type):this.deserializers.get(t.type)(e,t)},e}();t.default=c}),define("OutSystems/ClientRuntime/modules/Database/IndexedDB/IndexedDBSerializer",["require","exports","tslib","../../../DataTypes","../Common/Serializer","../DBDataType"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.serializeBinaryData=function(e,t){return e.toArrayBuffer()||null},t.prototype.deserializeBinaryData=function(e,t){var n=e instanceof ArrayBuffer?new Blob([e]):e;return new r.BinaryData(n)},t.prototype.isConversionNeeded=function(e,t){return!!this.isConversionNeededBetweenDBDataTypes(e.type,t.type)||(!!e.isEntityReference!=!!t.isEntityReference||void 0!==e.length&&(void 0!==e.decimals?e.length-e.decimals>t.length-t.decimals:e.length>t.length))},t.prototype.isConversionNeededBetweenDBDataTypes=function(e,t){if(void 0===e)return!0;if(e===t)return!1;switch(e){case o.default.BOOLEAN:return t!==o.default.INTEGER;case o.default.LONGINTEGER:return t!==o.default.TEXT;default:return!0}},t}(i.default);t.default=a}),define("OutSystems/ClientRuntime/modules/Database/IndexedDB/Upgrader/IndexedDBMetadataV2Upgrader",["require","exports","tslib","../../../../Exceptions","../../../../Logger","../../Common/EntityModelUtils","../../DatabaseTypeUtils","../../Metadata/EntityUpgradeStatus","../../Metadata/MetadataTableInfo"],function(e,t,n,r,i,o,a,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){this.entityInfos=e,this.serializer=t,this.VERSION=2}return e.prototype.isNeeded=function(e){var t,r;return n.__awaiter(this,void 0,void 0,function(){var i,a,s,c,l,f,d,p,h;return n.__generator(this,function(n){switch(n.label){case 0:return this.hasEntityInfos()?[4,e.existsTable(u.default)]:[3,3];case 1:return(i=n.sent())?(a=o.getFirstItem(this.entityInfos).moduleKey,[4,o.loadStoredMetadata(e,a)]):[2,!1];case 2:for(s=n.sent(),c=function(e){var n=o.getFirstItem(s.filter(function(t){return t.KEY===e.key}));if(n&&(null!==(r=JSON.parse(null!==(t=n.EXTRAINFO)&&void 0!==t?t:"{}").v)&&void 0!==r?r:0)<l.VERSION)return{value:!0}},l=this,f=0,d=this.entityInfos;f<d.length;f++)if(p=d[f],"object"==typeof(h=c(p)))return[2,h.value];n.label=3;case 3:return[2,!1]}})})},e.prototype.run=function(e){var t;return n.__awaiter(this,void 0,void 0,function(){var r,i,a,u,c,l,f;return n.__generator(this,function(d){switch(d.label){case 0:return this.hasEntityInfos()?(r=o.getFirstItem(this.entityInfos).moduleKey,[4,o.loadStoredMetadata(e,r)]):[2];case 1:i=d.sent(),a=function(a){var c,l,f,d;return n.__generator(this,function(n){switch(n.label){case 0:return u.trace("Running initializer for entities of module '"+r+"'."),(c=o.getFirstItem(i.filter(function(e){return e.KEY===a.key})),l={},f=!0,d=!0,c&&(l=JSON.parse(null!==(t=c.EXTRAINFO)&&void 0!==t?t:"{}"),f=c.UPGRADESTATUS===s.default.Unchanged,d=c.UPGRADESTATUS===s.default.Recreated),f)?(u.trace("Table "+a.tableName+" ("+a.name+") exists and will be fully upgraded"),[4,o.recreateTable(e,a,l,u.serializer)]):[3,2];case 1:return n.sent(),[3,3];case 2:u.trace("Table "+a.tableName+" ("+a.name+") exists and will be skipped"),n.label=3;case 3:return(d||f)&&a.attributes.some(function(e){return e.isEntityReference})?(u.trace("Table "+a.tableName+" ("+a.name+") exists and have its defaults upgraded"),[4,u.upgradeDefaults(e,a,l,u.serializer)]):[3,5];case 4:return n.sent(),[3,6];case 5:u.trace("Table "+a.tableName+" ("+a.name+") wasn't upgraded"),n.label=6;case 6:return[2]}})},u=this,c=0,l=this.entityInfos,d.label=2;case 2:return c<l.length?(f=l[c],[5,a(f)]):[3,5];case 3:d.sent(),d.label=4;case 4:return c++,[3,2];case 5:return[2]}})})},e.prototype.cleanup=function(e){return n.__awaiter(this,void 0,void 0,function(){var t;return n.__generator(this,function(n){switch(n.label){case 0:return this.hasEntityInfos()?(t=o.getFirstItem(this.entityInfos).moduleKey,this.trace("Running initializer cleanup for entities of module '"+t+"'."),[4,o.dropBackupTables(e,t)]):[2];case 1:return n.sent(),this.trace("Initializer cleanup for entities of module '"+t+"' ran successfully."),[2]}})})},e.prototype.upgradeDefaults=function(e,t,i,o){return n.__awaiter(this,void 0,void 0,function(){var i,a,s,u,c,l;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,e.getAllRecords(t)];case 1:for(i=n.sent(),a=0,s=i;a<s.length;a++)u=s[a],this.fillWithDefaultsIfNull(u,t,o);return[4,e.upsertAllRecords(t,i)];case 2:return n.sent(),[3,4];case 3:throw c=n.sent(),l="Unable to upgrade the definition of entity '"+t.name+"':\n"+r.getMessage(c),this.trace(l),new r.Exceptions.DataBaseException("",l);case 4:return[2]}})})},e.prototype.fillWithDefaultsIfNull=function(e,t,n){for(var r=0,i=t.attributes;r<i.length;r++){var o=i[r],s=o.columnName;if(o.isEntityReference&&null===e[s]){var u=void 0===o.default?a.typeDefaultValue(o.type):o.default;e[s]=n.serialize(u,o)}}},e.prototype.hasEntityInfos=function(){return this.entityInfos&&this.entityInfos.length>0},e.prototype.trace=function(e){i.trace(this,e)},e}();t.default=c}),define("OutSystems/ClientRuntime/modules/Database/IndexedDB/IndexedDBEntityService",["require","exports","tslib","../../../DataTypes","../../../Exceptions","../../../Logger","../AutoNumber","../Common/EntityService","../Metadata/MetadataTableInfo","../TableInfoUtils","./IndexedDBSerializer","./Upgrader/IndexedDBMetadataV2Upgrader"],function(e,t,n,r,i,o,a,s,u,c,l,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=function(e){function t(){return e.call(this,new l.default)||this}return n.__extends(t,e),t.prototype.executeAggregate=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.getDatabase()];case 1:r=n.sent();try{return[2,r.executeQuery(e,!0,t)]}catch(e){throw new i.Exceptions.DataBaseException("",e.message,e.stack)}return[2]}})})},t.prototype.innerCreate=function(e,t,r){return n.__awaiter(this,void 0,void 0,function(){var i,o,s,l;return n.__generator(this,function(n){switch(n.label){case 0:return[4,e.getRecord(u.default,[t.key,t.moduleKey])];case 1:if(!(i=n.sent()))throw new Error("Unable to create a new record because "+t.name+" wasn't found in metadata table.");return o=c.getIdentifierAttribute(t,r),(s=r.clone(),t.idIsAutoNumber!==a.default.YesIfEmpty)?[3,3]:(l=this.getRecordIdentifier(i,t,r),s[o.attrName]=l,[4,e.updateRecord(u.default,i)]);case 2:n.sent(),n.label=3;case 3:return[4,e.insertRecord(t,this.serializer.serialize(s,t))];case 4:return n.sent(),o?[2,s[o.attrName]]:[2,null]}})})},t.prototype.getRecordIdentifier=function(e,t,n){var i=c.getIdentifierColumn(t),o=c.getIdentifierAttribute(t,n),s=c.getIdentifierValue(t,n);if(t.idIsAutoNumber===a.default.YesIfEmpty){var u=void 0!==e.LASTIDENTIFIER?this.serializer.deserialize(e.LASTIDENTIFIER,i):r.defaultForType(o.dataType);r.equals(s,r.defaultForType(o.dataType))?(u instanceof r.LongInteger?u=u.add(1):"number"==typeof u&&(u+=1),s=u,e.LASTIDENTIFIER=this.serializer.serialize(s,i)):r.compare(s,u)>0&&(e.LASTIDENTIFIER=this.serializer.serialize(s,i))}return s},t.prototype.innerCreateOrUpdate=function(e,t,r){return n.__awaiter(this,void 0,void 0,function(){var i,o;return n.__generator(this,function(n){switch(n.label){case 0:return c.hasNullIdentifier(t,r)?[4,this.innerCreate(e,t,r)]:[3,2];case 1:return[2,n.sent()];case 2:return[4,e.upsertRecord(t,this.serializer.serialize(r,t))];case 3:return i=n.sent(),o=c.getIdentifierColumn(t),o?[2,this.serializer.deserialize(i,o)]:[2,null]}})})},t.prototype.innerCreateOrUpdateAll=function(e,t,r){return n.__awaiter(this,void 0,void 0,function(){var i,o,s,l=this;return n.__generator(this,function(n){switch(n.label){case 0:return[4,e.getRecord(u.default,[t.key,t.moduleKey])];case 1:return i=n.sent(),s=r.map(function(e){o=null!==o&&void 0!==o?o:c.getIdentifierAttribute(t,e);var n=e.clone();if(t.idIsAutoNumber===a.default.YesIfEmpty){var r=l.getRecordIdentifier(i,t,e);n[o.attrName]=r}return l.serializer.serialize(n,t)}),void 0===i.LASTIDENTIFIER?[3,3]:[4,e.updateRecord(u.default,i)];case 2:n.sent(),n.label=3;case 3:return[2,e.upsertAllRecords(t,s)]}})})},t.prototype.registerInitializer=function(t){if(e.prototype.registerInitializer.call(this,t),t&&t.length>0){o.trace(this,"Registering V2 upgrader for entities of module '"+t[0].moduleKey+"'.");var n=new f.default(t,this.serializer);this.database.registerInitializer(n)}},t}(s.default);t.default=d}),define("OutSystems/ClientRuntime/modules/Database/WebSQL/WebSQLTransactionMode",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n;!function(e){e[e.Read=0]="Read",e[e.Write=1]="Write",e[e.Upgrade=2]="Upgrade"}(n||(n={})),t.default=n}),define("OutSystems/ClientRuntime/modules/Database/WebSQL/WebSQLTransaction",["require","exports","tslib","../../../Logger","../AutoNumber","../DBDataType","../TableInfoUtils","./WebSQLTransactionMode"],function(e,t,n,r,i,o,a,s){"use strict";function u(e){var t;return null!==(t=c.get(e))&&void 0!==t?t:""}Object.defineProperty(t,"__esModule",{value:!0});var c=new Map;c.set(o.default.BINARY_DATA,"BLOB"),c.set(o.default.BOOLEAN,"BOOLEAN"),c.set(o.default.DATE,"DATE"),c.set(o.default.DATE_TIME,"DATETIME"),c.set(o.default.DECIMAL,"REAL"),c.set(o.default.INTEGER,"INTEGER"),c.set(o.default.LONGINTEGER,"BIGINT"),c.set(o.default.TEXT,"TEXT"),c.set(o.default.TIME,"TIME");var l=1e12,f="The database is not running a version change transaction",d=function(){function e(t,n,i){this.allowTraces=t,this.transaction=n,this.mode=i,e.lastTransactionId=(e.lastTransactionId+1)%l,this._transactionId=e.lastTransactionId+1,this.allowTraces&&r.trace(this,"Starting transaction "+this.transactionId)}return Object.defineProperty(e.prototype,"transactionId",{get:function(){return this._transactionId},enumerable:!1,configurable:!0}),e.prototype.executeQuery=function(e){return e(this.transaction)},e.prototype.getColumnDeclaration=function(e,t){var n,r=""+u(t.type);if(t.isPrimaryKey){if(e.idIsAutoNumber===i.default.YesIfEmpty||e.idIsAutoNumber===i.default.Yes)return t.type===o.default.LONGINTEGER&&(r=""+u(o.default.INTEGER)),r+=" PRIMARY KEY AUTOINCREMENT NOT NULL",{declaration:'"'+t.columnName+'" '+r};n='"'+t.columnName+'"'}if(t.length&&(r+="("+t.length+(t.decimals?","+t.decimals:"")+")"),void 0!==t.serializedDefault){var a=t.serializedDefault;"string"==typeof a&&(a="'"+a.replace("'","''")+"'"),r+=" DEFAULT "+a}return{declaration:'"'+t.columnName+'" '+r,primaryKeyDeclaration:n}},e.prototype.createTable=function(e){var t=this;return new Promise(function(n,r){if(t.trace("Creating table '"+e.tableName+"'"),t.mode<s.default.Upgrade){var i=new Error(f);return t.trace("Error creating table '"+e.tableName+"': "+i.message,i),r(i)}var o=function(r,i){t.trace("Table '"+e.tableName+"' created with success"),n()},a=function(n,i){var o=new Error(i.message.toString());return t.trace("Error creating table '"+e.tableName+"'",o),r(o),!1},u=e.attributes.map(function(n){return t.getColumnDeclaration(e,n)}),c=u.filter(function(e){return!!e.primaryKeyDeclaration}).map(function(e){return e.primaryKeyDeclaration}),l=u.map(function(e){return e.declaration});c.length>0&&l.push("PRIMARY KEY ("+c.join(",")+")"),t.transaction.executeSql('CREATE TABLE "'+e.tableName+'" ('+l.join(",")+")",null,o,a)})},e.prototype.deleteTableIfExists=function(e){var t,n=this;return t="string"==typeof e?e:e.tableName,new Promise(function(e,r){if(n.trace("Deleting table '"+t+"'"),n.mode<s.default.Upgrade){var i=new Error(f);return n.trace("Error deleting table '"+t+"'",i),r(i)}var o=function(r,i){n.trace("Table '"+t+"' deleted with success"),e()},a=function(e,i){var o=new Error(i.message.toString());return n.trace("Error deleting table '"+t+"'",o),r(o),!1};n.transaction.executeSql('DROP TABLE IF EXISTS "'+t+'"',null,o,a)})},e.prototype.renameTable=function(e,t){var r=this;return new Promise(function(i,o){return n.__awaiter(r,void 0,void 0,function(){var r,a,u,c=this;return n.__generator(this,function(n){return this.trace("Renaming table '"+e+"'"),this.mode<s.default.Upgrade?(r=new Error(f),this.trace("Error renaming table '"+e+"'",r),[2,o(r)]):(a=function(n,r){c.trace("Table '"+e+"' renamed to '"+t+"' with success"),i()},u=function(t,n){var r=new Error(n.message.toString());return c.trace("Error renaming table '"+e+"'",r),o(r),!1},this.transaction.executeSql('ALTER TABLE "'+e+'" RENAME TO "'+t+'"',null,a,u),[2])})})})},e.prototype.existsTable=function(e){var t,n=this;return t="string"==typeof e?e:e.tableName,new Promise(function(e,r){n.trace("Checking if table '"+t+"' exists");var i=function(r,i){n.trace("Table '"+t+"' checked with success"),e(i.rows.length>0)},o=function(e,i){var o=new Error(i.message.toString());return n.trace("Error checking if table '"+t+"' exists",o),r(o),!1};n.transaction.executeSql("SELECT * FROM sqlite_master WHERE type = 'table' AND UPPER(name) = UPPER(\""+t+'")',null,i,o)})},e.prototype.addColumn=function(e,t){var i=this;return new Promise(function(o,a){return n.__awaiter(i,void 0,void 0,function(){var i,u,c,l,d,p=this;return n.__generator(this,function(n){return i=r.serializeObjectForLog(t),this.trace("Adding column '"+i+"' on table '"+e.tableName+"'"),this.mode<s.default.Upgrade?(u=new Error(f),this.trace("Error adding column '"+i+"'",u),[2,a(u)]):(c=function(e,t){p.trace("Column '"+i+"' added with success"),o()},l=function(e,t){var n=new Error(t.message.toString());return p.trace("Error adding column '"+i+"'",n),a(n),!1},d=function(n,r){n.executeSql('UPDATE "'+e.tableName+'" SET "'+t.columnName+'" = ?',[t.serializedDefault],c,l)},this.transaction.executeSql('ALTER TABLE "'+e.tableName+'" ADD '+this.getColumnDeclaration(e,t).declaration,null,d,l),[2])})})})},e.prototype.existsColumn=function(e,t){var n=this;return new Promise(function(r){n.trace("Checking if column '"+t+"' exists on table '"+e+"'");var i=function(){n.trace("Column '"+t+"' exists on table '"+e+"'"),r(!0)},o=function(){return n.trace("Column '"+t+"' does not exist on table '"+e+"'"),r(!1),!1};n.transaction.executeSql('SELECT "'+e+'"."'+t+'" FROM "'+e+'" LIMIT 0',null,i,o)})},e.prototype.getRecord=function(t,r){var i=this;return new Promise(function(o,a){i.trace("Getting record with keys '"+r+"' from table '"+t.tableName+"'");var s=e.wrapKeyIfNeeded(r),u=t.attributes.map(function(e){return'"'+e.columnName+'"'}).join(", "),c='"'+t.tableName+'"',l=t.attributes.filter(function(e){return e.isPrimaryKey}),f=n.__spreadArray([],s),d=l.map(function(e){return'"'+e.columnName+'" = ?'}).join(" and "),p=function(n,a){i.trace("Retrieved record with keys '"+r+"' from table '"+t.tableName+"' successfully");var s=e.convertSQLResultSetToDatabaseRecord(t,a);o(s.length>0?s[0]:null)},h=function(e,n){var o=new Error(n.message.toString());return i.trace("Error retrieving record with keys '"+r+"' from table '"+t.tableName+"'",o),a(o),!1};i.transaction.executeSql("SELECT "+u+" FROM "+c+" WHERE "+d,f,p,h)})},e.prototype.insertRecord=function(t,n){var r=this;return new Promise(function(o,a){if(r.trace("Inserting record on table '"+t.tableName+"'"),r.mode<s.default.Write){var u=new Error("The transaction is read-only");return r.trace("Error inserting record on table '"+t.tableName+"'",u),a(u)}var c=t.attributes.filter(function(e){return e.isPrimaryKey}),l=t.attributes.map(function(e){return'"'+e.columnName+'"'}).join(", "),f=e.concatenateMultipleTimes("?",t.attributes.length,", "),d='"'+t.tableName+'"',p=t.attributes.map(function(e){return void 0===n[e.columnName]?null:n[e.columnName]}),h=function(e,a){var s,u;r.trace("Inserted record on table '"+t.tableName+"' successfully");var l=null;l=t.idIsAutoNumber===i.default.No||t.idIsAutoNumber===i.default.YesIfEmpty&&null!==n[null===(s=c[0])||void 0===s?void 0:s.columnName]?n[null===(u=c[0])||void 0===u?void 0:u.columnName]:a.insertId,o(l)},g=function(e,n){var i=new Error(n.message.toString());return r.trace("Error inserting record on table '"+t.tableName+"'",i),a(i),!1};r.transaction.executeSql("INSERT INTO "+d+" ("+l+") VALUES ("+f+")",p,h,g)})},e.prototype.updateRecord=function(e,t){var n=this;return new Promise(function(r,i){if(n.trace("Updating record on table '"+e.tableName+"'"),n.mode<s.default.Write){var o=new Error("The transaction is read-only");return n.trace("Error updating record on table '"+e.tableName+"'",o),i(o)}var a=e.attributes.filter(function(e){return!e.isPrimaryKey}),u=e.attributes.filter(function(e){return e.isPrimaryKey}),c=a.map(function(e){return'"'+e.columnName+'" = ?'}).join(", "),l=u.map(function(e){return'"'+e.columnName+'" = ?'}).join(" and "),f='"'+e.tableName+'"',d=[];a.forEach(function(e){return d.push(t[e.columnName])}),u.forEach(function(e){return d.push(t[e.columnName])});var p=function(t,i){0===i.rowsAffected?n.trace("Record to update does not exist on table '"+e.tableName+"'"):n.trace("Updated record on table '"+e.tableName+"' successfully"),r()},h=function(t,r){var o=new Error(r.message.toString());return n.trace("Error updating record on table '"+e.tableName+"'",o),i(o),!1};n.transaction.executeSql("UPDATE "+f+" SET "+c+" WHERE "+l,d,p,h)})},e.prototype.upsertRecord=function(t,n){var r=this;return new Promise(function(o,a){if(r.trace("Adding/updating record on table '"+t.tableName+"'"),r.mode<s.default.Write){var u=new Error("The transaction is read-only");return r.trace("Error adding/updating record on table '"+t.tableName+"'",u),a(u)}var c=t.attributes.filter(function(e){return e.isPrimaryKey}),l=t.attributes.map(function(e){return'"'+e.columnName+'"'}).join(", "),f=e.concatenateMultipleTimes("?",t.attributes.length,", "),d='"'+t.tableName+'"',p=t.attributes.map(function(e){return n[e.columnName]}),h=function(e,a){var s,u
;r.trace("Added/updated record on table '"+t.tableName+"' successfully");var l=null;l=t.idIsAutoNumber===i.default.No||t.idIsAutoNumber===i.default.YesIfEmpty&&null!==n[null===(s=c[0])||void 0===s?void 0:s.columnName]?n[null===(u=c[0])||void 0===u?void 0:u.columnName]:a.insertId,o(l)},g=function(e,n){var i=new Error(n.message.toString());return r.trace("Error adding/updating record on table '"+t.tableName+"'",i),a(i),!1};r.transaction.executeSql("INSERT OR REPLACE INTO "+d+" ("+l+") VALUES ("+f+")",p,h,g)})},e.prototype.upsertAllRecords=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r,i,a;return n.__generator(this,function(n){switch(n.label){case 0:if(this.trace("Adding/updating "+(null===t||void 0===t?void 0:t.length)+" record(s) on table '"+e.tableName+"'"),this.mode<s.default.Write)throw r=new Error("The transaction is read-only"),this.trace("Error adding/updating records on table '"+e.tableName+"'",r),r;n.label=1;case 1:return n.trys.push([1,6,,7]),i=e.attributes.some(function(e){return e.type===o.default.BINARY_DATA}),i?[4,this.innerUpsertAllSingle(e,t)]:[3,3];case 2:return n.sent(),[3,5];case 3:return[4,this.innerUpsertAllBulk(e,t)];case 4:n.sent(),n.label=5;case 5:return this.trace("Added/updated "+(null===t||void 0===t?void 0:t.length)+" record(s) on table '"+e.tableName+"' successfully"),[3,7];case 6:throw a=n.sent(),this.trace("Error adding/updating "+(null===t||void 0===t?void 0:t.length)+" record(s) on table '"+e.tableName+"'",a),a;case 7:return[2]}})})},e.prototype.innerUpsertAllSingle=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r,i,o;return n.__generator(this,function(n){switch(n.label){case 0:this.trace("Adding/updating "+(null===t||void 0===t?void 0:t.length)+" record(s) on table '"+e.tableName+"' one by one"),r=0,i=t,n.label=1;case 1:return r<i.length?(o=i[r],[4,this.upsertRecord(e,o)]):[3,4];case 2:n.sent(),n.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.innerUpsertAllBulk=function(t,r){return n.__awaiter(this,void 0,void 0,function(){var i,o,a,s,u,c,l,f,d,p;return n.__generator(this,function(n){switch(n.label){case 0:if(0===(i=Math.floor(e.MaxQueryParameters/t.attributes.length)))return[2,this.innerUpsertAllSingle(t,r)];for(o=[],a=Math.ceil(r.length/i),this.trace("Adding/updating "+(null===r||void 0===r?void 0:r.length)+" record(s) on table '"+t.tableName+"' in "+a+" chunk(s) of "+i+" record(s) each"),s=function(e){for(var n=[],a=0;a<i;){if("break"===function(){var o=e*i+a;if(o===r.length)return"break";var s=r[o];t.attributes.forEach(function(e){return n.push(s[e.columnName])}),a++}())break}var s=u.createUpsertBulkQuery(t,a);o.push({query:s,argList:n})},u=this,c=0;c<a;c++)s(c);l=0,f=0,d=o,n.label=1;case 1:return f<d.length?(p=d[f],this.trace("Adding/updating chunk "+ ++l+" of "+a+" on table '"+t.tableName+"'"),[4,this.wrapExecuteSqlOnPromise(p,t)]):[3,4];case 2:n.sent(),n.label=3;case 3:return f++,[3,1];case 4:return[2]}})})},e.prototype.wrapExecuteSqlOnPromise=function(e,t){var n=this;return new Promise(function(r,i){var o=function(e,i){n.trace("Added/Updated bulk of records on table '"+t.tableName+"' successfully"),r()},a=function(e,r){var o=new Error(r.message.toString());return n.trace("Error adding/updating bulk of records on table '"+t.tableName+"'",o),i(o),!1};n.transaction.executeSql(e.query,e.argList,o,a)})},e.prototype.createUpsertBulkQuery=function(t,n){var r=t.attributes.map(function(e){return'"'+e.columnName+'"'}).join(", "),i='"'+t.tableName+'"',o="("+e.concatenateMultipleTimes("?",t.attributes.length,", ")+")";return"INSERT OR REPLACE INTO "+i+" ("+r+") VALUES "+e.concatenateMultipleTimes(o,n,", ")},e.prototype.removeRecord=function(t,r){var i=this;return new Promise(function(o,a){if(i.trace("Deleting record with key '"+r+"' from table '"+t.tableName+"'"),i.mode<s.default.Write){var u=new Error("The transaction is read-only");return i.trace("Error deleting record from table '"+t.tableName+"'",u),a(u)}var c=e.wrapKeyIfNeeded(r),l='"'+t.tableName+'"',f=t.attributes.filter(function(e){return e.isPrimaryKey}),d=n.__spreadArray([],c),p=f.map(function(e){return'"'+e.columnName+'" = ?'}).join(" AND "),h=function(e,n){i.trace("Deleted record with key '"+r+"' from table '"+t.tableName+"' successfully"),o()},g=function(e,n){var o=new Error(n.message.toString());return i.trace("Error deleting record with key '"+r+"' from table '"+t.tableName+"'",o),a(o),!1};i.transaction.executeSql("DELETE FROM "+l+" WHERE "+(""===p?"ROWID = ?":p),d,h,g)})},e.prototype.removeAllRecords=function(e){var t=this;return new Promise(function(n,r){if(t.trace("Deleting all records from table '"+e.tableName+"'"),t.mode<s.default.Write){var i=new Error("The transaction is read-only");return t.trace("Error deleting all records from table '"+e.tableName+"'",i),r(i)}var o='"'+e.tableName+'"',a=function(r,i){t.trace("Deleted all records from table '"+e.tableName+"' successfully"),n()},u=function(n,i){var o=new Error(i.message.toString());return t.trace("Error deleting all records from table '"+e.tableName+"'",o),r(o),!1};t.transaction.executeSql("DELETE FROM "+o,null,a,u)})},e.prototype.findRecords=function(t,n){var r=this;return new Promise(function(i,o){r.trace("Searching for all records on table '"+t.tableName+"' that match the specified criteria");var s=a.getIdentifierColumns(t).length>0,u=(s?"":'"rowid" AS "ROWID", ')+t.attributes.map(function(e){return'"'+e.columnName+'"'}).join(", "),c='"'+t.tableName+'"',l="",f=[];for(var d in n)if(n.hasOwnProperty(d)){var p=l.length>0?" AND ":"";l+=p+'"'+a.formatObjectName(d)+'" = ?',f.push(n[d])}var h=function(n,o){r.trace("Search on table '"+t.tableName+"' found "+o.rows.length+" record(s) matching the specified criteria");var a=e.convertSQLResultSetToDatabaseRecord(t,o);i(a)},g=function(e,n){var i=new Error(n.message.toString());return r.trace("Error searching for records on table '"+t.tableName+"'\r\n"+i,i),o(i),!1};r.transaction.executeSql("SELECT "+u+" FROM "+c+" WHERE "+l,f,h,g)})},e.prototype.getAllRecords=function(t){var n=this;return new Promise(function(r,i){n.trace("Getting all records on table '"+t.tableName+"'");var o=a.getIdentifierColumns(t).length>0,s=(o?"":'"rowid" AS "ROWID", ')+t.attributes.map(function(e){return'"'+e.columnName+'"'}).join(", "),u='"'+t.tableName+'"',c=function(i,o){n.trace("Retrieved all records from table '"+t.tableName+"' successfully");var a=e.convertSQLResultSetToDatabaseRecord(t,o);r(a)},l=function(e,r){var o=new Error(r.message.toString());return n.trace("Error retrieving all records from table '"+t.tableName+"'",o),i(o),!1};n.transaction.executeSql("SELECT "+s+" FROM "+u,null,c,l)})},e.prototype.trace=function(e,t){this.allowTraces&&r.trace(this,e+" on transaction "+this.transactionId+(t?": "+t.message:""))},e.wrapKeyIfNeeded=function(e){return e instanceof Array?e:[e]},e.convertSQLResultSetToDatabaseRecord=function(e,t){var n=a.getIdentifierColumns(e).length>0,r=[];if(t.rows.length>0)for(var i=0;i<t.rows.length;i++)!function(i){var o=t.rows.item(i),a={};n||(a.$KEY=o.ROWID),e.attributes.map(function(e){a[e.columnName]=o[e.columnName]}),r.push(a)}(i);return r},e.concatenateMultipleTimes=function(e,t,n){return Array.apply(null,new Array(t)).map(function(){return e}).join(""+n)},e.MaxQueryParameters=500,e.lastTransactionId=0,e}();t.default=d}),define("OutSystems/ClientRuntime/modules/Database/WebSQL/WebSQLDatabase",["require","exports","tslib","../../../Exceptions","../../../Logger","../../../NativeHelper","../Common/Database","./WebSQLTransaction","./WebSQLTransactionMode"],function(e,t,n,r,i,o,a,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.databaseImplementation=n,r}return n.__extends(t,e),t.open=function(e){return n.__awaiter(this,void 0,void 0,function(){var r,i;return n.__generator(this,function(n){switch(n.label){case 0:return this.cache[e]?[3,2]:(r=this.cache,i=e,[4,t.innerOpen(e)]);case 1:r[i]=n.sent(),n.label=2;case 2:return[2,this.cache[e]]}})})},t.innerOpen=function(e){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(n){if("undefined"==typeof window)throw new r.Exceptions.SystemException("Database is only available in the browser/web view");return o.isRunningOnNative()?[2,t.openPluginDatabase(e)]:t.isWebSQLSupported()?[2,t.openWebSQLDatabase(e)]:(t.throwDatabaseRequiredError(),[2])})})},t.openPluginDatabase=function(e){return n.__awaiter(this,void 0,void 0,function(){var a;return n.__generator(this,function(n){switch(n.label){case 0:return[4,o.ensureNativeReady()];case 1:if(n.sent(),a=window,a.sqlitePlugin)return i.trace(t,"Opening database '"+e+"'"),[2,new Promise(function(n,o){try{a.sqlitePlugin.openDatabase({name:e,location:"default"},function(a){a?(i.trace(t,"Database '"+e+"' opened successfully"),n(new t(e,a))):(i.trace(t,"Error opening database '"+e+"'"),o(new r.Exceptions.OpenDatabaseException("Could not open database '"+e+"'")))},function(n){i.trace(t,"Error opening database '"+e+"' "+n.message),o(new r.Exceptions.OpenDatabaseException("Could not open database '"+e+"': "+n.message.toString()))})}catch(t){o(new r.Exceptions.OpenDatabaseException("Could not open database '"+e+"': "+t.message.toString()))}})];throw new r.Exceptions.OpenDatabaseException("No database driver available")}})})},t.openWebSQLDatabase=function(e){var n,o=window;try{i.trace(t,"Opening database '"+e+"'"),n=o.openDatabase(e,"1.0",e,5242880)}catch(t){throw new r.Exceptions.OpenDatabaseException("Could not open database '"+e+"': "+t.message.toString())}if(n)return i.trace(t,"Database '"+e+"' opened successfully"),new t(e,n);throw i.trace(t,"Error opening database '"+e+"'"),new r.Exceptions.OpenDatabaseException("Could not open database '"+e+"'")},t.isWebSQLSupported=function(){return!!window.openDatabase},t.throwDatabaseRequiredError=function(){var e=window,t=!!e.chrome,n="Your app requires native access to a Local Storage database that is not available in your browser.\n\nPlease test your app in your mobile device"+(t?"":", or use Google Chrome web browser")+".";throw alert(n),new r.Exceptions.SystemException(n)},t.prototype.testConnection=function(){return n.__awaiter(this,void 0,void 0,function(){var e,t,r=this;return n.__generator(this,function(o){switch(o.label){case 0:return e=5,t=0,this.trace("Starting to test on database connections. Performing #"+e+" test queries."),[4,Promise.all(Array.apply(null,new Array(e)).map(function(){return new Promise(function(e){return n.__awaiter(r,void 0,void 0,function(){var r;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),[4,this.executeTransaction(function(e){return e.executeQuery(function(e){return new Promise(function(t,n){e.executeSql("SELECT 1",null,function(){return t()},function(e,t){return n(new Error(t.message.toString())),!1})})})})];case 1:return n.sent(),[3,4];case 2:return r=n.sent(),t++,i.error("WebSQLDatabase","Failed to execute canary query (probably due to zombie transaction)",r),[3,4];case 3:return e(),[7];case 4:return[2]}})})})}))];case 1:return o.sent(),this.trace("Finished tests on database connections. #"+(e-t)+" out of #"+e+" successfull queries."),[2]}})})},t.prototype.close=function(){return this.databaseImplementation=null,delete t.cache[this.name],Promise.resolve()},t.prototype.executeQuery=function(e,t){return void 0===t&&(t=!0),this.executeReadTransaction(function(t){return t.executeQuery(e)},t)},t.prototype.executeTransaction=function(e,t,n){return void 0===t&&(t=!0),this.innerExecuteTransaction(e,u.default.Write,t,n)},t.prototype.executeReadTransaction=function(e,t,n){return void 0===t&&(t=!0),this.innerExecuteTransaction(e,u.default.Read,t,n)},t.prototype.executeUpgradeTransaction=function(e,t){return void 0===t&&(t=!0),this.innerExecuteTransaction(e,u.default.Upgrade,t)},t.prototype.innerExecuteTransaction=function(e,t,r,i){var o=this;return void 0===r&&(r=!0),new Promise(function(i,a){var c,l,f;o.innerExecuteTransactionInMode(t===u.default.Read,function(i){return n.__awaiter(o,void 0,void 0,function(){var o;return n.__generator(this,function(n){switch(n.label){case 0:c=new s.default(r,i,t),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e(c)];case 2:return l=n.sent(),[3,4];case 3:return o=n.sent(),f=o,i.executeSql("ABORT_TRANSACTION",null,function(){},function(){return!0}),[3,4];case 4:return[2]}})})},function(e){var t=null!==f&&void 0!==f?f:new Error(e.message.toString());o.trace("Aborting transaction "+(null===c||void 0===c?void 0:c.transactionId)+": "+t,r),a(t)},function(){o.trace("Committing transaction "+(null===c||void 0===c?void 0:c.transactionId),r),i(l)})})},t.prototype.innerExecuteTransactionInMode=function(e,t,n,r){e?this.databaseImplementation.readTransaction(t,n,r):this.databaseImplementation.transaction(t,n,r)},t.prototype.trace=function(e,t){void 0===t&&(t=!0),t&&i.trace(this,e)},t.cache={},t}(a.default);t.default=c}),define("OutSystems/ClientRuntime/modules/Database/WebSQL/Upgrader/V0/MetadataTableInfo",["require","exports","../../../AutoNumber","../../../DBDataType","../../../TableInfoUtils"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={tableName:i.METADATA_TABLE_NAME,idIsAutoNumber:n.default.No,attributes:[{name:"SS_Key",columnName:"SS_Key",type:r.default.TEXT},{name:"Module_SS_Key",columnName:"Module_SS_Key",type:r.default.TEXT},{name:"Name",columnName:"Name",type:r.default.TEXT},{name:"Physical_Table_name",columnName:"Physical_Table_name",type:r.default.TEXT},{name:"Hash",columnName:"Hash",type:r.default.TEXT},{name:"Extra_Info",columnName:"Extra_Info",type:r.default.TEXT},{name:"Upgrade_Status",columnName:"Upgrade_Status",type:r.default.INTEGER}]};t.default=o}),define("OutSystems/ClientRuntime/modules/Database/WebSQL/Upgrader/V0/MetadataBackupTableInfo",["require","exports","tslib","../../../TableInfoUtils","./MetadataTableInfo"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n.__assign(n.__assign({},i.default),{tableName:""+r.BACKUP_TABLE_PREFIX+r.METADATA_TABLE_NAME});t.default=o}),define("OutSystems/ClientRuntime/modules/Database/WebSQL/Upgrader/WebSQLMetadataConverter",["require","exports"],function(e,t){"use strict";function n(e){var t=JSON.parse(e.Extra_Info),n={v:2,idIsAutoNumber:t.idIsAutoNumber,attrs:Object.keys(t.attrs).reduce(function(e,n){return e[n.toUpperCase()]=t.attrs[n],e},{})};return{KEY:e.SS_Key,MODULEKEY:e.Module_SS_Key,UPGRADESTATUS:e.Upgrade_Status,NAME:e.Name,TABLENAME:e.Physical_Table_name,HASH:e.Hash,EXTRAINFO:JSON.stringify(n)}}function r(e){var t=JSON.parse(e.EXTRAINFO),n={v:0,idIsAutoNumber:t.idIsAutoNumber,attrs:Object.keys(t.attrs).reduce(function(e,n){return e[n.toLowerCase()]=t.attrs[n],e},{})};return{SS_Key:e.KEY,Module_SS_Key:e.MODULEKEY,Name:e.NAME,Physical_Table_name:e.TABLENAME,Hash:e.HASH,Extra_Info:JSON.stringify(n),Upgrade_Status:e.UPGRADESTATUS}}Object.defineProperty(t,"__esModule",{value:!0}),t.convertV2ToV0=t.convertV0ToV2=void 0,t.convertV0ToV2=n,t.convertV2ToV0=r}),define("OutSystems/ClientRuntime/modules/Database/WebSQL/Upgrader/WebSQLMetadataV2Upgrader",["require","exports","tslib","../../Metadata/MetadataBackupTableInfo","../../Metadata/MetadataTableInfo","./V0/MetadataBackupTableInfo","./V0/MetadataTableInfo","./WebSQLMetadataConverter"],function(e,t,n,r,i,o,a,s){"use strict";function u(e,t,r){return n.__awaiter(this,void 0,void 0,function(){var i,o;return n.__generator(this,function(n){switch(n.label){case 0:return[4,e.getAllRecords(t)];case 1:return i=n.sent(),o=i.map(function(e){return s.convertV0ToV2(e)}),[4,e.deleteTableIfExists(t)];case 2:return n.sent(),[4,e.createTable(r)];case 3:return n.sent(),[4,e.upsertAllRecords(r,o)];case 4:return n.sent(),[2]}})})}function c(e,t,n){return new Promise(function(r){e.executeSql('SELECT "'+t+'"."'+n+'" FROM "'+t+'" LIMIT 1',null,function(){r(!0)},function(){return r(!1),!1})})}Object.defineProperty(t,"__esModule",{value:!0});var l={isNeeded:function(e){return n.__awaiter(void 0,void 0,void 0,function(){var t,r,i;return n.__generator(this,function(n){switch(n.label){case 0:return t=e,r=!1,[4,e.existsTable(a.default)];case 1:return i=n.sent(),i?[4,t.executeQuery(function(e){return c(e,a.default.tableName,a.default.attributes[0].columnName)})]:[3,3];case 2:r=n.sent(),n.label=3;case 3:return[2,r]}})})},run:function(e){return n.__awaiter(void 0,void 0,void 0,function(){var t;return n.__generator(this,function(n){switch(n.label){case 0:return t=[{v0TableInfo:a.default,v2TableInfo:i.default},{v0TableInfo:o.default,v2TableInfo:r.default}].map(function(t){var n=t.v0TableInfo,r=t.v2TableInfo;return u(e,n,r)}),[4,Promise.all(t)];case 1:return n.sent(),[2]}})})},cleanup:function(e){return n.__awaiter(void 0,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return[4,e.deleteTableIfExists(a.default)];case 1:return t.sent(),[4,e.deleteTableIfExists(o.default)];case 2:return t.sent(),[4,e.renameTable(i.default.tableName+"_V2",i.default.tableName)];case 3:return t.sent(),[4,e.renameTable(r.default.tableName+"_V2",r.default.tableName)];case 4:return t.sent(),[2]}})})}};t.default=l}),define("OutSystems/ClientRuntime/modules/Database/WebSQL/Upgrader/WebSQLMetadataV2UpgraderStep2",["require","exports","tslib","../../Metadata/MetadataBackupTableInfo","../../Metadata/MetadataTableInfo","./V0/MetadataBackupTableInfo","./V0/MetadataTableInfo","./WebSQLMetadataConverter","./WebSQLMetadataV2Upgrader"],function(e,t,n,r,i,o,a,s,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(){e.lastUpgraderRegistered=this}return e.prototype.isNeeded=function(t){return n.__awaiter(this,void 0,void 0,function(){var r;return n.__generator(this,function(n){switch(n.label){case 0:return r=!1,e.lastUpgraderRegistered!==this?[3,2]:[4,u.default.isNeeded(t)];case 1:r=n.sent(),n.label=2;case 2:return[2,r]}})})},e.prototype.run=function(e){return n.__awaiter(this,void 0,void 0,function(){var t,s=this;return n.__generator(this,function(n){switch(n.label){case 0:return t=[{v2TableInfo:i.default,v0TableInfo:a.default},{v2TableInfo:r.default,v0TableInfo:o.default}].map(function(t){var n=t.v2TableInfo,r=t.v0TableInfo;return s.migrateToV0(e,n,r)}),[4,Promise.all(t)];case 1:return n.sent(),[2]}})})},e.prototype.migrateToV0=function(e,t,r){return n.__awaiter(this,void 0,void 0,function(){var i,o;return n.__generator(this,function(n){switch(n.label){case 0:return[4,e.getAllRecords(t)];case 1:return i=n.sent(),o=i.map(function(e){return s.convertV2ToV0(e)}),[4,e.deleteTableIfExists(t.tableName+"_V2")];case 2:return n.sent(),[4,e.renameTable(t.tableName,t.tableName+"_V2")];case 3:return n.sent(),[4,e.createTable(r)];case 4:return n.sent(),[4,e.upsertAllRecords(r,o)];case 5:return n.sent(),[2]}})})},e.prototype.cleanup=function(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(t){return e.lastUpgraderRegistered=null,[2]})})},e}();t.default=c}),define("OutSystems/ClientRuntime/modules/Database/WebSQL/WebSQLSerializer",["require","exports","tslib","../../../DataTypes","../../../Logger","../../../Settings","../AutoNumber","../Common/Serializer","../DatabaseTypeUtils","../DBDataType"],function(e,t,n,r,i,o,a,s,u,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fromMethodCache=new Map,t.attributeReaderImplementation=function(e,n,r,i){var o={type:u.convertDataTypeToDBDataType(i)};return t.deserialize(e["o"+n],o)},t.namedAttributeReaderImplementation=function(e,n,r,i){var o={type:u.convertDataTypeToDBDataType(i)};return t.deserialize(e[r],o)},t.deserializeAggregate=function(e,n,i,o){if(t.isGenericRecordType(n)){var a=e,s=n,u=i,c=t.fromMethodCache.get(s);if(!c){var l=s.getAttributes(),f=t.generateConverterCode(l,n);c=new Function("fromLocalStorage","GenericRecord","attributes","classDef",f)(t.deserializeAggregate,r.GenericRecord,l,n),t.fromMethodCache.set(s,c)}return c(a,u,t.getAttributeReaderImplementation(n),o)}if(t.isGenericRecordListType(n)){for(var d=new n,p=e,h=i,g=[],m=0;m<p.length;m++)g.push(d.newItem(h(null,p.item(m))));return d.pushAll(g),d}var y=n;throw new Error("Unable to read data from Local Storage. Unknown type "+(y&&y.name?y.name:y))},t}return n.__extends(t,e),t.prototype.isGenericRecordType=function(e){return!!e.isGenericRecordType},t.prototype.isGenericRecordListType=function(e){return!!e.isGenericRecordListType},t.prototype.getAttributeReaderImplementation=function(e){return e.isAnonymousRecord()?this.namedAttributeReaderImplementation:this.attributeReaderImplementation},t.prototype.generateAttributesDeclaration=function(e){var t="";return e.forEach(function(e,n){e.dataType!==r.DataTypes.RecordList&&(t+=e.attrName+": null,\n")}),t},t.prototype.generateDeserializerForEachAttribute=function(e,t){var n="";return e.forEach(function(e,i){e.dataType!==r.DataTypes.RecordList&&(e.dataType===r.DataTypes.Record&&t.isAnonymousRecord()?n+=e.attrName+": fromLocalStorage(row, attributes["+i+"].complexType, indexRef),":n+=e.attrName+": readerImplementation(row, indexRef.value++, attributes["+i+"].name, attributes["+i+"].dataType),")}),n},t.prototype.generateConverterCode=function(e,t){return"return function from(row, indexRef, readerImplementation, attributeOrder) {\n            var data = null;\n            if (attributeOrder && attributeOrder.length > 0) {\n                data = {\n                    "+this.generateAttributesDeclaration(e)+"\n                };\n                for (var i = 0; i < attributeOrder.length; i++) {\n                    var attrName = attributeOrder[i];\n                    var attr = attributes.filter(function(attr) { return attr.attrName === attrName; })[0];\n                    if (attr.complexType) {\n                        data[attrName] = fromLocalStorage(row, attr.complexType, indexRef);\n                    } else {\n                        data[attrName] = readerImplementation(row, indexRef.value++, attr.name, attr.dataType);\n                    }\n                }\n            } else {\n                data = {\n                    "+this.generateDeserializerForEachAttribute(e,t)+"\n                };\n            }\n            return new classDef.RecordClass(data);\n        };"},t.prototype.serializeDateTime=function(e,t){if(!o.getEnvParams().DbNullDatesTZAware&&e.eq(r.DateTime.defaultValue))return s.default.NULLDATE_IN_DB;var n=e.toNative();return s.default.maskFourZeroes(n.getUTCFullYear())+"-"+s.default.maskTwoZeroes(n.getUTCMonth()+1)+"-"+s.default.maskTwoZeroes(n.getUTCDate())+" "+s.default.maskTwoZeroes(n.getUTCHours())+":"+s.default.maskTwoZeroes(n.getUTCMinutes())+":"+s.default.maskTwoZeroes(n.getUTCSeconds())},t.prototype.serializeBinaryData=function(e,t){return void 0===e.content?null:e.content},t.prototype.deserializeDateTime=function(e,t){if(e===s.default.NULLDATE_IN_DB&&!o.getEnvParams().DbNullDatesTZAware)return r.DateTime.defaultValue;var n=/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})$/,i=n.exec(e),a=new Date;return a.setUTCFullYear(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10)),a.setUTCHours(parseInt(i[4],10)||0,parseInt(i[5],10)||0,parseInt(i[6],10)||0,0),new r.DateTime(a)},t.prototype.deserializeBinaryData=function(e,t){return new r.BinaryData(e)},t.prototype.isConversionNeeded=function(e,t){return!!this.isConversionNeededBetweenDBDataTypes(e.type,t.type)||(!!e.isEntityReference!=!!t.isEntityReference||void 0!==e.length&&(void 0!==e.decimals?e.length-e.decimals>t.length-t.decimals:e.length>t.length))},t.prototype.isConversionNeededBetweenDBDataTypes=function(e,t){if(void 0===e)return!0;if(e===t)return!1;switch(e){case c.default.BOOLEAN:return t!==c.default.INTEGER&&t!==c.default.LONGINTEGER;case c.default.INTEGER:return t!==c.default.LONGINTEGER&&t!==c.default.TEXT;case c.default.LONGINTEGER:return t!==c.default.TEXT;default:return!0}},t.prototype.innerSerializeBasicType=function(e,t,n){return i.trace(this,"WebSQL serializing a value of type "+t.type),t.isPrimaryKey&&n===a.default.YesIfEmpty&&r.equals(e,u.typeDefaultValue(t.type))?null:t.isEntityReference&&r.equals(e,u.typeDefaultValue(t.type))?null:void 0},t}(s.default);t.default=l}),define("OutSystems/ClientRuntime/modules/Database/WebSQL/WebSQLEntityService",["require","exports","tslib","../../../Exceptions","../Common/EntityService","./Upgrader/WebSQLMetadataV2Upgrader","./Upgrader/WebSQLMetadataV2UpgraderStep2","./WebSQLSerializer"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(){var t=e.call(this,new s.default)||this;return t.isMetadataV2UpgraderRegistered=!1,t}return n.__extends(t,e),t.prototype.registerInitializer=function(t){this.isMetadataV2UpgraderRegistered||(this.database.registerInitializer(o.default),this.isMetadataV2UpgraderRegistered=!0),e.prototype.registerInitializer.call(this,t),this.database.registerInitializer(new a.default)},t.prototype.executeAggregate=function(e){return n.__awaiter(this,void 0,void 0,function(){var t;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.getDatabase()];case 1:t=n.sent();try{return[2,t.executeQuery(e)]}catch(e){throw new r.Exceptions.DataBaseException("",e.message,e.stack)}return[2]}})})},t}(i.default);t.default=u}),define("OutSystems/ClientRuntime/modules/LocaleService/LocaleService",["require","exports","tslib","../../ApplicationInfo","../../Injector","../../Injector/KnownServices","../../StorageProvider","../PubSub/Publisher"],function(e,t,n,r,i,o,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u="Locale Service",c="CurrentLocale",l=/^[A-z]{2,3}([_-]([A-z]{4}|[\d]{3}))?([_-]([A-z]{2}|[\d]{3}))?$/,f=function(){function e(e){this.currentLocaleStorage=new a.StorageObject(a.StorageType.Persistent,c,null,r.getUserProviderName),this.publisher=new s.default(u,e)}return e.prototype.subscribe=function(e){return this.publisher.subscribe(e)},e.prototype.unsubscribe=function(e){return this.publisher.unsubscribe(e)},e.prototype.getCurrentLocale=function(){var e,t;return null!==(t=null===(e=this.getStoredLocale())||void 0===e?void 0:e.localeCode)&&void 0!==t?t:"en-US"},e.prototype.setCurrentLocale=function(e){var t=i.resolve(o.ServiceNames.TranslationsService);if(t&&t.clear(),!this.isValidLocale(e))throw new Error("Value '"+e+"' isn't a valid locale.");var n={localeCode:e,isRTL:!1};this.currentLocaleStorage.set(n);var r=this.getCurrentLocaleFamily();this.publisher.publish({localeCode:e,localeFamily:r})},e.prototype.getCurrentLocaleFamily=function(){var e,t=[],n=null!==(e=this.getCurrentLocale())&&void 0!==e?e:"";return n.indexOf("-")>0&&t.push(n.split("-")[0]),t.push(n),t},e.prototype.isValidLocale=function(e){return l.test(e)},e.prototype.isCurrentLocaleRTL=function(){var e,t;return null!==(t=null===(e=this.getStoredLocale())||void 0===e?void 0:e.isRTL)&&void 0!==t&&t},e.prototype.setCurrentLocaleRTL=function(e){var t,r=null!==(t=this.getStoredLocale())&&void 0!==t?t:{localeCode:"en-US",isRTL:!1};"string"==typeof r?this.currentLocaleStorage.set({localeCode:r,isRTL:e}):this.currentLocaleStorage.set(n.__assign(n.__assign({},r),{isRTL:e}))},e.prototype.getStoredLocale=function(){var e=this.currentLocaleStorage.get();return"string"==typeof e?{localeCode:e,isRTL:!1}:e},e}();t.default=f}),define("OutSystems/ClientRuntime/modules/LogTable/LogTableInfo",["require","exports","../Database/AutoNumber","../Database/DBDataType"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOG_FIELDS=void 0,t.LOG_FIELDS={Instant:"INSTANT",LogType:"LOGTYPE",Message:"MESSAGE",ModuleName:"MODULENAME",Stack:"STACK",MessageType:"MESSAGETYPE",ExtraInfo:"EXTRAINFO"};var i={tableName:"OSSYS_LOG",idIsAutoNumber:n.default.YesIfEmpty,attributes:function(){var e=[];return Object.keys(t.LOG_FIELDS).forEach(function(n){e.push({name:n,columnName:t.LOG_FIELDS[n],type:r.default.TEXT})}),e}()};t.default=i}),define("OutSystems/ClientRuntime/modules/LogTable/LogTableExtraInfoUpgrader",["require","exports","tslib","../../Logger","./LogTableInfo"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={isNeeded:function(e){return n.__awaiter(void 0,void 0,void 0,function(){var t;return n.__generator(this,function(n){switch(n.label){case 0:return[4,e.existsTable(i.default)];case 1:return t=n.sent(),t?[4,e.existsColumn(i.default.tableName,i.LOG_FIELDS.ExtraInfo)]:[3,3];case 2:t=!n.sent(),n.label=3;case 3:return[2,t]}})})},run:function(e){return n.__awaiter(void 0,void 0,void 0,function(){var t;return n.__generator(this,function(n){switch(n.label){case 0:return r.trace(this,"Running upgrader for extra info column on log table."),t=i.default.attributes.filter(function(e){return e.columnName===i.LOG_FIELDS.ExtraInfo})[0],[4,e.addColumn(i.default,t)];case 1:return n.sent(),r.trace(this,"Upgrader for extra info column on log table ran successfuly."),[2]}})})}};t.default=o}),define("OutSystems/ClientRuntime/modules/LogTable/LogTableInitializer",["require","exports","tslib","../../Logger","./LogTableInfo"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={isNeeded:function(e){return n.__awaiter(void 0,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return[4,e.existsTable(i.default)];case 1:return[2,!t.sent()]}})})},run:function(e){return n.__awaiter(void 0,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return r.trace(this,"Running initializer for log table info table."),[4,e.createTable(i.default)];case 1:return t.sent(),r.trace(this,"Initializer for entity log table info table ran successfuly."),[2]}})})}};t.default=o}),define("OutSystems/ClientRuntime/modules/LogTable/LogDatabaseStorage",["require","exports","tslib","../../Logger","./LogTableExtraInfoUpgrader","./LogTableInfo","./LogTableInitializer"],function(e,t,n,r,i,o,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMaxRecords=void 0;var s=function(){return 1e3};t.getMaxRecords=s;var u=function(){function e(e){this.db=e,this.count=0,r.trace(this,"Registering initializer for entity Log Table info table."),e.registerInitializer(a.default),e.registerInitializer(i.default)}return e.prototype.initialize=function(){return n.__awaiter(this,void 0,void 0,function(){var e=this;return n.__generator(this,function(t){return[2,this.db.executeReadTransaction(function(t){return n.__awaiter(e,void 0,void 0,function(){var e;return n.__generator(this,function(n){switch(n.label){case 0:return[4,t.existsTable(o.default)];case 1:return n.sent()?[3,2]:(this.count=0,[3,4]);case 2:return[4,t.getAllRecords(o.default)];case 3:e=n.sent(),this.count=e.length,n.label=4;case 4:return[2]}})})})]})})},e.prototype.getCount=function(){return this.count},e.prototype.insertEntity=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var r,i;return n.__generator(this,function(n){switch(n.label){case 0:return i={},i[o.LOG_FIELDS.Instant]=t.instant,i[o.LOG_FIELDS.LogType]=t.logType,i[o.LOG_FIELDS.Message]=t.message,i[o.LOG_FIELDS.MessageType]=t.messageType,i[o.LOG_FIELDS.ModuleName]=t.moduleName,i[o.LOG_FIELDS.Stack]=t.stack,i[o.LOG_FIELDS.ExtraInfo]=JSON.stringify(t.extra),r=i,[4,e.insertRecord(o.default,r)];case 1:return n.sent(),this.updateCount(1),[2]}})})},e.prototype.internalCountLogs=function(e){return n.__awaiter(this,void 0,void 0,function(){var t;return n.__generator(this,function(n){switch(n.label){case 0:return[4,e.getAllRecords(o.default)];case 1:return t=n.sent(),[2,t.length]}})})},e.prototype.updateCount=function(e){this.count+=e,this.count=Math.max(this.count,0)},e.prototype.countLogs=function(){var e=this;return this.db.executeReadTransaction(function(t){return e.internalCountLogs(t)},!1)},e.prototype.internalDiscardLogsByType=function(e,t,r,i){return n.__awaiter(this,void 0,void 0,function(){
var a,s,u,c;return n.__generator(this,function(n){switch(n.label){case 0:return a=t,[4,e.findRecords(o.default,(c={},c[o.LOG_FIELDS.LogType]=i,c))];case 1:s=n.sent(),u=0,n.label=2;case 2:return u<Math.min(r,s.length)?[4,e.removeRecord(o.default,s[u].$KEY)]:[3,5];case 3:n.sent(),a++,n.label=4;case 4:return u++,[3,2];case 5:return[2,a]}})})},e.prototype.discardLogs=function(e,t){return n.__awaiter(this,void 0,void 0,function(){var i,o,a,s,u;return n.__generator(this,function(n){switch(n.label){case 0:return i=0,o=t,a=i,[4,this.internalDiscardLogsByType(e,i,o,r.LogTypes.Trace)];case 1:return(i=a+n.sent())<t?(o-=i,s=i,[4,this.internalDiscardLogsByType(e,i,o,r.LogTypes.General)]):[3,3];case 2:i=s+n.sent(),n.label=3;case 3:return i<t?(o-=i,u=i,[4,this.internalDiscardLogsByType(e,i,o,r.LogTypes.Error)]):[3,5];case 4:i=u+n.sent(),n.label=5;case 5:return this.updateCount(-i),[2]}})})},e.prototype.internalWriteLog=function(e){return n.__awaiter(this,void 0,void 0,function(){var r=this;return n.__generator(this,function(i){return[2,this.db.executeTransaction(function(i){return n.__awaiter(r,void 0,void 0,function(){var r,o,a=this;return n.__generator(this,function(n){switch(n.label){case 0:return this.count+e.length>=t.getMaxRecords()?(r=this.count+e.length-t.getMaxRecords(),[4,this.discardLogs(i,r)]):[3,2];case 1:n.sent(),n.label=2;case 2:return o=e.map(function(e){return a.insertEntity(i,e)}),[4,Promise.all(o)];case 3:return n.sent(),[2]}})})},!1)]})})},e.prototype.writeLog=function(e){return this.internalWriteLog([e])},e.prototype.writeLogBatch=function(e){if(e.length>t.getMaxRecords()){var n=e.length-t.getMaxRecords();e.splice(0,n)}return this.internalWriteLog(e)},e.prototype.getLogs=function(e){return n.__awaiter(this,void 0,void 0,function(){var t=this;return n.__generator(this,function(r){return[2,this.db.executeReadTransaction(function(r){return n.__awaiter(t,void 0,void 0,function(){var t,i,a;return n.__generator(this,function(n){switch(n.label){case 0:return[4,r.getAllRecords(o.default)];case 1:return t=n.sent(),i=null!==e&&void 0!==e?e:t.length,a=t.slice(0,i),[2,this.dbRecordListToLogMessageList(a)]}})})},!1)]})})},e.prototype.popLogs=function(){var e=this;return this.db.executeTransaction(function(t){return n.__awaiter(e,void 0,void 0,function(){var e;return n.__generator(this,function(n){switch(n.label){case 0:return[4,t.getAllRecords(o.default)];case 1:return e=n.sent(),[4,t.removeAllRecords(o.default)];case 2:return n.sent(),[2,this.dbRecordListToLogMessageList(e)]}})})},!1)},e.prototype.removeLogs=function(e){var t=this;return this.db.executeTransaction(function(r){return n.__awaiter(t,void 0,void 0,function(){var t;return n.__generator(this,function(n){switch(n.label){case 0:return[4,r.findRecords(o.default,{})];case 1:return t=n.sent(),[4,Promise.all(t.slice(0,e).map(function(e){return r.removeRecord(o.default,e.$KEY)}))];case 2:return n.sent(),[2]}})})},!1)},e.prototype.removeAllLogs=function(){var e=this;return this.db.executeTransaction(function(t){return n.__awaiter(e,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:return[4,t.removeAllRecords(o.default)];case 1:return e.sent(),[2]}})})},!1)},e.prototype.dbRecordListToLogMessageList=function(e){var t=this;return e.map(function(e){return t.dbRecordToLogMessage(e)})},e.prototype.dbRecordToLogMessage=function(e){return{instant:e[o.LOG_FIELDS.Instant],logType:e[o.LOG_FIELDS.LogType],message:e[o.LOG_FIELDS.Message],messageType:e[o.LOG_FIELDS.MessageType],moduleName:e[o.LOG_FIELDS.ModuleName],stack:e[o.LOG_FIELDS.Stack],extra:e[o.LOG_FIELDS.ExtraInfo]?JSON.parse(e[o.LOG_FIELDS.ExtraInfo]):void 0}},e}();t.default=u}),define("OutSystems/ClientRuntime/modules/MappingWithDefault/MappingWithDefaultService",["require","exports","../../Logger"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.messages={}}return e.prototype.getMessage=function(e,t){n.trace("MappingWithDefaultService","Getting message for key "+e+" with default message "+t);var r=this.messages[e];return void 0===r||null===r?t:r},e.prototype.setMessage=function(e,t){n.trace("MappingWithDefaultService","Setting message for key "+e+" with value "+t),this.messages[e]=t},e.prototype.add=function(e){var t=this;if(!e)throw new Error("Messages cannot either null or undefined");var r=Object.keys(e);n.trace("MappingWithDefaultService","Adding "+r.length+" messages"),r.forEach(function(n){return t.setMessage(n,e[n])})},e.prototype.clear=function(){n.trace("MappingWithDefaultService","Clearing cached messages"),this.messages={}},e}();t.default=r}),define("OutSystems/ClientRuntime/modules/PersistentKeyValue/PersistentKeyValueTableInfo",["require","exports","../../modules/Database/AutoNumber","../../modules/Database/DBDataType"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={tableName:"OSSYS_PERSISTENTKEYVALUE",idIsAutoNumber:n.default.No,attributes:[{name:"Key",columnName:"KEY",type:r.default.TEXT,isPrimaryKey:!0},{name:"Value",columnName:"VALUE",type:r.default.TEXT}]};t.default=i}),define("OutSystems/ClientRuntime/modules/PersistentKeyValue/PersistentKeyValueInitializer",["require","exports","tslib","../../Logger","./PersistentKeyValueTableInfo"],function(e,t,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={isNeeded:function(e){return n.__awaiter(void 0,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return[4,e.existsTable(i.default)];case 1:return[2,!t.sent()]}})})},run:function(e){return n.__awaiter(void 0,void 0,void 0,function(){return n.__generator(this,function(t){switch(t.label){case 0:return r.trace(this,"Running initializer for persistent key value info table."),[4,e.createTable(i.default)];case 1:return t.sent(),r.trace(this,"Initializer for entity persistent key value info table ran successfuly."),[2]}})})}};t.default=o}),define("OutSystems/ClientRuntime/modules/PersistentKeyValue/PersistentKeyValueStorage",["require","exports","tslib","../../Logger","./PersistentKeyValueInitializer","./PersistentKeyValueTableInfo"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e){this.db=e,this.ready=!1,r.trace(this,"Registering initializer for entity persistent key value info table."),e.registerInitializer(i.default)}return e.prototype.isReady=function(){return n.__awaiter(this,void 0,void 0,function(){var e,t=this;return n.__generator(this,function(r){switch(r.label){case 0:return this.ready?[3,2]:(e=this,[4,this.db.executeReadTransaction(function(e){return n.__awaiter(t,void 0,void 0,function(){return n.__generator(this,function(t){return[2,e.existsTable(o.default)]})})})]);case 1:e.ready=r.sent(),r.label=2;case 2:return[2,this.ready]}})})},e.prototype.setValue=function(e,t){var r=this;return this.db.executeTransaction(function(i){return n.__awaiter(r,void 0,void 0,function(){var r;return n.__generator(this,function(n){switch(n.label){case 0:return r={KEY:e,VALUE:t},[4,i.upsertRecord(o.default,r)];case 1:return n.sent(),[2]}})})})},e.prototype.getValue=function(e){var t=this;return this.db.executeReadTransaction(function(r){return n.__awaiter(t,void 0,void 0,function(){var t;return n.__generator(this,function(n){switch(n.label){case 0:return[4,r.getRecord(o.default,e)];case 1:return t=n.sent(),[2,null===t||void 0===t?void 0:t.VALUE]}})})})},e}();t.default=a}),define("OutSystems/ClientRuntime/NativeApplicationInfo",["require","exports","tslib","./NativeHelper"],function(e,t,n,r){"use strict";function i(){var e=window;if(e&&e.OutSystemsNative&&e.OutSystemsNative.ApplicationInfo)return e.OutSystemsNative.ApplicationInfo}function o(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:return[4,r.ensureNativeReady()];case 1:return e.sent(),[2,new Promise(function(e,t){var n=i();if(!n)return t(new Error("NativeAppInfo API is not available"));n.getPlatformVersion(e,t)})]}})})}function a(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:return[4,r.ensureNativeReady()];case 1:return e.sent(),[2,new Promise(function(e,t){var n=i();if(!n)return t(new Error("NativeAppInfo API is not available"));n.getNativeShellVersion(e,t)})]}})})}function s(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:return[4,r.ensureNativeReady()];case 1:return e.sent(),[2,new Promise(function(e,t){var n=i();if(!n)return t(new Error("NativeAppInfo API is not available"));n.getAppVersion(e,t)})]}})})}function u(){return n.__awaiter(this,void 0,void 0,function(){return n.__generator(this,function(e){switch(e.label){case 0:return[4,r.ensureNativeReady()];case 1:return e.sent(),[2,new Promise(function(e,t){var n=i();if(!n)return t(new Error("NativeAppInfo API is not available"));n.getAppVersionNumber(e,t)})]}})})}function c(e,t){return!(!e||!t)&&l(e.split(".").map(function(e){return parseInt(e,10)}),t.split(".").map(function(e){return parseInt(e,10)}),0)}function l(e,t,n){return!!isNaN(t[n])||((e[n]||0)>(t[n]||0)||!(e[n]<(t[n]||0))&&l(e,t,n+1))}Object.defineProperty(t,"__esModule",{value:!0}),t.isVersionGreaterOrEqualTo=t.getAppVersionNumber=t.getAppVersion=t.getNativeShellVersion=t.getPlatformVersion=void 0,t.getPlatformVersion=o,t.getNativeShellVersion=a,t.getAppVersion=s,t.getAppVersionNumber=u,t.isVersionGreaterOrEqualTo=c}),define("OutSystems/ClientRuntime/NativeLogger",["require","exports","tslib","./Logger"],function(e,t,n,r){"use strict";function i(){var e,t=window;return null===(e=null===t||void 0===t?void 0:t.OutSystemsNative)||void 0===e?void 0:e.Logger}function o(){var e,t=window;return null===(e=null===t||void 0===t?void 0:t.OutSystemsNative)||void 0===e?void 0:e.OTLogger}function a(e){return n.__awaiter(this,void 0,void 0,function(){var r,a,s,u,c;return n.__generator(this,function(n){switch(n.label){case 0:if(r=i(),!(((a=o())||r)&&(null===e||void 0===e?void 0:e.length)>0))return[3,6];s=0,u=e,n.label=1;case 1:return s<u.length?(c=u[s],a?[4,t.sendOTLog(a,c)]:[3,3]):[3,6];case 2:return n.sent(),[3,5];case 3:return[4,t.sendLog(r,c)];case 4:n.sent(),n.label=5;case 5:return s++,[3,1];case 6:return[2]}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.sendOTLog=t.sendLog=t.postLog=t.NetworkStatus=void 0;var s;!function(e){function t(){return!!i()}function n(e){}function r(e){}function o(){return t()?Promise.resolve():Promise.reject(new Error("NativeLogger API is not available"))}e.isOnline=t,e.onOnline=n,e.onOffline=r,e.ping=o}(s||(s={})),t.NetworkStatus=s,t.postLog=a;var u=function(e,t){return new Promise(function(n,i){switch(t.logType){case r.LogTypes.General:e.logInfo(t.message,t.moduleName,n,i);break;case r.LogTypes.Error:e.logError(t.message,t.moduleName,t.extra,t.stack,n,i);break;case r.LogTypes.Trace:e.logDebug(t.message,t.moduleName,n,i);break;default:e.logError("Unknown log type: "+t.logType+"; Message: "+t.message,"NativeLogger",t.extra,(new Error).stack,n,i)}})};t.sendLog=u;var c=function(e,t){switch(t.logType){case r.LogTypes.General:return e.logInfo({instant:t.instant,message:t.message,source:t.moduleName});case r.LogTypes.Error:return e.logError({instant:t.instant,message:t.message,source:t.moduleName,attributes:t.extra,stack:t.stack});case r.LogTypes.Trace:return e.logDebug({instant:t.instant,message:t.message,source:t.moduleName});default:return e.logError({instant:(new Date).toISOString(),message:"Unknown log type: "+t.logType+"; Message: "+t.message,source:"NativeLogger",attributes:t.extra,stack:(new Error).stack})}};t.sendOTLog=c}),define("OutSystems/ClientRuntime/Performance",["require","exports"],function(e,t){"use strict";function n(e){a&&__PERFORMANCE.start(e)}function r(e){a&&__PERFORMANCE.end(e)}function i(){if(a)return __PERFORMANCE.dump()}function o(){if(a)return __PERFORMANCE.clear()}Object.defineProperty(t,"__esModule",{value:!0}),t.clear=t.dump=t.end=t.start=void 0;var a="undefined"!=typeof __PERFORMANCE;t.start=n,t.end=r,t.dump=i,t.clear=o}),define("OutSystems/ClientRuntime/RequireManager",["require","exports","./Settings"],function(e,t,n){"use strict";function r(e){d=e}function i(){o()}function o(){f()}function a(e){requirejs.onError=e}function s(e){return e.requireType===h}function u(e){var t,n,r=e,i=null===(n=r.requireModules)||void 0===n?void 0:n[0];if(!i)return!1;if(requirejs.undef(i),-1===i.indexOf("$")){var a=d[i],s=(t={},t[i]=a,t);requirejs.config({paths:s}),o()}return!0}function c(e,t,r){function i(n,o){var a=function(){r?r(o):requirejs.onError(o)};if(!s(o)||0===n)return void a();setTimeout(function(){if(!u(o))return void a();requirejs(e,t,function(e){return i(n-1,e)})},0)}n.getEnvParams().CDNFilenameVersioning?requirejs(e,t,function(e){return i(5,e)}):requirejs(e,t,r)}function l(e,t){void 0===t&&(t="scripts"),d=e;var n={baseUrl:t,paths:{},waitSeconds:30};if(d){for(var r in d)(requirejs.specified(r)||requirejs.defined(r))&&delete d[r];n.paths=d}requirejs.config(n),o()}function f(){var e=requirejs.s.contexts;Object.keys(e).forEach(function(t){var n=e[t];if(!n._osNameToUrlPatched){var r=n.nameToUrl;n.nameToUrl=function(e,t,i){return e.indexOf(p)>0&&-1===e.indexOf("?")&&(e=e.split(p,2)[0]),r.apply(n,[e,t,i])},n._osNameToUrlPatched=!0}})}Object.defineProperty(t,"__esModule",{value:!0}),t.configure=t.loadModule=t.setErrorHandler=t.initialize=t.setModuleIdToUrlMap=void 0;var d,p="$",h="scripterror";t.setModuleIdToUrlMap=r,t.initialize=i,t.setErrorHandler=a,t.loadModule=c,t.configure=l}),define("OutSystems/ClientRuntime/ObjectExtensions",["require","exports","./DataTypes"],function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!0}function i(e){var t=0,n=e.length;if(0===n)return t;for(var r=0;r<n;r++){t=(t<<5)-t+e.charCodeAt(r),t|=0}return t}function o(e,t){return e&&t&&!n.TypeValidations.isBasicType(e)?e.fastEquals instanceof Function?e.fastEquals(t):n.equals(e,t):e===t}function a(e,t,n){if(void 0===n&&(n=r),e===t)return!0;if(null===e||null===t||"object"!=typeof e||"object"!=typeof t)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),u=0;u<i.length;u++){var c=i[u];if(n(e,c)){if(!s(c))return!1;if(!o(e[c],t[c]))return!1}}return!0}function s(e,t){if(e===t)return!0;if(!(null!==e&&null!==t&&e instanceof Array&&t instanceof Array))return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!o(e[n],t[n]))return!1;return!0}function u(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(null===e||void 0===e)throw new TypeError("ObjectHelper.assign target cannot be null or undefined");for(var r=Object(e),i=Object.prototype.hasOwnProperty,o=0,a=t;o<a.length;o++){var s=a[o];if(null!==s&&void 0!==s){var u=Object(s);for(var c in u)i.call(u,c)&&(r[c]=u[c])}}return r}function c(e){return!e||0===Object.keys(e).length}function l(e){for(var t=[],n=[e],r=0;n.length;){var i=n.pop();switch(typeof i){case"boolean":r+=4;break;case"number":r+=8;break;case"string":r+=2*i.length;break;case"object":if(-1!==t.indexOf(i))continue;t.push(i),Array.isArray(i)||(r+=2*Object.keys(i).length);for(var o in i){var a=null;try{a=i[o]}catch(e){}a&&n.push(a)}}}return r}function f(e,t,n){var r=e[t]||function(){};e[t]=function(){return n.apply(this,[].concat(r,arguments))}}function d(e,t,n){for(var r=e,i=0;i<n;i++)r+=t;return r}Object.defineProperty(t,"__esModule",{value:!0}),t.concatenateMultipleTimes=t.overrideMethod=t.roughSizeOf=t.isEmptyObject=t.assign=t.arrayShallowEquals=t.shallowEquals=t.getHashCode=void 0,t.getHashCode=i,t.shallowEquals=a,t.arrayShallowEquals=s,t.assign=u,t.isEmptyObject=c,t.roughSizeOf=l,t.overrideMethod=f,t.concatenateMultipleTimes=d}),define("OutSystems/ClientRuntime/ScreenStateCache",["require","exports","./Logger","./ObjectExtensions"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScreenStateCache=void 0;var i=function(){function e(){}return e.addKey=function(t){this.cache[t]={components:{}},this.cacheKeys.push(t);var n=this.cacheKeys.length-e.MaxCacheSize;if(n>0)for(var r=0;r<n;r++)this.removeKey(this.cacheKeys[r])},e.removeKey=function(e){delete this.cache[e],this.cacheKeys.splice(this.cacheKeys.indexOf(e),1)},e.save=function(e,t,n,r){this.cache[e]||this.addKey(e),this.cache[e].components[t]={state:n,customProperties:r}},e.load=function(t,n){var r=e.loadScreenCache(t);return r?r.components[n]:null},e.loadScreenCache=function(e){return this.cache[e]||void 0},e.clear=function(e){var t=this;e?this.cache[e]&&this.removeKey(e):(this.cache={},this.cacheKeys=[]),n.trace(this,function(){return"State cache contains "+Object.keys(t.cache).length+" entries with a total size of "+r.roughSizeOf(t.cache)+" bytes"})},e.inspect=function(){return{cache:this.cache,cacheKeys:this.cacheKeys}},e.MaxCacheSize=20,e.cache={},e.cacheKeys=[],e}();t.ScreenStateCache=i}),define("OutSystems/ClientRuntime/EventDispatcher",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventDispatcher=t.TransitionEndResult=t.EventType=void 0;var n;!function(e){e[e.TransitionStart=0]="TransitionStart",e[e.TransitionEnd=1]="TransitionEnd",e[e.NavigationStart=2]="NavigationStart"}(n=t.EventType||(t.EventType={}));!function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"}(t.TransitionEndResult||(t.TransitionEndResult={}));var r=0,i=function(){for(var e=[],t=Object.keys(n).length/2,r=0;r<t;r++)e.push({});return e}();!function(e){function t(){return"_"+r++}function n(e,n,r){void 0===r&&(r=!1);var o=t();return i[e][o]={listenOnce:r,callback:n},{type:e,id:o}}function o(e,t){return n(e,t,!0)}function a(e){return e&&s(e.type,e.id)}function s(e,t){return delete i[e][t]}function u(e){var t=void 0,n=i[e.type];for(var r in n){var o=n[r];o.listenOnce&&s(e.type,r);var a=o.callback(e.args);void 0!==a&&(t=a)}return t}e.listen=n,e.listenOnce=o,e.unregister=a,e.dispatch=u}(t.EventDispatcher||(t.EventDispatcher={}))}),define("OutSystems/ClientRuntime/modules/Common/UrlUtils",["require","exports","../../RegExpHelper"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildURLFromVersionedResource=t.replaceBasePath=void 0;var r=function(e,t,r){if(t.toLowerCase()===r.toLowerCase())return e;var i=new RegExp("^"+n.escape(t),"i");return e.replace(i,r)};t.replaceBasePath=r;var i=function(e,t){return""+e+t};t.buildURLFromVersionedResource=i}),define("OutSystems/ClientRuntime/modules/Native/Prebundle",["require","exports","tslib","../../NativeHelper","./IOutSystemsNativeHost"],function(e,t,n,r,i){"use strict";function o(){return n.__awaiter(this,void 0,void 0,function(){var e;return n.__generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r.ensureNativeReady()];case 1:return t.sent(),i.isIOutSystemsNativeHost(window)?[2,window.OutSystemsNative.Prebundle]:[2,null];case 2:return e=t.sent(),[2,null];case 3:return[2]}})})}function a(){return n.__awaiter(this,void 0,void 0,function(){var e;return n.__generator(this,function(t){switch(t.label){case 0:return[4,o()];case 1:return e=t.sent(),[2,!!e]}})})}function s(){return n.__awaiter(this,void 0,void 0,function(){var e;return n.__generator(this,function(t){switch(t.label){case 0:return[4,o()];case 1:return e=t.sent(),e?[2,new Promise(function(t,n){e.getManifest(t,n)})]:[2,null]}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.getManifest=t.isPrebundlePluginAvailable=void 0,t.isPrebundlePluginAvailable=a,t.getManifest=s}),define("OutSystems/ClientRuntime/ResourceCache",["require","exports","tslib","./ApplicationInfo","./Logger","./modules/Common/UrlUtils","./NativeHelper","./Request"],function(e,t,n,r,i,o,a,s){"use strict";function u(){t.ResourceCache=new h}Object.defineProperty(t,"__esModule",{value:!0}),t.forceDummyCacheHandler=t.ResourceCache=void 0;var c="ResourceCache",l=function(){function e(){this.isCaching=!1,this.errorMessages=[],this.onFinishListeners=[],this.onErrorListeners=[],this.onProgressListeners=[],i.trace(c,"Initializing resource cache using '"+this.getCacheName()+"' mechanism")}return e.prototype.onFinish=function(){this.isCaching=!1,i.trace(c,"Caching finished"),this.onFinishListeners.forEach(function(e){return e()}),this.onFinishListeners=[],this.onErrorListeners=[],this.onProgressListeners=[]},e.prototype.onError=function(e){i.trace(c,"Caching error: "+e),this.errorMessages.push(e),this.onErrorListeners.forEach(function(t){return t(e)})},e.prototype.onProgress=function(e,t){i.trace(c,"Caching progress: "+e+" / "+t),this.onProgressListeners.forEach(function(n){return n(e,t)})},e.prototype.listen=function(e,t,n){i.trace(c,"Started listening to resource cache events"),this.errorMessages.length>0&&t&&t(this.errorMessages.join("\n")),!this.isCaching&&e&&e(),this.isCaching?(e&&this.onFinishListeners.push(e),t&&this.onErrorListeners.push(t),n&&this.onProgressListeners.push(n)):i.trace(c,"Resource caching was already finished, listeners not attached")},e.prototype.start=function(e){var t=this;return i.trace(c,"Started caching resources for version "+e.versionToken),new Promise(function(n,r){if(!t.isCaching)try{t.isCaching=!0,t.errorMessages=[],t.innerStart(e)}catch(e){return t.onError(e.message),void r(e.message)}var i={finished:!1};t.listen(function(){i.finished||(i.finished=!0,n())},function(e){i.finished||(i.finished=!0,r(e))},null)})},e.prototype.switch=function(e){i.trace(c,"Switching cached resources to version "+e),this.innerSwitch(e)},e}(),f=function(e){function t(){for(var t=e.call(this)||this,n=0,r=["noupdate","cached","updateready"];n<r.length;n++){var i=r[n];applicationCache.addEventListener(i,function(){return t.handleEventBasedOnState()},!1)}return applicationCache.onprogress=function(e){return t.onProgress(e.loaded,e.total)},applicationCache.onerror=function(e){return t.callOnErrorAndFinish(e.message)},t}return n.__extends(t,e),t.prototype.callOnErrorAndFinish=function(e){var t=this;if(applicationCache.status===applicationCache.IDLE&&!this.isCaching)return void i.trace(c,"Cache invalidation bypassed"+(e?" - "+e:""));this.onError(this.getErrorDescription(e)),setTimeout(function(){return t.onFinish()},1)},t.prototype.getCacheName=function(){return"Application Cache"},t.prototype.innerStart=function(e){this.handleEventBasedOnState(),applicationCache.status===applicationCache.UNCACHED?this.callOnErrorAndFinish():applicationCache.status===applicationCache.IDLE&&applicationCache.update()},t.prototype.innerSwitch=function(e){},t.prototype.handleEventBasedOnState=function(){if(applicationCache.status===applicationCache.UPDATEREADY)setTimeout(function(){try{applicationCache.swapCache()}catch(e){i.error(c,e),applicationCache.update()}},0);else if(applicationCache.status!==applicationCache.IDLE&&applicationCache.status!==applicationCache.OBSOLETE)return;this.onFinish()},t.prototype.getErrorDescription=function(e){var t="Unable to cache "+(applicationCache.status===applicationCache.UNCACHED?"":"new ")+"resources, the application will be unavailable offline.";return e&&(t+="\nError message: "+e),"https:"===document.location.protocol&&(t+="\nPlease ensure that the server has a valid HTTPS certificate for '"+window.location.hostname+"', which is a requirement for offline."),t},t}(l),d=function(e){function t(){var n=e.call(this)||this;return n.isNativeReady=!1,n.isCacheAvailable=!1,a.ensureNativeReady().then(function(){if(n.isNativeReady=!0,n.isCacheAvailable="undefined"!=typeof OSCache,!n.isCacheAvailable)return void i.error(c,t.OSCacheNotFoundMessage);OSCache.addEventListener("onfinish",function(e){return n.onFinish()}),OSCache.addEventListener("onerror",function(e){return n.onError(e.message)}),OSCache.addEventListener("onprogress",function(e){return n.onProgress(e.loaded,e.total)})},function(e){i.error(c,"OSCache was not initialized because Cordova was not loaded.",e)}),n}return n.__extends(t,e),t.prototype.checkOSCacheAndDeferCall=function(e,n){return this.isNativeReady?!!this.isCacheAvailable||(e&&this.onError(t.OSCacheNotFoundMessage),!1):(i.trace(c,"OSCache call deferred until Cordova is loaded"),a.ensureNativeReady().then(n),!1)},t.prototype.getCacheName=function(){return"Native Cache"},t.prototype.innerStart=function(e){var t=this;if(this.checkOSCacheAndDeferCall(!0,function(){return t.innerStart(e)})){for(var n=r.getBasePath(),a="/"+r.getHomeModuleName()+"/",s=[],u=0,l=Object.getOwnPropertyNames(e.urlVersions);u<l.length;u++){var f=l[u];s.push(o.buildURLFromVersionedResource(o.replaceBasePath(f,a,n),e.urlVersions[f]))}i.trace(c,"Start Caching... "+s.length+" files: ");for(var d=0;d<s.length;d++)i.trace(c,d+1+"/"+s.length+": "+s[d]);OSCache.startCaching(e.versionToken,s,e.urlMappings,e.urlMappingsNoCache)}},t.prototype.innerSwitch=function(e){var t=this;if(this.checkOSCacheAndDeferCall(!1,function(){return t.innerSwitch(e)}))try{OSCache.switchToVersion(e)}catch(e){i.error(c,e)}},t.OSCacheNotFoundMessage="OSCache not found (is a native plugin missing?)",t}(l),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.requested=0,t.resourceQueue=[],t.count=0,t.total=0,t}return n.__extends(t,e),t.prototype.getCacheName=function(){return"Preloader"},t.prototype.innerStart=function(e){if(!this.isOngoing()&&(this.count=this.requested=this.total=0,this.resources=e.urlVersions,this.resources&&(this.resourceQueue=Object.getOwnPropertyNames(this.resources),this.total=this.resourceQueue.length,!(this.resourceQueue.length<=0))))for(var n=r.getBasePath(),i="/"+r.getHomeModuleName()+"/",o=0;o<t.DefaultWindowSize;++o)this.prefetchNext(i,n)},t.prototype.innerSwitch=function(e){},t.prototype.isOngoing=function(){return this.requested>0||this.resourceQueue.length>0},t.prototype.prefetchNext=function(e,n){var r=this,a=this.resourceQueue.pop(),u=o.buildURLFromVersionedResource(o.replaceBasePath(a,e,n),this.resources[a]);i.trace(c,"Requesting resource: "+u),s.createHttpRequest({method:"GET",url:u}).then(function(i){i.onSuccess=i.onError=i.onTimeout=function(t){!r.onError||t.complete&&200===t.statusCode||r.onError("Failed to load resource '"+u+"' with status: "+t.statusText),r.onProgress&&r.onProgress(++r.count,r.total),r.requested--,0===r.resourceQueue.length&&0===r.requested?r.onFinish&&r.onFinish():r.resourceQueue.length>0&&r.prefetchNext(e,n)},i.setTimeout(t.DefaultResourceTimeout),i.send()}),this.requested++},t.DefaultWindowSize=2,t.DefaultResourceTimeout=2e4,t}(l),h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getCacheName=function(){return"Dummy"},t.prototype.innerStart=function(e){this.onFinish()},t.prototype.innerSwitch=function(e){},t}(l);t.ResourceCache=function(){return"undefined"==typeof document?new h:"undefined"!=typeof applicationCache&&document.documentElement.getAttribute("manifest")?new f:a.isRunningOnNative()?new d:new p}(),t.forceDummyCacheHandler=u}),define("OutSystems/ClientRuntime/VersionsManager",["require","exports","tslib","./ApplicationInfo","./ErrorHandling","./EventDispatcher","./Exceptions","./Flow","./Injector","./Injector/KnownServices","./Logger","./modules/Common/UrlUtils","./modules/Database/IDatabase","./modules/Native/Prebundle","./NativeHelper","./Navigation","./Performance","./RequireManager","./ResourceCache","./Settings","./StorageProvider"],function(e,t,n,r,i,o,a,s,u,c,l,f,d,p,h,g,m,y,v,b,T){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VersionsManager=t.getVersionedUrl=t.buildScriptMap=t.VersionsManagerStorage=t.UpgradeStatus=t.UpgradeFailReason=void 0;!function(e){e[e.Generic=0]="Generic",e[e.Resources=1]="Resources",e[e.DataModel=2]="DataModel"}(t.UpgradeFailReason||(t.UpgradeFailReason={}));!function(e){e[e.Idle=0]="Idle",e[e.Upgrading=1]="Upgrading",e[e.UpgradeSuccess=2]="UpgradeSuccess",e[e.UpgradeFailed=3]="UpgradeFailed"}(t.UpgradeStatus||(t.UpgradeStatus={})),t.VersionsManagerStorage={applicationInfo:new T.StorageObject(T.StorageType.Persistent,"ApplicationInfo"),upgradeStatus:new T.StorageObject(T.StorageType.Session,"UpgradeStatus",0)};var _=function(e,t,n,i){void 0===n&&(n=r.getHomeModuleName),void 0===i&&(i=r.getBasePath);var o="/"+n()+"/",a=i();return Object.keys(e).filter(function(e){return/\.js$/i.test(e)}).reduce(function(t,n){var r=e[n],i=f.replaceBasePath(n,o,a),s=i.split("/"),u=E(s[s.length-1]);return t.hasOwnProperty(u)||(t[u]=f.buildURLFromVersionedResource(i,r)),t},{})};t.buildScriptMap=_;var E=function(e){var t=e.indexOf("__");return-1!==t?e.substring(0,t):e.replace(".js","")},w=function(e){return e.substring(0,e.lastIndexOf("."))},D=function(e,t){return"/"+t+"/"+e},S=function(e,t,n){return n?n[D(e,t)]:void 0},x=function(e,t,n){var r=w(e),i=t?Object.keys(t).filter(function(e){return-1!==e.indexOf(r+"__")}):[];if(n&&i.length>0){var o=i[0].lastIndexOf("__"),a=i[0].substring(o);return""+r+a}return e},I=function(e,t,n,i,o){void 0===n&&(n=!1),void 0===i&&(i=r.getHomeModuleName),void 0===o&&(o=r.getBasePath);var a=i(),s=o(),u=x(e,t,n),c=S(u,a,t);if(c){var l=f.buildURLFromVersionedResource(D(u,a),null!==c&&void 0!==c?c:""),d="/"+a+"/";return f.replaceBasePath(l,d,s)}return u};t.getVersionedUrl=I;var N=function(){function e(){this._isAutoUpgradeDisabled=!1,this.checkedCachedInfoConsistency=!1}return Object.defineProperty(e.prototype,"cachedAppInfo",{get:function(){var n=t.VersionsManagerStorage.applicationInfo.get();if(n&&!this.checkedCachedInfoConsistency){try{e.validateApplicationInfo(n)}catch(e){n=null,t.VersionsManagerStorage.applicationInfo.remove()}this.checkedCachedInfoConsistency=!0}return n},set:function(e){t.VersionsManagerStorage.applicationInfo.set(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentAppInfo",{get:function(){return this.pendingAppInfo?this.pendingAppInfo:this.cachedAppInfo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"upgradeStatus",{get:function(){return t.VersionsManagerStorage.upgradeStatus.get()},set:function(e){t.VersionsManagerStorage.upgradeStatus.set(e)},enumerable:!1,configurable:!0}),e.prototype.initialize=function(e,n){var i=this;l.trace("VersionsManager","Initializing VersionsManager"),this.onVersionReady=n.onVersionReady||function(){},this.onUpgradeFinished=n.onUpgradeFinished||function(e){},this.onNewVersionDetected=!this.isUpgradeDisabled&&n.onNewVersionDetected||function(e){return Promise.resolve(null)};var o=n.onAppInfoReady||function(e){};return this.initialUpgradeStatus=this.upgradeStatus,r.getHomeModuleName()?(this.enableBackgroundCheckForNewVersions(),this.fetchApplicationManifest().then(function(n){var r=n.manifest,a=n.isFromPrebundle;if(i.pendingAppInfo=r,o(r),y.configure(t.buildScriptMap(r.manifest.urlVersions,r.manifest.versionToken)),i.isNewVersion(r.manifest,a)){if(!i.isUpgradeDisabled&&i.usingStaleIndex(r))return g.reloadCurrentLocation(!0),l.trace("VersionsManager","Reloading application - index.html was changed in the server"),!1;i.upgrade(r,e)}else i.initDataModel(e);return!0})):Promise.reject(Error("Home module not defined!"))},e.prototype.initDataModel=function(e){var t=this;l.trace("VersionsManager","Initializing data model"),e.then(function(e){return t.upgradeDataModel(e).then(function(){return t.switchDataModel(e)}).then(function(){t.onVersionReady()})}).then(function(){return t.setUpgradeStatus(0)}).catch(function(e){return t.handleInitError(e)})},e.prototype.cacheResourcesInBackground=function(e){var t=this;return l.trace("VersionsManager","Caching resources in the background..."),this.fetchApplicationManifest(!1).then(function(n){var r=n.manifest,i=n.isFromPrebundle,o=t.usingStaleIndex(r);if(e&&e(o),g.forceReloadOnNextNavigation(o),t.isNewVersion(r.manifest,i))return t.upgradeResources(r)}).catch(function(e){return l.trace("VersionsManager","Error caching resources for new version in the background: "+e)})},e.prototype.getResourceVersionToken=function(e,t){
if(this.currentAppInfo)return S(e,t,this.currentAppInfo.manifest.urlVersions)},e.prototype.isNewVersion=function(e,t){var n=e.versionToken,r=this.getLastApplicationVersionToken(),i=n!==r;if(this.canDisableNativeAutoUpgrade){var o=this.isAutoUpgradeDisabled,a=i&&(!o||t);return l.trace(this,function(){return i?"Version check found a new version '"+n+"' from "+(t?"prebundle":"server")+" with auto-upgrade "+(o?"disabled":"enabled")+" and decided it is "+(a?"":"not ")+"upgradable. Current version has token '"+r+"'":"Version check found the same version '"+n+"'."}),a}return i},e.prototype.getLastApplicationVersionToken=function(e){if(void 0===e&&(e=!1),e&&this.pendingAppInfo)return this.pendingAppInfo.manifest.versionToken;var t=this.cachedAppInfo;return t?t.manifest.versionToken:""},e.prototype.getVersionToken=function(e,t){return this.getResourceVersionToken(e,t)},e.prototype.getVersionedUrl=function(e){var n,r,i,o;return t.getVersionedUrl(e,null===(r=null===(n=this.currentAppInfo)||void 0===n?void 0:n.manifest)||void 0===r?void 0:r.urlVersions,null===(o=null===(i=this.currentAppInfo)||void 0===i?void 0:i.manifest)||void 0===o?void 0:o.cdnUrlVersioning)},e.getJSONParseErrorMessage=function(e){return void 0===e&&(e=""),"Error parsing manifest JSON "+(e?", missing or invalid field: "+e+".":".")},e.validateApplicationInfo=function(e){if(!e)throw Error(this.getJSONParseErrorMessage());if(!e.manifest)throw Error(this.getJSONParseErrorMessage("manifest"));var t=e.manifest;if(!t.versionToken||"string"!=typeof t.versionToken)throw Error(this.getJSONParseErrorMessage("manifest.versionToken"));if(!t.urlVersions||"object"!=typeof t.urlVersions)throw Error(this.getJSONParseErrorMessage("manifest.urlVersions"));if(!t.urlMappings||"object"!=typeof t.urlMappings)throw Error(this.getJSONParseErrorMessage("manifest.urlMappings"));if(!t.urlMappingsNoCache||"object"!=typeof t.urlMappingsNoCache)throw Error(this.getJSONParseErrorMessage("manifest.urlMappingsNoCache"));if(!e.data)throw Error(this.getJSONParseErrorMessage("data"));var n=e.data;if(!n.modules||"object"!=typeof n.modules)throw Error(this.getJSONParseErrorMessage("data.modules"))},e.prototype.getLatestVersionFromServer=function(e){return void 0===e&&(e=!1),n.__awaiter(this,void 0,void 0,function(){var t;return n.__generator(this,function(n){switch(n.label){case 0:return[4,e&&OSManifestLoader.prefetchedVersion||OSManifestLoader.getLatestVersion({sendEnvParam:b.getEnvParams().SendEnvParamOnManifestRequest})];case 1:return t=n.sent(),this.canDisableNativeAutoUpgrade&&(this._isAutoUpgradeDisabled=t.isAutoUpgradeDisabled),[2,t]}})})},e.prototype.checkForNewVersion=function(){var e=this;this.isUpgradeDisabled||this.isUpgradingVersion||!t.VersionsManagerStorage.applicationInfo.isDefined()||this.getLatestVersionFromServer(!1).then(function(t){e.getLastApplicationVersionToken()===t.versionToken||e.isAutoUpgradeDisabled||e.onNewVersionDetected(!1,e.isAutoUpgradeDisabled)},function(e){l.trace("VersionsManager","Error checking for new version: "+e)})},e.prototype.upgrade=function(e,t){var n=this;l.trace("VersionsManager","New application version detected, starting upgrade..."),this.setUpgradeStatus(1);var r=this.supportsResourceCache().then(function(t){return t?n.upgradeResources(e).catch(function(e){return n.handleUpgradeError(e,1,Promise.resolve(void 0))}):Promise.resolve()}),i=t.then(function(e){return n.upgradeDataModel(e)}).catch(function(e){return n.handleUpgradeError(e,2,r)});Promise.all([r,i]).then(function(){1===n.upgradeStatus&&n.commitNewVersion(e,t).then(function(e){e&&n.onVersionReady()})}).catch(function(e){return n.handleUpgradeError(e)})},e.prototype.supportsResourceCache=function(){return n.__awaiter(this,void 0,void 0,function(){var e,t,i;return n.__generator(this,function(n){switch(n.label){case 0:return r.isWebApplication()?(e=!!r.getHomeModuleDefinition().splashScreenName,l.trace("VersionsManager","Web app - Resource pre-caching is "+(e?"enabled":"disabled")),[2,e]):[3,1];case 1:return[4,this.serviceWorkerIsAvailable()];case 2:return t=n.sent(),i=h.isRunningOnNative()||!t,l.trace("VersionsManager","Mobile app - Pre-caching resources with "+(i?"Resource Cache":"Service Worker")),[2,i]}})})},e.prototype.serviceWorkerIsAvailable=function(){return n.__awaiter(this,void 0,void 0,function(){var e,t;return n.__generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),"serviceWorker"in navigator?[4,navigator.serviceWorker.getRegistrations()]:[2,!1];case 1:return e=n.sent(),[2,null!==e];case 2:return t=n.sent(),[2,!1];case 3:return[2]}})})},e.prototype.commitNewVersion=function(e,t){var n=this;return t.then(function(e){return n.switchDataModel(e)}).then(function(){return n.switchResourcesVersion(e.manifest.versionToken)}).then(function(){var t=!n.cachedAppInfo;return n.cachedAppInfo=e,n.setUpgradeStatus(t?0:2),!0})},e.prototype.upgradeResources=function(e){return m.start("VersionsManager upgradeResources"),s.tryFinally(function(){return v.ResourceCache.start(e.manifest)},function(){return m.end("VersionsManager upgradeResources")})},e.prototype.upgradeDataModel=function(e){var t=this;return m.start("VersionsManager upgradeDataModel"),d.instanceOfIDatabase(e)?(l.trace("VersionsManager","Initializing data model on IndexedDB database."),s.tryFinally(function(){return n.__awaiter(t,void 0,void 0,function(){var t,r,i,o,a;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.getAllEntityModules()];case 1:for(t=n.sent(),r=u.default.resolve(c.ServiceNames.EntityService),i=0,o=t;i<o.length;i++)a=o[i],r.registerInitializer(a.getEntityInfos());return[4,e.initialize()];case 2:return n.sent(),[2]}})})},function(){return m.end("VersionsManager upgradeDataModel")})):(l.trace("VersionsManager","Initializing data model on SQLite/WebSQL database."),s.tryFinally(function(){return t.doForEachClientEntitiesModule(e,function(e,t){return t.init(e)})},function(){return m.end("VersionsManager upgradeDataModel")}))},e.prototype.getAllEntityModules=function(){var e=[],t=r.getClientEntitiesModules();if(t)for(var n=0,i=t;n<i.length;n++){var o=i[n];!function(t){l.trace("VersionsManager","Fetching entity module '"+t+"'."),e.push(new Promise(function(e,n){y.loadModule([t],function(t){return e(t)},n)}))}(o)}return Promise.all(e)},e.prototype.doForEachClientEntitiesModule=function(e,t){return e.isMock?Promise.resolve():this.getAllEntityModules().then(function(n){return e.executeTransaction(function(e){return e.feed(null).andThenAll(function(e){return n.map(function(e){return function(n){return t(n,e)}})})})})},e.prototype.switchResourcesVersion=function(e){v.ResourceCache.switch(e)},e.prototype.switchDataModel=function(e){return d.instanceOfIDatabase(e)?(l.trace("VersionsManager","Finishing initialization of data model on IndexedDB database."),e.initializerCleanup()):(l.trace("VersionsManager","Finishing initialization of data model on SQLite/WebSQL database."),this.doForEachClientEntitiesModule(e,function(e,t){return t.switch(e)}))},e.prototype.handleInitError=function(e){var t=this.isUpgradeDisabled?"Upgrade failed and rollback isn't possible at this time":"Unable to load the data model";l.error("VersionsManager",t,e),i.handleError(e)},e.prototype.handleUpgradeError=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Promise.resolve(void 0)),a.isInstanceOf(e,a.Exceptions.OpenDatabaseException)?(l.error("VersionsManager","Upgrade failed - unable to open the database.",e),i.handleError(e),Promise.resolve(void 0)):g.hasPendingReload()||3===this.initialUpgradeStatus?3===this.initialUpgradeStatus?(i.handleError(e),Promise.resolve(void 0)):(l.trace("VersionsManager","Upgrade failed - ignoring error due to concurrent navigation."),3!==this.upgradeStatus&&this.setUpgradeStatus(0),Promise.resolve(void 0)):(l.error("VersionsManager","Upgrade failed - rolling back to previous application version.",e),this.rollBackApplicationVersion(t,n))},Object.defineProperty(e.prototype,"isUpgradingVersion",{get:function(){return 1===this.upgradeStatus},enumerable:!1,configurable:!0}),e.prototype.setUpgradeStatus=function(e,t){return void 0===t&&(t=0),this.upgradeStatus=e,l.trace("VersionsManager","Upgrade status changed to: "+e),2===e?this.onUpgradeFinished(!0):3===e?this.onUpgradeFinished(!1,t):void 0},e.prototype.rollBackApplicationVersion=function(e,t){var n=this;return this.loadCachedManifest().then(function(r){var i=r.manifest;if(n.setUpgradeStatus(3,e),1!==e)return t.then(function(){return v.ResourceCache.start(i.manifest)})}).then(function(){g.reloadApplication(!1)}).catch(function(e){i.handleError(e)})},Object.defineProperty(e.prototype,"isUpgradeDisabled",{get:function(){return 3===this.upgradeStatus},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAutoUpgradeDisabled",{get:function(){return this._isAutoUpgradeDisabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canDisableNativeAutoUpgrade",{get:function(){return b.getEnvParams().CanDisableAutoUpgrade&&h.isRunningOnNative()&&this.isRunningCachedIndex()},enumerable:!1,configurable:!0}),e.prototype.isRunningCachedIndex=function(){var e=OSManifestLoader.indexVersionToken,t=this.getIndexVersion(this.cachedAppInfo);return!!t&&e===t},e.prototype.usingStaleIndex=function(e){return!g.currentLocationHasTimestamp()&&(OSManifestLoader.indexVersionToken||this.getIndexVersion(this.cachedAppInfo))!==this.getIndexVersion(e)},e.prototype.getIndexVersion=function(e){if(!e)return"";var t=S("index.html",r.getHomeModuleName(),e.manifest.urlVersions);return t?t.substring(1):""},e.prototype.loadCachedManifest=function(){var e;return n.__awaiter(this,void 0,void 0,function(){var t,r,i,o,a,s,u,c,f;return n.__generator(this,function(n){switch(n.label){case 0:if(!this.canDisableNativeAutoUpgrade)return[3,11];t=this.innerLoadPrebundledManifest(),r=this.innerLoadCachedManifest(),i=null,o=null,a=null,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,t];case 2:return i=n.sent(),[3,4];case 3:return s=n.sent(),l.trace(this,"Error loading prebundled manifest: "+(null!==(e=null===s||void 0===s?void 0:s.message)&&void 0!==e?e:s)),[3,4];case 4:return n.trys.push([4,6,,7]),[4,r];case 5:return o=n.sent(),[3,7];case 6:return u=n.sent(),a=u,[3,7];case 7:return n.trys.push([7,9,,10]),[4,this.innerLoadCachedManifest()];case 8:return o=n.sent(),[3,10];case 9:return c=n.sent(),a=c,[3,10];case 10:if(!i||!i.manifest.versionSequence){if(o)return[2,{manifest:o,isFromPrebundle:!1}];throw a}return o?[2,o.manifest.versionSequence>=i.manifest.versionSequence?{manifest:o,isFromPrebundle:!1}:{manifest:i,isFromPrebundle:!0}]:[2,{manifest:i,isFromPrebundle:!0}];case 11:return[4,this.innerLoadCachedManifest()];case 12:return f=n.sent(),[2,{manifest:f,isFromPrebundle:!1}]}})})},e.prototype.innerLoadCachedManifest=function(){return n.__awaiter(this,void 0,void 0,function(){var t;return n.__generator(this,function(n){switch(n.label){case 0:return[4,this.ensureCachedManifest()];case 1:return n.sent(),this.cachedAppInfo?[2,this.cachedAppInfo]:[3,2];case 2:return[4,OSManifestLoader.getCachedManifest({sendEnvParam:b.getEnvParams().SendEnvParamOnManifestRequest})];case 3:return t=n.sent(),e.validateApplicationInfo(t),[2,t]}})})},e.prototype.innerLoadPrebundledManifest=function(){return p.getManifest()},e.prototype.ensureCachedManifest=function(){return h.isRunningOnNative()||this.cachedAppInfo?Promise.resolve(void 0):(this.setUpgradeStatus(0),Promise.reject(new Error("No cached manifest found. It's not possible to rollback to a previous version.")))},e.prototype.getLatestManifestFromServer=function(t){return n.__awaiter(this,void 0,void 0,function(){var r;return n.__generator(this,function(n){switch(n.label){case 0:return[4,OSManifestLoader.getLatestManifest(t,{sendEnvParam:b.getEnvParams().SendEnvParamOnManifestRequest})];case 1:return r=n.sent(),e.validateApplicationInfo(r),[2,{manifest:r,isFromPrebundle:!1}]}})})},e.prototype.fetchApplicationManifest=function(e){var t=this;return void 0===e&&(e=!0),m.start("VersionsManager fetchApplicationManifest"),this.isUpgradeDisabled?this.loadCachedManifest():this.getLatestVersionFromServer(e).then(function(e){return t.isNewVersion(e,!1)?t.getLatestManifestFromServer(e.versionToken):t.loadCachedManifest()}).catch(function(){return t.loadCachedManifest()}).then(function(e){return m.end("VersionsManager fetchApplicationManifest"),e})},e.prototype.enableBackgroundCheckForNewVersions=function(){var e=this,t=!1;o.EventDispatcher.listen(o.EventType.NavigationStart,function(){return t=!0}),o.EventDispatcher.listen(o.EventType.TransitionEnd,function(){t=!1,setTimeout(function(){t||e.checkForNewVersion()},1e3)})},e}();t.VersionsManager=N;var A=new N;t.default=A}),define("OutSystems/ClientRuntime/Application",["require","exports","module","tslib","./ApplicationInfo","./ClientInfo","./Communication","./CookiesManager","./CSSHelper","./Database","./DataTypes","./Entities","./ErrorHandling","./Exceptions","./FeedbackMessageService","./Flow","./Injector","./Injector/KnownServices","./Logger","./modules/ClientVariables/LocalStorageClientVariablesService","./modules/Database/IDatabase","./modules/Database/IndexedDB/IndexedDBDatabase","./modules/Database/IndexedDB/IndexedDBEntityService","./modules/Database/WebSQL/WebSQLDatabase","./modules/Database/WebSQL/WebSQLEntityService","./modules/LocaleService/LocaleService","./modules/LogTable/LogDatabaseStorage","./modules/MappingWithDefault/MappingWithDefaultService","./modules/PersistentKeyValue/PersistentKeyValueStorage","./NativeApplicationInfo","./NativeHelper","./NativeHttp","./NativeLogger","./Navigation","./Performance","./RequireManager","./RolesInfo","./ScreenStateCache","./Settings","./StorageProvider","./Transitions","./VersionsManager"],function(e,t,n,r,i,o,a,s,u,c,l,f,d,p,h,g,m,y,v,b,T,_,E,w,D,S,x,I,N,A,O,C,R,L,M,P,F,V,j,U,B,k){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Application=t.ApplicationStorage=void 0;t.ApplicationStorage={hasRenderedSplashInSession:new U.StorageObject(U.StorageType.Session,"HasRenderedSplashInSession",!1),pendingUpgradeFeedback:new U.StorageObject(U.StorageType.Session,"PendingUpgradeFeedback")};var q=function(){function e(){this.showingSplashScreen=!1,this.logDatabaseStorage=null}return e.prototype.setApplicationDefinition=function(e){i.setApplicationDefinition(e);var t=O.isRunningOnNative()?e.environmentKey+"_"+e.applicationKey:e.applicationName;i.setDatabaseName(t)},e.prototype.initializeLogger=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t,n,i;return r.__generator(this,function(r){switch(r.label){case 0:e=a.NetworkStatus,t=a.postLog,r.label=1;case 1:return r.trys.push([1,5,,6]),[4,O.ensureNativeReady()];case 2:return r.sent(),R.NetworkStatus.isOnline()?[4,A.getNativeShellVersion()]:[3,4];case 3:n=r.sent(),A.isVersionGreaterOrEqualTo(n,"2.7.3")&&(e=R.NetworkStatus,t=R.postLog),r.label=4;case 4:return[3,6];case 5:return i=r.sent(),[3,6];case 6:return v.setNetworkStatusChecker(e),v.setPostLogsFunction(t),v.enableFallbackStorage(),[2]}})})},e.prototype.initializeCookiesManager=function(){return r.__awaiter(this,void 0,void 0,function(){var e,t;return r.__generator(this,function(n){switch(n.label){case 0:return[4,C.isNativeHttpPluginAvailable()];case 1:return e=n.sent(),e?[4,C.getNativeHttpPlugin()]:[3,3];case 2:t=n.sent(),s.initialize(t),n.label=3;case 3:return[2]}})})},e.prototype.initialize=function(e,t,n,o,s){var u=this;void 0===t&&(t=0),M.start("Application initialize");var c,f;return g.tryCatchFinally(function(){return r.__awaiter(u,void 0,void 0,function(){var u,d,h,g,T,_,w,x,N=this;return r.__generator(this,function(r){switch(r.label){case 0:return v.trace("Application","Initializing Application"),f=this.initializeCookiesManager(),c=this.initializeLogger(),this.setApplicationDefinition(e),U.setDefaultStorageNamespace(i.getHomeModuleName()),a.initialize(i.isDebugEnabled(),i.getUserCookieName(),function(e,t){return N.onNewVersionDetected(e,t)}),P.setErrorHandler(function(e){if(k.default.isUpgradingVersion&&!p.isSystem(e))return v.trace("Application","RequireJS error during upgrade, treating as an upgrade error."),void k.default.handleUpgradeError(e,1);N.handleError(e)}),V.ScreenStateCache.clear(),B.setDefaultTransition(i.getDefaultTransition()),n&&(l.Constants.FORMAT.dateTimeFormat=n),o&&(l.Constants.FORMAT.numberFormat=o),[4,f];case 1:return r.sent(),[4,c];case 2:return r.sent(),(m.default.register(y.ServiceNames.ClientVariablesService,function(){return new b.default(e.userProviderName)}),j.getEnvParams().IndexedDBOffline&&!O.isRunningOnNative()?m.default.register(y.ServiceNames.EntityService,function(){return new E.default}):j.getEnvParams().UseNewWebSQLImpl&&O.isRunningOnNative()&&m.default.register(y.ServiceNames.EntityService,function(){return new D.default}),m.default.register(y.ServiceNames.TranslationsService,function(){return new I.default}),m.default.register(y.ServiceNames.LocaleService,function(){return new S.default(i.getHomeModuleName())}),1===t)?[2,!0]:(u=F.initializeRolesFromServer(),d=this.initializeDatabase(),h=!1,g=function(){h=!0},T=new Promise(function(e){if(h)e();else{var t=g;g=function(){t(),e()}}}),_=T.then(function(){return N.triggerApplicationReadyEvent()}),w={onVersionReady:function(){return d.then(function(e){return N.onDatabaseReady(e)}).then(function(){return T}).then(function(){return _}).then(function(){return N.onApplicationReady()})},onUpgradeFinished:function(e,t){return N.onUpgradeFinished(e,t)},onNewVersionDetected:function(e,t){return N.onNewVersionDetected(e,t)},onAppInfoReady:function(e){return N.onAppInfoReady(e)}},[4,k.default.initialize(d,w)]);case 3:return x=r.sent(),x?[4,u]:[3,7];case 4:return r.sent(),s?[4,s()]:[3,6];case 5:r.sent(),r.label=6;case 6:g(),r.label=7;case 7:return[2,x]}})})},function(e){return g.tryFinally(function(){return c},function(){if(0!==t)throw e;u.handleError(e)})},function(){return M.end("Application initialize")})},e.prototype.triggerApplicationReadyEvent=function(){var e=this,t=i.getHomeModuleControllerName();if(t)return v.trace("Application","Calling application ready event handler for "+i.getHomeModuleName()),new Promise(function(e,n){P.loadModule([t],e,n)}).then(function(e){return e.default.fireApplicationReady()}).catch(function(t){e.handleError(t)})},e.prototype.initializeDatabase=function(){var e=this;v.trace("Application","Initializing application database.");var t,n,o=i.isWebApplication(),a=O.isRunningOnNative(),s=j.getEnvParams().IndexedDBOffline,u=j.getEnvParams().UseNewWebSQLImpl;if(o||"28f21196-030a-4be2-8241-5a4888fb3ca5"===i.getHomeModuleKey())v.trace("Application","Initializing database mock for NativeAppBuilder."),t=c.SqlDbProvider.mockDb(i.getDatabaseName());else if(!a&&!s||a&&!u)v.trace("Application","Initializing SQLite/WebSQL database service."),t=c.SqlDbProvider.openDb(i.getDatabaseName()).then(function(e){return e.testConnection().then(function(){return e.executeTransaction(function(t){return f.LogTable.initialize(t,e).andThen(function(t){return f.PersistentKeyValue.initialize(t,e).andThen(function(){n=f.PersistentKeyValue.storage})}).andThen(function(e){return f.webSQLStorageInstance.initMetamodel(e)}).andThen(function(){return e})})})});else{var l=void 0;a?l=w.default.open(i.getDatabaseName()):(i.setDatabaseName(i.getEnvironmentKey()+"-"+i.getUserProviderName()),l=_.default.open(i.getDatabaseName(),function(){return e.onNewVersionDetected(!0)})),t=l.then(function(t){return r.__awaiter(e,void 0,void 0,function(){var e;return r.__generator(this,function(r){switch(r.label){case 0:return v.trace("Application","Initializing log database storage"),this.logDatabaseStorage=new x.default(t),[4,this.logDatabaseStorage.initialize()];case 1:return r.sent(),v.trace("Application","Initializing persistent key value storage"),n=new N.default(t),v.trace("Application","Initializing entity service"),e=m.default.resolve(y.ServiceNames.EntityService),e.setDatabase(t),[2,t]}})})})}return t.then(function(e){return F.initialize(n).then(function(){return v.trace("Application","Application database initialized successfuly."),e})})},e.prototype.onDatabaseReady=function(e){if(T.instanceOfIDatabase(e)){m.default.resolve(y.ServiceNames.EntityService).setReady(),this.logDatabaseStorage&&v.setOfflineStorage(this.logDatabaseStorage)}else f.webSQLStorageInstance.initDb(e);v.trace("Application","Database initialized successfully")},e.prototype.onNewVersionDetected=function(e,t){var n=this;t=(null!==t&&void 0!==t?t:k.default.isAutoUpgradeDisabled)&&O.isRunningOnNative(),v.trace("Application","New version detected, currentViewHasChanged = "+e);var r=!0,i=function(e){r=e};if(e){this.disableDocument();var o=function(){return L.changeWindowLocation(L.buildApplicationRelativeUrl(),r,!0)},a=function(e){return e.getApplicationUpgradeRequiredMessage(n.canLoseDataInUpgrade())};this.showFeedbackMessage(a,2,"upgrade-required",t?null:o).then(function(){return h.setEnabled(!1)})}return t?Promise.resolve():k.default.cacheResourcesInBackground(i)},e.prototype.onAppInfoReady=function(e){try{M.start("Application onAppInfoReady"),this.updateHasTracingEnabled(e),this.updateApplicationDefaultTimeout(e),this.updateApplicationInfo(e),this.updateClientInfo(),this.updateLoggerDetails()}finally{M.end("Application onAppInfoReady")}},e.prototype.updateHasTracingEnabled=function(e){v.setTracingEnabled(e.data.hasTracingEnabled)},e.prototype.updateApplicationDefaultTimeout=function(e){i.setApplicationDefaultTimeout(e.data.applicationDefaultTimeout)},e.prototype.updateApplicationInfo=function(e){i.setModules(e.data.modules),i.setClientEntitiesModules(e.data.entityModuleNames)},e.prototype.updateClientInfo=function(){O.ensureNativeReady().then(function(){return o.setClientInfo()}).catch(function(e){return v.trace("","Client info update failed: "+e)})},e.prototype.updateLoggerDetails=function(){var e=O.isRunningOnNative();v.setDeviceDetails(e)},e.prototype.shouldRenderSplashScreen=function(){var e=i.getHomeModuleDefinition();return e.splashScreenName&&e.splashScreenName.length>0&&!t.ApplicationStorage.hasRenderedSplashInSession.get()},e.prototype.disableDocument=function(){var e=document.createElement("div");e.classList.add("background-backdrop"),document.body.classList.add("disable-scroll"),document.body.appendChild(e)},e.prototype.canLoseDataInUpgrade=function(){return document.getElementsByTagName("form").length>0},e.prototype.onUpgradeFinished=function(e,n){v.trace("Application","Upgrade "+(e?"finished successfully":"failed with reason: "+n));var r={success:e,failReason:n};e&&!this.isShowingSplashScreen?this.showUpgradeFeedback(r):t.ApplicationStorage.pendingUpgradeFeedback.set(r)},e.prototype.waitForAppReady=function(){var e=this;return this.isReady?Promise.resolve(void 0):(this.appReadyPromise||(this.appReadyPromise=new Promise(function(t){e.onReady=function(){return t()}})),this.appReadyPromise)},e.prototype.onApplicationReady=function(){v.trace("Application","Application ready"),M.end("Application ready"),v.flushLogsToServerIfOnline(),this.isReady=!0,this.onReady&&(this.onReady(),this.onReady=null)},e.prototype.onBeforeNavigation=function(e,t){return!!L.onBeforeNavigate(e,t)&&(u.setIgnoreLoadErrors(!0),!0)},e.prototype.onAfterNavigation=function(){if(u.setIgnoreLoadErrors(!1),!this.isShowingSplashScreen&&!L.hasPendingReload()){v.trace("Application","Navigated to: "+L.getCurrentLocation().href);var e=t.ApplicationStorage.pendingUpgradeFeedback.get();e&&(this.showUpgradeFeedback(e),t.ApplicationStorage.pendingUpgradeFeedback.remove())}},e.prototype.showUpgradeFeedback=function(e){var t,n,r;if(e.success)n=0,t=function(e){return e.getApplicationUpgradeCompleteMessage()},r="upgrade-success";else switch(n=2,r="upgrade-error",e.failReason){case 1:t=function(e){return e.getApplicationUpgradeFailedOnResourcesMessage()};break;case 2:t=function(e){return e.getApplicationUpgradeFailedOnDataModelMessage()};break;default:t=function(e){return e.getApplicationUpgradeFailedUnknownMessage()}}this.showFeedbackMessage(t,n,r)},e.prototype.showFeedbackMessage=function(e,t,n,r){return void 0===n&&(n=""),new Promise(function(o){var a=i.getHomeModuleLanguageResourcesName();P.loadModule([a],function(i){var a=e(i);a&&h.showFeedbackMessage(a,t,!0,n,!0,r),o()})})},Object.defineProperty(e.prototype,"isShowingSplashScreen",{get:function(){return this.showingSplashScreen},set:function(e){e&&t.ApplicationStorage.hasRenderedSplashInSession.set(!0),this.showingSplashScreen=e},enumerable:!1,configurable:!0}),e.prototype.handleError=function(e,t){d.handleError(e,t)},e.prototype.exit=function(){return!O.isRunningOnNative()||O.exitApp()},e.prototype.registerDefaultErrorHandler=function(e){return m.default.register(y.ServiceNames.GlobalExceptionHandler,e)},e}();t.Application=q;var z=new q;t.default=z,L.VersionedURL.setUrlVersionProvider(k.default.getVersionedUrl.bind(k.default)),z.default=z,z.ApplicationStorage=t.ApplicationStorage,n.exports=z}),define("OutSystems/ClientRuntime/RolesService",["require","exports","./RolesInfo"],function(e,t,n){"use strict";function r(e){return!!n.RolesInfoStorage.rolesInfo.isDefined()&&n.RolesInfoStorage.rolesInfo.get().indexOf(e)>=0}Object.defineProperty(t,"__esModule",{value:!0}),t.getUserId=t.checkRole=void 0,t.checkRole=r,t.getUserId=n.getUserId}),define("OutSystems/ClientRuntime/Public",["require","exports","./Application","./ApplicationInfo","./BuiltinFunctions","./Controller","./FeedbackMessageService","./Injector","./Injector/KnownServices","./Logger","./NativeHelper","./Navigation","./ResourceCache","./RolesService","./Transitions","./VersionsManager"],function(e,t,n,r,i,o,a,s,u,c,l,f,d,p,h,g){"use strict";function m(e,t){c.log("Public","'"+e+"' is deprecated and will be removed on the next version. Consider using '"+t+"' instead.")}function y(){return o.BaseViewController.activeScreen?o.BaseViewController.activeScreen.modelContext:{viewName:"",navigatedFromHistory:!1,viewWasRestoredFromCache:!1}}Object.defineProperty(t,"__esModule",{value:!0}),t.Branding=t.ApplicationLoad=t.ApplicationContext=t.View=t.Logger=t.Navigation=t.ApplicationLifecycle=t.Device=t.Validation=t.FeedbackMessage=t.FeedbackMessageType=t.Security=t.BuiltinFunctions=void 0,t.BuiltinFunctions=i;!function(e){function t(e){return p.checkRole(e)}e.checkIfCurrentUserHasRole=t}(t.Security||(t.Security={}));var v;!function(e){e[e.Info=0]="Info",e[e.Success=1]="Success",e[e.Warning=2]="Warning",e[e.Error=3]="Error"}(v=t.FeedbackMessageType||(t.FeedbackMessageType={}));!function(e){function t(e){switch(e){case v.Info:return 0;case v.Success:return 1;case v.Warning:return 2;case v.Error:return 3;default:throw new Error("Don't know how to convert "+e)}}function n(e,n,r,i,o,s){return void 0===r&&(r=!0),void 0===o&&(o=!0),a.showFeedbackMessage(e,t(n),r,i,o,s)}function r(){return a.closeFeedbackMessage()}e.showFeedbackMessage=n,e.closeFeedbackMessage=r}(t.FeedbackMessage||(t.FeedbackMessage={}));var b=function(){function e(e){this._model=e}return e.prototype.setWidgetAsInvalid=function(e,t){var n=this._model.widgets.get(e);n.validAttr=!1,n.validationMessageAttr=t},e.prototype.setWidgetAsValid=function(e){var t=this._model.widgets.get(e);t.validAttr=!0,t.validationMessageAttr=""},e.prototype.isWidgetValid=function(e){return!0===this._model.widgets.get(e).validAttr},e}();t.Validation=b;!function(e){function t(){return l.whenDeviceReady}e.whenReady=t}(t.Device||(t.Device={}));var T;!function(e){function t(){return g.default.isUpgradingVersion}function r(e){c.trace("ApplicationLifecycle","Registering listeners for the application load process."),e&&(e.onLoadComplete&&n.default.waitForAppReady().then(function(){return e.onLoadComplete()}),e.onUpgradeProgress&&d.ResourceCache.listen(null,null,function(t,n){return e.onUpgradeProgress(t,n)}))}e.isUpgradingVersion=t,e.listen=r}(T=t.ApplicationLifecycle||(t.ApplicationLifecycle={}));var _=function(){function e(e){this._context=e}return e.prototype.navigateTo=function(e,t,n){f.navigateTo(e,this.getTransitionObject(t,h.Default),this._context,!1,n)},e.prototype.navigateBack=function(e){f.navigateBack(this.getTransitionObject(e),this._context,!1)},e.prototype.navigateForward=function(e){f.navigateForward(this.getTransitionObject(e),this._context,!1)},e.prototype.navigatedFromHistory=function(){return y().navigatedFromHistory},e.prototype.registerBackNavigationHandler=function(e){return f.registerBackNavigationHandler(e)},e.prototype.unregisterBackNavigationHandler=function(e){f.unregisterBackNavigationHandler(e)},e.prototype.getTransitionObject=function(e,t){return void 0===t&&(t=null),h.createTransition(e,t)},e}();t.Navigation=_;!function(e){function t(e,t){c.log(e,t)}function n(e,t,n){c.error(e,t,n)}e.log=t,e.error=n}(t.Logger||(t.Logger={}));var E=function(){function e(e){this._model=e}return Object.defineProperty(e,"ActiveScreenCssClass",{get:function(){return"active-screen"},enumerable:!1,configurable:!0}),e.prototype.getCurrentScreenRootElement=function(){return document.querySelector("."+e.ActiveScreenCssClass)},e.prototype.render=function(){return new Promise(function(e){requestAnimationFrame(function(){setTimeout(e,1)})})},e.prototype.wasCurrentViewRestoredFromCache=function(){return!!this._model&&this._model.context.viewWasRestoredFromCache},e.prototype.registerDeviceClassGetter=function(e){return s.register(u.ServiceNames.DeviceHelperClassProvider,function(){return e})},e}();t.View=E;var w=function(){function e(){}return e.getCurrentScreenDefinition=function(){var e=o.BaseViewController.activeScreen;if(e){var t=r.getModuleFromKey(r.getHomeModuleKey());if(t)return r.getScreenDefinitionFromScreenName(t,e.viewName)}return null},e.getCurrentContext=function(){var t=e.getCurrentScreenDefinition();return{applicationKey:r.getApplicationKey()||"",applicationName:r.getApplicationName()||"",moduleKey:r.getHomeModuleKey()||"",moduleName:r.getHomeModuleName()||"",screenKey:t?t.screenKey:"",screenName:t?t.screenName:""}},e}();t.ApplicationContext=w;var D=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"isUpgradingVersion",{get:function(){return m("ApplicationLoad.isUpgradingVersion","ApplicationLifecycle.isUpgradingVersion()"),T.isUpgradingVersion()},enumerable:!1,configurable:!0}),e.listen=function(e){m("ApplicationLoad.listen()","ApplicationLifecycle.listen()"),T.listen(e)},e}();t.ApplicationLoad=D;!function(e){function t(){return r.showWatermark()}e.showOutSystemsWatermark=t}(t.Branding||(t.Branding={}))}),define("OutSystems/ClientRuntime/PublicApiHelper",["require","exports","./BuiltinFunctions","./Public"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PublicApiHelper=void 0;var i=function(){function e(e,t){this._model=e,this._navigationContext=t}return Object.defineProperty(e.prototype,"BuiltinFunctions",{get:function(){return n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Validation",{get:function(){return this._validation||(this._validation=new r.Validation(this._model)),this._validation},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"FeedbackMessage",{get:function(){return r.FeedbackMessage},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Device",{get:function(){return r.Device},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Security",{get:function(){return r.Security},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ApplicationLifecycle",{get:function(){return r.ApplicationLifecycle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ApplicationContext",{get:function(){return r.ApplicationContext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ApplicationLoad",{get:function(){return r.ApplicationLoad},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Navigation",{get:function(){
return this._navigation||(this._navigation=new r.Navigation(this._navigationContext)),this._navigation},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Logger",{get:function(){return r.Logger},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"View",{get:function(){return this._view||(this._view=new r.View(this._model)),this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Branding",{get:function(){return r.Branding},enumerable:!1,configurable:!0}),e}();t.PublicApiHelper=i}),define("OutSystems/ClientRuntime/WidgetNaming",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WidgetIdService=t.NamespaceKind=void 0;var n;!function(e){e[e.Block=0]="Block",e[e.IteratorItem=1]="IteratorItem",e[e.None=2]="None"}(n=t.NamespaceKind||(t.NamespaceKind={}));var r="-",i=function(){function e(e,t,i,o){switch(void 0===t&&(t=""),void 0===i&&(i=n.None),void 0===o&&(o=null),this._ownerService=e,i){case n.Block:this._namespace="b";break;case n.IteratorItem:this._namespace="l";break;default:this._namespace=""}if(this._namespace+=t,e){var a=o?o+r:"";this._namespace=e.namespace+this._namespace+r+a}else this._namespace&&(this._namespace=this._namespace+r)}return e.prototype.getId=function(e){return e?this.namespace+e:null},e.nameFromId=function(e){return e.substring(e.lastIndexOf(r)+1)},Object.defineProperty(e.prototype,"namespace",{get:function(){return this._namespace},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ownerService",{get:function(){return this._ownerService},enumerable:!1,configurable:!0}),e}();t.WidgetIdService=i}),define("OutSystems/ClientRuntime/Validation",["require","exports","./WidgetNaming"],function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationResult=t.ValidationService=void 0;var r="",i=function(){function e(e,t){var n=this;this.model=e,this.messagesProvider=t,this.updatingValidations=!1,this.disposed=!1,e.hasValidationWidgets&&(this.widgets={},this.widgetChildren={},this.oldModelWidgets=this.model.widgets,this.model.subscribeWrites(function(){n.updatingValidations||n.oldModelWidgets===n.model.widgets||n.recalculateAggregatorsState(r),n.oldModelWidgets=n.model.widgets},!0))}return e.prototype.getWidgetRecord=function(e){return this.model.widgets.get(e)},e.prototype.updateWidgetValidationsProperties=function(e,t,n){var r=this.updatingValidations;this.updatingValidations=!0;try{if(e.isWebBlockInstance){e.valid=t}else{var i=this.getWidgetRecord(e.getId());i.validAttr!==t&&(i.validAttr=t),void 0!==n&&i.validationMessageAttr!==n&&(i.validationMessageAttr=n)}}finally{this.updatingValidations=r}},e.prototype.validateWidget=function(e){var t=!0;for(var n in this.widgetChildren[e])!0!==this.validateWidget(n)&&(t=!1);var r=this.widgets[e];if(r){var i=null;r.isValidationAggregator?i=new o(t):r.validate&&(i=r.validate()),i&&(this.updateWidgetValidationsProperties(r,i.valid,i.validationMessage),i.valid||(t=!1))}return t},e.prototype.recalculateAggregatorsState=function(e){var t=!0;for(var n in this.widgetChildren[e])this.recalculateAggregatorsState(n)||(t=!1);var r=this.widgets[e];if(r){if(r.isWebBlockInstance)return r.valid;if(!r.isValidationAggregator)return this.getWidgetRecord(e).validAttr;this.updateWidgetValidationsProperties(r,t,void 0)}return t},e.prototype.register=function(e){if(this.model.hasValidationWidgets&&e){var t=e.getId();if(t){this.widgets[t]=e;var n=e.validationParentId||r,i=this.widgetChildren[n];if(i||(i={},this.widgetChildren[n]=i),i[t]=1,!e.isWebBlockInstance){var o=e,a=this.model.widgets.create(t);a.generationNode=o.generationNode,this.model.widgets.add(a)}}}},e.prototype.unregister=function(e){if(e&&!this.disposed&&this.model.hasValidationWidgets){var t=this.widgets[e],n=(t?t.validationParentId:null)||r;delete this.widgets[e],delete this.widgetChildren[n][e],t&&this.model.widgets.remove(e)}},e.prototype.isRegistered=function(e){return!!this.widgets&&void 0!==this.widgets[e]},e.prototype.validate=function(e){if(!this.model.hasValidationWidgets)return!0;var t=this.validateWidget(e||r);return e&&(t=this.recalculateAggregatorsState(r)),this.model.flush(),t},e.prototype.getMandatoryValueMessage=function(){return this.messagesProvider.getMandatoryValueMessage()},e.prototype.getInvalidValueMessage=function(e){return this.messagesProvider.getInvalidValueMessage(e)},e.prototype.getNameById=function(e){return n.WidgetIdService.nameFromId(e)},e.prototype.getWidgetChildren=function(){return this.widgetChildren},e.prototype.dispose=function(){this.disposed=!0},e}();t.ValidationService=i;var o=function(){function e(e,t){this.valid=e,this.validationMessage=t}return Object.defineProperty(e.prototype,"valid",{get:function(){return this._valid},set:function(e){this._valid=void 0===e||e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"validationMessage",{get:function(){return this._validationMessage},set:function(e){this._validationMessage=e||""},enumerable:!1,configurable:!0}),e}();t.ValidationResult=o}),define("OutSystems/ClientRuntime/Controller",["require","exports","tslib","./ApplicationInfo","./Communication","./DataConversion","./DataTypes","./ErrorHandling","./Exceptions","./Flow","./Injector","./Injector/KnownServices","./Logger","./NativeHelper","./Navigation","./PublicApiHelper","./RequireManager","./RolesInfo","./Validation","./VersionsManager","./WidgetNaming"],function(e,t,n,r,i,o,a,s,u,c,l,f,d,p,h,g,m,y,v,b,T){"use strict";function _(e,t){var n=new Map;return e.forEach(function(e,r){var i=t(e);n.set(r,i)}),n}Object.defineProperty(t,"__esModule",{value:!0}),t.BaseViewController=t.BaseModuleController=t.BaseController=t.IterationContext=t.CallContext=t.ControllerFactory=void 0;var E=function(){},w=function(){function e(e,t){this.controllerClass=e,this.messagesProvider=t}return e.prototype.create=function(e,t){return new this.controllerClass(e,this.messagesProvider,t)},e.executeWithNavigationCallbacks=function(e,t,n){h.setNavigationCallbacks(t);var r=function(){t.dispose(n),h.removeNavigationCallbacks()};return c.tryFinally(e,r)},e.prototype.initialize=function(t,r,i,o,a){return n.__awaiter(this,void 0,void 0,function(){var c,l,f,d,p,h,m,v;return n.__generator(this,function(n){switch(n.label){case 0:c=R.activeScreen,l=c?c.callContext():i.callContext(),n.label=1;case 1:return n.trys.push([1,4,,5]),0===y.getUserId()||y.areRolesDefined()?[3,3]:[4,new Promise(function(e){new g.PublicApiHelper(null,null).ApplicationLifecycle.listen({onLoadComplete:e})})];case 2:n.sent(),n.label=3;case 3:return this.controllerClass.checkPermissions(),[3,5];case 4:return f=n.sent(),d={permissionsOk:!1},[2,e.executeWithNavigationCallbacks(function(){return i.handleError(f,l)},o,l).then(function(){return d},function(e){return d})];case 5:return p=r.create(t),h=this.create(p,new T.WidgetIdService(null)),h.setAsActiveScreen(),m=e.executeWithNavigationCallbacks(function(){return h.fireInitialize()},a,h.callContext()),v={permissionsOk:!0,controller:h,model:p},[2,m.then(function(){return v},function(e){return u.isInstanceOf(e,u.Exceptions.UnhandledOrIgnoredErrorInEventException)&&e.handleErrorResult===s.UNHANDLED_ERROR_RESULT?{permissionsOk:!0}:v})]}})})},Object.defineProperty(e.prototype,"activeScreenController",{get:function(){return R.activeScreen},enumerable:!1,configurable:!0}),e}();t.ControllerFactory=w;var D=function(){function e(){this._iterationContext=new S,this._id=++e.currentId}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewName",{get:function(){return this._viewName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeout",{get:function(){return this._timeout},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iterationContext",{get:function(){return this._iterationContext},set:function(e){this._iterationContext=e},enumerable:!1,configurable:!0}),e.prototype.withViewName=function(e){return this._viewName!==e?this.innerClone({_viewName:{value:e}}):this},e.prototype.withTimeout=function(e){return this._timeout!==e?this.innerClone({_timeout:{value:e}}):this},e.prototype.clone=function(){var t=this.innerClone();return t._id=++e.currentId,t},e.prototype.innerClone=function(e){var t=Object.create(this,e);return t.iterationContext=this.iterationContext.clone(),t},Object.defineProperty(e.prototype,"isOutOfContext",{get:function(){return!!R.activeScreen&&this.viewName!==R.activeScreen.viewName},enumerable:!1,configurable:!0}),e.currentId=0,e}();t.CallContext=D;var S=function(){function e(){}return e.prototype.getCurrentRowNumber=function(e){var t=this.getIterator(e);return t?t.currentRowNumber:0},e.prototype.setCurrentRowNumber=function(e,t){this.getIteratorForSet(e).currentRowNumber=t},e.prototype.isBeingIterated=function(e){var t=this.getIterator(e);return!!t&&t.isBeingIterated},e.prototype.registerIterationStart=function(e){var t=this.getIteratorForSet(e);if(t.isBeingIterated)throw new Error("List is already being iterated in this context");t.currentRowNumber=e.length-1,t.isBeingIterated=!0},e.prototype.registerIterationEnd=function(e){var t=this.getIteratorForSet(e);if(!t.isBeingIterated)throw new Error("List was redefined while being iterated");t.isBeingIterated=!1},e.prototype.getIterator=function(e){return this.iterators?this.iterators.get(e.modelId):null},e.prototype.getIteratorForSet=function(e){this.iterators||(this.iterators=new Map);var t=this.getIterator(e);return t||(t={currentRowNumber:0,isBeingIterated:!1},this.iterators.set(e.modelId,t)),t},e.prototype.clone=function(){var t=new e;return this.iterators&&(t.iterators=_(this.iterators,function(e){return Object.create(e)})),t},e}();t.IterationContext=S;var x=new a.RecordTypeFactory,I=new a.ComplexTypeKeyedTypeFactory("Data","dataOut"),N=new a.ComplexTypeKeyedTypeFactory("List","listOut",[{name:"Count",attrName:"countOut",mandatory:!0,dataType:a.DataTypes.LongInteger,defaultValue:function(){return a.LongInteger.defaultValue}}]),A="BaseController",O=function(){function e(e){var t=this;if(this.isExecutingJSNode=!1,this.localeChangeHandler=function(e){var n,r=l.default.resolve(f.ServiceNames.TranslationsService),i=l.default.resolve(f.ServiceNames.LocaleService);if(r){(null!==(n=e.localeFamily)&&void 0!==n?n:[e.localeCode]).forEach(function(e){var n,o;t.translationResources[e]?(d.trace(A,"Adding translations for "+e+" locale."),r.add(null!==(n=t.translationResources[e].translations)&&void 0!==n?n:{}),i.setCurrentLocaleRTL(null!==(o=t.translationResources[e].isRTL)&&void 0!==o&&o)):d.trace(A,"No translations found for "+e+" locale.")})}},this.translationResources=null!==e&&void 0!==e?e:this.translationResources,this.translationResources){var n=l.default.resolve(f.ServiceNames.LocaleService);if(n){var r=n.getCurrentLocale(),i=n.getCurrentLocaleFamily();this.localeChangeHandler({localeCode:r,localeFamily:i}),d.trace(A,"Subscribing handler for locale service."),n.subscribe(this.localeChangeHandler)}}}return Object.defineProperty(e.prototype,"publicApiHelper",{get:function(){return this._publicApiHelper||(this._publicApiHelper=this.createPublicApiHelper()),this._publicApiHelper},enumerable:!1,configurable:!0}),e.prototype.getDefaultTimeout=function(){throw new Error("Controllers must implement getDefaultTimeout")},e.prototype.createPublicApiHelper=function(){return new g.PublicApiHelper(null,this.callContext())},Object.defineProperty(e.prototype,"default",{get:function(){return this},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"controller",{get:function(){return this},enumerable:!1,configurable:!0}),e.prototype.callContext=function(e){return void 0===e&&(e=new D),e},e.prototype.safeExecuteJSNode=function(e,t,r,i,o,a,s,c){void 0===c&&(c=!1);var l=function(e){var n="Check the JavaScript node '"+t+"' of the action '"+r+"'.";throw e=e||new Error(n),(e instanceof u.Exceptions.NumberOverflowException||e instanceof u.Exceptions.InvalidJavascriptType)&&(e.message=e.message+" "+n),e},f=this.isExecutingJSNode,d=(i?[i]:[]).concat(a,s,this.publicApiHelper);e=e.bind.apply(e,n.__spreadArray([null],d));try{if(this.isExecutingJSNode=!0,c)return e().then(function(){return o(i)}).catch(l);try{return e(),o(i)}catch(e){l(e)}}finally{this.isExecutingJSNode=f}},e.prototype.safeExecuteAsyncJSNode=function(e,t,n,r,i,o,a){return this.safeExecuteJSNode(e,t,n,r,i,o,a,!0)},e.prototype.executeActionInsideJSNode=function(e,t,n,r,i){void 0===n&&(n=E),void 0===r&&(r=E),void 0===i&&(i="");var o=function(e){if(!s.ignoreError(e,t))throw e};try{if(i)try{this.ensureControllerAlive(i)}catch(e){throw d.error("Controller",e),e}var a=e(t);return a instanceof Promise?a.then(function(e){return r(),n(e)}).catch(function(e){r(),o(e)}):n(a)}catch(e){o(e)}finally{this.isExecutingJSNode||r()}},e.prototype.getInitialPayloadObject=function(e,t){return{versionInfo:{moduleVersion:b.default.getLastApplicationVersionToken(!0),apiVersion:t},viewName:e.viewName?e.viewName:"*"}},e.prototype.getEffectiveTimeoutForServerCall=function(e){return r.getApplicationDefaultTimeout()||e||this.getDefaultTimeout()},e.prototype.callServerAction=function(e,t,n,r,i,o,a,s){return void 0===s&&(s=!1),this.innerCallServerAction(e,t,n,r,i,o,a,s)},e.prototype.innerCallServerAction=function(t,n,o,a,s,u,c,l){void 0===l&&(l=!1);var f=this.getEffectiveTimeoutForServerCall(s.timeout),p=this.getInitialPayloadObject(s,o);p.inputParameters=a;var h="The timeout of "+f+"s was reached while executing this server action.",g=function(){d.trace(t,h)};return i.post(n,p,r.getBasePath(),f,g,e.createPostResponseHandler(c),void 0,void 0,u,l).then(function(e){return e||{}}).catch(function(e){throw e.extraStack=t,e})},e.checkPermissions=function(){throw new Error("Screen Controllers must implement checkPermissions")},e.handlePostResponse=function(e){e.rolesInfo&&y.storeRoleInformation(e.rolesInfo);var t=l.default.resolve(f.ServiceNames.ClientVariablesService);t&&t.checkSessionExpires()},e.createPostResponseHandler=function(t){return function(n,r){e.handlePostResponse(n),t&&t(n,r)}},e.prototype.executeClientAggregate=function(e,t){return c.executeSequence(function(){return e()}).then(function(e){var n=t();n.listOut=e.list,n.countOut=e.count})},e.prototype.ensureControllerAlive=function(e){},e.getJSONDeserializeOutputType=function(e){return I.getType(e)},e.getAggregateOutputType=function(e){return N.getType(e)},e.registerVariableGroupType=function(e,t){x.registerTypeDefinition(e,t)},e.getVariableGroupType=function(e){return x.getType(e)},e}();t.BaseController=O;var C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fireApplicationResumeSingletonCallback=t.fireApplicationResume.bind(t),t}return n.__extends(t,e),t.prototype.registerEventHandler=function(e,t,n){var r=this;n(function(){return new Promise(function(t,n){m.loadModule([e],t,n)}).then(function(){var e=r[t],i=function(){return Promise.resolve().then(function(){return e.call(r)})};return n(i),i()})})},t.prototype.registerOnApplicationReadyHandler=function(e,t){var n=this;this.registerEventHandler(e,t,function(e){return n.onApplicationReadyHandler=e})},t.prototype.registerOnApplicationResumeHandler=function(e,t){var n=this;this.registerEventHandler(e,t,function(e){return n.onApplicationResumeHandler=e})},t.prototype.fireApplicationReady=function(){var e=this;return this.onApplicationReadyHandler?this.onApplicationReadyHandler().then(function(){return e.setupOnApplicationResumeListener()}):(this.setupOnApplicationResumeListener(),Promise.resolve(void 0))},t.prototype.setupOnApplicationResumeListener=function(){this.onApplicationResumeHandler&&p.addNativeEventListener("resume",this.fireApplicationResumeSingletonCallback)},t.prototype.fireApplicationResume=function(){return this.onApplicationResumeHandler?this.onApplicationResumeHandler():Promise.resolve(void 0)},t}(O);t.BaseModuleController=C;var R=function(e){function t(n,r,i,o){var a=e.call(this,o)||this;a.model=n,a.messagesProvider=r,a._idService=i,a.instanceId=t.globalInstanceId++,a.isDisposed=!1,a.shouldSendClientVarsToDataSources=!1,a.fetchReadySources=function(e){var t=[];(void 0===e?a.dataFetchActionNames:a.dataFetchDependentsGraph[e]).forEach(function(n){e&&a.dataFetchDependencies[n]--,0===a.dataFetchDependencies[n]&&t.push(n)}),t.forEach(function(e){a.remainingFetchesCount++,a.dataFetchDependencies[e]=-1,a.executeDataFetchAction(e).then(function(){return a.fetchReadySources(e)})})},a.clientVariablesHandler=function(e){a.model.clientVariablesGeneration++,a.model.scheduleFlush()},a.localeDependencyHandler=function(e){a.model.currentLocale=e.localeCode,a.model.scheduleFlush()};var s=l.default.resolve(f.ServiceNames.LocaleService);return s&&a.translationResources&&(a.model.currentLocale=s.getCurrentLocale()),a.validationServiceInstance=new v.ValidationService(n,r),a}return n.__extends(t,e),t.prototype.fireEvent=function(e){var t=this;return c.executeSequence(function(){if(e)return e.call(t,t.callContext())}).then(function(e){if(s.isSpecialHandleErrorResult(e))throw u.Exceptions.UnhandledOrIgnoredErrorInEventException.create(e)})},t.prototype.fireEventAndForget=function(e){this.fireEvent(e).catch(u.Exceptions.UnhandledOrIgnoredErrorInEventException.ignore)},t.prototype.createPublicApiHelper=function(){return new g.PublicApiHelper(this.model,this.callContext())},Object.defineProperty(t,"activeScreen",{get:function(){return t.activeScreenInstance},enumerable:!1,configurable:!0}),t.prototype.setAsActiveScreen=function(){t.activeScreenInstance=this},t.prototype.callContext=function(t){return e.prototype.callContext.call(this,t).withViewName(this.viewName)},Object.defineProperty(t.prototype,"validationService",{get:function(){return this.validationServiceInstance},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"viewName",{get:function(){return this.modelContext?this.modelContext.viewName:void 0},enumerable:!1,configurable:!0}),t.prototype.fetchData=function(){var e=!1;d.trace(this,"Using Improved data fetching with dependencies"),(e=this.innerFetchDataWithDependencies())&&this.model.flush()},t.prototype.executeDataFetchAction=function(e){var t=this;return d.trace(this,"Fetching "+e),c.executeSequence(function(){return t[e]()}).then(function(){t.remainingFetchesCount--,clearTimeout(t.flushTimeoutHandle),d.trace(t,"Fetched "+e),t.remainingFetchesCount>0?t.flushTimeoutHandle=setTimeout(function(){return t.model.flush()},50):t.model.flush()},function(e){t.remainingFetchesCount--,t.model.flush(),t.handleError(e)})},t.prototype.innerFetchDataWithDependencies=function(){return!(!this.dataFetchActionNames||0===this.dataFetchActionNames.length)&&(this.dataFetchDependencies=n.__assign({},this.dataFetchDependenciesOriginal),this.flushTimeoutHandle=0,this.remainingFetchesCount=0,this.fetchReadySources(),!0)},Object.defineProperty(t.prototype,"idService",{get:function(){return this._idService},enumerable:!1,configurable:!0}),t.prototype.fireInitialize=function(){var e=this,t=l.default.resolve(f.ServiceNames.ClientVariablesService);t&&t.subscribe(this.clientVariablesHandler);var n=l.default.resolve(f.ServiceNames.LocaleService);return n&&n.subscribe(this.localeDependencyHandler),this.fireEvent(this.onInitializeEventHandler).then(function(){return e.fetchData()})},t.prototype.fireAfterViewReady=function(){var e=this;this.fireEvent(this.onReadyEventHandler).then(function(){return e.fireEvent(e.onRenderEventHandler)}).catch(u.Exceptions.UnhandledOrIgnoredErrorInEventException.ignore)},t.prototype.fireAfterInputsChanged=function(){this.fireEventAndForget(this.onParametersChangedEventHandler)},t.prototype.fireAfterViewRender=function(e){var t=this;if(void 0===e&&(e=!1),this.onRenderEventHandler)return this.fireEvent(function(n){return e?void d.error("View","Render loop avoided. This is likely due to the model of the screen/block '"+t.viewName+"' being changed inside its 'On Render' client action. Avoid changes to the model inside 'On Render' client actions."):t.onRenderEventHandler(n)})},t.prototype.fireAfterViewDestroy=function(e){var t=void 0===e?{}:e,n=t.clientVariablesService,r=void 0===n?l.default.resolve(f.ServiceNames.ClientVariablesService):n,i=t.localeService,o=void 0===i?l.default.resolve(f.ServiceNames.LocaleService):i;r&&r.unsubscribe(this.clientVariablesHandler),o&&o.unsubscribe(this.localeDependencyHandler),this.fireEventAndForget(this.onDestroyEventHandler)},t.prototype.registerClientAction=function(e,t){this[e]=t},t.prototype.innerCallAggregate=function(e,t,n,r,i,o,a,s,u,c,l,f,p){void 0===p&&(p=!1);var h=this.getEffectiveTimeoutForServerCall(s);return d.trace(this,"Calling "+e+" aggregate with start index endpoint"),this.callServerDataSource(e,t,n,o,a,function(e){e.inputParameters={StartIndex:i,MaxRecords:r}},h,u,c,l,f,p)},t.prototype.callAggregateWithStartIndexAndClientVars=function(e,t,n,r,i,o,a,s,u,c,l,f,d){return void 0===d&&(d=!1),this.innerCallAggregate(e,t,n,r,i,o,a,s,u,c,l,f,d)},t.prototype.callAggregateWithStartIndex=function(e,t,n,r,i,o,a,s,u,c,l){return this.innerCallAggregate(e,t,n,r,i,o,a,s,u,c,l)},t.prototype.callAggregate=function(e,t,n,r,i,o,a,s,u,c){return this.innerCallAggregate(e,t,n,r,0,i,o,a,s,u,c)},t.prototype.callDataAction=function(e,t,n,r,i,o,a,s,u,c,l){return void 0===l&&(l=!1),this.innerCallDataAction(e,t,n,r,i,o,a,s,u,c,l)},t.prototype.innerCallDataAction=function(e,t,n,r,i,o,a,s,u,c,l){void 0===l&&(l=!1);var f=this.getEffectiveTimeoutForServerCall(o);return this.callServerDataSource(e,t,n,r,i,void 0,f,a,s,u,c,l)},t.prototype.callServerDataSource=function(e,n,a,s,l,f,p,h,g,m,y,v){var b=this;void 0===f&&(f=void 0),void 0===p&&(p=0),void 0===v&&(v=!1);var T=this.getInitialPayloadObject(this.callContext(),a);d.trace(this,"Calling "+e+" data source with optimized on payload"),T.screenData={variables:o.ServerDataConverter.to(this.model.variables,m,!0)},f&&f(T),this.shouldSendClientVarsToDataSources&&y&&(T.clientVariables=y.serialize()),s(0);var _=function(){d.trace(e,"The timeout of "+p+"s was reached while fetching this screen data.")};return c.promise(function(e,o){i.post(n,T,r.getBasePath(),p,_,t.createPostResponseHandler(g),!0,b.instanceId,h,v).then(function(t){if(!b.isDisposed)return l(t),s(1),e()}).catch(function(e){if(!b.isDisposed)return u.isInstanceOf(e,u.Exceptions.ViewHasChangedException)||u.isInstanceOf(e,u.Exceptions.OutOfOrderException)||s(2),o(e)})})},t.prototype.handleError=function(e){throw new Error("@abstract")},t.prototype.safeExecuteAsyncJSNode=function(t,n,r,i,o,a,s){return this.model.flush(),e.prototype.safeExecuteAsyncJSNode.call(this,t,n,r,i,o,a,s)},t.prototype.executeActionInsideJSNode=function(t,n,r,i,o){var a=this;return void 0===r&&(r=E),void 0===i&&(i=E),void 0===o&&(o="UNKNOWN"),e.prototype.executeActionInsideJSNode.call(this,t,n,r,function(){i(),a.model.flush()},o)},t.prototype.dispose=function(){this.validationService.dispose(),this.isDisposed=!0},t.prototype.ensureControllerAlive=function(e){if(this.isDisposed){var t=new u.Exceptions.ControllerDisposedException("Invalid call of the '"+e+"' client action of the '"+this.viewName+"' since the latter is not currently active. This is likely due to a platform's client action being used as an event handler or in a setTimeout function. Consider removing this call by using the 'On Destroy' event of the screen/block or moving your logic to a global client action.");throw d.trace("Controller",t.message),t}},t.prototype.safeExecuteClientAction=function(e,t){for(var n=this,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return c.tryCatchFinally(function(){return e.apply(n,r.concat(n.callContext(t)))},function(e){return n.handleError(e)},function(){return n.model.flush()})},Object.defineProperty(t.prototype,"modelContext",{get:function(){return this.model.context},enumerable:!1,configurable:!0}),t.prototype.executeScreenClientAggregate=function(e,t,n){var r=this;return c.executeSequence(function(){return t().dataFetchStatusAttr=0,e()}).then(function(e){if(!r.isDisposed)return t().bulkSet(e.list,1,e.count),c.executeSequence(n)},function(e){if(!r.isDisposed)throw t().dataFetchStatusAttr=2,e})},t.downloadBinary=function(e,t){var n=e.toBlob()||new Blob([]),r=document.createElement("a");r.style.display="none",document.body.appendChild(r),n.type&&(r.type=n.type);var i=window.URL.createObjectURL(n);r.href=i,r.download=t,r.click(),setTimeout(function(){return window.URL.revokeObjectURL(i)},500),r.remove()},t.globalInstanceId=0,t}(O);t.BaseViewController=R}),define("OutSystems/ClientRuntime/ErrorScreen",["require","exports","./ErrorHandling","./Exceptions","./Logger","./Navigation"],function(e,t,n,r,i,o){"use strict";function a(e,t){return Promise.resolve().then(function(){return t.initialize(e,1).then(function(){s(e.errorPageConfig);var r="";try{var o=n.ErrorHandlingStorage.errorPageExceptionInfo.get();o&&(r=" "+o.message)}catch(e){}if(i.error("ErrorScreen","[ErrorScreen]"+r),!i.hadSessionLogs())return t.initializeDatabase().then(function(){i.flushLogsToServer()})}).catch(function(e){console.error(e)})})}function s(e){var t=n.ErrorHandlingStorage.errorPageMessage.get(),i=n.ErrorHandlingStorage.errorPageExtraMessage.get(),o=n.ErrorHandlingStorage.errorPageExceptionInfo.get();if(o){var a=o.message,s=r.getStack(o);if(s&&(a+="\n"+s),console.error(a),"undefined"!=typeof document&&document.querySelector&&(document.querySelector(b).innerHTML=o.message,document.querySelector(T).innerHTML=s,document.querySelector(v).addEventListener("click",function(){return c()}),e&&e.showExceptionStack)){document.querySelector(y).style.display="block"}}if("undefined"!=typeof document&&document.querySelector){var m=e&&e.messages&&e.messages.defaultMessage,_=e&&e.extraMessage;document.querySelector(p).innerHTML=t||m||l,document.querySelector(h).innerHTML=i||_||f,document.querySelector(g).innerHTML=e&&e.reloadLabel||d,document.querySelector(g).addEventListener("click",function(){return u()})}}function u(){if("undefined"!=typeof document&&document.querySelector){document.querySelector(g).style.display="none";document.querySelector(m).style.display="inline-block"}setTimeout(function(){o.reloadApplication()},2e3)}function c(){if("undefined"!=typeof document&&document.querySelector){var e=document.querySelector(v),t=document.querySelector(_);t.hidden?(e.innerHTML="Hide Detail",t.hidden=!1):(e.innerHTML="Show Detail",t.hidden=!0)}}Object.defineProperty(t,"__esModule",{value:!0}),t.initializeErrorPage=void 0;var l="There was an error processing your request.",f="",d="RELOAD",p="#error-screen-message-text",h="#error-screen-message-text-extra",g="#error-screen-message-reload-button",m="#error-screen-spinner",y="#exception-detail",v="#error-screen-show-detail-button",b="#error-screen-exception-message",T="#error-screen-exception-stack",_="#exception-detail-text";t.initializeErrorPage=a}),define("OutSystems/ClientRuntime/JSONUtils",["require","exports","./DataConversion","./Settings"],function(e,t,n,r){"use strict";function i(e,t,i,o){var s=r.getEnvParams().UseNewJSONSerialization?n.NewJSONConverter.to({value:e,serializeDefaultValues:t,useUnixDateFormat:i,dataType:o,enforceDefaultValueSerializationAtThisLevel:!0}):n.JSONConverter.to(e,t,i,o);return JSON.stringify(s,a)}function o(e,t,r){try{var i=void 0;return e&&(i=s(e)),n.JSONConverter.from(i,t,r)}catch(e){throw"Failed to deserialize JSON to "+t.name+": "+e.message}}function a(e,t){if(null!==t)return t}function s(e){var t=/(?:"([^\\"]|\\.)*")|(?:'([^\\']|\\.)*')|(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(\w+)\s*:/g,n=e.replace(t,function(e,t,n,r,i){return r?'"'+r+'"':n?'"'+e.substring(1,e.length-1)+'"':i?'"'+i+'":':e});return JSON.parse(n)}function u(e,t){var n,r,i,o;for(var a in t){n=e[a],r=t[a];r&&n&&("object"==typeof r||(i=Array.isArray(r)))?(i?(i=!1,o=Array.isArray(n)?n:[]):o="object"==typeof n?n:{},e[a]=u(o,r)):void 0!==r&&(e[a]=r)}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.mergeJS=t.parseJSON=t.filterJSONValues=t.deserializeFromJSON=t.serializeToJSON=void 0,t.serializeToJSON=i,t.deserializeFromJSON=o,t.filterJSONValues=a,t.parseJSON=s,t.mergeJS=u}),define("OutSystems/ClientRuntime/LanguageResources",["require","exports","./DataTypes","./Injector","./Injector/KnownServices","./Logger"],function(e,t,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseMessagesProvider=t.ModuleMessageKeys=void 0;var a,s="BaseMessagesProvider";!function(e){e.MandatoryValue="Validation.Mandatory",e.InvalidValuePrefix="Validation.",e.UpgradeComplete="UpgradeComplete",e.UpgradeRequiredDataLoss="UpgradeRequiredDataLoss",e.UpgradeRequired="UpgradeRequired",e.UpgradeFailedOnResources="AppInitError.Resources",e.UpgradeFailedOnDataModel="AppInitError.DataModel",e.UpgradeFailed="AppInitError.Generic"}(a=t.ModuleMessageKeys||(t.ModuleMessageKeys={}));var u=function(){function e(e){var t=this;if(this.messages={},this.localeChangeHandler=function(e){var n,a=r.default.resolve(i.ServiceNames.TranslationsService),u=r.default.resolve(i.ServiceNames.LocaleService);if(a){(null!==(n=e.localeFamily)&&void 0!==n?n:[e.localeCode]).forEach(function(e){var n,r;t.translationResources[e]?(o.trace(s,"Adding translations for "+e+" locale."),a.add(null!==(n=t.translationResources[e].translations)&&void 0!==n?n:{}),u.setCurrentLocaleRTL(null!==(r=t.translationResources[e].isRTL)&&void 0!==r&&r)):o.trace(s,"No translations found for "+e+" locale.")})}},this.translationResources=null!==e&&void 0!==e?e:this.translationResources,this.translationResources){var n=r.default.resolve(i.ServiceNames.LocaleService);if(n){var a=n.getCurrentLocale(),u=n.getCurrentLocaleFamily();this.localeChangeHandler({localeCode:a,localeFamily:u}),o.trace(s,"Subscribing handler for locale service."),n.subscribe(this.localeChangeHandler)}}}return e.prototype.getMandatoryValueMessage=function(){return this.getMessage(a.MandatoryValue,"Required Value!")},e.prototype.getInvalidValueMessage=function(e){return this.getMessage(a.InvalidValuePrefix+n.DataTypes[e],"Invalid Value!")},e.prototype.getApplicationUpgradeCompleteMessage=function(){return this.getMessage(a.UpgradeComplete,"")},e.prototype.getApplicationUpgradeRequiredMessage=function(e){return e?this.getMessage(a.UpgradeRequiredDataLoss,""):this.getMessage(a.UpgradeRequired,"")},e.prototype.getApplicationUpgradeFailedOnResourcesMessage=function(){return this.getMessage(a.UpgradeFailedOnResources,"")},e.prototype.getApplicationUpgradeFailedOnDataModelMessage=function(){return this.getMessage(a.UpgradeFailedOnDataModel,"")},e.prototype.getApplicationUpgradeFailedUnknownMessage=function(){return this.getMessage(a.UpgradeFailed,"")},e.prototype.getMessage=function(e,t){var n,o=null!==(n=this.messages[e])&&void 0!==n?n:t,a=r.default.resolve(i.ServiceNames.TranslationsService);return a?a.getMessage(e,o):o},e.prototype.setMessage=function(e,t){this.messages[e]=t},e}();t.BaseMessagesProvider=u}),define("OutSystems/ClientRuntime/Model",["require","exports","tslib","./DataConversion","./DataTypes","./Logger","./WidgetNaming"],function(e,t,n,r,i,o,a){"use strict";function s(e){return{idAttr:e.get(c),nameAttr:e.get(l),validAttr:e.get(f),validationMessageAttr:e.get(d)}}function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=1,r=0,i=e;r<i.length;r++){switch(i[r]){case 2:return 2;case 0:n=0}}return n}Object.defineProperty(t,"__esModule",{value:!0}),t.ModelFactory=t.DummyViewModel=t.VariablelessViewModel=t.calculateDataFetchStatus=t.BaseViewModel=t.AggregateRecord=t.DataSourceRecord=t.BaseWidgetRecordMap=t.ValidationWidgetRecord=t.WidgetRecord=t.Variable=void 0;var c="idAttr",l="nameAttr",f="validAttr",d="validationMessageAttr",p=function(){function e(e,t,n,r){this.type=e,this._value=t,this.setter=n,this.model=r}return Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){var t=r.JSConversions.convertTo(e,this.type);this.setter(t),this.model.flush()},enumerable:!1,configurable:!0}),
e.prototype.isAcceptable=function(e){return r.JSConversions.isConvertibleTo(e,this.type)},e.prototype.fastEquals=function(e){return e&&this.constructor===e.constructor&&this.value===e.value},e.prototype.equals=function(e){return e&&this.constructor===e.constructor&&i.equals(this.value,e.value)},e}();t.Variable=p;var h=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),Object.defineProperty(t.prototype,"idAttr",{get:function(){return this.getBasicProperty(c)},set:function(e){this.setBasicProperty(c,e,i.DataTypes.Text)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nameAttr",{get:function(){return this.getBasicProperty(l)},set:function(e){this.setBasicProperty(l,e,i.DataTypes.Text)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"generationNode",{get:function(){return this.getBasicProperty(t.WidgetGenerationNodeAttributeName)},set:function(e){this.setBasicProperty(t.WidgetGenerationNodeAttributeName,e,i.DataTypes.Object)},enumerable:!1,configurable:!0}),t.prototype.asReadOnly=function(){return{idAttr:this.idAttr,nameAttr:this.nameAttr}},t.prototype.refreshGeneration=function(){this.generationNode&&(this.generationNode.generation=D.currentGeneration)},t.WidgetGenerationNodeAttributeName="widgetGenerationNode",t.RecordClass=i.Record.defineRecordClass({idAttr:"",nameAttr:"",widgetGenerationNode:null}),t}(i.Record);t.WidgetRecord=h;var g=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),Object.defineProperty(t.prototype,"validAttr",{get:function(){return this.getBasicProperty(f)},set:function(e){this.setBasicProperty(f,e,i.DataTypes.Boolean)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validationMessageAttr",{get:function(){return this.getBasicProperty(d)},set:function(e){this.setBasicProperty(d,e,i.DataTypes.Text)},enumerable:!1,configurable:!0}),t.prototype.onPropertyValueChanged=function(e){e!==f&&e!==d||this.refreshGeneration()},t.prototype.asReadOnly=function(){return s(this.data)},t.RecordClass=function(){var e=(new h.RecordClass).toJS();return e.validAttr=!0,e.validationMessageAttr="",i.Record.defineRecordClass(e)}(),t}(h);t.ValidationWidgetRecord=g;var m=function(e){function t(n){var r=e.call(this,n)||this;return r.widgetsIdToRecord=r.data.get(t.WidgetRecordsAttribute),r.widgetsIdToRecordDataCache=r.data.get(t.WidgetRecordsDataCacheAttribute),r}return n.__extends(t,e),t.createDefaultData=function(){return new t.RecordClass({records:new Map,recordsCache:new Map})},t.getWidgetsType=function(){return{}},t.prototype.getWidgetsType=function(){return this.constructor.getWidgetsType()},t.prototype.getWidgetRecordType=function(e){return this.getWidgetsType()[e]||h},t.prototype.get=function(e){var t=this.widgetsIdToRecord.get(e);return t||(t=this.create(e),this.add(t),t)},t.prototype.set=function(e,t){this.widgetsIdToRecord.set(e,t),this.widgetsIdToRecordDataCache.delete(e),this.writePropagate(this.data,null)},t.prototype.internalSet=function(e,t){this.widgetsIdToRecord.delete(e),this.widgetsIdToRecordDataCache.set(e,t),this.writePropagate(this.data,null)},t.prototype.create=function(e){var t=a.WidgetIdService.nameFromId(e),n=this.getWidgetRecordType(t),r=this.widgetsIdToRecordDataCache.get(e),i=new n(r);return i.idAttr=e,i.nameAttr=t,i},t.prototype.add=function(e){t.setPropagationHandler(e,this,e.idAttr,this.internalSet),this.widgetsIdToRecordDataCache.delete(e.idAttr),this.widgetsIdToRecord.set(e.idAttr,e)},t.prototype.remove=function(e){this.widgetsIdToRecord.delete(e),this.widgetsIdToRecordDataCache.delete(e),this.writePropagate(this.data,null)},t.WidgetRecordsAttribute="records",t.WidgetRecordsDataCacheAttribute="recordsCache",t.RecordClass=i.Record.defineRecordClass({records:null,recordsCache:null}),t}(i.Record);t.BaseWidgetRecordMap=m;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),Object.defineProperty(t.prototype,"dataFetchStatusAttr",{get:function(){return this.getBasicProperty(t.DataFetchStatusAttributeName)},set:function(e){this.setBasicProperty(t.DataFetchStatusAttributeName,e,i.DataTypes.Integer)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isDataFetchedAttr",{get:function(){return 1===this.dataFetchStatusAttr},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasFetchErrorAttr",{get:function(){return 2===this.dataFetchStatusAttr},enumerable:!1,configurable:!0}),t.attributesToDeclare=function(){return[i.GenericRecord.attr("DataFetchStatus",t.DataFetchStatusAttributeName,"",!0,!1,i.DataTypes.Integer,function(){return 0})].concat(e.attributesToDeclare.call(this))},t.prototype.replaceWith=function(e){var t=new this.constructor(i.Record.getData(e));t.dataFetchStatusAttr=this.dataFetchStatusAttr,this.writePropagate(i.Record.getData(t),new i.Cache)},t.DataFetchStatusAttributeName="dataFetchStatusAttr",t}(i.GenericRecord);t.DataSourceRecord=y;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),Object.defineProperty(t.prototype,"listOut",{get:function(){return this.getComplexProperty(t.ListOutAttributeName,this.getRecordListType())},set:function(e){this.setComplexProperty(t.ListOutAttributeName,e,i.DataTypes.RecordList,this.getRecordListType())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"countOut",{get:function(){return this.getBasicProperty(t.CountOutAttributeName)},set:function(e){this.setBasicProperty(t.CountOutAttributeName,e,i.DataTypes.LongInteger)},enumerable:!1,configurable:!0}),t.prototype.bulkSet=function(e,n,r){var i=[{name:t.ListOutAttributeName,value:e,isBasicType:!1},{name:y.DataFetchStatusAttributeName,value:n,isBasicType:!0}];void 0!==r&&i.push({name:t.CountOutAttributeName,value:r,isBasicType:!0}),this.setProperties(i)},t.prototype.getRecordListType=function(){return this.constructor.RecordListType},t.attributesToDeclare=function(){return[i.GenericRecord.attr("List",t.ListOutAttributeName,"List",!0,!1,i.DataTypes.RecordList,function(){return!1},!0,this.RecordListType),i.GenericRecord.attr("Count",t.CountOutAttributeName,"Count",!0,!1,i.DataTypes.LongInteger,function(){return i.LongInteger.defaultValue})].concat(e.attributesToDeclare.call(this))},t.init=function(){if(!this.RecordListType)throw new TypeError("AggregateRecords must define a RecordListType");e.init.call(this)},t.ListOutAttributeName="listOut",t.CountOutAttributeName="countOut",t}(y);t.AggregateRecord=v;var b=function(e){function t(t){var n=e.call(this)||this;return n._context=t,n.writeSubscriptions=[],n.cachedValues={},n.modified=!1,n.hasVariables&&n.variables,n.hasValidationWidgets&&n.widgets,n}return n.__extends(t,e),t.createDefaultData=function(){var e=this.newVariablesRecord(),n=this.newWidgetsRecord();return new t.RecordClass({variables:i.Record.getData(e),widgets:i.Record.getData(n),clientVariablesGeneration:0,currentLocale:null})},t.prototype.onDefaultWritePropagate=function(t){e.prototype.onDefaultWritePropagate.call(this,t),this.modified=!0,this.innerFlush(!0)},t.prototype.cloneCache=function(){return this.cache},Object.defineProperty(t.prototype,"isModified",{get:function(){return this.modified},enumerable:!1,configurable:!0}),t.prototype.scheduleFlush=function(){var e=this;this.pendingFlush||(this.pendingFlush=setTimeout(function(){return e.flush()},0))},t.prototype.flush=function(){this.pendingFlush&&(clearTimeout(this.pendingFlush),this.pendingFlush=void 0),this.modified&&(this.modified=!1,D.currentGeneration++,this.innerFlush(!1),o.trace(this,"Flushing model"))},t.prototype.innerFlush=function(e){for(var t=0;t<this.writeSubscriptions.length;t++){var n=this.writeSubscriptions[t];n.immediate===e&&n.handler(this)}},t.prototype.subscribeWrites=function(e,t){return void 0===t&&(t=!1),!(!this.hasVariables&&!this.hasValidationWidgets&&null===this.currentLocale&&void 0===this.currentLocale||!e)&&(this.writeSubscriptions.push({handler:e,immediate:t}),!0)},t.prototype.unsubscribeWrites=function(e){if(e){for(var t=-1,n=0,r=this.writeSubscriptions.length;n<r;n++)if(this.writeSubscriptions[n].handler===e){t=n;break}if(t>=0)return this.writeSubscriptions.splice(t,1),!0}return!1},t.prototype.clearSubscriptions=function(){this.writeSubscriptions=[]},Object.defineProperty(t,"hasVariables",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasVariables",{get:function(){return this.constructor.hasVariables},enumerable:!1,configurable:!0}),t.getVariablesRecordConstructor=function(){throw new Error("@abstract")},t.newVariablesRecord=function(e){return this.hasVariables?new(this.getVariablesRecordConstructor())(e):void 0},t.prototype.getVariables=function(){var e=this.constructor;if(this.hasVariables)return this.getComplexProperty(t.VariablesPropertyName,e.getVariablesRecordConstructor());throw new Error("Model does not contain variables")},Object.defineProperty(t.prototype,"variables",{get:function(){return this.getVariables()},set:function(e){var n=this.constructor;this.setComplexProperty(t.VariablesPropertyName,e,i.DataTypes.Record,n.getVariablesRecordConstructor())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clientVariablesGeneration",{get:function(){return this.getBasicProperty(t.ClientVariablesGenerationPropertyName)},set:function(e){this.setBasicProperty(t.ClientVariablesGenerationPropertyName,e,i.DataTypes.Integer)},enumerable:!1,configurable:!0}),Object.defineProperty(t,"hasValidationWidgets",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasValidationWidgets",{get:function(){return this.constructor.hasValidationWidgets},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentLocale",{get:function(){return this.getBasicProperty(t.CurrentLocalePropertyName)},set:function(e){this.currentLocale!==e&&this.clearCachedValues(),this.setBasicProperty(t.CurrentLocalePropertyName,e,i.DataTypes.Text)},enumerable:!1,configurable:!0}),t.getWidgetsRecordConstructor=function(){throw new Error("@abstract")},t.newWidgetsRecord=function(e){return this.hasValidationWidgets?new(this.getWidgetsRecordConstructor())(e):void 0},t.prototype.getWidgets=function(){var e=this.constructor;if(this.hasValidationWidgets)return this.getComplexProperty(t.WidgetsPropertyName,e.getWidgetsRecordConstructor());throw new Error("Model does not contain validation widgets")},Object.defineProperty(t.prototype,"widgets",{get:function(){return this.getWidgets()},set:function(e){this.setComplexProperty(t.WidgetsPropertyName,e,i.DataTypes.Object)},enumerable:!1,configurable:!0}),t.prototype.hasCachedValue=function(e){return this.cachedValues.hasOwnProperty(e)},t.prototype.getCachedValue=function(e,n){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var o=this.cachedValues[e],a=r.map(function(e,n){try{return e()}catch(e){return t.InvalidValue}});return void 0!==o&&r.length===o.args.length&&a.every(function(e,t){return e===o.args[t]})||(o={args:a,value:n()},this.cachedValues[e]=o),o.value},t.prototype.clearCachedValues=function(){this.cachedValues={}},t.prototype.createVariable=function(e,t,n){return new p(e,t,n,this)},t.prototype.fromOther=function(e){this.fromImmutableData(e.data)},t.prototype.toImmutableData=function(){return this.data},t.prototype.fromImmutableData=function(e){this.data=e,this.writePropagate(this.data,this.cache),this.cache.invalidate()},t.prototype.setInputs=function(e){throw new Error("@abstract")},Object.defineProperty(t.prototype,"widgetsGenerationsTree",{get:function(){return this._widgetsGenerationsTree||(this._widgetsGenerationsTree=new D),this._widgetsGenerationsTree},enumerable:!1,configurable:!0}),t.prototype.getReadOnlyWidgetRecord=function(e){return this.widgets.get(e).asReadOnly()},Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),t.prototype.sanitize=function(e){var n=e;if(this.hasVariables){if(e.constructor!==this.data.constructor)throw new Error("Expected data to be the same type of this model data");var r=this.variables.getNonSerializableAttributes();if(r.length>0){var i=n.get(t.VariablesPropertyName);r.forEach(function(e){return i=i.set(e,null)}),n=n.set(t.VariablesPropertyName,i)}}return n},t.VariablesPropertyName="variables",t.WidgetsPropertyName="widgets",t.ClientVariablesGenerationPropertyName="clientVariablesGeneration",t.CurrentLocalePropertyName="currentLocale",t.InvalidValue=new Object,t.RecordClass=i.Record.defineRecordClass({variables:null,widgets:null,clientVariablesGeneration:0,currentLocale:null}),t}(i.Record);t.BaseViewModel=b,t.calculateDataFetchStatus=u;var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),Object.defineProperty(t,"hasVariables",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.setInputs=function(){},t}(b);t.VariablelessViewModel=T;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),Object.defineProperty(t,"hasVariables",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t,"hasValidationWidgets",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.setInputs=function(){},t.create=function(e,n,r){return new t({viewName:e,navigatedFromHistory:n,viewWasRestoredFromCache:r})},t}(b);t.DummyViewModel=_;var E=function(){function e(e){this.modelClass=e}return e.prototype.create=function(e){return this.modelClass.hasVariables||this.modelClass.hasValidationWidgets?new this.modelClass(e):new _(e)},Object.defineProperty(e.prototype,"hasValidationWidgets",{get:function(){return this.modelClass.hasValidationWidgets},enumerable:!1,configurable:!0}),e}();t.ModelFactory=E;var w=function(){function e(e){this._parent=e,this._generation=e?e.generation:0}return Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"generation",{get:function(){return this._generation},set:function(e){this.generation<e&&(this._generation=e,this.parent&&(this.parent.generation=e))},enumerable:!1,configurable:!0}),e.prototype.addChild=function(){return new e(this)},e}(),D=function(){function e(){this._root=new w(null),this._root.generation=e.currentGeneration,e.currentGeneration++}return Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(e,"currentGeneration",{get:function(){return e.generation},set:function(t){e.generation=t},enumerable:!1,configurable:!0}),e.generation=0,e}()}),define("OutSystems/ClientRuntime/modules/Database/WebSQL/WebSQLUtils",["require","exports","../../../Exceptions","../../../RegExpHelper"],function(e,t,n,r){"use strict";function i(e,t,i){var s=null,u=null,c=null;if(e=e.trim(),u=r.matches(e,'(^|\\s|\\.)(\\[|"|)(ossys_|osltm_|oslog_|osevt_|osusr_|osext_)',!0),u.length>0)throw c=u[0],new n.Exceptions.DataBaseException("","'"+(c.groups[2]+c.groups[3])+"' found in 'Order By' parameter is a reserved prefix");if(""!==e&&(u=r.matches(e,"((((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)(( )*,( )*(((\\{\\w+\\})|(\\w+)).)?((\\[\\w+\\])|(\\w+))(( )+(desc|asc))?)*",!0),1!==u.length||u[0].value!==e))throw new n.Exceptions.DataBaseException("","Invalid syntax in 'Order By' parameter.");var l=function(e){return o(e,t,i)},f=function(e){return a(e)};return s=r.replace(e,"(\\{\\w+\\}|\\w+\\.)",!1,l),s=r.replace(s,"(\\[\\w+\\])",!1,f)}function o(e,t,r){for(var i="",o=s(e),a=!1,u=0;u<t.length;u++)if(t[u].toLowerCase()===o.toLowerCase()){a=!0,i='"'+r[u]+'"';break}if(!a)throw new n.Exceptions.DataBaseException("","'"+o+"' found in 'Order By' parameter is an invalid Entity");return"."===e.value.charAt(e.value.length-1)?i+".":i}function a(e){var t=e.value.substr(1,e.value.length-2);return t?('"'===t.charAt(0)?"":'"')+t+('"'===t.charAt(t.length-1)?"":'"'):""}function s(e){return"."===e.value.charAt(e.value.length-1)?e.value.substr(0,e.value.length-1):e.value.substr(1,e.value.length-2)}function u(e){return c(e).join(", ")}function c(e){var t=[],n={};return e.forEach(function(e){var r=e.trim();if(""!==r){var i=r.replace(new RegExp("\b((ASC)|(DESC))$","im"),"").replace('"',"").replace("[","").replace("]","").trim().toLowerCase();!0!==n[i]&&(t.push(r),n[i]=!0)}}),t}function l(e,t){return t.forEach(function(t){for(var r=f(t),i=0;i<e.length;i++){if(e[i].attributes.some(function(e){return e.name.toLowerCase()===r.toLowerCase()}))return!0}throw new n.Exceptions.DataBaseException("","Invalid attribute in 'Order By' parameter: "+t)}),!0}function f(e){var t=e.trim().split(" "),n=t[0].split(".");return n[n.length-1].replace(/["]+/g,"")}Object.defineProperty(t,"__esModule",{value:!0}),t.getAttributeFromOrderBy=t.validateQueryOrderBy=t.getOrderByColumnsWithoutDuplicates=t.replaceEntityReferencesInOrderBy=void 0,t.replaceEntityReferencesInOrderBy=i,t.getOrderByColumnsWithoutDuplicates=u,t.validateQueryOrderBy=l,t.getAttributeFromOrderBy=f}),define("OutSystems/ClientRuntime/ScriptsManager",["require","exports","./Logger","./Settings"],function(e,t,n,r){"use strict";function i(e){var t=document.createElement("script");return t.async=!1,t.setAttribute("src",e),t.setAttribute(p,"false"),t}function o(e,t,n,r,a,s,u){if(0===s)return a(),t("Error adding script '"+r+"' to document '"+document.baseURI+"'. No retries left."),n.parentNode.removeChild(n),void(v=null);null===u||void 0===u||u(),c("Error while loading script",r,"\nRetrying...");var l=i(r);l.onerror=function(){o(e,t,l,r,a,s-1,u)},l.onabort=n.onabort,l.onload=n.onload;var f=n.parentNode,d=n.nextElementSibling;n.parentNode.removeChild(n),d?f.insertBefore(l,d):f.appendChild(l)}function a(e){n.trace(h,"Setting number of script's load retries to "+e),m=e}function s(){return m}function u(e,t){c("Adding script",e),l();var n=g.get(e);if(n)return c("Script already added",e),n.promise;var a=i(e),s=new Promise(function(n,i){var s=function(){a.setAttribute(p,"true")};a.onerror=function(){var u=r.getEnvParams().CDNFilenameVersioning?m:0;o(n,i,a,e,s,u,t)},a.onabort=function(){s(),i("Aborted due to user action. Error adding script '"+e+"' to document '"+document.baseURI+"'")},a.onload=function(t){c("Script added",e),s(),n(t)}});return v?v.domElement.parentNode.insertBefore(a,v.domElement.nextSibling):document.head.appendChild(a),g.set(e,{promise:s,domElement:a}),v=g.get(e),s}function c(e,t,r){void 0===r&&(r=""),n.trace(h,e+" '"+t+"' : document '"+document.baseURI+"'"+r)}function l(){y||(y=!0,Object.defineProperty(define,"amd",{get:f.bind(this,define.amd),configurable:!0}))}function f(e){var t=document.currentScript;if(!t||!t.hasAttribute(p))return e}function d(e,t,n){return Promise.all(e.map(function(e){return u(e,n).catch(t)}))}Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleCustomJsLoading=t.addScript=t.getNumberOfScriptLoadRetries=t.setNumberOfScriptLoadRetries=void 0;var p="data-os-finished",h="ScriptsManager",g=new Map,m=3;t.setNumberOfScriptLoadRetries=a,t.getNumberOfScriptLoadRetries=s;var y=!1,v=null;t.addScript=u,t.scheduleCustomJsLoading=d}),define("OutSystems/ClientRuntime/SystemActions",["require","exports","tslib","./DataTypes","./Injector","./Injector/KnownServices","./Logger","./Navigation","./ScriptsManager"],function(e,t,n,r,i,o,a,s,u){"use strict";function c(e,t,n){if(t.isBeingIterated(e))throw new Error("List is being iterated: "+n+" is not allowed")}function l(e,t,n,r){c(e,t,n);try{return t.registerIterationStart(e),r()}finally{t.registerIterationEnd(e)}}function f(e){return e?e.iterationContext:new O}function d(e,t,n){c(e,f(n),"append"),e.append(t)}function p(e,t){var n=f(t);c(e,n,"clear"),e.clear(),n.setCurrentRowNumber(e,0)}function h(e,t,n,r){var i=f(r);c(e,i,"insert"),e.insert(n,t);var o=i.getCurrentRowNumber(e);e.length>1&&n<=o&&i.setCurrentRowNumber(e,o+1)}function g(e,t,n){var r=f(n);c(e,r,"remove");var i,o=1===e.length;o&&(i=e.getItem(0)),e.remove(t),o&&(e.emptyListItem=i);var a=r.getCurrentRowNumber(e);t<a?r.setCurrentRowNumber(e,a-1):t===e.length&&r.setCurrentRowNumber(e,Math.max(0,e.length-1))}function m(e,t,n){c(e,f(n),"appendAll"),e.appendAll(t)}function y(e,t){c(e,f(t),"duplicate");var n=new(I.getType(e.constructor));return n.duplicatedListOut=e.clone(),n}function v(e,t){var n=f(t);return l(e,n,"distinct",function(){var t=new(A.getType(e.constructor));return t.distinctListOut=e.distinct(),t})}function b(e,t,n){var r=f(n);return l(e,r,"all",function(){var n=new C;return n.resultOut=e.all(t),n})}function T(e,t,n){var r=f(n);return l(e,r,"any",function(){var n=new C;return n.resultOut=e.any(t),n})}function _(e,t,n){var r=f(n);return l(e,r,"filter",function(){var n=new(N.getType(e.constructor));return n.filteredListOut=e.filter(t),n})}function E(e,t,n,r){var i=f(r);return l(e,i,"sort",function(){e.sort(t,n)})}function w(e,t,n){var r=f(n);return l(e,r,"indexOf",function(){var n=new R;return n.positionOut=e.indexOf(t),n})}function D(e,t){var n=s.VersionedURL.getVersionedUrl(e);return u.addScript(n)}function S(e,t,n){a.log(t,e)}function x(e,t,n){void 0===n&&(n=i.default);var r=n.resolve(o.ServiceNames.LocaleService);if(!r)throw new Error("Undefined locale service: can't set current locale.");r.setCurrentLocale(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.setCurrentLocale=t.logMessage=t.requireScript=t.listIndexOf=t.listSort=t.listFilter=t.listAny=t.listAll=t.listDistinct=t.listDuplicate=t.listAppendAll=t.listRemove=t.listInsert=t.listClear=t.listAppend=void 0;var I=new r.ComplexTypeKeyedTypeFactory("DuplicatedList","duplicatedListOut"),N=new r.ComplexTypeKeyedTypeFactory("FilteredList","filteredListOut"),A=new r.ComplexTypeKeyedTypeFactory("DistinctList","distinctListOut"),O=function(){function e(){}return e.prototype.getCurrentRowNumber=function(e){return 0},e.prototype.setCurrentRowNumber=function(e,t){},e.prototype.isBeingIterated=function(e){return!1},e.prototype.registerIterationStart=function(e){},e.prototype.registerIterationEnd=function(e){},e.prototype.getIterator=function(e){return null},e.prototype.clone=function(){return this},e}();t.listAppend=d,t.listClear=p,t.listInsert=h,t.listRemove=g,t.listAppendAll=m,t.listDuplicate=y,t.listDistinct=v;var C=function(e){function t(t,n){return e.call(this,t,n)||this}return n.__extends(t,e),t.attributesToDeclare=function(){return[this.attr("Result","resultOut","resultOut",!0,!0,r.DataTypes.Boolean,function(){})].concat(e.attributesToDeclare.call(this))},t._constructor=function(){t.init()}(),t}(r.GenericRecord);t.listAll=b,t.listAny=T,t.listFilter=_,t.listSort=E;var R=function(e){function t(t,n){return e.call(this,t,n)||this}return n.__extends(t,e),t.attributesToDeclare=function(){return[this.attr("Position","positionOut","positionOut",!0,!0,r.DataTypes.Integer,function(){})].concat(e.attributesToDeclare.call(this))},t._constructor=function(){t.init()}(),t}(r.GenericRecord);t.listIndexOf=w,t.requireScript=D,t.logMessage=S,t.setCurrentLocale=x}),define("OutSystems/ClientRuntime/SystemStructures",["require","exports","tslib","./DataTypes"],function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttachmentRecordList=t.AttachmentList=t.AttachmentRecord=t.AttachmentRec=void 0;var i=function(e){function t(t,n){return e.call(this,t,n)||this}return n.__extends(t,e),t.attributesToDeclare=function(){return[this.attr("FileName","fileNameAttr","FileName",!1,!1,r.DataTypes.Text,function(){return r.defaultForType(r.DataTypes.Text)}),this.attr("FileContent","fileContentAttr","FileContent",!1,!1,r.DataTypes.BinaryData,function(){return r.defaultForType(r.DataTypes.BinaryData)}),this.attr("MimeType","mimeTypeAttr","MimeType",!1,!1,r.DataTypes.Text,function(){return r.defaultForType(r.DataTypes.Text)})].concat(e.attributesToDeclare.call(this))},t=n.__decorate([r.RecordWithStaticConstructor()],t)}(r.GenericRecord);t.AttachmentRec=i;var o=function(e){function t(t,n){return e.call(this,t,n)||this}n.__extends(t,e),o=t,t.attributesToDeclare=function(){return[this.attr("Attachment","attachmentAttr","Attachment",!1,!1,r.DataTypes.Record,function(){return r.ImmutableBase.getData(new i)},i)].concat(r.GenericRecord.attributesToDeclare())};var o;return t._isAnonymousRecord=!0,t.fromStructure=function(e){return new o(new o.RecordClass({attachmentAttr:r.ImmutableBase.getData(e)}))},t=o=n.__decorate([r.RecordWithStaticConstructor()],t)}(r.GenericRecord);t.AttachmentRecord=o;var a=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.itemType=i,t}(r.GenericRecordList);t.AttachmentList=a;var s=function(e){function t(t){return e.call(this,t)||this}return n.__extends(t,e),t.itemType=o,t}(r.GenericRecordList);t.AttachmentRecordList=s}),define("OutSystems/ClientRuntime/Utils",["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StringUtils=void 0;var n=function(){function e(){}return e.safeParseInt=function(e){var t=e;return e&&!isNaN(Number(e))&&(t=parseInt(e,10)),t},e}();t.StringUtils=n}),define("OutSystems/ClientRuntime/Main",["require","exports","./Application","./ApplicationInfo","./BuiltinFunctions","./ClientInfo","./Communication","./Controller","./CookiesManager","./CSSHelper","./DataConversion","./DataTypes","./Entities","./ErrorHandling","./ErrorScreen","./EventDispatcher","./Exceptions","./FeedbackMessageService","./Flow","./Format","./Injector","./Injector/KnownServices","./Interfaces","./JSONUtils","./LanguageResources","./LightImmutable","./Logger","./Model","./modules/Database/IndexedDB/IndexedDBSerializer","./modules/Database/IndexedDB/IndexedDBUtils","./modules/Database/TableInfoUtils","./modules/Database/WebSQL/WebSQLSerializer","./modules/Database/WebSQL/WebSQLUtils","./NativeHelper","./Navigation","./ObjectExtensions","./Performance","./Public","./RegExpHelper","./Request","./RequireManager","./ResourceCache","./RolesInfo","./ScreenStateCache","./ScriptsManager","./Settings","./StorageProvider","./SystemActions","./SystemStructures","./TransitionAnimation","./Transitions","./Utils","./Validation","./VersionDefinition","./VersionsManager","./WidgetNaming"],function(e,t,n,r,i,o,a,s,u,c,l,f,d,p,h,g,m,y,v,b,T,_,E,w,D,S,x,I,N,A,O,C,R,L,M,P,F,V,j,U,B,k,q,z,H,G,W,K,J,Q,Y,X,$,Z,ee,te){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Version=t.Public=t.Internal=void 0,B.initialize();!function(e){e.Application=n,e.ApplicationInfo=r,e.Flow=v,e.BuiltinFunctions=i,e.JSONUtils=w,e.SystemActions=K,e.SystemStructures=J,e.ResourceCache=k,e.Communication=a,e.Controller=s,e.CookiesManager=u,e.CSSHelper=c,e.DataTypes=f,e.ErrorHandling=p,e.ErrorScreen=h,e.EventDispatcher=g,e.FeedbackMessageService=y,e.Format=b,e.ServiceNames=_.ServiceNames,e.Injector=T.default,e.Interfaces=E,e.LanguageResources=D,e.LightImmutable=S,e.Logger=x,e.Model=I,e.NativeHelper=L,e.Navigation=M,e.ObjectExtensions=P,e.Request=U,e.ScriptsManager=H,e.StorageProvider=W,e.TransitionAnimation=Q,e.Transitions=Y,e.Validation=$,e.VersionsManager=ee,e.Utils=X,e.WidgetNaming=te,e.Entities=d,e.Exceptions=m,e.RegExpHelper=j,e.RequireManager=B,e.RolesInfo=q,e.Performance=F,e.ScreenStateCache=z,e.DataConversion=l,e.Settings=G,e.ClientInfo=o,e.TableInfoUtils=O,e.WebSQLSerializer=C,e.WebSQLUtils=R,e.IndexedDBSerializer=N,e.IndexedDBUtils=A,e.VersionDefinition=Z,e.Types=e.DataTypes.DataTypes}(t.Internal||(t.Internal={})),t.Public=V,t.Version="3.27.0",Z.registerPackage("client-runtime-core",t.Version)}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("es6-promise",t):e.ES6Promise=t()}(this,function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function t(e){return"function"==typeof e}function n(e){V=e}function r(e){j=e}function i(){return void 0!==F?function(){F(a)}:o()}function o(){var e=setTimeout;return function(){return e(a,1)}}function a(){for(var e=0;e<P;e+=2){(0,H[e])(H[e+1]),H[e]=void 0,H[e+1]=void 0}P=0}function s(e,t){var n=this,r=new this.constructor(c);void 0===r[W]&&S(r);var i=n._state;if(i){var o=arguments[i-1];j(function(){return E(i,r,o,n._result)})}else T(n,r,e,t);return r}function u(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(c);return m(n,e),n}function c(){}function l(){return new TypeError("You cannot resolve a promise with itself")}function f(){return new TypeError("A promises callback cannot return that same promise.")}function d(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function p(e,t,n){j(function(e){var r=!1,i=d(n,t,function(n){r||(r=!0,t!==n?m(e,n):v(e,n))},function(t){r||(r=!0,b(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,b(e,i))},e)}function h(e,t){t._state===J?v(e,t._result):t._state===Q?b(e,t._result):T(t,void 0,function(t){return m(e,t)},function(t){return b(e,t)})}function g(e,n,r){n.constructor===e.constructor&&r===s&&n.constructor.resolve===u?h(e,n):void 0===r?v(e,n):t(r)?p(e,n,r):v(e,n)}function m(t,n){if(t===n)b(t,l());else if(e(n)){var r=void 0;try{r=n.then}catch(e){return void b(t,e)}g(t,n,r)}else v(t,n)}function y(e){e._onerror&&e._onerror(e._result),_(e)}function v(e,t){e._state===K&&(e._result=t,e._state=J,0!==e._subscribers.length&&j(_,e))}function b(e,t){e._state===K&&(e._state=Q,e._result=t,j(y,e))}function T(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+J]=n,i[o+Q]=r,0===o&&e._state&&j(_,e)}function _(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?E(n,r,i,o):i(o);e._subscribers.length=0}}function E(e,n,r,i){var o=t(r),a=void 0,s=void 0,u=!0;if(o){try{a=r(i)}catch(e){u=!1,s=e}if(n===a)return void b(n,f())}else a=i;n._state!==K||(o&&u?m(n,a):!1===u?b(n,s):e===J?v(n,a):e===Q&&b(n,a))}function w(e,t){try{t(function(t){m(e,t)},function(t){b(e,t)})}catch(t){b(e,t)}}function D(){return Y++}function S(e){e[W]=Y++,e._state=void 0,e._result=void 0,e._subscribers=[]}function x(){return new Error("Array Methods must be provided an Array")}function I(e){return new X(this,e).promise}function N(e){var t=this;return new t(M(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function A(e){var t=this,n=new t(c);return b(n,e),n}function O(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function C(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function R(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=$}var L=void 0;L=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var M=L,P=0,F=void 0,V=void 0,j=function(e,t){H[P]=e,H[P+1]=t,2===(P+=2)&&(V?V(a):G())},U="undefined"!=typeof window?window:void 0,B=U||{},k=B.MutationObserver||B.WebKitMutationObserver,q="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,H=new Array(1e3),G=void 0;G=q?function(){return function(){return process.nextTick(a)}}():k?function(){var e=0,t=new k(a),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():z?function(){var e=new MessageChannel;return e.port1.onmessage=a,function(){return e.port2.postMessage(0)}}():void 0===U&&"function"==typeof require?function(){try{var e=Function("return this")().require("vertx")
;return F=e.runOnLoop||e.runOnContext,i()}catch(e){return o()}}():o();var W=Math.random().toString(36).substring(2),K=void 0,J=1,Q=2,Y=0,X=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(c),this.promise[W]||S(this.promise),M(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?v(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&v(this.promise,this._result))):b(this.promise,x())}return e.prototype._enumerate=function(e){for(var t=0;this._state===K&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===u){var i=void 0,o=void 0,a=!1;try{i=e.then}catch(e){a=!0,o=e}if(i===s&&e._state!==K)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===$){var l=new n(c);a?b(l,o):g(l,e,i),this._willSettleAt(l,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===K&&(this._remaining--,e===Q?b(r,n):this._result[t]=n),0===this._remaining&&v(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;T(e,void 0,function(e){return n._settledAt(J,t,e)},function(e){return n._settledAt(Q,t,e)})},e}(),$=function(){function e(t){this[W]=D(),this._result=this._state=void 0,this._subscribers=[],c!==t&&("function"!=typeof t&&O(),this instanceof e?w(this,t):C())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var n=this,r=n.constructor;return t(e)?n.then(function(t){return r.resolve(e()).then(function(){return t})},function(t){return r.resolve(e()).then(function(){throw t})}):n.then(e,e)},e}();return $.prototype.then=s,$.all=I,$.race=N,$.resolve=u,$.reject=A,$._setScheduler=n,$._setAsap=r,$._asap=j,$.polyfill=R,$.Promise=$,$.polyfill(),$}),function(){function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){return i(t[a][1][e]||e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}return e}()({1:[function(e,t,n){"use strict";var r,i=e("type/value/is"),o=e("type/value/ensure"),a=e("type/plain-function/ensure"),s=e("es5-ext/object/copy"),u=e("es5-ext/object/normalize-options"),c=e("es5-ext/object/map"),l=Function.prototype.bind,f=Object.defineProperty,d=Object.prototype.hasOwnProperty;r=function(e,t,n){var r,i=o(t)&&a(t.value);return r=s(t),delete r.writable,delete r.value,r.get=function(){return!n.overwriteDefinition&&d.call(this,e)?i:(t.value=l.call(i,n.resolveContext?n.resolveContext(this):this),f(this,e,t),this[e])},r},t.exports=function(e){var t=u(arguments[1]);return i(t.resolveContext)&&a(t.resolveContext),c(e,function(e,n){return r(n,e,t)})}},{"es5-ext/object/copy":24,"es5-ext/object/map":32,"es5-ext/object/normalize-options":33,"type/plain-function/ensure":77,"type/value/ensure":81,"type/value/is":82}],2:[function(e,t,n){"use strict";var r=e("type/value/is"),i=e("type/plain-function/is"),o=e("es5-ext/object/assign"),a=e("es5-ext/object/normalize-options"),s=e("es5-ext/string/#/contains");(t.exports=function(e,t){var n,i,u,c,l;return arguments.length<2||"string"!=typeof e?(c=t,t=e,e=null):c=arguments[2],r(e)?(n=s.call(e,"c"),i=s.call(e,"e"),u=s.call(e,"w")):(n=u=!0,i=!1),l={value:t,configurable:n,enumerable:i,writable:u},c?o(a(c),l):l}).gs=function(e,t,n){var u,c,l,f;return"string"!=typeof e?(l=n,n=t,t=e,e=null):l=arguments[3],r(t)?i(t)?r(n)?i(n)||(l=n,n=void 0):n=void 0:(l=t,t=n=void 0):t=void 0,r(e)?(u=s.call(e,"c"),c=s.call(e,"e")):(u=!0,c=!1),f={get:t,set:n,configurable:u,enumerable:c},l?o(a(l),f):f}},{"es5-ext/object/assign":21,"es5-ext/object/normalize-options":33,"es5-ext/string/#/contains":39,"type/plain-function/is":78,"type/value/is":82}],3:[function(e,t,n){var r=e("../../object/valid-value");t.exports=function(){return r(this).length=0,this}},{"../../object/valid-value":38}],4:[function(e,t,n){"use strict";var r=e("../../number/is-nan"),i=e("../../number/to-pos-integer"),o=e("../../object/valid-value"),a=Array.prototype.indexOf,s=Object.prototype.hasOwnProperty,u=Math.abs,c=Math.floor;t.exports=function(e){var t,n,l,f;if(!r(e))return a.apply(this,arguments);for(n=i(o(this).length),l=arguments[1],l=isNaN(l)?0:l>=0?c(l):i(this.length)-c(u(l)),t=l;t<n;++t)if(s.call(this,t)&&(f=this[t],r(f)))return t;return-1}},{"../../number/is-nan":15,"../../number/to-pos-integer":19,"../../object/valid-value":38}],5:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Array.from:e("./shim")},{"./is-implemented":6,"./shim":7}],6:[function(e,t,n){"use strict";t.exports=function(){var e,t,n=Array.from;return"function"==typeof n&&(e=["raz","dwa"],t=n(e),Boolean(t&&t!==e&&"dwa"===t[1]))}},{}],7:[function(e,t,n){"use strict";var r=e("es6-symbol").iterator,i=e("../../function/is-arguments"),o=e("../../function/is-function"),a=e("../../number/to-pos-integer"),s=e("../../object/valid-callable"),u=e("../../object/valid-value"),c=e("../../object/is-value"),l=e("../../string/is-string"),f=Array.isArray,d=Function.prototype.call,p={configurable:!0,enumerable:!0,writable:!0,value:null},h=Object.defineProperty;t.exports=function(e){var t,n,g,m,y,v,b,T,_,E,w=arguments[1],D=arguments[2];if(e=Object(u(e)),c(w)&&s(w),this&&this!==Array&&o(this))t=this;else{if(!w){if(i(e))return 1!==(y=e.length)?Array.apply(null,e):(m=new Array(1),m[0]=e[0],m);if(f(e)){for(m=new Array(y=e.length),n=0;n<y;++n)m[n]=e[n];return m}}m=[]}if(!f(e))if(void 0!==(_=e[r])){for(b=s(_).call(e),t&&(m=new t),T=b.next(),n=0;!T.done;)E=w?d.call(w,D,T.value,n):T.value,t?(p.value=E,h(m,n,p)):m[n]=E,T=b.next(),++n;y=n}else if(l(e)){for(y=e.length,t&&(m=new t),n=0,g=0;n<y;++n)E=e[n],n+1<y&&(v=E.charCodeAt(0))>=55296&&v<=56319&&(E+=e[++n]),E=w?d.call(w,D,E,g):E,t?(p.value=E,h(m,g,p)):m[g]=E,++g;y=g}if(void 0===y)for(y=a(e.length),t&&(m=new t(y)),n=0;n<y;++n)E=w?d.call(w,D,e[n],n):e[n],t?(p.value=E,h(m,n,p)):m[n]=E;return t&&(p.value=null,m.length=y),m}},{"../../function/is-arguments":8,"../../function/is-function":9,"../../number/to-pos-integer":19,"../../object/is-value":28,"../../object/valid-callable":37,"../../object/valid-value":38,"../../string/is-string":42,"es6-symbol":60}],8:[function(e,t,n){"use strict";var r=Object.prototype.toString,i=r.call(function(){return arguments}());t.exports=function(e){return r.call(e)===i}},{}],9:[function(e,t,n){"use strict";var r=Object.prototype.toString,i=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);t.exports=function(e){return"function"==typeof e&&i(r.call(e))}},{}],10:[function(e,t,n){"use strict";t.exports=function(){}},{}],11:[function(e,t,n){var r=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};t.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},{}],12:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Math.sign:e("./shim")},{"./is-implemented":13,"./shim":14}],13:[function(e,t,n){"use strict";t.exports=function(){var e=Math.sign;return"function"==typeof e&&(1===e(10)&&-1===e(-20))}},{}],14:[function(e,t,n){"use strict";t.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},{}],15:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Number.isNaN:e("./shim")},{"./is-implemented":16,"./shim":17}],16:[function(e,t,n){"use strict";t.exports=function(){var e=Number.isNaN;return"function"==typeof e&&(!e({})&&e(NaN)&&!e(34))}},{}],17:[function(e,t,n){"use strict";t.exports=function(e){return e!==e}},{}],18:[function(e,t,n){"use strict";var r=e("../math/sign"),i=Math.abs,o=Math.floor;t.exports=function(e){return isNaN(e)?0:(e=Number(e),0!==e&&isFinite(e)?r(e)*o(i(e)):e)}},{"../math/sign":12}],19:[function(e,t,n){"use strict";var r=e("./to-integer"),i=Math.max;t.exports=function(e){return i(0,r(e))}},{"./to-integer":18}],20:[function(e,t,n){var r=e("./valid-callable"),i=e("./valid-value"),o=Function.prototype.bind,a=Function.prototype.call,s=Object.keys,u=Object.prototype.propertyIsEnumerable;t.exports=function(e,t){return function(n,c){var l,f=arguments[2],d=arguments[3];return n=Object(i(n)),r(c),l=s(n),d&&l.sort("function"==typeof d?o.call(d,n):void 0),"function"!=typeof e&&(e=l[e]),a.call(e,l,function(e,r){return u.call(n,e)?a.call(c,f,n[e],e,n,r):t})}}},{"./valid-callable":37,"./valid-value":38}],21:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":22,"./shim":23}],22:[function(e,t,n){"use strict";t.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},{}],23:[function(e,t,n){"use strict";var r=e("../keys"),i=e("../valid-value"),o=Math.max;t.exports=function(e,t){var n,a,s,u=o(arguments.length,2);for(e=Object(i(e)),s=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},a=1;a<u;++a)t=arguments[a],r(t).forEach(s);if(void 0!==n)throw n;return e}},{"../keys":29,"../valid-value":38}],24:[function(e,t,n){"use strict";var r=e("../array/from"),i=e("./assign"),o=e("./valid-value");t.exports=function(e){var t=Object(o(e)),n=arguments[1],a=Object(arguments[2]);if(t!==e&&!n)return t;var s={};return n?r(n,function(t){(a.ensure||t in e)&&(s[t]=e[t])}):i(s,e),s}},{"../array/from":5,"./assign":21,"./valid-value":38}],25:[function(e,t,n){var r,i=Object.create;e("./set-prototype-of/is-implemented")()||(r=e("./set-prototype-of/shim")),t.exports=function(){var e,t,n;return r?1!==r.level?i:(e={},t={},n={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){if("__proto__"===e)return void(t[e]={configurable:!0,enumerable:!1,writable:!0,value:void 0});t[e]=n}),Object.defineProperties(e,t),Object.defineProperty(r,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:e}),function(t,n){return i(null===t?e:t,n)}):i}()},{"./set-prototype-of/is-implemented":35,"./set-prototype-of/shim":36}],26:[function(e,t,n){"use strict";t.exports=e("./_iterate")("forEach")},{"./_iterate":20}],27:[function(e,t,n){"use strict";var r=e("./is-value"),i={function:!0,object:!0};t.exports=function(e){return r(e)&&i[typeof e]||!1}},{"./is-value":28}],28:[function(e,t,n){"use strict";var r=e("../function/noop")();t.exports=function(e){return e!==r&&null!==e}},{"../function/noop":10}],29:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":30,"./shim":31}],30:[function(e,t,n){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},{}],31:[function(e,t,n){"use strict";var r=e("../is-value"),i=Object.keys;t.exports=function(e){return i(r(e)?Object(e):e)}},{"../is-value":28}],32:[function(e,t,n){"use strict";var r=e("./valid-callable"),i=e("./for-each"),o=Function.prototype.call;t.exports=function(e,t){var n={},a=arguments[2];return r(t),i(e,function(e,r,i,s){n[r]=o.call(t,a,e,r,i,s)}),n}},{"./for-each":26,"./valid-callable":37}],33:[function(e,t,n){"use strict";var r=e("./is-value"),i=Array.prototype.forEach,o=Object.create,a=function(e,t){var n;for(n in e)t[n]=e[n]};t.exports=function(e){var t=o(null);return i.call(arguments,function(e){r(e)&&a(Object(e),t)}),t}},{"./is-value":28}],34:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Object.setPrototypeOf:e("./shim")},{"./is-implemented":35,"./shim":36}],35:[function(e,t,n){"use strict";var r=Object.create,i=Object.getPrototypeOf,o={};t.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||r;return"function"==typeof e&&i(e(t(null),o))===o}},{}],36:[function(e,t,n){var r,i=e("../is-object"),o=e("../valid-value"),a=Object.prototype.isPrototypeOf,s=Object.defineProperty,u={configurable:!0,enumerable:!1,writable:!0,value:void 0};r=function(e,t){if(o(e),null===t||i(t))return e;throw new TypeError("Prototype must be null or an object")},t.exports=function(e){var t,n;return e?(2===e.level?e.set?(n=e.set,t=function(e,t){return n.call(r(e,t),t),e}):t=function(e,t){return r(e,t).__proto__=t,e}:t=function e(t,n){var i;return r(t,n),i=a.call(e.nullPolyfill,t),i&&delete e.nullPolyfill.__proto__,null===n&&(n=e.nullPolyfill),t.__proto__=n,i&&s(e.nullPolyfill,"__proto__",u),t},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e,t=Object.create(null),n={},r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(r){try{e=r.set,e.call(t,n)}catch(e){}if(Object.getPrototypeOf(t)===n)return{set:e,level:2}}return t.__proto__=n,Object.getPrototypeOf(t)===n?{level:2}:(t={},t.__proto__=n,Object.getPrototypeOf(t)===n&&{level:1})}()),e("../create")},{"../create":25,"../is-object":27,"../valid-value":38}],37:[function(e,t,n){"use strict";t.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},{}],38:[function(e,t,n){"use strict";var r=e("./is-value");t.exports=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e}},{"./is-value":28}],39:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":40,"./shim":41}],40:[function(e,t,n){"use strict";var r="razdwatrzy";t.exports=function(){return"function"==typeof r.contains&&(!0===r.contains("dwa")&&!1===r.contains("foo"))}},{}],41:[function(e,t,n){"use strict";var r=String.prototype.indexOf;t.exports=function(e){return r.call(this,e,arguments[1])>-1}},{}],42:[function(e,t,n){"use strict";var r=Object.prototype.toString,i=r.call("");t.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||r.call(e)===i)||!1}},{}],43:[function(e,t,n){"use strict";var r,i=e("es5-ext/object/set-prototype-of"),o=e("es5-ext/string/#/contains"),a=e("d"),s=e("es6-symbol"),u=e("./"),c=Object.defineProperty;r=t.exports=function(e,t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");u.call(this,e),t=t?o.call(t,"key+value")?"key+value":o.call(t,"key")?"key":"value":"value",c(this,"__kind__",a("",t))},i&&i(r,u),delete r.prototype.constructor,r.prototype=Object.create(u.prototype,{_resolve:a(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),c(r.prototype,s.toStringTag,a("c","Array Iterator"))},{"./":46,d:2,"es5-ext/object/set-prototype-of":34,"es5-ext/string/#/contains":39,"es6-symbol":60}],44:[function(e,t,n){"use strict";var r=e("es5-ext/function/is-arguments"),i=e("es5-ext/object/valid-callable"),o=e("es5-ext/string/is-string"),a=e("./get"),s=Array.isArray,u=Function.prototype.call,c=Array.prototype.some;t.exports=function(e,t){var n,l,f,d,p,h,g,m,y=arguments[2];if(s(e)||r(e)?n="array":o(e)?n="string":e=a(e),i(t),f=function(){d=!0},"array"===n)return void c.call(e,function(e){return u.call(t,y,e,f),d});if("string"!==n)for(l=e.next();!l.done;){if(u.call(t,y,l.value,f),d)return;l=e.next()}else for(h=e.length,p=0;p<h&&(g=e[p],p+1<h&&(m=g.charCodeAt(0))>=55296&&m<=56319&&(g+=e[++p]),u.call(t,y,g,f),!d);++p);}},{"./get":45,"es5-ext/function/is-arguments":8,"es5-ext/object/valid-callable":37,"es5-ext/string/is-string":42}],45:[function(e,t,n){"use strict";var r=e("es5-ext/function/is-arguments"),i=e("es5-ext/string/is-string"),o=e("./array"),a=e("./string"),s=e("./valid-iterable"),u=e("es6-symbol").iterator;t.exports=function(e){return"function"==typeof s(e)[u]?e[u]():r(e)?new o(e):i(e)?new a(e):new o(e)}},{"./array":43,"./string":48,"./valid-iterable":49,"es5-ext/function/is-arguments":8,"es5-ext/string/is-string":42,"es6-symbol":60}],46:[function(e,t,n){"use strict";var r,i=e("es5-ext/array/#/clear"),o=e("es5-ext/object/assign"),a=e("es5-ext/object/valid-callable"),s=e("es5-ext/object/valid-value"),u=e("d"),c=e("d/auto-bind"),l=e("es6-symbol"),f=Object.defineProperty,d=Object.defineProperties;t.exports=r=function(e,t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");d(this,{__list__:u("w",s(e)),__context__:u("w",t),__nextIndex__:u("w",0)}),t&&(a(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete r.prototype.constructor,d(r.prototype,o({_next:u(function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:u(function(){return this._createResult(this._next())}),_createResult:u(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:u(function(e){return this.__list__[e]}),_unBind:u(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:u(function(){return"[object "+(this[l.toStringTag]||"Object")+"]"})},c({_onAdd:u(function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void f(this,"__redo__",u("c",[e]));this.__redo__.forEach(function(t,n){t>=e&&(this.__redo__[n]=++t)},this),this.__redo__.push(e)}}),_onDelete:u(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(t=this.__redo__.indexOf(e),-1!==t&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,n){t>e&&(this.__redo__[n]=--t)},this)))}),_onClear:u(function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0})}))),f(r.prototype,l.iterator,u(function(){return this}))},{d:2,"d/auto-bind":1,"es5-ext/array/#/clear":3,"es5-ext/object/assign":21,"es5-ext/object/valid-callable":37,"es5-ext/object/valid-value":38,"es6-symbol":60}],47:[function(e,t,n){"use strict";var r=e("es5-ext/function/is-arguments"),i=e("es5-ext/object/is-value"),o=e("es5-ext/string/is-string"),a=e("es6-symbol").iterator,s=Array.isArray;t.exports=function(e){return!!i(e)&&(!!s(e)||(!!o(e)||(!!r(e)||"function"==typeof e[a])))}},{"es5-ext/function/is-arguments":8,"es5-ext/object/is-value":28,"es5-ext/string/is-string":42,"es6-symbol":60}],48:[function(e,t,n){var r,i=e("es5-ext/object/set-prototype-of"),o=e("d"),a=e("es6-symbol"),s=e("./"),u=Object.defineProperty;r=t.exports=function(e){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");e=String(e),s.call(this,e),u(this,"__length__",o("",e.length))},i&&i(r,s),delete r.prototype.constructor,r.prototype=Object.create(s.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(e){var t,n=this.__list__[e];return this.__nextIndex__===this.__length__?n:(t=n.charCodeAt(0),t>=55296&&t<=56319?n+this.__list__[this.__nextIndex__++]:n)})}),u(r.prototype,a.toStringTag,o("c","String Iterator"))},{"./":46,d:2,"es5-ext/object/set-prototype-of":34,"es6-symbol":60}],49:[function(e,t,n){"use strict";var r=e("./is-iterable");t.exports=function(e){if(!r(e))throw new TypeError(e+" is not iterable");return e}},{"./is-iterable":47}],50:[function(e,t,n){"use strict";e("./is-implemented")()||Object.defineProperty(e("es5-ext/global"),"Set",{value:e("./polyfill"),configurable:!0,enumerable:!1,writable:!0})},{"./is-implemented":51,"./polyfill":59,"es5-ext/global":11}],51:[function(e,t,n){"use strict";t.exports=function(){var e,t,n;return"function"==typeof Set&&(e=new Set(["raz","dwa","trzy"]),"[object Set]"===String(e)&&(3===e.size&&("function"==typeof e.add&&("function"==typeof e.clear&&("function"==typeof e.delete&&("function"==typeof e.entries&&("function"==typeof e.forEach&&("function"==typeof e.has&&("function"==typeof e.keys&&("function"==typeof e.values&&(t=e.values(),n=t.next(),!1===n.done&&"raz"===n.value)))))))))))}},{}],52:[function(e,t,n){t.exports=function(){return"undefined"!=typeof Set&&"[object Set]"===Object.prototype.toString.call(Set.prototype)}()},{}],53:[function(e,t,n){"use strict";var r,i=e("es5-ext/object/set-prototype-of"),o=e("es5-ext/string/#/contains"),a=e("d"),s=e("es6-iterator"),u=e("es6-symbol").toStringTag,c=Object.defineProperty;r=t.exports=function(e,t){if(!(this instanceof r))return new r(e,t);s.call(this,e.__setData__,e),t=t&&o.call(t,"key+value")?"key+value":"value",c(this,"__kind__",a("",t))},i&&i(r,s),r.prototype=Object.create(s.prototype,{constructor:a(r),_resolve:a(function(e){return"value"===this.__kind__?this.__list__[e]:[this.__list__[e],this.__list__[e]]}),toString:a(function(){return"[object Set Iterator]"})}),c(r.prototype,u,a("c","Set Iterator"))},{d:2,"es5-ext/object/set-prototype-of":34,"es5-ext/string/#/contains":39,"es6-iterator":46,"es6-symbol":54}],54:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Symbol:e("./polyfill")},{"./is-implemented":55,"./polyfill":57}],55:[function(e,t,n){"use strict";var r={object:!0,symbol:!0};t.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(e){return!1}return!!r[typeof Symbol.iterator]&&(!!r[typeof Symbol.toPrimitive]&&!!r[typeof Symbol.toStringTag])}},{}],56:[function(e,t,n){"use strict";t.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},{}],57:[function(e,t,n){var r,i,o,a,s=e("d"),u=e("./validate-symbol"),c=Object.create,l=Object.defineProperties,f=Object.defineProperty,d=Object.prototype,p=c(null);if("function"==typeof Symbol){r=Symbol;try{String(r()),a=!0}catch(e){}}var h=function(){var e=c(null);return function(t){for(var n,r,i=0;e[t+(i||"")];)++i;return t+=i||"",e[t]=!0,n="@@"+t,f(d,n,s.gs(null,function(e){r||(r=!0,f(this,n,s(e)),r=!1)})),n}}();o=function(e){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return i(e)},t.exports=i=function e(t){var n;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return a?r(t):(n=c(o.prototype),t=void 0===t?"":String(t),l(n,{__description__:s("",t),__name__:s("",h(t))}))},l(i,{for:s(function(e){return p[e]?p[e]:p[e]=i(String(e))}),keyFor:s(function(e){var t;u(e);for(t in p)if(p[t]===e)return t}),hasInstance:s("",r&&r.hasInstance||i("hasInstance")),isConcatSpreadable:s("",r&&r.isConcatSpreadable||i("isConcatSpreadable")),iterator:s("",r&&r.iterator||i("iterator")),match:s("",r&&r.match||i("match")),replace:s("",r&&r.replace||i("replace")),search:s("",r&&r.search||i("search")),species:s("",r&&r.species||i("species")),split:s("",r&&r.split||i("split")),toPrimitive:s("",r&&r.toPrimitive||i("toPrimitive")),toStringTag:s("",r&&r.toStringTag||i("toStringTag")),unscopables:s("",r&&r.unscopables||i("unscopables"))}),l(o.prototype,{constructor:s(i),toString:s("",function(){return this.__name__})}),l(i.prototype,{toString:s(function(){return"Symbol ("+u(this).__description__+")"}),valueOf:s(function(){return u(this)})}),f(i.prototype,i.toPrimitive,s("",function(){var e=u(this);return"symbol"==typeof e?e:e.toString()})),f(i.prototype,i.toStringTag,s("c","Symbol")),f(o.prototype,i.toStringTag,s("c",i.prototype[i.toStringTag])),f(o.prototype,i.toPrimitive,s("c",i.prototype[i.toPrimitive]))},{"./validate-symbol":58,d:2}],58:[function(e,t,n){"use strict";var r=e("./is-symbol");t.exports=function(e){if(!r(e))throw new TypeError(e+" is not a symbol");return e}},{"./is-symbol":56}],59:[function(e,t,n){"use strict";var r,i,o,a=e("es5-ext/array/#/clear"),s=e("es5-ext/array/#/e-index-of"),u=e("es5-ext/object/set-prototype-of"),c=e("es5-ext/object/valid-callable"),l=e("d"),f=e("event-emitter"),d=e("es6-symbol"),p=e("es6-iterator/valid-iterable"),h=e("es6-iterator/for-of"),g=e("./lib/iterator"),m=e("./is-native-implemented"),y=Function.prototype.call,v=Object.defineProperty,b=Object.getPrototypeOf;m&&(o=Set),t.exports=r=function(){var e,t=arguments[0];if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");return e=m&&u?u(new o,b(this)):this,null!=t&&p(t),v(e,"__setData__",l("c",[])),t?(h(t,function(e){-1===s.call(this,e)&&this.push(e)},e.__setData__),e):e},m&&(u&&u(r,o),r.prototype=Object.create(o.prototype,{constructor:l(r)})),f(Object.defineProperties(r.prototype,{add:l(function(e){return this.has(e)?this:(this.emit("_add",this.__setData__.push(e)-1,e),this)}),clear:l(function(){this.__setData__.length&&(a.call(this.__setData__),this.emit("_clear"))}),delete:l(function(e){var t=s.call(this.__setData__,e);return-1!==t&&(this.__setData__.splice(t,1),this.emit("_delete",t,e),!0)}),entries:l(function(){return new g(this,"key+value")}),forEach:l(function(e){var t,n,r,i=arguments[1];for(c(e),t=this.values(),n=t._next();void 0!==n;)r=t._resolve(n),y.call(e,i,r,r,this),n=t._next()}),has:l(function(e){return-1!==s.call(this.__setData__,e)}),keys:l(i=function(){return this.values()}),size:l.gs(function(){return this.__setData__.length}),values:l(function(){return new g(this)}),toString:l(function(){return"[object Set]"})})),v(r.prototype,d.iterator,l(i)),v(r.prototype,d.toStringTag,l("c","Set"))},{"./is-native-implemented":52,"./lib/iterator":53,d:2,"es5-ext/array/#/clear":3,"es5-ext/array/#/e-index-of":4,"es5-ext/object/set-prototype-of":34,"es5-ext/object/valid-callable":37,"es6-iterator/for-of":44,"es6-iterator/valid-iterable":49,"es6-symbol":54,"event-emitter":68}],60:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?e("ext/global-this").Symbol:e("./polyfill")},{"./is-implemented":61,"./polyfill":66,"ext/global-this":70}],61:[function(e,t,n){"use strict";var r=e("ext/global-this"),i={object:!0,symbol:!0};t.exports=function(){var e,t=r.Symbol;if("function"!=typeof t)return!1;e=t("test symbol");try{String(e)}catch(e){return!1}return!!i[typeof t.iterator]&&(!!i[typeof t.toPrimitive]&&!!i[typeof t.toStringTag])}},{"ext/global-this":70}],62:[function(e,t,n){"use strict";t.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},{}],63:[function(e,t,n){"use strict";var r=e("d"),i=Object.create,o=Object.defineProperty,a=Object.prototype,s=i(null);t.exports=function(e){for(var t,n,i=0;s[e+(i||"")];)++i;return e+=i||"",s[e]=!0,t="@@"+e,o(a,t,r.gs(null,function(e){n||(n=!0,o(this,t,r(e)),n=!1)})),t}},{d:2}],64:[function(e,t,n){"use strict";var r=e("d"),i=e("ext/global-this").Symbol;t.exports=function(e){return Object.defineProperties(e,{hasInstance:r("",i&&i.hasInstance||e("hasInstance")),isConcatSpreadable:r("",i&&i.isConcatSpreadable||e("isConcatSpreadable")),iterator:r("",i&&i.iterator||e("iterator")),match:r("",i&&i.match||e("match")),replace:r("",i&&i.replace||e("replace")),search:r("",i&&i.search||e("search")),species:r("",i&&i.species||e("species")),split:r("",i&&i.split||e("split")),toPrimitive:r("",i&&i.toPrimitive||e("toPrimitive")),toStringTag:r("",i&&i.toStringTag||e("toStringTag")),unscopables:r("",i&&i.unscopables||e("unscopables"))})}},{d:2,"ext/global-this":70}],65:[function(e,t,n){"use strict";var r=e("d"),i=e("../../../validate-symbol"),o=Object.create(null);t.exports=function(e){return Object.defineProperties(e,{for:r(function(t){return o[t]?o[t]:o[t]=e(String(t))}),keyFor:r(function(e){var t;i(e);for(t in o)if(o[t]===e)return t})})}},{"../../../validate-symbol":67,d:2}],66:[function(e,t,n){var r,i,o,a=e("d"),s=e("./validate-symbol"),u=e("ext/global-this").Symbol,c=e("./lib/private/generate-name"),l=e("./lib/private/setup/standard-symbols"),f=e("./lib/private/setup/symbol-registry"),d=Object.create,p=Object.defineProperties,h=Object.defineProperty;if("function"==typeof u)try{String(u()),o=!0}catch(e){}else u=null;i=function(e){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return r(e)},t.exports=r=function e(t){var n;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return o?u(t):(n=d(i.prototype),t=void 0===t?"":String(t),p(n,{__description__:a("",t),__name__:a("",c(t))}))},l(r),f(r),p(i.prototype,{constructor:a(r),toString:a("",function(){return this.__name__})}),p(r.prototype,{toString:a(function(){return"Symbol ("+s(this).__description__+")"}),valueOf:a(function(){return s(this)})}),h(r.prototype,r.toPrimitive,a("",function(){var e=s(this);return"symbol"==typeof e?e:e.toString()})),h(r.prototype,r.toStringTag,a("c","Symbol")),h(i.prototype,r.toStringTag,a("c",r.prototype[r.toStringTag])),h(i.prototype,r.toPrimitive,a("c",r.prototype[r.toPrimitive]))},{"./lib/private/generate-name":63,"./lib/private/setup/standard-symbols":64,"./lib/private/setup/symbol-registry":65,"./validate-symbol":67,d:2,"ext/global-this":70}],67:[function(e,t,n){"use strict";var r=e("./is-symbol");t.exports=function(e){if(!r(e))throw new TypeError(e+" is not a symbol");return e}},{"./is-symbol":62}],68:[function(e,t,n){"use strict";var r,i,o,a,s,u,c,l=e("d"),f=e("es5-ext/object/valid-callable"),d=Function.prototype.apply,p=Function.prototype.call,h=Object.create,g=Object.defineProperty,m=Object.defineProperties,y=Object.prototype.hasOwnProperty,v={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n;return f(t),y.call(this,"__ee__")?n=this.__ee__:(n=v.value=h(null),g(this,"__ee__",v),v.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},i=function(e,t){var n,i;return f(t),i=this,r.call(this,e,n=function(){o.call(i,e,n),d.call(t,this,arguments)}),n.__eeOnceListener__=t,this},o=function(e,t){var n,r,i,o;if(f(t),!y.call(this,"__ee__"))return this;if(n=this.__ee__,!n[e])return this;if("object"==typeof(r=n[e]))for(o=0;i=r[o];++o)i!==t&&i.__eeOnceListener__!==t||(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},a=function(e){var t,n,r,i,o;if(y.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;r=i[t];++t)d.call(r,this,o)}else switch(arguments.length){case 1:p.call(i,this);break;case 2:p.call(i,this,arguments[1]);break;case 3:p.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];d.call(i,this,o)}},s={on:r,once:i,off:o,emit:a},u={on:l(r),once:l(i),off:l(o),emit:l(a)},c=m({},u),t.exports=n=function(e){return null==e?h(c):m(Object(e),u)},n.methods=s},{d:2,"es5-ext/object/valid-callable":37}],69:[function(e,t,n){var r=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};t.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},{}],70:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?globalThis:e("./implementation")},{"./implementation":69,"./is-implemented":71}],71:[function(e,t,n){"use strict";t.exports=function(){return"object"==typeof globalThis&&(!!globalThis&&globalThis.Array===Array)}},{}],72:[function(e,t,n){"use strict";var r=e("../prototype/is");t.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!r(e)}},{"../prototype/is":79}],73:[function(e,t,n){"use strict";var r=e("../value/is"),i=e("../object/is"),o=e("../string/coerce"),a=e("./to-short-string"),s=function(e,t){return e.replace("%v",a(t))};t.exports=function(e,t,n){
if(!i(n))throw new TypeError(s(t,e));if(!r(e)){if("default"in n)return n.default;if(n.isOptional)return null}var a=o(n.errorMessage);throw r(a)||(a=t),new TypeError(s(a,e))}},{"../object/is":76,"../string/coerce":80,"../value/is":82,"./to-short-string":75}],74:[function(e,t,n){"use strict";t.exports=function(e){try{return e.toString()}catch(t){try{return String(e)}catch(e){return null}}}},{}],75:[function(e,t,n){"use strict";var r=e("./safe-to-string"),i=/[\n\r\u2028\u2029]/g;t.exports=function(e){var t=r(e);return null===t?"<Non-coercible to string value>":(t.length>100&&(t=t.slice(0,99)+""),t=t.replace(i,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":74}],76:[function(e,t,n){"use strict";var r=e("../value/is"),i={object:!0,function:!0,undefined:!0};t.exports=function(e){return!!r(e)&&hasOwnProperty.call(i,typeof e)}},{"../value/is":82}],77:[function(e,t,n){"use strict";var r=e("../lib/resolve-exception"),i=e("./is");t.exports=function(e){return i(e)?e:r(e,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":73,"./is":78}],78:[function(e,t,n){"use strict";var r=e("../function/is"),i=/^\s*class[\s{/}]/,o=Function.prototype.toString;t.exports=function(e){return!!r(e)&&!i.test(o.call(e))}},{"../function/is":72}],79:[function(e,t,n){"use strict";var r=e("../object/is");t.exports=function(e){if(!r(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},{"../object/is":76}],80:[function(e,t,n){"use strict";var r=e("../value/is"),i=e("../object/is"),o=Object.prototype.toString;t.exports=function(e){if(!r(e))return null;if(i(e)){var t=e.toString;if("function"!=typeof t)return null;if(t===o)return null}try{return""+e}catch(e){return null}}},{"../object/is":76,"../value/is":82}],81:[function(e,t,n){"use strict";var r=e("../lib/resolve-exception"),i=e("./is");t.exports=function(e){return i(e)?e:r(e,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":73,"./is":82}],82:[function(e,t,n){"use strict";t.exports=function(e){return void 0!==e&&null!==e}},{}]},{},[50]),define("es6-set",function(){}),function(){function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){return i(t[a][1][e]||e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}return e}()({1:[function(e,t,n){"use strict";var r,i=e("type/value/is"),o=e("type/value/ensure"),a=e("type/plain-function/ensure"),s=e("es5-ext/object/copy"),u=e("es5-ext/object/normalize-options"),c=e("es5-ext/object/map"),l=Function.prototype.bind,f=Object.defineProperty,d=Object.prototype.hasOwnProperty;r=function(e,t,n){var r,i=o(t)&&a(t.value);return r=s(t),delete r.writable,delete r.value,r.get=function(){return!n.overwriteDefinition&&d.call(this,e)?i:(t.value=l.call(i,n.resolveContext?n.resolveContext(this):this),f(this,e,t),this[e])},r},t.exports=function(e){var t=u(arguments[1]);return i(t.resolveContext)&&a(t.resolveContext),c(e,function(e,n){return r(n,e,t)})}},{"es5-ext/object/copy":24,"es5-ext/object/map":32,"es5-ext/object/normalize-options":33,"type/plain-function/ensure":74,"type/value/ensure":78,"type/value/is":79}],2:[function(e,t,n){"use strict";var r=e("type/value/is"),i=e("type/plain-function/is"),o=e("es5-ext/object/assign"),a=e("es5-ext/object/normalize-options"),s=e("es5-ext/string/#/contains");(t.exports=function(e,t){var n,i,u,c,l;return arguments.length<2||"string"!=typeof e?(c=t,t=e,e=null):c=arguments[2],r(e)?(n=s.call(e,"c"),i=s.call(e,"e"),u=s.call(e,"w")):(n=u=!0,i=!1),l={value:t,configurable:n,enumerable:i,writable:u},c?o(a(c),l):l}).gs=function(e,t,n){var u,c,l,f;return"string"!=typeof e?(l=n,n=t,t=e,e=null):l=arguments[3],r(t)?i(t)?r(n)?i(n)||(l=n,n=void 0):n=void 0:(l=t,t=n=void 0):t=void 0,r(e)?(u=s.call(e,"c"),c=s.call(e,"e")):(u=!0,c=!1),f={get:t,set:n,configurable:u,enumerable:c},l?o(a(l),f):f}},{"es5-ext/object/assign":21,"es5-ext/object/normalize-options":33,"es5-ext/string/#/contains":40,"type/plain-function/is":75,"type/value/is":79}],3:[function(e,t,n){var r=e("../../object/valid-value");t.exports=function(){return r(this).length=0,this}},{"../../object/valid-value":39}],4:[function(e,t,n){"use strict";var r=e("../../number/is-nan"),i=e("../../number/to-pos-integer"),o=e("../../object/valid-value"),a=Array.prototype.indexOf,s=Object.prototype.hasOwnProperty,u=Math.abs,c=Math.floor;t.exports=function(e){var t,n,l,f;if(!r(e))return a.apply(this,arguments);for(n=i(o(this).length),l=arguments[1],l=isNaN(l)?0:l>=0?c(l):i(this.length)-c(u(l)),t=l;t<n;++t)if(s.call(this,t)&&(f=this[t],r(f)))return t;return-1}},{"../../number/is-nan":15,"../../number/to-pos-integer":19,"../../object/valid-value":39}],5:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Array.from:e("./shim")},{"./is-implemented":6,"./shim":7}],6:[function(e,t,n){"use strict";t.exports=function(){var e,t,n=Array.from;return"function"==typeof n&&(e=["raz","dwa"],t=n(e),Boolean(t&&t!==e&&"dwa"===t[1]))}},{}],7:[function(e,t,n){"use strict";var r=e("es6-symbol").iterator,i=e("../../function/is-arguments"),o=e("../../function/is-function"),a=e("../../number/to-pos-integer"),s=e("../../object/valid-callable"),u=e("../../object/valid-value"),c=e("../../object/is-value"),l=e("../../string/is-string"),f=Array.isArray,d=Function.prototype.call,p={configurable:!0,enumerable:!0,writable:!0,value:null},h=Object.defineProperty;t.exports=function(e){var t,n,g,m,y,v,b,T,_,E,w=arguments[1],D=arguments[2];if(e=Object(u(e)),c(w)&&s(w),this&&this!==Array&&o(this))t=this;else{if(!w){if(i(e))return 1!==(y=e.length)?Array.apply(null,e):(m=new Array(1),m[0]=e[0],m);if(f(e)){for(m=new Array(y=e.length),n=0;n<y;++n)m[n]=e[n];return m}}m=[]}if(!f(e))if(void 0!==(_=e[r])){for(b=s(_).call(e),t&&(m=new t),T=b.next(),n=0;!T.done;)E=w?d.call(w,D,T.value,n):T.value,t?(p.value=E,h(m,n,p)):m[n]=E,T=b.next(),++n;y=n}else if(l(e)){for(y=e.length,t&&(m=new t),n=0,g=0;n<y;++n)E=e[n],n+1<y&&(v=E.charCodeAt(0))>=55296&&v<=56319&&(E+=e[++n]),E=w?d.call(w,D,E,g):E,t?(p.value=E,h(m,g,p)):m[g]=E,++g;y=g}if(void 0===y)for(y=a(e.length),t&&(m=new t(y)),n=0;n<y;++n)E=w?d.call(w,D,e[n],n):e[n],t?(p.value=E,h(m,n,p)):m[n]=E;return t&&(p.value=null,m.length=y),m}},{"../../function/is-arguments":8,"../../function/is-function":9,"../../number/to-pos-integer":19,"../../object/is-value":28,"../../object/valid-callable":38,"../../object/valid-value":39,"../../string/is-string":43,"es6-symbol":57}],8:[function(e,t,n){"use strict";var r=Object.prototype.toString,i=r.call(function(){return arguments}());t.exports=function(e){return r.call(e)===i}},{}],9:[function(e,t,n){"use strict";var r=Object.prototype.toString,i=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);t.exports=function(e){return"function"==typeof e&&i(r.call(e))}},{}],10:[function(e,t,n){"use strict";t.exports=function(){}},{}],11:[function(e,t,n){var r=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};t.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},{}],12:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Math.sign:e("./shim")},{"./is-implemented":13,"./shim":14}],13:[function(e,t,n){"use strict";t.exports=function(){var e=Math.sign;return"function"==typeof e&&(1===e(10)&&-1===e(-20))}},{}],14:[function(e,t,n){"use strict";t.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},{}],15:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Number.isNaN:e("./shim")},{"./is-implemented":16,"./shim":17}],16:[function(e,t,n){"use strict";t.exports=function(){var e=Number.isNaN;return"function"==typeof e&&(!e({})&&e(NaN)&&!e(34))}},{}],17:[function(e,t,n){"use strict";t.exports=function(e){return e!==e}},{}],18:[function(e,t,n){"use strict";var r=e("../math/sign"),i=Math.abs,o=Math.floor;t.exports=function(e){return isNaN(e)?0:(e=Number(e),0!==e&&isFinite(e)?r(e)*o(i(e)):e)}},{"../math/sign":12}],19:[function(e,t,n){"use strict";var r=e("./to-integer"),i=Math.max;t.exports=function(e){return i(0,r(e))}},{"./to-integer":18}],20:[function(e,t,n){var r=e("./valid-callable"),i=e("./valid-value"),o=Function.prototype.bind,a=Function.prototype.call,s=Object.keys,u=Object.prototype.propertyIsEnumerable;t.exports=function(e,t){return function(n,c){var l,f=arguments[2],d=arguments[3];return n=Object(i(n)),r(c),l=s(n),d&&l.sort("function"==typeof d?o.call(d,n):void 0),"function"!=typeof e&&(e=l[e]),a.call(e,l,function(e,r){return u.call(n,e)?a.call(c,f,n[e],e,n,r):t})}}},{"./valid-callable":38,"./valid-value":39}],21:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":22,"./shim":23}],22:[function(e,t,n){"use strict";t.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},{}],23:[function(e,t,n){"use strict";var r=e("../keys"),i=e("../valid-value"),o=Math.max;t.exports=function(e,t){var n,a,s,u=o(arguments.length,2);for(e=Object(i(e)),s=function(r){try{e[r]=t[r]}catch(e){n||(n=e)}},a=1;a<u;++a)t=arguments[a],r(t).forEach(s);if(void 0!==n)throw n;return e}},{"../keys":29,"../valid-value":39}],24:[function(e,t,n){"use strict";var r=e("../array/from"),i=e("./assign"),o=e("./valid-value");t.exports=function(e){var t=Object(o(e)),n=arguments[1],a=Object(arguments[2]);if(t!==e&&!n)return t;var s={};return n?r(n,function(t){(a.ensure||t in e)&&(s[t]=e[t])}):i(s,e),s}},{"../array/from":5,"./assign":21,"./valid-value":39}],25:[function(e,t,n){var r,i=Object.create;e("./set-prototype-of/is-implemented")()||(r=e("./set-prototype-of/shim")),t.exports=function(){var e,t,n;return r?1!==r.level?i:(e={},t={},n={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){if("__proto__"===e)return void(t[e]={configurable:!0,enumerable:!1,writable:!0,value:void 0});t[e]=n}),Object.defineProperties(e,t),Object.defineProperty(r,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:e}),function(t,n){return i(null===t?e:t,n)}):i}()},{"./set-prototype-of/is-implemented":36,"./set-prototype-of/shim":37}],26:[function(e,t,n){"use strict";t.exports=e("./_iterate")("forEach")},{"./_iterate":20}],27:[function(e,t,n){"use strict";var r=e("./is-value"),i={function:!0,object:!0};t.exports=function(e){return r(e)&&i[typeof e]||!1}},{"./is-value":28}],28:[function(e,t,n){"use strict";var r=e("../function/noop")();t.exports=function(e){return e!==r&&null!==e}},{"../function/noop":10}],29:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":30,"./shim":31}],30:[function(e,t,n){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},{}],31:[function(e,t,n){"use strict";var r=e("../is-value"),i=Object.keys;t.exports=function(e){return i(r(e)?Object(e):e)}},{"../is-value":28}],32:[function(e,t,n){"use strict";var r=e("./valid-callable"),i=e("./for-each"),o=Function.prototype.call;t.exports=function(e,t){var n={},a=arguments[2];return r(t),i(e,function(e,r,i,s){n[r]=o.call(t,a,e,r,i,s)}),n}},{"./for-each":26,"./valid-callable":38}],33:[function(e,t,n){"use strict";var r=e("./is-value"),i=Array.prototype.forEach,o=Object.create,a=function(e,t){var n;for(n in e)t[n]=e[n]};t.exports=function(e){var t=o(null);return i.call(arguments,function(e){r(e)&&a(Object(e),t)}),t}},{"./is-value":28}],34:[function(e,t,n){"use strict";var r=Array.prototype.forEach,i=Object.create;t.exports=function(e){var t=i(null);return r.call(arguments,function(e){t[e]=!0}),t}},{}],35:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Object.setPrototypeOf:e("./shim")},{"./is-implemented":36,"./shim":37}],36:[function(e,t,n){"use strict";var r=Object.create,i=Object.getPrototypeOf,o={};t.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||r;return"function"==typeof e&&i(e(t(null),o))===o}},{}],37:[function(e,t,n){var r,i=e("../is-object"),o=e("../valid-value"),a=Object.prototype.isPrototypeOf,s=Object.defineProperty,u={configurable:!0,enumerable:!1,writable:!0,value:void 0};r=function(e,t){if(o(e),null===t||i(t))return e;throw new TypeError("Prototype must be null or an object")},t.exports=function(e){var t,n;return e?(2===e.level?e.set?(n=e.set,t=function(e,t){return n.call(r(e,t),t),e}):t=function(e,t){return r(e,t).__proto__=t,e}:t=function e(t,n){var i;return r(t,n),i=a.call(e.nullPolyfill,t),i&&delete e.nullPolyfill.__proto__,null===n&&(n=e.nullPolyfill),t.__proto__=n,i&&s(e.nullPolyfill,"__proto__",u),t},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e,t=Object.create(null),n={},r=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(r){try{e=r.set,e.call(t,n)}catch(e){}if(Object.getPrototypeOf(t)===n)return{set:e,level:2}}return t.__proto__=n,Object.getPrototypeOf(t)===n?{level:2}:(t={},t.__proto__=n,Object.getPrototypeOf(t)===n&&{level:1})}()),e("../create")},{"../create":25,"../is-object":27,"../valid-value":39}],38:[function(e,t,n){"use strict";t.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},{}],39:[function(e,t,n){"use strict";var r=e("./is-value");t.exports=function(e){if(!r(e))throw new TypeError("Cannot use null or undefined");return e}},{"./is-value":28}],40:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":41,"./shim":42}],41:[function(e,t,n){"use strict";var r="razdwatrzy";t.exports=function(){return"function"==typeof r.contains&&(!0===r.contains("dwa")&&!1===r.contains("foo"))}},{}],42:[function(e,t,n){"use strict";var r=String.prototype.indexOf;t.exports=function(e){return r.call(this,e,arguments[1])>-1}},{}],43:[function(e,t,n){"use strict";var r=Object.prototype.toString,i=r.call("");t.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||r.call(e)===i)||!1}},{}],44:[function(e,t,n){"use strict";var r,i=e("es5-ext/object/set-prototype-of"),o=e("es5-ext/string/#/contains"),a=e("d"),s=e("es6-symbol"),u=e("./"),c=Object.defineProperty;r=t.exports=function(e,t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");u.call(this,e),t=t?o.call(t,"key+value")?"key+value":o.call(t,"key")?"key":"value":"value",c(this,"__kind__",a("",t))},i&&i(r,u),delete r.prototype.constructor,r.prototype=Object.create(u.prototype,{_resolve:a(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),c(r.prototype,s.toStringTag,a("c","Array Iterator"))},{"./":47,d:2,"es5-ext/object/set-prototype-of":35,"es5-ext/string/#/contains":40,"es6-symbol":57}],45:[function(e,t,n){"use strict";var r=e("es5-ext/function/is-arguments"),i=e("es5-ext/object/valid-callable"),o=e("es5-ext/string/is-string"),a=e("./get"),s=Array.isArray,u=Function.prototype.call,c=Array.prototype.some;t.exports=function(e,t){var n,l,f,d,p,h,g,m,y=arguments[2];if(s(e)||r(e)?n="array":o(e)?n="string":e=a(e),i(t),f=function(){d=!0},"array"===n)return void c.call(e,function(e){return u.call(t,y,e,f),d});if("string"!==n)for(l=e.next();!l.done;){if(u.call(t,y,l.value,f),d)return;l=e.next()}else for(h=e.length,p=0;p<h&&(g=e[p],p+1<h&&(m=g.charCodeAt(0))>=55296&&m<=56319&&(g+=e[++p]),u.call(t,y,g,f),!d);++p);}},{"./get":46,"es5-ext/function/is-arguments":8,"es5-ext/object/valid-callable":38,"es5-ext/string/is-string":43}],46:[function(e,t,n){"use strict";var r=e("es5-ext/function/is-arguments"),i=e("es5-ext/string/is-string"),o=e("./array"),a=e("./string"),s=e("./valid-iterable"),u=e("es6-symbol").iterator;t.exports=function(e){return"function"==typeof s(e)[u]?e[u]():r(e)?new o(e):i(e)?new a(e):new o(e)}},{"./array":44,"./string":49,"./valid-iterable":50,"es5-ext/function/is-arguments":8,"es5-ext/string/is-string":43,"es6-symbol":57}],47:[function(e,t,n){"use strict";var r,i=e("es5-ext/array/#/clear"),o=e("es5-ext/object/assign"),a=e("es5-ext/object/valid-callable"),s=e("es5-ext/object/valid-value"),u=e("d"),c=e("d/auto-bind"),l=e("es6-symbol"),f=Object.defineProperty,d=Object.defineProperties;t.exports=r=function(e,t){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");d(this,{__list__:u("w",s(e)),__context__:u("w",t),__nextIndex__:u("w",0)}),t&&(a(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete r.prototype.constructor,d(r.prototype,o({_next:u(function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:u(function(){return this._createResult(this._next())}),_createResult:u(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:u(function(e){return this.__list__[e]}),_unBind:u(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:u(function(){return"[object "+(this[l.toStringTag]||"Object")+"]"})},c({_onAdd:u(function(e){if(!(e>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void f(this,"__redo__",u("c",[e]));this.__redo__.forEach(function(t,n){t>=e&&(this.__redo__[n]=++t)},this),this.__redo__.push(e)}}),_onDelete:u(function(e){var t;e>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(t=this.__redo__.indexOf(e),-1!==t&&this.__redo__.splice(t,1),this.__redo__.forEach(function(t,n){t>e&&(this.__redo__[n]=--t)},this)))}),_onClear:u(function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0})}))),f(r.prototype,l.iterator,u(function(){return this}))},{d:2,"d/auto-bind":1,"es5-ext/array/#/clear":3,"es5-ext/object/assign":21,"es5-ext/object/valid-callable":38,"es5-ext/object/valid-value":39,"es6-symbol":57}],48:[function(e,t,n){"use strict";var r=e("es5-ext/function/is-arguments"),i=e("es5-ext/object/is-value"),o=e("es5-ext/string/is-string"),a=e("es6-symbol").iterator,s=Array.isArray;t.exports=function(e){return!!i(e)&&(!!s(e)||(!!o(e)||(!!r(e)||"function"==typeof e[a])))}},{"es5-ext/function/is-arguments":8,"es5-ext/object/is-value":28,"es5-ext/string/is-string":43,"es6-symbol":57}],49:[function(e,t,n){var r,i=e("es5-ext/object/set-prototype-of"),o=e("d"),a=e("es6-symbol"),s=e("./"),u=Object.defineProperty;r=t.exports=function(e){if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");e=String(e),s.call(this,e),u(this,"__length__",o("",e.length))},i&&i(r,s),delete r.prototype.constructor,r.prototype=Object.create(s.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(e){var t,n=this.__list__[e];return this.__nextIndex__===this.__length__?n:(t=n.charCodeAt(0),t>=55296&&t<=56319?n+this.__list__[this.__nextIndex__++]:n)})}),u(r.prototype,a.toStringTag,o("c","String Iterator"))},{"./":47,d:2,"es5-ext/object/set-prototype-of":35,"es6-symbol":57}],50:[function(e,t,n){"use strict";var r=e("./is-iterable");t.exports=function(e){if(!r(e))throw new TypeError(e+" is not iterable");return e}},{"./is-iterable":48}],51:[function(e,t,n){"use strict";e("./is-implemented")()||Object.defineProperty(e("es5-ext/global"),"Map",{value:e("./polyfill"),configurable:!0,enumerable:!1,writable:!0})},{"./is-implemented":52,"./polyfill":56,"es5-ext/global":11}],52:[function(e,t,n){"use strict";t.exports=function(){var e,t,n;if("function"!=typeof Map)return!1;try{e=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(e){return!1}return"[object Map]"===String(e)&&(3===e.size&&("function"==typeof e.clear&&("function"==typeof e.delete&&("function"==typeof e.entries&&("function"==typeof e.forEach&&("function"==typeof e.get&&("function"==typeof e.has&&("function"==typeof e.keys&&("function"==typeof e.set&&("function"==typeof e.values&&(t=e.entries(),n=t.next(),!1===n.done&&(!!n.value&&("raz"===n.value[0]&&"one"===n.value[1])))))))))))))}},{}],53:[function(e,t,n){t.exports=function(){return"undefined"!=typeof Map&&"[object Map]"===Object.prototype.toString.call(new Map)}()},{}],54:[function(e,t,n){"use strict";t.exports=e("es5-ext/object/primitive-set")("key","value","key+value")},{"es5-ext/object/primitive-set":34}],55:[function(e,t,n){"use strict";var r,i=e("es5-ext/object/set-prototype-of"),o=e("d"),a=e("es6-iterator"),s=e("es6-symbol").toStringTag,u=e("./iterator-kinds"),c=Object.defineProperties,l=a.prototype._unBind;r=t.exports=function(e,t){if(!(this instanceof r))return new r(e,t);a.call(this,e.__mapKeysData__,e),t&&u[t]||(t="key+value"),c(this,{__kind__:o("",t),__values__:o("w",e.__mapValuesData__)})},i&&i(r,a),r.prototype=Object.create(a.prototype,{constructor:o(r),_resolve:o(function(e){return"value"===this.__kind__?this.__values__[e]:"key"===this.__kind__?this.__list__[e]:[this.__list__[e],this.__values__[e]]}),_unBind:o(function(){this.__values__=null,l.call(this)}),toString:o(function(){return"[object Map Iterator]"})}),Object.defineProperty(r.prototype,s,o("c","Map Iterator"))},{"./iterator-kinds":54,d:2,"es5-ext/object/set-prototype-of":35,"es6-iterator":47,"es6-symbol":57}],56:[function(e,t,n){"use strict";var r,i=e("es5-ext/array/#/clear"),o=e("es5-ext/array/#/e-index-of"),a=e("es5-ext/object/set-prototype-of"),s=e("es5-ext/object/valid-callable"),u=e("es5-ext/object/valid-value"),c=e("d"),l=e("event-emitter"),f=e("es6-symbol"),d=e("es6-iterator/valid-iterable"),p=e("es6-iterator/for-of"),h=e("./lib/iterator"),g=e("./is-native-implemented"),m=Function.prototype.call,y=Object.defineProperties,v=Object.getPrototypeOf;t.exports=r=function(){var e,t,n,i=arguments[0];if(!(this instanceof r))throw new TypeError("Constructor requires 'new'");return n=g&&a&&Map!==r?a(new Map,v(this)):this,null!=i&&d(i),y(n,{__mapKeysData__:c("c",e=[]),__mapValuesData__:c("c",t=[])}),i?(p(i,function(n){var r=u(n)[0];n=n[1],-1===o.call(e,r)&&(e.push(r),t.push(n))},n),n):n},g&&(a&&a(r,Map),r.prototype=Object.create(Map.prototype,{constructor:c(r)})),l(y(r.prototype,{clear:c(function(){this.__mapKeysData__.length&&(i.call(this.__mapKeysData__),i.call(this.__mapValuesData__),this.emit("_clear"))}),delete:c(function(e){var t=o.call(this.__mapKeysData__,e);return-1!==t&&(this.__mapKeysData__.splice(t,1),this.__mapValuesData__.splice(t,1),this.emit("_delete",t,e),!0)}),entries:c(function(){return new h(this,"key+value")}),forEach:c(function(e){var t,n,r=arguments[1];for(s(e),t=this.entries(),n=t._next();void 0!==n;)m.call(e,r,this.__mapValuesData__[n],this.__mapKeysData__[n],this),n=t._next()}),get:c(function(e){var t=o.call(this.__mapKeysData__,e);if(-1!==t)return this.__mapValuesData__[t]}),has:c(function(e){return-1!==o.call(this.__mapKeysData__,e)}),keys:c(function(){return new h(this,"key")}),set:c(function(e,t){var n,r=o.call(this.__mapKeysData__,e);return-1===r&&(r=this.__mapKeysData__.push(e)-1,n=!0),this.__mapValuesData__[r]=t,n&&this.emit("_add",r,e),this}),size:c.gs(function(){return this.__mapKeysData__.length}),values:c(function(){return new h(this,"value")}),toString:c(function(){return"[object Map]"})})),Object.defineProperty(r.prototype,f.iterator,c(function(){return this.entries()})),Object.defineProperty(r.prototype,f.toStringTag,c("c","Map"))},{"./is-native-implemented":53,"./lib/iterator":55,d:2,"es5-ext/array/#/clear":3,"es5-ext/array/#/e-index-of":4,"es5-ext/object/set-prototype-of":35,"es5-ext/object/valid-callable":38,"es5-ext/object/valid-value":39,"es6-iterator/for-of":45,"es6-iterator/valid-iterable":50,"es6-symbol":57,"event-emitter":65}],57:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?e("ext/global-this").Symbol:e("./polyfill")},{"./is-implemented":58,"./polyfill":63,"ext/global-this":67}],58:[function(e,t,n){"use strict";var r=e("ext/global-this"),i={object:!0,symbol:!0};t.exports=function(){var e,t=r.Symbol;if("function"!=typeof t)return!1;e=t("test symbol");try{String(e)}catch(e){return!1}return!!i[typeof t.iterator]&&(!!i[typeof t.toPrimitive]&&!!i[typeof t.toStringTag])}},{"ext/global-this":67}],59:[function(e,t,n){"use strict";t.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},{}],60:[function(e,t,n){"use strict";var r=e("d"),i=Object.create,o=Object.defineProperty,a=Object.prototype,s=i(null);t.exports=function(e){for(var t,n,i=0;s[e+(i||"")];)++i;return e+=i||"",s[e]=!0,t="@@"+e,o(a,t,r.gs(null,function(e){n||(n=!0,o(this,t,r(e)),n=!1)})),t}},{d:2}],61:[function(e,t,n){"use strict";var r=e("d"),i=e("ext/global-this").Symbol;t.exports=function(e){return Object.defineProperties(e,{hasInstance:r("",i&&i.hasInstance||e("hasInstance")),isConcatSpreadable:r("",i&&i.isConcatSpreadable||e("isConcatSpreadable")),iterator:r("",i&&i.iterator||e("iterator")),match:r("",i&&i.match||e("match")),replace:r("",i&&i.replace||e("replace")),search:r("",i&&i.search||e("search")),species:r("",i&&i.species||e("species")),split:r("",i&&i.split||e("split")),toPrimitive:r("",i&&i.toPrimitive||e("toPrimitive")),toStringTag:r("",i&&i.toStringTag||e("toStringTag")),unscopables:r("",i&&i.unscopables||e("unscopables"))})}},{d:2,"ext/global-this":67}],62:[function(e,t,n){"use strict";var r=e("d"),i=e("../../../validate-symbol"),o=Object.create(null);t.exports=function(e){return Object.defineProperties(e,{for:r(function(t){return o[t]?o[t]:o[t]=e(String(t))}),keyFor:r(function(e){var t;i(e);for(t in o)if(o[t]===e)return t})})}},{"../../../validate-symbol":64,d:2}],63:[function(e,t,n){var r,i,o,a=e("d"),s=e("./validate-symbol"),u=e("ext/global-this").Symbol,c=e("./lib/private/generate-name"),l=e("./lib/private/setup/standard-symbols"),f=e("./lib/private/setup/symbol-registry"),d=Object.create,p=Object.defineProperties,h=Object.defineProperty;if("function"==typeof u)try{String(u()),o=!0}catch(e){}else u=null;i=function(e){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return r(e)},t.exports=r=function e(t){var n;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return o?u(t):(n=d(i.prototype),t=void 0===t?"":String(t),p(n,{__description__:a("",t),__name__:a("",c(t))}))},l(r),f(r),p(i.prototype,{constructor:a(r),toString:a("",function(){return this.__name__})}),p(r.prototype,{toString:a(function(){return"Symbol ("+s(this).__description__+")"}),valueOf:a(function(){return s(this)})}),h(r.prototype,r.toPrimitive,a("",function(){var e=s(this);return"symbol"==typeof e?e:e.toString()})),h(r.prototype,r.toStringTag,a("c","Symbol")),h(i.prototype,r.toStringTag,a("c",r.prototype[r.toStringTag])),h(i.prototype,r.toPrimitive,a("c",r.prototype[r.toPrimitive]))},{"./lib/private/generate-name":60,"./lib/private/setup/standard-symbols":61,"./lib/private/setup/symbol-registry":62,"./validate-symbol":64,d:2,"ext/global-this":67}],64:[function(e,t,n){"use strict";var r=e("./is-symbol");t.exports=function(e){if(!r(e))throw new TypeError(e+" is not a symbol");return e}},{"./is-symbol":59}],65:[function(e,t,n){"use strict";var r,i,o,a,s,u,c,l=e("d"),f=e("es5-ext/object/valid-callable"),d=Function.prototype.apply,p=Function.prototype.call,h=Object.create,g=Object.defineProperty,m=Object.defineProperties,y=Object.prototype.hasOwnProperty,v={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n;return f(t),y.call(this,"__ee__")?n=this.__ee__:(n=v.value=h(null),g(this,"__ee__",v),v.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},i=function(e,t){var n,i;return f(t),i=this,r.call(this,e,n=function(){o.call(i,e,n),d.call(t,this,arguments)}),n.__eeOnceListener__=t,this},o=function(e,t){var n,r,i,o;if(f(t),!y.call(this,"__ee__"))return this;if(n=this.__ee__,!n[e])return this;if("object"==typeof(r=n[e]))for(o=0;i=r[o];++o)i!==t&&i.__eeOnceListener__!==t||(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},a=function(e){var t,n,r,i,o;if(y.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;r=i[t];++t)d.call(r,this,o)}else switch(arguments.length){case 1:p.call(i,this);break;case 2:p.call(i,this,arguments[1]);break;case 3:p.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];d.call(i,this,o)}},s={on:r,once:i,off:o,emit:a},u={on:l(r),once:l(i),off:l(o),emit:l(a)},c=m({},u),t.exports=n=function(e){return null==e?h(c):m(Object(e),u)},n.methods=s},{d:2,"es5-ext/object/valid-callable":38}],66:[function(e,t,n){var r=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};t.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},{}],67:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?globalThis:e("./implementation")},{"./implementation":66,"./is-implemented":68}],68:[function(e,t,n){"use strict";t.exports=function(){return"object"==typeof globalThis&&(!!globalThis&&globalThis.Array===Array)}},{}],69:[function(e,t,n){"use strict";var r=e("../prototype/is");t.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!r(e)}},{"../prototype/is":76}],70:[function(e,t,n){"use strict";var r=e("../value/is"),i=e("../object/is"),o=e("../string/coerce"),a=e("./to-short-string"),s=function(e,t){return e.replace("%v",a(t))};t.exports=function(e,t,n){if(!i(n))throw new TypeError(s(t,e));if(!r(e)){if("default"in n)return n.default;if(n.isOptional)return null}var a=o(n.errorMessage);throw r(a)||(a=t),new TypeError(s(a,e))}},{"../object/is":73,"../string/coerce":77,"../value/is":79,"./to-short-string":72}],71:[function(e,t,n){"use strict";t.exports=function(e){try{return e.toString()}catch(t){try{return String(e)}catch(e){return null}}}},{}],72:[function(e,t,n){"use strict";var r=e("./safe-to-string"),i=/[\n\r\u2028\u2029]/g;t.exports=function(e){var t=r(e);return null===t?"<Non-coercible to string value>":(t.length>100&&(t=t.slice(0,99)+""),t=t.replace(i,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":71}],73:[function(e,t,n){"use strict";var r=e("../value/is"),i={object:!0,function:!0,undefined:!0};t.exports=function(e){return!!r(e)&&hasOwnProperty.call(i,typeof e)}},{"../value/is":79}],74:[function(e,t,n){"use strict";var r=e("../lib/resolve-exception"),i=e("./is");t.exports=function(e){return i(e)?e:r(e,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":70,"./is":75}],75:[function(e,t,n){"use strict";var r=e("../function/is"),i=/^\s*class[\s{/}]/,o=Function.prototype.toString;t.exports=function(e){
return!!r(e)&&!i.test(o.call(e))}},{"../function/is":69}],76:[function(e,t,n){"use strict";var r=e("../object/is");t.exports=function(e){if(!r(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},{"../object/is":73}],77:[function(e,t,n){"use strict";var r=e("../value/is"),i=e("../object/is"),o=Object.prototype.toString;t.exports=function(e){if(!r(e))return null;if(i(e)){var t=e.toString;if("function"!=typeof t)return null;if(t===o)return null}try{return""+e}catch(e){return null}}},{"../object/is":73,"../value/is":79}],78:[function(e,t,n){"use strict";var r=e("../lib/resolve-exception"),i=e("./is");t.exports=function(e){return i(e)?e:r(e,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":70,"./is":79}],79:[function(e,t,n){"use strict";t.exports=function(e){return void 0!==e&&null!==e}},{}]},{},[51]),define("es6-map",function(){});
// All licensing information regarding this source code can be found in the LICENSES.txt file.
//# sourceMappingURL=OutSystems.js.map?ts=1659956912493